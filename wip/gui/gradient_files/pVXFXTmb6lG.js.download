if (self.CavalryLogger) { CavalryLogger.start_js(["\/qxAE"]); }

__d("ChromecastScannerEnum",[],(function a(b,c,d,e,f,g){f.exports={INIT:"init",CAST:"cast",ERROR:"error",NEW_SESSION:"new_session",RECEIVER_STATUS_CHANGED:"receiver_status_changed",SESSION_REQUESTED:"session_requested",SESSION_CANCELLED:"session_cancelled",SESSION_STARTED:"session_started",SESSION_DISCONNECTING:"session_disconnecting",SESSION_DISCONNECTED:"session_disconnected"};}),null);
__d("ChromecastSessionEnum",[],(function a(b,c,d,e,f,g){f.exports={ERROR:"error",DISCONNECTING:"disconnecting",DISCONNECTED:"disconnected",VIDEO_LOADING:"video_loading",VIDEO_LOADED:"video_loaded",VIDEO_PLAYING:"video_playing",VIDEO_PAUSED:"video_paused",VIDEO_SEEK:"video_seek"};}),null);
__d("ConnectedTVLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports={ACTION:"action",APP_BACKGROUNDED:"app_backgrounded",APP_FOREGROUNDED:"app_foregrounded",WATCH_SUMMARY:"watch_summary",PAGE_IMPRESSION:"page_impression",CAST_REQUESTED:"cast_requested",CAST_STARTED:"cast_started",CAST_FAILED:"cast_failed",CAST_ACTIVITY:"cast_activity",CAST_AVAILABILITY:"cast_availability",GRAPHQL_MUTATION:"graphql_mutation",GRAPHQL_QUERY:"graphql_query",KEY_INPUT_RESPONSIVENESS:"key_input_responsiveness",ACCIDENTAL_SWIPE:"accidental_swipe",DISPLAYED_FIRST_SCREEN:"displayed_first_screen",LAUNCHED_APP:"launched_app",LOGIN_CODE_FETCHED:"login_code_fetched",LOGIN_CODE_SHOWN:"login_code_shown",LOGIN_SUCCESS:"login_success",LOGIN_ERROR:"login_error",LOGIN_TIMEOUT_REFETCH_CODE:"login_timeout_refetch_code",LOGGED_OUT:"logged_out",SEARCH_RESULTS_DISPLAYED:"search_results_displayed",SENDER_SESSION_REQUESTED:"sender_session_requested",SENDER_SESSION_STARTED:"sender_session_started",SENDER_SESSION_FAILED:"sender_session_failed",RECEIVER_PAGE_LOAD:"receiver_page_load",RECEIVER_LOADED:"receiver_loaded",RECEIVER_EXPERIENCE_MANAGER_LOADED:"receiver_experience_manager_loaded",RECEIVER_LAUNCHING_EXPERIENCE:"receiver_launching_experience",RECEIVER_LAUNCHED_EXPERIENCE:"receiver_launched_experience",RECEIVER_EXPERIENCE_JOINED:"receiver_experience_joined",RECEIVER_EXPERIENCE_ENDED:"receiver_experience_ended",RECEIVER_GOT_PAYLOAD:"receiver_got_payload",RECEIVER_GOT_METADATA:"receiver_got_metadata",RECEIVER_PLAYBACK_STARTED:"receiver_playback_started",RECEIVER_PLAYBACK_ENDED:"receiver_playback_ended",RECEIVER_DEVICE_CONNECTED:"receiver_device_connected",RECEIVER_DEVICE_DISCONNECTED:"receiver_device_disconnected",RECEIVER_CONNECTION_ESTABLISHED:"receiver_connection_established",RECEIVER_RECEIVED_MESSAGE:"receiver_received_message",RECEIVER_FETCHED_NEXT:"receiver_fetched_next",RECEIVER_BUG_REPORT_SHOWN:"receiver_bug_report_shown",RECEIVER_REMOTE_CLICK:"receiver_remote_click",RECEIVER_ERROR:"receiver_error",RECEIVER_WARNING:"receiver_warning",RECEIVER_PLAYER_ERROR:"receiver_player_error",SERVER_ERROR:"server_error",VIDEO_CHANNEL_NAVIGATION_ENDED:"video_channel_navigation_ended",VIDEO_CHANNEL_PLAYBACK_ENDED:"video_channel_playback_ended"};}),null);
__d("VideoPlayerLoggerEventField",[],(function a(b,c,d,e,f,g){f.exports={ACCESS_TOKEN:"access_token",AD_CLIENT_TOKEN:"ad_client_token",AD_ID:"ad_id",API_CONFIG:"api_config",APP_ID:"app_id",APP_VERSION:"app_version",APPENDED_BYTE_SIZE:"appended_byte_size",AUTH_FLAG:"auth_flag",AUTOPLAY_ELIGIBLE:"autoplay_eligible",AUTOPLAY_FAILURE_REASONS:"autoplay_failure_reasons",AUTOPLAY_SETTING:"autoplay_setting",AVAILABLE_QUALITIES:"available_qualities",BATTERY_LEVEL:"battery_level",BROADCASTER_ORIGIN:"broadcaster_origin",BUILD_VERSION:"build_version",CAPTION_STATE:"caption_state",CAST_CLIENT_APP_ID:"cast_client_app_id",CAST_CLIENT_APP_VERSION:"cast_client_app_version",CAST_SESSION_ID:"cast_session_id",CHANNEL_ELIGIBILITY:"channel_eligibility",CHROMECAST_RECEIVER_AVAILABLE:"chromecast_receiver_available",CONNECTIVITY_TYPE:"connectivity_type",CONNECTIVITY_SUBTYPE:"connectivity_subtype",DATA_CONNECTION_QUALITY:"data_connection_quality",CURRENT_VOLUME:"current_volume",DEBUG_REASON:"debug_reason",STREAM_TYPE:"stream_type",STREAMING_FORMAT:"streaming_format",DEVICE_ID:"device_id",DURATION:"duration",PLAYBACK_DURATION:"playback_duration",ERROR:"error",ERROR_DESCRIPTION:"error_description",EVENT_NAME:"name",FB_BANDWIDTH:"fb_bandwidth",FEED_POSITION:"feed_position",GKS:"gks",HD:"hd",HEADSET_STATE:"headset_state",HLS_SEGMENT_URI:"segment_uri",HLS_STREAM_DATA:"stream_data",HLS_CURRENT_SEGMENT_URI:"current_segment_uri",HLS_LOADING_SEGMENT_URI:"loading_segment_uri",HOST_VIDEO_ID:"host_video_id",INLINE:"inline",INSTREAM_VIDEO_AD_BREAK_INDEX:"instream_video_ad_break_index",INSTREAM_VIDEO_AD_BREAK_VIDEO_ID:"instream_video_ad_break_video_id",INTERRUPT_COUNT:"interrupt_count",INTERRUPT_TIME:"interrupt_time",IS_ABR_ENABLED:"is_abr_enabled",IS_HDS:"is_hds",IS_LIVE_STREAMING:"is_live_streaming",FT:"ft",REPRESENTATION_ID:"representation_id",NEXT_REPRESENTATION_ID:"next_representation_id",OUTER_STORY_IDENTIFIER:"outer_story_identifier",PLAYBACK_IS_LIVE_STREAMING:"playback_is_live_streaming",PLAYBACK_BROADCAST_STATUS:"playback_broadcast_status",PLAYER_FORMAT:"player_format",PLAYER_ORIGIN:"player_origin",PLAYER_SUBORIGIN:"player_suborigin",PLAYER_STATE:"player_state",PLAYER_VERSION:"player_version",POSITION_IN_CHANNEL:"position_in_channel",PROJECTION:"projection",SPHERICAL_FALLBACK_TYPE:"spherical_fallback_type",AUDIO_CHANNEL_LAYOUT:"audio_ch_conf",QES:"qes",REASON:"reason",RESOURCE_URL:"resource_url",SAVED_OFFLINE:"saved_offline",SEQ_NUM:"seq_num",SOURCE:"source",STALL_TIME:"stall_time",STALL_COUNT:"stall_count",RECENT_STALLS_COUNT:"recent_stalls_count",RECENT_STALLS_TOTAL_COUNT:"recent_stalls_total_count",FIRST_STALL_START_POSITION:"first_stall_start_position",FIRST_STALL_TIME:"first_stall_time",ABANDON_IN_STALL:"abandon_in_stall",IS_STALLING:"is_stalling",IS_AUTO_ADVANCED:"is_auto_advanced",STATE:"state",TIME:"time",TIME_DELTA:"time_delta",TIME_MS:"time_ms",TIME_SPENT_ID:"time_spent_id",TOTAL_STALL_TIME:"total_stall_time",TRACKING:"tracking",TV_SESSION_ID:"tv_session_id",USER_ID:"user_id",USER_ASN:"user_asn",VIDEO_CHAINING_DEPTH_LEVEL:"video_chaining_depth_level",VIDEO_CHAINING_SESSION_ID:"video_chaining_session_id",VIDEO_CHANNEL_ID:"video_channel_id",REACTION_VIDEO_CHANNEL_ID:"video_channel_id",VIDEO_CHANNEL_TYPE:"video_channel_type",REACTION_VIDEO_CHANNEL_TYPE:"reaction_video_channel_type",VIDEO_HOME_SESSION_ID:"video_home_session_id",WATCH_AND_GO_SESSION_ID:"watch_and_go_session_id",EXTERNAL_LOG_ID:"external_log_id",EXTERNAL_LOG_TYPE:"external_log_type",VIDEO_ID:"video_id",VIDEO_PLAY_REASON:"video_play_reason",VIDEO_QUALITY:"video_quality",VIDEO_TIME_POSITION:"video_time_position",VIDEO_TIME_RATIO:"video_time_ratio",VIDEO_LAST_START_TIME_POSITION:"video_last_start_time_position",TIME_UNTIL_INTERRUPT:"time_until_interrupt",UNIT_POSITION:"unit_position",POSITION_IN_UNIT:"position_in_unit",ORIGINAL_VIDEO_ID:"original_video_id",SESSION_START_TIME:"session_start_time",IS_FREE:"is_free",IS_SHOW_VIDEO:"is_show_video",SHOW_VIDEO_TYPE:"show_video_type"};}),null);
__d("VideoPlayerStreamSwitchReasons",[],(function a(b,c,d,e,f,g){f.exports={BANDWIDTH:"bandwidth",FORCED:"forced",LOW_BUFFER_AVAILABILITY:"low_buffer_availability",PREFER_QUALITY_CLASS:"prefer_quality_class",USER:"user"};}),null);
__d('ChromecastAPI',['Promise','regeneratorRuntime'],(function a(b,c,d,e,f,g){var h=['pkedcjkdefgpdelpbcmbmeomcjbeemfm','boadgeojelhgndaghljhdicfkmllpafd','dliochdbjfkdbacpmhlcpmleaejidimm','hfaagokkkhdbgiakmmlclaapfelnkoah','fmfcbgogabcbclcofgocippekhfcmgfj','enhhojjnijigcajfphajepfemndkmdlo'],i=null,j=null,k={};f.exports=k;k.getSenderAPI=function(){if(i)return i;if(!b.chrome){i=c('Promise').reject(new Error('Browser not supported'));return i;}if(b.chrome.cast&&b.chrome.cast.isAvailable){i=c('Promise').resolve(b.chrome.cast);return i;}i=c('Promise').resolve().then(function(){return l();}).then(function(o){return new (c('Promise'))(function(p,q){b.chrome.cast=b.chrome.cast||{};b.chrome.cast.extensionId=o;b.__onGCastApiAvailable=function(s,t){if(t){q(t);}else p(b.chrome.cast);};var r=document.createElement('script');r.onerror=q;r.src=n(o);(document.head||document.documentElement).appendChild(r);});});return i;};function l(){var o,p,q;return c('regeneratorRuntime').async(function r(s){while(1)switch(s.prev=s.next){case 0:o=0;case 1:if(!(o<h.length)){s.next=11;break;}p=h[o];s.next=5;return c('regeneratorRuntime').awrap(m(p));case 5:q=s.sent;if(!q){s.next=8;break;}return s.abrupt('return',p);case 8:o++;s.next=1;break;case 11:return s.abrupt('return',null);case 12:case 'end':return s.stop();}},null,this);}function m(o){return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:return q.abrupt('return',new (c('Promise'))(function(r,s){var t=n(o),u=new XMLHttpRequest();u.onreadystatechange=function(){if(u.readyState===4)r(u.status===200);};u.onerror=function(){r(false);};u.open('GET',t,true);u.send();}));case 1:case 'end':return q.stop();}},null,this);}function n(o){return 'chrome-extension://'+o+'/cast_sender.js';}}),null);
__d('ChromecastSession',['invariant','regeneratorRuntime','Promise','ChromecastSessionEnum','EventEmitter','ChromecastAPI'],(function a(b,c,d,e,f,g,h){var i,j,k=c('ChromecastAPI').getSenderAPI;i=babelHelpers.inherits(l,c('EventEmitter'));j=i&&i.prototype;function l(m,n,o){'use strict';j.constructor.call(this);this.$ChromecastSession1=m;this.$ChromecastSession2=this.$ChromecastSession5.bind(this);this.$ChromecastSession3=n;this.$ChromecastSession4=o;o.addMessageListener(this.$ChromecastSession3,this.$ChromecastSession2);}l.prototype.destroy=function(){'use strict';var m=this.$ChromecastSession4;if(m)m.removeMessageListener(this.$ChromecastSession3,this.$ChromecastSession2);this.removeAllListeners();};l.prototype.isCasting=function(){'use strict';return !!this.$ChromecastSession4;};l.prototype.isPlaying=function m(){var n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:'use strict';p.next=3;return c('regeneratorRuntime').awrap(k());case 3:n=p.sent;return p.abrupt('return',!!(this.$ChromecastSession4&&this.$ChromecastSession4.media&&this.$ChromecastSession4.media[0]&&this.$ChromecastSession4.media[0].playerState===n.media.PlayerState.PLAYING));case 5:case 'end':return p.stop();}},null,this);};l.prototype.hasMedia=function(){'use strict';return !!(this.$ChromecastSession4&&this.$ChromecastSession4.media&&this.$ChromecastSession4.media[0]);};l.prototype.disconnect=function m(){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:'use strict';this.emit(c('ChromecastSessionEnum').DISCONNECTING);o.prev=2;o.next=5;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(p,q){if(this.$ChromecastSession4){this.$ChromecastSession4.stop(p,q);}else p();}.bind(this)));case 5:o.next=11;break;case 7:o.prev=7;o.t0=o['catch'](2);this.emit(c('ChromecastSessionEnum').ERROR,o.t0);throw o.t0;case 11:o.prev=11;this.$ChromecastSession4=null;this.emit(c('ChromecastSessionEnum').DISCONNECTED);this.removeAllListeners();return o.finish(11);case 16:case 'end':return o.stop();}},null,this,[[2,7,11,16]]);};l.prototype.loadVideo=function m(n,o,p){var q,r=this;return c('regeneratorRuntime').async(function s(t){while(1)switch(t.prev=t.next){case 0:'use strict';t.prev=1;t.next=4;return c('regeneratorRuntime').awrap(function u(){var v,w;return c('regeneratorRuntime').async(function x(y){while(1)switch(y.prev=y.next){case 0:y.next=2;return c('regeneratorRuntime').awrap(k());case 2:v=y.sent;w=r.$ChromecastSession4;if(!o)o='video/mp4';y.next=7;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(z,aa){w||h(0);this.emit(c('ChromecastSessionEnum').VIDEO_LOADING);var ba=new v.media.MediaInfo(n,o);ba.streamType=v.media.StreamType.BUFFERED;var ca=new v.media.LoadRequest(ba);ca.autoplay=true;if(p)ca.currentTime=p;w.loadMedia(ca,function(da){var ea=function(){da.removeUpdateListener(ea);this.emit(c('ChromecastSessionEnum').VIDEO_LOADED);z();}.bind(this);da.addUpdateListener(ea);}.bind(this),aa);}.bind(r)));case 7:r.emit(c('ChromecastSessionEnum').VIDEO_PLAYING);case 8:case 'end':return y.stop();}},null,r);}());case 4:t.next=10;break;case 6:t.prev=6;t.t0=t['catch'](1);this.emit(c('ChromecastSessionEnum').ERROR,t.t0);throw t.t0;case 10:case 'end':return t.stop();}},null,this,[[1,6]]);};l.prototype.playVideo=function m(){var n,o=this;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:'use strict';q.prev=1;q.next=4;return c('regeneratorRuntime').awrap(function r(){var s,t;return c('regeneratorRuntime').async(function u(v){while(1)switch(v.prev=v.next){case 0:v.next=2;return c('regeneratorRuntime').awrap(k());case 2:s=v.sent;t=o.$ChromecastSession4;v.next=6;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(w,x){t||h(0);t.media&&t.media[0]||h(0);var y=new s.media.PlayRequest();t.media[0].play(y,w,x);}));case 6:o.emit(c('ChromecastSessionEnum').VIDEO_PLAYING);case 7:case 'end':return v.stop();}},null,o);}());case 4:q.next=10;break;case 6:q.prev=6;q.t0=q['catch'](1);this.emit(c('ChromecastSessionEnum').ERROR,q.t0);throw q.t0;case 10:case 'end':return q.stop();}},null,this,[[1,6]]);};l.prototype.pauseVideo=function m(){var n,o=this;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:'use strict';q.prev=1;q.next=4;return c('regeneratorRuntime').awrap(function r(){var s,t;return c('regeneratorRuntime').async(function u(v){while(1)switch(v.prev=v.next){case 0:v.next=2;return c('regeneratorRuntime').awrap(k());case 2:s=v.sent;t=o.$ChromecastSession4;v.next=6;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(w,x){t||h(0);t.media&&t.media[0]||h(0);var y=new s.media.PauseRequest();t.media[0].pause(y,w,x);}));case 6:o.emit(c('ChromecastSessionEnum').VIDEO_PAUSED);case 7:case 'end':return v.stop();}},null,o);}());case 4:q.next=10;break;case 6:q.prev=6;q.t0=q['catch'](1);this.emit(c('ChromecastSessionEnum').ERROR,q.t0);throw q.t0;case 10:case 'end':return q.stop();}},null,this,[[1,6]]);};l.prototype.seekVideo=function m(n){var o,p=this;return c('regeneratorRuntime').async(function q(r){while(1)switch(r.prev=r.next){case 0:'use strict';r.prev=1;r.next=4;return c('regeneratorRuntime').awrap(function s(){var t,u;return c('regeneratorRuntime').async(function v(w){while(1)switch(w.prev=w.next){case 0:w.next=2;return c('regeneratorRuntime').awrap(k());case 2:t=w.sent;u=p.$ChromecastSession4;w.next=6;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(x,y){u||h(0);u.media&&u.media[0]||h(0);var z=new t.media.SeekRequest();z.currentTime=n;u.media[0].seek(z,x,y);}));case 6:p.emit(c('ChromecastSessionEnum').VIDEO_PLAYING);case 7:case 'end':return w.stop();}},null,p);}());case 4:r.next=10;break;case 6:r.prev=6;r.t0=r['catch'](1);this.emit(c('ChromecastSessionEnum').ERROR,r.t0);throw r.t0;case 10:case 'end':return r.stop();}},null,this,[[1,6]]);};l.prototype.getVolume=function(){'use strict';var m=this.$ChromecastSession6();return m?m.level:null;};l.prototype.setVolume=function m(n){var o,p=this;return c('regeneratorRuntime').async(function q(r){while(1)switch(r.prev=r.next){case 0:'use strict';r.prev=1;r.next=4;return c('regeneratorRuntime').awrap(function s(){var t;return c('regeneratorRuntime').async(function u(v){while(1)switch(v.prev=v.next){case 0:t=p.$ChromecastSession4;v.next=3;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(w,x){t||h(0);t.setReceiverVolumeLevel(n,w,x);}));case 3:case 'end':return v.stop();}},null,p);}());case 4:r.next=10;break;case 6:r.prev=6;r.t0=r['catch'](1);this.emit(c('ChromecastSessionEnum').ERROR,r.t0);throw r.t0;case 10:case 'end':return r.stop();}},null,this,[[1,6]]);};l.prototype.isMuted=function(){'use strict';var m=this.$ChromecastSession6();return m?m.muted:null;};l.prototype.mute=function m(){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:'use strict';o.next=3;return c('regeneratorRuntime').awrap(this.$ChromecastSession7(true));case 3:case 'end':return o.stop();}},null,this);};l.prototype.unmute=function m(){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:'use strict';o.next=3;return c('regeneratorRuntime').awrap(this.$ChromecastSession7(false));case 3:case 'end':return o.stop();}},null,this);};l.prototype.sendMessage=function m(n){return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:'use strict';p.prev=1;p.next=4;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(q,r){var s=this.$ChromecastSession4;s||h(0);s.sendMessage(this.$ChromecastSession3,n,q,r);}.bind(this)));case 4:p.next=10;break;case 6:p.prev=6;p.t0=p['catch'](1);this.emit(c('ChromecastSessionEnum').ERROR,p.t0);throw p.t0;case 10:case 'end':return p.stop();}},null,this,[[1,6]]);};l.prototype.$ChromecastSession6=function(){'use strict';return this.$ChromecastSession4&&this.$ChromecastSession4.receiver&&this.$ChromecastSession4.receiver.volume;};l.prototype.$ChromecastSession7=function m(n){var o,p=this;return c('regeneratorRuntime').async(function q(r){while(1)switch(r.prev=r.next){case 0:'use strict';r.prev=1;r.next=4;return c('regeneratorRuntime').awrap(function s(){var t;return c('regeneratorRuntime').async(function u(v){while(1)switch(v.prev=v.next){case 0:t=p.$ChromecastSession4;v.next=3;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(w,x){t||h(0);t.setReceiverMuted(n,w,x);}));case 3:case 'end':return v.stop();}},null,p);}());case 4:r.next=10;break;case 6:r.prev=6;r.t0=r['catch'](1);this.emit(c('ChromecastSessionEnum').ERROR,r.t0);throw r.t0;case 10:case 'end':return r.stop();}},null,this,[[1,6]]);};l.prototype.getVideoTime=function(){'use strict';var m=null,n=this.$ChromecastSession4&&this.$ChromecastSession4.media[0];if(n)m=n.getEstimatedTime();return m;};l.prototype.$ChromecastSession5=function(m,n){'use strict';if(m===this.$ChromecastSession3){this.emit('message',n);}else this.emit('invalid_message',{namespace:m,message:n});};f.exports=l;}),null);
__d('ConnectedTVTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('ctv_proxy:ConnectedTVLoggerConfig',this.$ConnectedTVTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('ctv_proxy:ConnectedTVLoggerConfig',this.$ConnectedTVTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$ConnectedTVTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$ConnectedTVTypedLogger1=babelHelpers['extends']({},this.$ConnectedTVTypedLogger1,j);return this;};h.prototype.setAccessToken=function(j){this.$ConnectedTVTypedLogger1.access_token=j;return this;};h.prototype.setActionMethod=function(j){this.$ConnectedTVTypedLogger1.action_method=j;return this;};h.prototype.setActionTarget=function(j){this.$ConnectedTVTypedLogger1.action_target=j;return this;};h.prototype.setCastActivityName=function(j){this.$ConnectedTVTypedLogger1.cast_activity_name=j;return this;};h.prototype.setCastClientAppID=function(j){this.$ConnectedTVTypedLogger1.cast_client_app_id=j;return this;};h.prototype.setCastClientAppVersion=function(j){this.$ConnectedTVTypedLogger1.cast_client_app_version=j;return this;};h.prototype.setCastClientSeqNum=function(j){this.$ConnectedTVTypedLogger1.cast_client_seq_num=j;return this;};h.prototype.setCastClientTimeMs=function(j){this.$ConnectedTVTypedLogger1.cast_client_time_ms=j;return this;};h.prototype.setCastDeviceCount=function(j){this.$ConnectedTVTypedLogger1.cast_device_count=j;return this;};h.prototype.setCastSessionID=function(j){this.$ConnectedTVTypedLogger1.cast_session_id=j;return this;};h.prototype.setCastingDeviceType=function(j){this.$ConnectedTVTypedLogger1.casting_device_type=j;return this;};h.prototype.setChainingDepthLevel=function(j){this.$ConnectedTVTypedLogger1.chaining_depth_level=j;return this;};h.prototype.setDeviceUniqueID=function(j){this.$ConnectedTVTypedLogger1.device_unique_id=j;return this;};h.prototype.setDurationMs=function(j){this.$ConnectedTVTypedLogger1.duration_ms=j;return this;};h.prototype.setEndRoute=function(j){this.$ConnectedTVTypedLogger1.end_route=j;return this;};h.prototype.setErrorDetails=function(j){this.$ConnectedTVTypedLogger1.error_details=j;return this;};h.prototype.setErrorMessage=function(j){this.$ConnectedTVTypedLogger1.error_message=j;return this;};h.prototype.setEvent=function(j){this.$ConnectedTVTypedLogger1.event=j;return this;};h.prototype.setEventDescription=function(j){this.$ConnectedTVTypedLogger1.event_description=j;return this;};h.prototype.setExperience=function(j){this.$ConnectedTVTypedLogger1.experience=j;return this;};h.prototype.setExperienceView=function(j){this.$ConnectedTVTypedLogger1.experience_view=j;return this;};h.prototype.setExternalLogID=function(j){this.$ConnectedTVTypedLogger1.external_log_id=j;return this;};h.prototype.setGraphqlQueryName=function(j){this.$ConnectedTVTypedLogger1.graphql_query_name=j;return this;};h.prototype.setInitialCast=function(j){this.$ConnectedTVTypedLogger1.initial_cast=j;return this;};h.prototype.setInitialLogin=function(j){this.$ConnectedTVTypedLogger1.initial_login=j;return this;};h.prototype.setIsAppVisible=function(j){this.$ConnectedTVTypedLogger1.is_app_visible=j;return this;};h.prototype.setKeyInput=function(j){this.$ConnectedTVTypedLogger1.key_input=j;return this;};h.prototype.setManufacturer=function(j){this.$ConnectedTVTypedLogger1.manufacturer=j;return this;};h.prototype.setModelName=function(j){this.$ConnectedTVTypedLogger1.model_name=j;return this;};h.prototype.setMostRecentSenderUserAgent=function(j){this.$ConnectedTVTypedLogger1.most_recent_sender_user_agent=j;return this;};h.prototype.setPerfTimeMs=function(j){this.$ConnectedTVTypedLogger1.perf_time_ms=j;return this;};h.prototype.setPlaybackIsLiveStreaming=function(j){this.$ConnectedTVTypedLogger1.playback_is_live_streaming=j;return this;};h.prototype.setPlayerFormat=function(j){this.$ConnectedTVTypedLogger1.player_format=j;return this;};h.prototype.setPlayerOrigin=function(j){this.$ConnectedTVTypedLogger1.player_origin=j;return this;};h.prototype.setPlayerSuborigin=function(j){this.$ConnectedTVTypedLogger1.player_suborigin=j;return this;};h.prototype.setPlayerVersion=function(j){this.$ConnectedTVTypedLogger1.player_version=j;return this;};h.prototype.setPositionInChannel=function(j){this.$ConnectedTVTypedLogger1.position_in_channel=j;return this;};h.prototype.setPreviousState=function(j){this.$ConnectedTVTypedLogger1.previous_state=j;return this;};h.prototype.setPreviousTvSessionID=function(j){this.$ConnectedTVTypedLogger1.previous_tv_session_id=j;return this;};h.prototype.setProfileID=function(j){this.$ConnectedTVTypedLogger1.profile_id=j;return this;};h.prototype.setReferer=function(j){this.$ConnectedTVTypedLogger1.referer=j;return this;};h.prototype.setRetryCount=function(j){this.$ConnectedTVTypedLogger1.retry_count=j;return this;};h.prototype.setSessionFailureCode=function(j){this.$ConnectedTVTypedLogger1.session_failure_code=j;return this;};h.prototype.setSessionFailureDescription=function(j){this.$ConnectedTVTypedLogger1.session_failure_description=j;return this;};h.prototype.setStallCount=function(j){this.$ConnectedTVTypedLogger1.stall_count=j;return this;};h.prototype.setStallTimeMs=function(j){this.$ConnectedTVTypedLogger1.stall_time_ms=j;return this;};h.prototype.setStartRoute=function(j){this.$ConnectedTVTypedLogger1.start_route=j;return this;};h.prototype.setStoryID=function(j){this.$ConnectedTVTypedLogger1.story_id=j;return this;};h.prototype.setTvAppVersion=function(j){this.$ConnectedTVTypedLogger1.tv_app_version=j;return this;};h.prototype.setTvSeqNum=function(j){this.$ConnectedTVTypedLogger1.tv_seq_num=j;return this;};h.prototype.setTvSessionID=function(j){this.$ConnectedTVTypedLogger1.tv_session_id=j;return this;};h.prototype.setTvTimeMs=function(j){this.$ConnectedTVTypedLogger1.tv_time_ms=j;return this;};h.prototype.setVC=function(j){this.$ConnectedTVTypedLogger1.vc=j;return this;};h.prototype.setVideoChannelID=function(j){this.$ConnectedTVTypedLogger1.video_channel_id=j;return this;};h.prototype.setVideoIDOverride=function(j){this.$ConnectedTVTypedLogger1.video_id_override=j;return this;};h.prototype.setViewCount=function(j){this.$ConnectedTVTypedLogger1.view_count=j;return this;};h.prototype.setVoiceOverEnabled=function(j){this.$ConnectedTVTypedLogger1.voice_over_enabled=j;return this;};h.prototype.setWatchTimeChannelMs=function(j){this.$ConnectedTVTypedLogger1.watch_time_channel_ms=j;return this;};h.prototype.setWatchTimeFullScreenMs=function(j){this.$ConnectedTVTypedLogger1.watch_time_full_screen_ms=j;return this;};h.prototype.setWatchTimeInlineMs=function(j){this.$ConnectedTVTypedLogger1.watch_time_inline_ms=j;return this;};h.prototype.setWatchTimeMs=function(j){this.$ConnectedTVTypedLogger1.watch_time_ms=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$ConnectedTVTypedLogger1=babelHelpers['extends']({},this.$ConnectedTVTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={access_token:true,action_method:true,action_target:true,cast_activity_name:true,cast_client_app_id:true,cast_client_app_version:true,cast_client_seq_num:true,cast_client_time_ms:true,cast_device_count:true,cast_session_id:true,casting_device_type:true,chaining_depth_level:true,device_unique_id:true,duration_ms:true,end_route:true,error_details:true,error_message:true,event:true,event_description:true,experience:true,experience_view:true,external_log_id:true,graphql_query_name:true,initial_cast:true,initial_login:true,is_app_visible:true,key_input:true,manufacturer:true,model_name:true,most_recent_sender_user_agent:true,perf_time_ms:true,playback_is_live_streaming:true,player_format:true,player_origin:true,player_suborigin:true,player_version:true,position_in_channel:true,previous_state:true,previous_tv_session_id:true,profile_id:true,referer:true,retry_count:true,session_failure_code:true,session_failure_description:true,stall_count:true,stall_time_ms:true,start_route:true,story_id:true,tv_app_version:true,tv_seq_num:true,tv_session_id:true,tv_time_ms:true,vc:true,video_channel_id:true,video_id_override:true,view_count:true,voice_over_enabled:true,watch_time_channel_ms:true,watch_time_full_screen_ms:true,watch_time_inline_ms:true,watch_time_ms:true};f.exports=h;}),null);
__d('ChromecastScanner',['regeneratorRuntime','Promise','ChromecastScannerEnum','ChromecastSession','ChromecastSessionEnum','ConnectedTVLoggerEvents','ConnectedTVTypedLogger','EventEmitter','Set','emptyFunction','ChromecastAPI','performanceAbsoluteNow'],(function a(b,c,d,e,f,g){var h,i,j=c('ChromecastAPI').getSenderAPI,k=3*60*1000;h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;l.getInstance=function m(n,o,p){var q;return c('regeneratorRuntime').async(function r(s){while(1)switch(s.prev=s.next){case 0:'use strict';q=new l(n,o,p);s.next=4;return c('regeneratorRuntime').awrap(q.ready());case 4:return s.abrupt('return',q);case 5:case 'end':return s.stop();}},null,this);};function l(m,n,o){'use strict';i.constructor.call(this);this.$ChromecastScanner1=m||null;this.$ChromecastScanner2=n||null;this.$ChromecastScanner3=o||false;this.$ChromecastScanner6=false;this.$ChromecastScanner4=false;this.$ChromecastScanner5=false;this.$ChromecastScanner7=new (c('Set'))();this.$ChromecastScanner8=this.$ChromecastScanner9();}l.prototype.$ChromecastScanner9=function m(){var n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:'use strict';p.next=3;return c('regeneratorRuntime').awrap(j());case 3:n=p.sent;this.$ChromecastScanner5=true;if(this.$ChromecastScanner5&&this.$ChromecastScanner1===null)this.$ChromecastScanner1=n.media.DEFAULT_MEDIA_RECEIVER_APP_ID;p.prev=6;p.next=9;return c('regeneratorRuntime').awrap(this.$ChromecastScanner10());case 9:this.emit(c('ChromecastScannerEnum').INIT);if(!this.$ChromecastScanner3){p.next=13;break;}p.next=13;return c('regeneratorRuntime').awrap(this.scanForReceivers());case 13:p.next=19;break;case 15:p.prev=15;p.t0=p['catch'](6);this.emit(c('ChromecastScannerEnum').ERROR,p.t0);throw p.t0;case 19:case 'end':return p.stop();}},null,this,[[6,15]]);};l.prototype.ready=function m(){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:'use strict';o.next=3;return c('regeneratorRuntime').awrap(this.$ChromecastScanner8);case 3:case 'end':return o.stop();}},null,this);};l.prototype.destroy=function(){'use strict';this.removeAllListeners();this.$ChromecastScanner7.forEach(function(m){return m.destroy();});};l.prototype.hasSupport=function(){'use strict';return this.$ChromecastScanner5;};l.prototype.hasFoundReceiver=function(){'use strict';return this.$ChromecastScanner6;};l.prototype.scanForReceivers=function m(){var n,o;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:'use strict';if(!this.$ChromecastScanner4){q.next=3;break;}return q.abrupt('return');case 3:this.$ChromecastScanner4=true;q.next=6;return c('regeneratorRuntime').awrap(j());case 6:n=q.sent;o=new (c('Promise'))(function(r,s){var t=function(w){var x=this.$ChromecastScanner11(w);this.emit(c('ChromecastScannerEnum').SESSION_STARTED,x);}.bind(this),u=function(w){this.$ChromecastScanner6=w===n.ReceiverAvailability.AVAILABLE;this.emit(c('ChromecastScannerEnum').RECEIVER_STATUS_CHANGED,{foundReceiver:this.$ChromecastScanner6});r();}.bind(this),v=new n.ApiConfig(new n.SessionRequest(this.$ChromecastScanner1),t,u,n.AutoJoinPolicy.ORIGIN_SCOPED,n.DefaultActionPolicy.CAST_THIS_TAB);n.initialize(v,c('emptyFunction'),s);}.bind(this));o=o['catch'](function(r){this.$ChromecastScanner4=false;this.emit(c('ChromecastScannerEnum').ERROR,r);throw r;}.bind(this));q.next=11;return c('regeneratorRuntime').awrap(o);case 11:case 'end':return q.stop();}},null,this);};l.prototype.getSession=function m(){var n,o,p;return c('regeneratorRuntime').async(function q(r){while(1)switch(r.prev=r.next){case 0:'use strict';if(this.$ChromecastScanner6){r.next=3;break;}throw new Error('No receivers found');case 3:this.emit(c('ChromecastScannerEnum').SESSION_REQUESTED);n=this.$ChromecastScanner12();n['catch'](function(s){this.emit(c('ChromecastScannerEnum').SESSION_CANCELLED);this.emit(c('ChromecastScannerEnum').SESSION_DISCONNECTED);throw s;}.bind(this));r.next=8;return c('regeneratorRuntime').awrap(n);case 8:o=r.sent;p=this.$ChromecastScanner11(o);this.$ChromecastScanner7.add(p);this.emit(c('ChromecastScannerEnum').SESSION_STARTED,p);return r.abrupt('return',p);case 13:case 'end':return r.stop();}},null,this);};l.prototype.$ChromecastScanner12=function m(){var n,o;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:'use strict';q.next=3;return c('regeneratorRuntime').awrap(j());case 3:n=q.sent;q.next=6;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(r,s){new (c('ConnectedTVTypedLogger'))().setEvent(c('ConnectedTVLoggerEvents').SENDER_SESSION_REQUESTED).log();var t=c('performanceAbsoluteNow')(),u=new n.SessionRequest(this.$ChromecastScanner1,[n.Capability.VIDEO_OUT,n.Capability.AUDIO_OUT],k);n.requestSession(function(v){new (c('ConnectedTVTypedLogger'))().setEvent(c('ConnectedTVLoggerEvents').SENDER_SESSION_STARTED).setPerfTimeMs(Math.floor(c('performanceAbsoluteNow')()-t)).log();return r(v);},function(v){new (c('ConnectedTVTypedLogger'))().setEvent(c('ConnectedTVLoggerEvents').SENDER_SESSION_FAILED).setSessionFailureCode(v.code).setSessionFailureDescription(v.description).setPerfTimeMs(Math.floor(c('performanceAbsoluteNow')()-t)).log();return s(v);},u);}.bind(this)));case 6:o=q.sent;return q.abrupt('return',o);case 8:case 'end':return q.stop();}},null,this);};l.prototype.$ChromecastScanner11=function(m){'use strict';var n=new (c('ChromecastSession'))(this.$ChromecastScanner1||'',this.$ChromecastScanner2||'',m);n.addListener(c('ChromecastSessionEnum').DISCONNECTING,function(){this.emit(c('ChromecastScannerEnum').SESSION_DISCONNECTING,n);}.bind(this));n.addListener(c('ChromecastSessionEnum').DISCONNECTED,function(){this.emit(c('ChromecastScannerEnum').SESSION_DISCONNECTED,n);this.$ChromecastScanner7['delete'](n);}.bind(this));n.addListener(c('ChromecastSessionEnum').ERROR,function(o){this.emit(c('ChromecastScannerEnum').ERROR,o);}.bind(this));return n;};l.prototype.$ChromecastScanner10=function m(){var n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:'use strict';p.next=3;return c('regeneratorRuntime').awrap(j());case 3:n=p.sent;n.addReceiverActionListener(function(q,r){switch(r){case n.ReceiverAction.CAST:this.emit(c('ChromecastScannerEnum').CAST,q);break;case n.ReceiverAction.STOP:this.$ChromecastScanner7.forEach(function(s){return s.disconnect();});break;}}.bind(this));case 5:case 'end':return p.stop();}},null,this);};f.exports=l;}),null);
__d('VideoPlayerAbrTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('vpabr_proxy:VideoPlayerAbrLoggerConfig',this.$VideoPlayerAbrTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('vpabr_proxy:VideoPlayerAbrLoggerConfig',this.$VideoPlayerAbrTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$VideoPlayerAbrTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$VideoPlayerAbrTypedLogger1=babelHelpers['extends']({},this.$VideoPlayerAbrTypedLogger1,j);return this;};h.prototype.setBandwidthEstimate=function(j){this.$VideoPlayerAbrTypedLogger1.bandwidth_estimate=j;return this;};h.prototype.setBufferedAhead=function(j){this.$VideoPlayerAbrTypedLogger1.buffered_ahead=j;return this;};h.prototype.setBytes=function(j){this.$VideoPlayerAbrTypedLogger1.bytes=j;return this;};h.prototype.setClientTime=function(j){this.$VideoPlayerAbrTypedLogger1.client_time=j;return this;};h.prototype.setClientTimeBegin=function(j){this.$VideoPlayerAbrTypedLogger1.client_time_begin=j;return this;};h.prototype.setClientTimeEnd=function(j){this.$VideoPlayerAbrTypedLogger1.client_time_end=j;return this;};h.prototype.setDelayMs=function(j){this.$VideoPlayerAbrTypedLogger1.delay_ms=j;return this;};h.prototype.setEvent=function(j){this.$VideoPlayerAbrTypedLogger1.event=j;return this;};h.prototype.setPlayhead=function(j){this.$VideoPlayerAbrTypedLogger1.playhead=j;return this;};h.prototype.setReason=function(j){this.$VideoPlayerAbrTypedLogger1.reason=j;return this;};h.prototype.setRepresentationID=function(j){this.$VideoPlayerAbrTypedLogger1.representation_id=j;return this;};h.prototype.setSession=function(j){this.$VideoPlayerAbrTypedLogger1.session=j;return this;};h.prototype.setUnsampledReason=function(j){this.$VideoPlayerAbrTypedLogger1.unsampled_reason=j;return this;};h.prototype.setVC=function(j){this.$VideoPlayerAbrTypedLogger1.vc=j;return this;};h.prototype.setVideoID=function(j){this.$VideoPlayerAbrTypedLogger1.video_id=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$VideoPlayerAbrTypedLogger1=babelHelpers['extends']({},this.$VideoPlayerAbrTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={bandwidth_estimate:true,buffered_ahead:true,bytes:true,client_time:true,client_time_begin:true,client_time_end:true,delay_ms:true,event:true,playhead:true,reason:true,representation_id:true,session:true,unsampled_reason:true,vc:true,video_id:true};f.exports=h;}),null);
__d('VideoPlayerShakaPerformanceTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig',this.$VideoPlayerShakaPerformanceTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig',this.$VideoPlayerShakaPerformanceTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$VideoPlayerShakaPerformanceTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1=babelHelpers['extends']({},this.$VideoPlayerShakaPerformanceTypedLogger1,j);return this;};h.prototype.setAccessToken=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.access_token=j;return this;};h.prototype.setAdditionalBufferedRanges=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.additional_buffered_ranges=j;return this;};h.prototype.setClientTimeBegin=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_begin=j;return this;};h.prototype.setClientTimeEnd=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_end=j;return this;};h.prototype.setCode=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.code=j;return this;};h.prototype.setError=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.error=j;return this;};h.prototype.setEvent=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.event=j;return this;};h.prototype.setInitiator=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.initiator=j;return this;};h.prototype.setIsLive=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.is_live=j;return this;};h.prototype.setLastBufferedEnd=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_buffered_end=j;return this;};h.prototype.setLastBufferedStart=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_buffered_start=j;return this;};h.prototype.setLastPlayingEventTime=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_playing_event_time=j;return this;};h.prototype.setLength=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.length=j;return this;};h.prototype.setMimeType=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.mime_type=j;return this;};h.prototype.setParentID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.parent_id=j;return this;};h.prototype.setPlayerOriginCallerSpecified=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.player_origin_caller_specified=j;return this;};h.prototype.setPlayhead=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.playhead=j;return this;};h.prototype.setPushed=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.pushed=j;return this;};h.prototype.setRepresentationID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.representation_id=j;return this;};h.prototype.setResource=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.resource=j;return this;};h.prototype.setResult=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.result=j;return this;};h.prototype.setScriptPath=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.script_path=j;return this;};h.prototype.setSequentialID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.sequential_id=j;return this;};h.prototype.setSession=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.session=j;return this;};h.prototype.setState=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.state=j;return this;};h.prototype.setStreamSwitchReason=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.stream_switch_reason=j;return this;};h.prototype.setTimeToFirstByte=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_first_byte=j;return this;};h.prototype.setTimeToLastByte=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_last_byte=j;return this;};h.prototype.setTimeToRequestStart=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_request_start=j;return this;};h.prototype.setVC=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.vc=j;return this;};h.prototype.setVideoID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.video_id=j;return this;};var i={access_token:true,additional_buffered_ranges:true,client_time_begin:true,client_time_end:true,code:true,error:true,event:true,initiator:true,is_live:true,last_buffered_end:true,last_buffered_start:true,last_playing_event_time:true,length:true,mime_type:true,parent_id:true,player_origin_caller_specified:true,playhead:true,pushed:true,representation_id:true,resource:true,result:true,script_path:true,sequential_id:true,session:true,state:true,stream_switch_reason:true,time_to_first_byte:true,time_to_last_byte:true,time_to_request_start:true,vc:true,video_id:true};f.exports=h;}),null);
__d('TaggedTimeRanges',['sprintf'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k;};}h.prototype.add=function(i,j,k){'use strict';if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return;}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break;}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l);};h.prototype.$TaggedTimeRanges5=function(i){'use strict';var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--;}}else{if(k.end>=j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag});}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag});}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag});}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag});};h.prototype.get=function(i){'use strict';var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break;}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag;};h.prototype.getLength=function(){'use strict';return this.$TaggedTimeRanges1.length;};f.exports=h;}),null);
__d('BinarySearch',['invariant','keyMirror'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('keyMirror')({LEAST_UPPER_BOUND:null,GREATEST_LOWER_BOUND:null,LEAST_STRICT_UPPER_BOUND:null,GREATEST_STRICT_LOWER_BOUND:null}),j=function l(m,n){typeof m==='number'&&typeof n==='number'||h(0);return m-n;},k=babelHelpers['extends']({},i,{find:function l(m,n,o,p,q){q=q||j;var r=k.LEAST_UPPER_BOUND,s=k.findBound(m,n,o,p,q,r);if(o<=s&&s<p){var t=m(s);return q(t,n)===0?t:undefined;}else return undefined;},findIndex:function l(m,n,o,p,q){q=q||j;var r=k.LEAST_UPPER_BOUND,s=k.findBound(m,n,o,p,q,r);if(o<=s&&s<p){return q(m(s),n)===0?s:-1;}else return -1;},findBound:function l(m,n,o,p,q,r){switch(r){case k.LEAST_UPPER_BOUND:return k.leastUpperBound(m,n,o,p,q);case k.GREATEST_LOWER_BOUND:return k.greatestLowerBound(m,n,o,p,q);case k.LEAST_STRICT_UPPER_BOUND:return k.leastStrictUpperBound(m,n,o,p,q);case k.GREATEST_STRICT_LOWER_BOUND:return k.greatestStrictLowerBound(m,n,o,p,q);default:h(0);}},leastUpperBound:function l(m,n,o,p,q){while(o+1<p){var r=o+Math.floor((p-o)/2);if(q(n,m(r))<=0){p=r;}else o=r;}return o<p&&q(n,m(o))<=0?o:p;},greatestLowerBound:function l(m,n,o,p,q){return k.leastStrictUpperBound(m,n,o,p,q)-1;},leastStrictUpperBound:function l(m,n,o,p,q){while(o+1<p){var r=o+Math.floor((p-o)/2);if(q(n,m(r))<0){p=r;}else o=r;}return o<p&&q(n,m(o))<0?o:p;},greatestStrictLowerBound:function l(m,n,o,p,q){return k.leastUpperBound(m,n,o,p,q)-1;},findInArray:function l(m,n,o){return k.find(function(p){return m[p];},n,0,m.length,o);},findIndexInArray:function l(m,n,o){return k.findIndex(function(p){return m[p];},n,0,m.length,o);},findBoundInArray:function l(m,n,o,p){return k.findBound(function(q){return m[q];},n,0,m.length,o,p);}});f.exports=k;}),null);
__d('NativeDeferred',['Promise'],(function a(b,c,d,e,f,g){'use strict';var h=window.Promise||c('Promise');c('Promise').resolve();function i(){this.$NativeDeferred3=false;this.$NativeDeferred4=new h(function(j,k){this.$NativeDeferred1=j;this.$NativeDeferred2=k;}.bind(this));}i.prototype.getPromise=function(){return this.$NativeDeferred4;};i.prototype.resolve=function(j){this.$NativeDeferred1(j);this.$NativeDeferred3=true;};i.prototype.reject=function(j){this.$NativeDeferred2(j);};i.prototype.isResolved=function(){return this.$NativeDeferred3;};f.exports=i;}),null);
__d('NetworkRequestPipelineStats',['Set'],(function a(b,c,d,e,f,g){'use strict';var h=5,i=.5,j=30;function k(){this.$NetworkRequestPipelineStats1={};this.$NetworkRequestPipelineStats2={};this.$NetworkRequestPipelineStats3=0;this.$NetworkRequestPipelineStats4=0;this.$NetworkRequestPipelineStats5=0;this.$NetworkRequestPipelineStats6=0;this.$NetworkRequestPipelineStats7=new (c('Set'))();}k.prototype.addEntry=function(l,m){this.$NetworkRequestPipelineStats6=Math.max(this.$NetworkRequestPipelineStats6,l);if(!m)return;this.$NetworkRequestPipelineStats1[l]=m;var n=this.$NetworkRequestPipelineStats1[l-1];if(!this.$NetworkRequestPipelineStats7.has(l-1)&&n)this.$NetworkRequestPipelineStats8(n,m,l);var o=this.$NetworkRequestPipelineStats1[l+1];if(!this.$NetworkRequestPipelineStats7.has(l)&&o)this.$NetworkRequestPipelineStats8(m,o,l+1);};k.prototype.setNetworkIdle=function(){this.$NetworkRequestPipelineStats7.add(this.$NetworkRequestPipelineStats6);};k.prototype.$NetworkRequestPipelineStats8=function(l,m,n){this.$NetworkRequestPipelineStats2[n]=m.startTime+m.timeToFirstByte-(l.startTime+l.timeToLastByte);};k.prototype.getBandwidthAlignments=function(){return this.$NetworkRequestPipelineStats2;};k.prototype.getBandwidthUtilization=function(){var l=0,m=0;Object.keys(this.$NetworkRequestPipelineStats2).forEach(function(n){var o=Number.parseInt(n,10),p=this.$NetworkRequestPipelineStats2[o],q=this.$NetworkRequestPipelineStats1[o],r=q.timeToLastByte-q.timeToFirstByte;l+=r;m+=Math.max(0,p)+r;}.bind(this));return l/Math.max(1,m);};k.prototype.$NetworkRequestPipelineStats9=function(l){var m=[],n=0;while(true){var o=this.$NetworkRequestPipelineStats1[this.$NetworkRequestPipelineStats6-n];if(!o)break;if(o.timeToLastByte-o.timeToFirstByte>=j)m.push(o);n++;}return m;};k.prototype.getEstimatedDownloadTime=function(l){if(l){var m=this.$NetworkRequestPipelineStats10();if(!m)return 0;return l/m;}return this.$NetworkRequestPipelineStats11(function(n){return n.timeToLastByte-n.timeToFirstByte;},{lastN:h,defaultValue:0});};k.prototype.$NetworkRequestPipelineStats10=function(){return this.$NetworkRequestPipelineStats11(function(l){return l.transferSize/(l.timeToLastByte-l.timeToFirstByte||1);},{lastN:h,defaultValue:0});};k.prototype.$NetworkRequestPipelineStats11=function(l,m){var n=m.lastN,o=m.defaultValue,p=this.$NetworkRequestPipelineStats9(n);if(!p.length)return o;return p.reverse().reduce(function(q,r){return i*l(r)+(1-i)*q;},l(p[0]));};k.prototype.getEstimatedTimeToFirstByte=function(){return this.$NetworkRequestPipelineStats11(function(l){return l.timeToFirstByte;},{lastN:h,defaultValue:5000});};k.prototype.getOptimisticTimeToFirstByte=function(){var l=this.$NetworkRequestPipelineStats9(h);if(!l.length)return 0;var m=Math.min.apply(Math,l.map(function(o){return o.timeToFirstByte;})),n=this.$NetworkRequestPipelineStats11(function(o){return o.timeToFirstByte;},{lastN:h,defaultValue:5000});return (m+n)/2;};f.exports=k;}),null);
__d('NetworkRequestPipeline',['Map','NetworkRequestPipelineStats','VideoPlayerResourceTimer','performanceNow'],(function a(b,c,d,e,f,g){'use strict';var h=2,i=1;function j(k,l){this.$NetworkRequestPipeline1=h;this.$NetworkRequestPipeline2=i;this.$NetworkRequestPipeline3=0;this.$NetworkRequestPipeline4=[];this.$NetworkRequestPipeline5=new (c('NetworkRequestPipelineStats'))();this.$NetworkRequestPipeline6=0;this.$NetworkRequestPipeline7=new (c('Map'))();this.$NetworkRequestPipeline9=function(){};if(k!==undefined)this.$NetworkRequestPipeline1=k;if(l!==undefined)this.$NetworkRequestPipeline2=l;}j.prototype.enqueue=function(k,l){this.$NetworkRequestPipeline4.push(k);if(l)this.$NetworkRequestPipeline7.set(k,l);if(!this.$NetworkRequestPipeline8){this.$NetworkRequestPipeline8=this.$NetworkRequestPipeline10();this.$NetworkRequestPipeline11();}};j.prototype.cancelPendingRequests=function(){this.$NetworkRequestPipeline4=[];if(this.$NetworkRequestPipeline8){clearTimeout(this.$NetworkRequestPipeline8);this.$NetworkRequestPipeline8=null;}};j.prototype.setWillSendRequestHandler=function(k){this.$NetworkRequestPipeline9=k;};j.prototype.$NetworkRequestPipeline12=function(){var k=this.$NetworkRequestPipeline3;this.$NetworkRequestPipeline3++;return k;};j.prototype.$NetworkRequestPipeline11=function(){if(this.$NetworkRequestPipeline8&&this.$NetworkRequestPipeline6<this.$NetworkRequestPipeline1)this.$NetworkRequestPipeline13(this.$NetworkRequestPipeline8);};j.prototype.$NetworkRequestPipeline14=function(k){if(k.hasEnded)return false;clearTimeout(k.timeout);k.hasEnded=true;this.$NetworkRequestPipeline8=this.$NetworkRequestPipeline10();this.$NetworkRequestPipeline11();return true;};j.prototype.$NetworkRequestPipeline13=function(k){var l=k.hasStarted,m=k.xhrRequest,n=k.id;if(l)return;var o=c('performanceNow')(),p=function(r){var s=c('VideoPlayerResourceTimer').getResourceTimingEntry(m.getURI().toString(),o,c('performanceNow')());this.$NetworkRequestPipeline5.addEntry(n,s);this.$NetworkRequestPipeline6--;if(!this.$NetworkRequestPipeline14(k))this.$NetworkRequestPipeline11();}.bind(this),q=function(){this.$NetworkRequestPipeline6--;if(!this.$NetworkRequestPipeline14(k))this.$NetworkRequestPipeline11();}.bind(this);this.$NetworkRequestPipeline9(m);k.xhrRequest=this.$NetworkRequestPipeline15(m,p,q,q);this.$NetworkRequestPipeline6++;k.timeout=setTimeout(function(){return this.$NetworkRequestPipeline14(k);}.bind(this),this.$NetworkRequestPipeline16(k.xhrRequest));k.xhrRequest.send();k.hasStarted=true;};j.prototype.$NetworkRequestPipeline10=function(){var k=this.$NetworkRequestPipeline4.shift();if(!k){this.$NetworkRequestPipeline5.setNetworkIdle();return null;}var l=this.$NetworkRequestPipeline12(),m={id:l,hasStarted:false,hasEnded:false,xhrRequest:k,timeout:0};return m;};j.prototype.$NetworkRequestPipeline15=function(k,l,m,n){var o=k.getResponseHandler();k.setResponseHandler(function(r){o.call(k,r);l(r);});var p=k.getAbortHandler();k.setAbortHandler(function(){p.call(k);n();});var q=k.getErrorHandler();k.setErrorHandler(function(r){q.call(k,r);m(r);});return k;};j.prototype.$NetworkRequestPipeline16=function(k){var l=this.$NetworkRequestPipeline7.get(k),m=this.$NetworkRequestPipeline5.getEstimatedDownloadTime(l),n=this.$NetworkRequestPipeline5.getEstimatedTimeToFirstByte(),o=this.$NetworkRequestPipeline5.getOptimisticTimeToFirstByte();return (m+n-o)*this.$NetworkRequestPipeline2;};f.exports=j;}),null);
__d('VideoSegmentRequestPipeline',['Map','NativeDeferred','NetworkRequestPipeline','URI','VideoDashPrefetchCache','VideoPlayerResourceTimer','VideoPlayerShakaBandwidthEstimator','VideoPlayerShakaError','VideoPlayerShakaExperiments','XHRRequest','getCrossOriginTransport','performanceNow'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){this.$VideoSegmentRequestPipeline1=new (c('Map'))();this.$VideoSegmentRequestPipeline2=new (c('Map'))();this.$VideoSegmentRequestPipeline3=new (c('Map'))();this.$VideoSegmentRequestPipeline4=new (c('NetworkRequestPipeline'))(c('VideoPlayerShakaExperiments').requestPipelineMaxConcurrentRequests,c('VideoPlayerShakaExperiments').requestPipelineSoothingFactor);this.$VideoSegmentRequestPipeline5=new (c('Map'))();this.$VideoSegmentRequestPipeline6=null;this.$VideoSegmentRequestPipeline9=function(k){var l,m=this,n=this.$VideoSegmentRequestPipeline1.get(k);this.$VideoSegmentRequestPipeline1['delete'](k);var o=this.$VideoSegmentRequestPipeline6;this.$VideoSegmentRequestPipeline6=k;var p=k.getURI().toString();if(n)(function(){m.$VideoSegmentRequestPipeline2.set(k,n);var q=new (c('NativeDeferred'))(),r=m.$VideoSegmentRequestPipeline12(p),s=c('performanceNow')();k.setResponseHandler(function(t){q.resolve({response:t,responseTime:c('performanceNow')()-s});var u=c('performanceNow')(),v=c('VideoPlayerResourceTimer').getResourceTimingEntry(p,s,u),w=c('VideoPlayerShakaBandwidthEstimator').getEstimator(),x=t.byteLength;if(w){var y=v?this.$VideoSegmentRequestPipeline13(v,k,o):u-s;w.sample(y,x,true,{timeToLastByte:y});}if(r)this.$VideoSegmentRequestPipeline14(r,t.byteLength,v);this.$VideoSegmentRequestPipeline2['delete'](k);}.bind(m)).setAbortHandler(function(){var t=c('VideoPlayerShakaError').translateError({errorMsg:'Request aborted.',errorType:'abort',errorCode:0},p,'aborted');if(r)r.setError(t).log();q.reject(t);this.$VideoSegmentRequestPipeline2['delete'](k);this.$VideoSegmentRequestPipeline3['delete'](n);}.bind(m)).setErrorHandler(function(t){var u=c('VideoPlayerShakaError').translateError(t,p,'net');if(r)r.setError(u).log();q.reject(u);this.$VideoSegmentRequestPipeline2['delete'](k);this.$VideoSegmentRequestPipeline3['delete'](n);}.bind(m));m.$VideoSegmentRequestPipeline3.set(n,q.getPromise());})();}.bind(this);this.$VideoSegmentRequestPipeline4.setWillSendRequestHandler(this.$VideoSegmentRequestPipeline9);this.$VideoSegmentRequestPipeline8=i;this.$VideoSegmentRequestPipeline7=j;}h.prototype.enqueue=function(i){if(!i.length)return;i.forEach(function(j){if(c('VideoDashPrefetchCache').hasCacheValue(this.$VideoSegmentRequestPipeline10(j.requestInfo).toString()))return;var k=j.requestInfo,l=this.$VideoSegmentRequestPipeline11(k);this.$VideoSegmentRequestPipeline1.set(l,j);var m=Math.max((k.endByte||0)-(k.startByte||0),0);this.$VideoSegmentRequestPipeline4.enqueue(l,m);}.bind(this));};h.prototype.$VideoSegmentRequestPipeline12=function(i){var j=null;if(this.$VideoSegmentRequestPipeline7){j=this.$VideoSegmentRequestPipeline7.getOperationLogger('request').setResource(i).start();j.setMimeType(this.$VideoSegmentRequestPipeline8[0]||null).setInitiator('pipeline');}return j;};h.prototype.$VideoSegmentRequestPipeline14=function(i,j,k){i.setLength(j);if(k){var l=k.timeToFirstByte,m=k.timeToLastByte,n=k.timeToRequestStart;i.setTimeToFirstByte(Math.round(l)).setTimeToLastByte(Math.round(m)).setTimeToRequestStart(Math.round(n));}i.log();};h.prototype.$VideoSegmentRequestPipeline13=function(i,j,k){var l=null;if(k){l=this.$VideoSegmentRequestPipeline5.get(k);this.$VideoSegmentRequestPipeline5['delete'](l);}this.$VideoSegmentRequestPipeline5.set(j,i);if(l){var m=l.startTime+l.timeToLastByte,n=i.startTime+i.timeToLastByte,o=Math.min(n-m,i.timeToLastByte);return Math.max(i.timeToLastByte-i.timeToFirstByte,o);}return i.timeToLastByte;};h.prototype.getInflightSegments=function(){return Array.from(this.$VideoSegmentRequestPipeline2.values());};h.prototype.getRequestedSegments=function(){return Array.from(this.$VideoSegmentRequestPipeline3.keys());};h.prototype.stopAllRequests=function(){this.$VideoSegmentRequestPipeline2.forEach(function(i,j){return j.abort();});this.$VideoSegmentRequestPipeline4.cancelPendingRequests();this.$VideoSegmentRequestPipeline1=new (c('Map'))();this.$VideoSegmentRequestPipeline3=new (c('Map'))();this.$VideoSegmentRequestPipeline2=new (c('Map'))();};h.prototype.removeResponsePromise=function(i){var j=this.$VideoSegmentRequestPipeline3.get(i);this.$VideoSegmentRequestPipeline3['delete'](i);return j;};h.prototype.$VideoSegmentRequestPipeline11=function(i){var j=new (c('XHRRequest'))(this.$VideoSegmentRequestPipeline10(i)).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(c('getCrossOriginTransport'));return j;};h.prototype.$VideoSegmentRequestPipeline10=function(i){var j=i.baseUrl,k=i.startByte,l=i.endByte,m=new (c('URI'))(j);if(k!==null&&l!==undefined&&k!==null&&l!==undefined)m=m.addQueryData({bytestart:k,byteend:l});return m;};f.exports=h;}),null);
__d('SegmentRequestManager',['BinarySearch','Map','VideoSegmentRequestPipeline'],(function a(b,c,d,e,f,g){'use strict';var h=.1,i=3;function j(k,l){this.$SegmentRequestManager1=new (c('Map'))();this.$SegmentRequestManager2=new (c('Map'))();this.$SegmentRequestManager3=0;this.$SegmentRequestManager4=null;this.$SegmentRequestManager6=false;this.$SegmentRequestManager5=new (c('VideoSegmentRequestPipeline'))(k,l);}j.prototype.updateSegments=function(k,l){l.forEach(function(m){var n=this.$SegmentRequestManager7(m.requestInfo);this.$SegmentRequestManager2.set(n,m);}.bind(this));this.$SegmentRequestManager1.set(k,l);};j.prototype.updatePlayerState=function(k,l){var m=this.$SegmentRequestManager1.get(k);if(!m)return this;var n=this.$SegmentRequestManager4;this.$SegmentRequestManager4=k;if(this.$SegmentRequestManager6)return this;if(n!==k){this.$SegmentRequestManager8(l,m);return this;}var o=l.playhead,p=l.bufferStart,q=l.bufferEnd,r=this.$SegmentRequestManager5.getInflightSegments(),s=!!r.find(function(v){return this.$SegmentRequestManager9(v.startTime,p,q)&&this.$SegmentRequestManager9(v.endTime,p,q);}.bind(this)),t=!!r.find(function(v){return v.endTime<=o;});if(s||t){this.$SegmentRequestManager8(l,m);return this;}var u=this.$SegmentRequestManager5.getRequestedSegments();if((o>=q||o<p)&&!u.find(function(v){return this.$SegmentRequestManager9(o,v.startTime,v.endTime);}.bind(this))){this.$SegmentRequestManager8(l,m);}else this.$SegmentRequestManager10(l,m);return this;};j.prototype.getAndDeleteResponsePromise=function(k){if(this.$SegmentRequestManager6)return null;var l=this.$SegmentRequestManager7(k),m=this.$SegmentRequestManager2.get(l);if(m)return this.$SegmentRequestManager5.removeResponsePromise(m);return null;};j.prototype.disable=function(){if(this.$SegmentRequestManager6)return;this.$SegmentRequestManager5.stopAllRequests();this.$SegmentRequestManager6=true;};j.prototype.enable=function(){this.$SegmentRequestManager6=false;};j.prototype.isDisabled=function(){return this.$SegmentRequestManager6;};j.prototype.$SegmentRequestManager9=function(k,l,m){return k>=l-h&&k<=m+h;};j.prototype.$SegmentRequestManager10=function(k,l){var m=k.bufferingGoal,n=k.playhead,o=[],p=void 0;for(p=this.$SegmentRequestManager3;p<l.length;p++){var q=l[p];if(q.startTime>n+m)break;o.push(q);}this.$SegmentRequestManager3=p;this.$SegmentRequestManager5.enqueue(o);};j.prototype.$SegmentRequestManager11=function(k,l){return c('BinarySearch').leastUpperBound(function(m){var n=this.$SegmentRequestManager12(l[m].startTime),o=this.$SegmentRequestManager12(l[m].endTime);k=this.$SegmentRequestManager12(k);if(n<=k&&o>k)return 0;return n-k;}.bind(this),0,0,l.length,function(m,n){return m-n;});};j.prototype.$SegmentRequestManager8=function(k,l){this.$SegmentRequestManager5.stopAllRequests();var m=k.playhead,n=k.bufferEnd,o=Math.max(n,m),p=this.$SegmentRequestManager11(o,l);if(p>=0){this.$SegmentRequestManager3=p;this.$SegmentRequestManager10(k,l);}};j.prototype.$SegmentRequestManager7=function(k){return k.baseUrl+','+(k.startByte||0)+(','+(k.endByte||0));};j.prototype.$SegmentRequestManager12=function(k){return +k.toFixed(i)||0;};f.exports=j;}),null);
__d('ExtendableVideoPlayerShakaPerformanceTypedLogger',['VideoPlayerShakaPerformanceTypedLogger'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('VideoPlayerShakaPerformanceTypedLogger'));i=h&&h.prototype;j.prototype.setState=function(k){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1=k;return i.setState.call(this,k);};j.prototype.getState=function(){return this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1;};j.prototype.setSequentialID=function(k){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger2=k;i.setSequentialID.call(this,k);return this;};j.prototype.setParentLogger=function(k){this.setParentID(k.$ExtendableVideoPlayerShakaPerformanceTypedLogger2);return this;};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('VideoPlayerArtilleryOperationMarker',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){this.$VideoPlayerArtilleryOperationMarker2=i;this.$VideoPlayerArtilleryOperationMarker3=j;this.$VideoPlayerArtilleryOperationMarker4=k;this.$VideoPlayerArtilleryOperationMarker5=l;this.$VideoPlayerArtilleryOperationMarker6=false;}h.prototype.markOperationStart=function(){return this.$VideoPlayerArtilleryOperationMarker7('Starting');};h.prototype.markOperationEnd=function(){return this.$VideoPlayerArtilleryOperationMarker7('Ending');};h.prototype.$VideoPlayerArtilleryOperationMarker7=function(i){var j=this.$VideoPlayerArtilleryOperationMarker4();if(j)j.inform(i+' '+this.$VideoPlayerArtilleryOperationMarker2+' #'+this.$VideoPlayerArtilleryOperationMarker3,{pointGroup:this.$VideoPlayerArtilleryOperationMarker5.getGroupName(this.$VideoPlayerArtilleryOperationMarker2,this.$VideoPlayerArtilleryOperationMarker1),isPointOfInterest:true,type:null}).addStringAnnotation('resource',this.$VideoPlayerArtilleryOperationMarker1||'').addStringAnnotation('wasPrefetchCacheHit',this.$VideoPlayerArtilleryOperationMarker6.toString());return this;};h.prototype.setResource=function(i){this.$VideoPlayerArtilleryOperationMarker1=i;return this;};h.prototype.setWasPrefetchCacheHit=function(i){this.$VideoPlayerArtilleryOperationMarker6=i;return this;};f.exports=h;}),null);
__d('VideoPlayerArtilleryPointGrouper',['Map'],(function a(b,c,d,e,f,g){function h(){'use strict';this.$VideoPlayerArtilleryPointGrouper1=new (c('Map'))();this.$VideoPlayerArtilleryPointGrouper2=new (c('Map'))();}h.prototype.getGroupName=function(i,j){'use strict';if(!j){switch(i){case 'start_streams':i='source_attach';break;}return i;}var k=this.$VideoPlayerArtilleryPointGrouper1.get(j);if(k)return k;var l=void 0;if(j.indexOf('-init.m4v')!==-1){l='-init.m4v';}else if(j.indexOf('-init.m4a')!==-1){l='-init.m4a';}else if(j.indexOf('.mpd')!==-1){return 'source_load';}else if(j.indexOf('.m4v')!==-1){l='.m4v';}else if(j.indexOf('.m4a')!==-1){l='.m4a';}else l='unknown';var m=this.$VideoPlayerArtilleryPointGrouper2.get(l)+1||1;this.$VideoPlayerArtilleryPointGrouper2.set(l,m);k=l+' #'+m;this.$VideoPlayerArtilleryPointGrouper1.set(j,k);return k;};f.exports=h;}),null);
__d('VideoPlayerArtilleryTrace',['TimeSliceInteraction','UserAgentData','VideoPlayerArtilleryOperationMarker','VideoPlayerArtilleryPointGrouper'],(function a(b,c,d,e,f,g){'use strict';var h=30000,i=3000;function j(k,l){this.$VideoPlayerArtilleryTrace13=function(){var m=this.$VideoPlayerArtilleryTrace2;if(m){var n=m.stallTrace,o=m.hasStalls,p=m.stallTraceTimeout;o?n.finish():n.disable();clearTimeout(p);}this.$VideoPlayerArtilleryTrace2=null;}.bind(this);this.$VideoPlayerArtilleryTrace17=function(){return this.$VideoPlayerArtilleryTrace1;}.bind(this);this.$VideoPlayerArtilleryTrace18=function(){var m=this.$VideoPlayerArtilleryTrace2;return m?m.stallTrace:null;}.bind(this);this.$VideoPlayerArtilleryTrace4=l.videoID;this.$VideoPlayerArtilleryTrace5=l.video;this.$VideoPlayerArtilleryTrace6=k;this.$VideoPlayerArtilleryTrace7=l.isLive;this.$VideoPlayerArtilleryTrace9=l.playerOrigin;this.$VideoPlayerArtilleryTrace10=l.playerSuborigin;this.$VideoPlayerArtilleryTrace8=0;this.$VideoPlayerArtilleryTrace11=new (c('VideoPlayerArtilleryPointGrouper'))();}j.prototype.updateBufferAhead=function(k){var l=this.$VideoPlayerArtilleryTrace2;if(!l&&k<=i){this.$VideoPlayerArtilleryTrace2={stallTrace:this.$VideoPlayerArtilleryTrace12(c('TimeSliceInteraction').create('video_stall')),hasStalls:false,stallTraceTimeout:setTimeout(this.$VideoPlayerArtilleryTrace13,h)};}else if(k>i)this.$VideoPlayerArtilleryTrace13();};j.prototype.enterState=function(k){switch(k){case 'loading':this.$VideoPlayerArtilleryTrace14();break;case 'playing':this.$VideoPlayerArtilleryTrace15();break;default:this.$VideoPlayerArtilleryTrace16(k);break;}return this;};j.prototype.$VideoPlayerArtilleryTrace16=function(k){var l=this.$VideoPlayerArtilleryTrace1;if(l)l.inform('State: '+k);};j.prototype.getMarkers=function(k){var l=[],m=(++this.$VideoPlayerArtilleryTrace8).toString();if(this.$VideoPlayerArtilleryTrace1)l.push(new (c('VideoPlayerArtilleryOperationMarker'))(k,m,this.$VideoPlayerArtilleryTrace17,this.$VideoPlayerArtilleryTrace11));var n=this.$VideoPlayerArtilleryTrace2;if(n){if(k==='buffering')n.hasStalls=true;l.push(new (c('VideoPlayerArtilleryOperationMarker'))(k,m,this.$VideoPlayerArtilleryTrace18,this.$VideoPlayerArtilleryTrace11));}return l;};j.prototype.$VideoPlayerArtilleryTrace14=function(){var k=this.$VideoPlayerArtilleryTrace12(c('TimeSliceInteraction').create('video_psr'));this.$VideoPlayerArtilleryTrace1=k;this.$VideoPlayerArtilleryTrace16('loading');};j.prototype.$VideoPlayerArtilleryTrace15=function(){this.$VideoPlayerArtilleryTrace16('playing');var k=this.$VideoPlayerArtilleryTrace1;if(k){k.finish();this.$VideoPlayerArtilleryTrace1=null;}};j.prototype.$VideoPlayerArtilleryTrace12=function(k){k.trace().addStringAnnotation('videoID',this.$VideoPlayerArtilleryTrace4).addStringAnnotation('sessionID',this.$VideoPlayerArtilleryTrace6).addStringAnnotation('browserName',c('UserAgentData').browserName).addStringAnnotation('browserVersion',c('UserAgentData').browserVersion).addStringAnnotation('isLive',this.$VideoPlayerArtilleryTrace7.toString()).addStringAnnotation('playerOrigin',this.$VideoPlayerArtilleryTrace9||'').addStringAnnotation('playerSuborigin',this.$VideoPlayerArtilleryTrace10||'');return k;};f.exports=j;}),null);
__d('VideoPlayerShakaPerformanceLogger',['ExtendableVideoPlayerShakaPerformanceTypedLogger','ScriptPath','VideoPlayerArtilleryTrace','VideoPlayerShakaPerformanceLoggerConfig'],(function a(b,c,d,e,f,g){'use strict';h.isEnabled=function(){return c('VideoPlayerShakaPerformanceLoggerConfig').isSampled;};function h(i){this.$VideoPlayerShakaPerformanceLogger2=i.videoID;this.$VideoPlayerShakaPerformanceLogger4=i.video;this.$VideoPlayerShakaPerformanceLogger1=i.uniqueID;this.$VideoPlayerShakaPerformanceLogger3=0;this.$VideoPlayerShakaPerformanceLogger5=i.representationId;this.$VideoPlayerShakaPerformanceLogger8=i.isLive;this.$VideoPlayerShakaPerformanceLogger9=i.accessToken;this.$VideoPlayerShakaPerformanceLogger11=i.playerOrigin;this.$VideoPlayerShakaPerformanceLogger12=i.playerSuborigin;this.$VideoPlayerShakaPerformanceLogger10=new (c('VideoPlayerArtilleryTrace'))(this.$VideoPlayerShakaPerformanceLogger1,i);}h.prototype.$VideoPlayerShakaPerformanceLogger13=function(i){var j=this.$VideoPlayerShakaPerformanceLogger4.buffered;if(j.length>0){var k=j.length-1;i=i.setLastBufferedStart(Math.round(j.start(k)*1000)).setLastBufferedEnd(Math.round(j.end(k)*1000));this.$VideoPlayerShakaPerformanceLogger10.updateBufferAhead((j.end(k)-this.$VideoPlayerShakaPerformanceLogger4.currentTime)*1000);}var l=[];for(var m=0;m<j.length-1;m++){var n=Math.round(this.$VideoPlayerShakaPerformanceLogger4.buffered.start(m)*1000),o=Math.round(this.$VideoPlayerShakaPerformanceLogger4.buffered.end(m)*1000);l.push([n,o]);}if(l&&l.length)i=i.setAdditionalBufferedRanges(JSON.stringify(l));return i;};h.prototype.getEventLogger=function(event){var i=Date.now(),j=new (c('ExtendableVideoPlayerShakaPerformanceTypedLogger'))(),k=this.$VideoPlayerShakaPerformanceLogger4.currentTime;this.$VideoPlayerShakaPerformanceLogger13(j).setEvent(event).setVideoID(this.$VideoPlayerShakaPerformanceLogger2).setPlayerOriginCallerSpecified(this.$VideoPlayerShakaPerformanceLogger11).setScriptPath(c('ScriptPath').getScriptPath()).setRepresentationID(this.$VideoPlayerShakaPerformanceLogger5).setPlayhead(Math.round(k*1000)).setIsLive(this.$VideoPlayerShakaPerformanceLogger8).setSession(this.$VideoPlayerShakaPerformanceLogger1).setSequentialID(this.$VideoPlayerShakaPerformanceLogger3++).setState(this.$VideoPlayerShakaPerformanceLogger6).setLastPlayingEventTime(this.$VideoPlayerShakaPerformanceLogger7).setPushed(0).setResult('success').setAccessToken(this.$VideoPlayerShakaPerformanceLogger9).setClientTimeBegin(i).setClientTimeEnd(i);var l=j.setState;j.setState=function(n){if(n!==this.$VideoPlayerShakaPerformanceLogger6&&n==='playing'){this.$VideoPlayerShakaPerformanceLogger7=Date.now();}else if(n!=='playing')this.$VideoPlayerShakaPerformanceLogger7=null;this.$VideoPlayerShakaPerformanceLogger6=n;this.$VideoPlayerShakaPerformanceLogger10.enterState(n);return l.call(j,n);}.bind(this);j.updateState=function(n){if(j.getState()==this.$VideoPlayerShakaPerformanceLogger6){this.$VideoPlayerShakaPerformanceLogger10.enterState(n);return j.setState(n);}return j;}.bind(this);var m=j.setError;j.setError=function(n){if(typeof n==='object'){if(n.type==='aborted'||n.type==='delay'){this.setResult('aborted');}else{this.setResult('failed');m.call(this,n.type);}this.setCode(n.status);}else m.call(this,n);return this;};return j;};h.prototype.getArtilleryMarkers=function(i){return this.$VideoPlayerShakaPerformanceLogger10.getMarkers(i);};h.prototype.getOperationLogger=function(i){var j=this.getEventLogger(i),k=this.getArtilleryMarkers(i),l=j.setResource;j.setResource=function(n){k.forEach(function(o){return o.setResource(n);});return l.call(j,n);};var m=j.log;j.log=function(){this.setClientTimeEnd(Date.now());k.forEach(function(n){return n.markOperationEnd();});return m.call(this);};j.start=function(){k.forEach(function(n){return n.markOperationStart();});return j;};j.setWasPrefetchCacheHit=function(n){k.forEach(function(o){return o.setWasPrefetchCacheHit(n);});return j;};return j;};h.prototype.setRepresentationID=function(i){this.$VideoPlayerShakaPerformanceLogger5=i;};f.exports=h;}),null);
__d('VideoPushParametersHelper',['URI','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){var h=/(.*)\.(xx|fna)\.fbcdn\.net/;function i(j){'use strict';this.$VideoPushParametersHelper1=new (c('URI'))(j);return this;}i.prototype.setStreamEndOffset=function(j){'use strict';this.$VideoPushParametersHelper2=Math.min(Math.floor(j)+1,c('VideoPlayerShakaExperiments').liveMaxSegmentsToPush);this.$VideoPushParametersHelper4=Math.floor(j)+1;return this;};i.prototype.setSegmentStartTime=function(j){'use strict';this.$VideoPushParametersHelper3=j;return this;};i.prototype.setPushVideoRepresentationID=function(j){'use strict';this.$VideoPushParametersHelper5=j;return this;};i.prototype.setPushAudioRepresentationID=function(j){'use strict';this.$VideoPushParametersHelper6=j;return this;};i.prototype.setUseLongCacheForManifest=function(j){'use strict';this.$VideoPushParametersHelper7=j;return this;};i.prototype.getURL=function(){'use strict';var j=h.test(this.$VideoPushParametersHelper1.toString());if(j&&c('VideoPlayerShakaExperiments').liveSendPushHeaders){if(this.$VideoPushParametersHelper2!=null)this.$VideoPushParametersHelper1.addQueryData('_nc_p_n',this.$VideoPushParametersHelper2);if(this.$VideoPushParametersHelper3!=null){this.$VideoPushParametersHelper1.addQueryData('_nc_p_ts',this.$VideoPushParametersHelper3);}else if(this.$VideoPushParametersHelper4!=null)this.$VideoPushParametersHelper1.addQueryData('_nc_p_o',this.$VideoPushParametersHelper4);if(this.$VideoPushParametersHelper5!=null&&this.$VideoPushParametersHelper6!=null){this.$VideoPushParametersHelper1.addQueryData('_nc_p_rid',this.$VideoPushParametersHelper5);this.$VideoPushParametersHelper1.addQueryData('_nc_p_arid',this.$VideoPushParametersHelper6);}if(this.$VideoPushParametersHelper7)this.$VideoPushParametersHelper1.addQueryData('_nc_nc','1');}return this.$VideoPushParametersHelper1.toString();};i.prototype.getSegmentsToPush=function(){'use strict';return this.$VideoPushParametersHelper2;};i.prototype.getSegmentStartTime=function(){'use strict';return this.$VideoPushParametersHelper3;};i.prototype.getSegmentOffset=function(){'use strict';return this.$VideoPushParametersHelper4;};i.prototype.getPushVideoRepresentationID=function(){'use strict';return this.$VideoPushParametersHelper5;};i.prototype.getPushAudioRepresentationID=function(){'use strict';return this.$VideoPushParametersHelper6;};i.prototype.getUseLongCacheForManifest=function(){'use strict';return this.$VideoPushParametersHelper7;};i.getDefaultLiveStreamEndOffset=function(){'use strict';return c('VideoPlayerShakaExperiments').liveDefaultStreamEndOffset;};f.exports=i;}),null);
__d('clearImmediatePolyfill',['ImmediateImplementation'],(function a(b,c,d,e,f,g){f.exports=b.clearImmediate||c('ImmediateImplementation').clearImmediate;}),null);
__d('clearImmediate',['TimerStorage','clearImmediatePolyfill'],(function a(b,c,d,e,f,g){f.exports=function(){for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];c('TimerStorage').unset(c('TimerStorage').IMMEDIATE,i[0]);return Function.prototype.apply.call(c('clearImmediatePolyfill'),b,i);};}),null);
__d('extractCEA608',['JSResource'],(function a(b,c,d,e,f,g){var h=null;function i(j,k){if(!h)h=c('JSResource')('CEA608Extractor').__setRef('extractCEA608').load().then(function(l){return new l(k);});return h.then(function(l){return l.extract(j);});}f.exports=i;}),null);
__d('logLongAkamaiRequest',['CurrentUser','JSLog'],(function a(b,c,d,e,f,g){var h=false,i=2,j=[];function k(l){if(c('CurrentUser').isEmployee()&&!h){j=j.filter(function(m){var n=m.time;return Date.now()-n<1000*60*2;});j.push({data:l,time:Date.now()});if(j.length>=i){h=true;c('JSLog').warn('Long latency video request to akamai: %s',j.map(function(m){var n=m.data;return n;}).join(' ; '));}}}f.exports=k;}),null);
/**
 * @providesModule Shaka
 * @preserve-whitespace
 * @generated
 */
__d("Shaka",["Promise","VideoPlayerShakaPerformanceLogger","VideoPushParametersHelper","setTimeout","clearTimeout","clearImmediate","setImmediate","TimeSlice","Map","VideoPlayerShakaExperiments","VideoPlayerResourceTimer","SegmentRequestManager","logLongAkamaiRequest","extractCEA608","performanceNow"],(function $module_Shaka(global,require,requireDynamic,requireLazy,module,exports){

var Promise = require('Promise');
var VideoPlayerShakaPerformanceLogger = require('VideoPlayerShakaPerformanceLogger');
var VideoPushParametersHelper = require('VideoPushParametersHelper');
var setTimeout = require('setTimeout');
var clearTimeout = require('clearTimeout');
var clearImmediate = require('clearImmediate');
var setImmediate = require('setImmediate');
var TimeSlice = require('TimeSlice');
var Map = require('Map');
var VideoPlayerShakaExperiments = require('VideoPlayerShakaExperiments');
var VideoPlayerResourceTimer = require('VideoPlayerResourceTimer');
var SegmentRequestManager = require('SegmentRequestManager');
var logLongAkamaiRequest = require('logLongAkamaiRequest');

var extractCEA608 = require('extractCEA608');
var performanceNow = require('performanceNow');

function setEventProperty(obj, name, handler) {
  obj[name] = TimeSlice.guard(handler, 'shaka ' + name);
};

if (
  VideoPlayerShakaExperiments.shakaNativePromise &&
  VideoPlayerShakaExperiments.useNativePromise
) {
  Promise = window.Promise;
}

var g = {};

(function(window){var m,aa=this;function p(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]?d=d[e]:d=d[e]={}:d[e]=b}function q(a,b){function c(){}c.prototype=b.prototype;a.mc=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.kc=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};/*

 Copyright 2015 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ba(){};function ca(){}function da(a){var b=console[a];b?b.bind||(console[a]=function(){b.apply(console,arguments)}):console[a]=function(){}}da("error");da("warn");da("info");da("log");da("debug");function ea(a){ga[a]={sa:ha(),end:NaN}}function ia(a){if(a=ga[a])a.end=ha()}function ja(){var a=ga.buffering;return a&&a.end?a.end-a.sa:NaN}var ha=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,ga={};function ka(a,b,c,d){this.id=a;this.bandwidth=b||0;this.lang=c||"unknown";this.streamInfoID=d;this.active=!1}p("shaka.player.AudioTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0});function la(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null}la.prototype.clone=function(){var a=new la;a.maxHeight=this.maxHeight;a.minHeight=this.minHeight;a.maxWidth=this.maxWidth;a.maxBandwidth=this.maxBandwidth;a.minBandwidth=this.minBandwidth;return a};function ma(){this.fontSize="100%";this.fontColor=na;this.fontOpacity=oa;this.backgroundColor=pa;this.backgroundOpacity=oa;this.fontEdge=qa}p("shaka.player.TextStyle",ma);
function ra(a){var b=[];b.push("font-size: "+a.fontSize);b.push("color: "+sa(a.fontColor,a.fontOpacity));b.push("background-color: "+sa(a.backgroundColor,a.backgroundOpacity));for(var c=[],d=0;d<a.fontEdge.length;++d){var e=a.fontEdge[d].slice(3,6);c.push(sa(a.fontEdge[d].slice(0,3),a.fontOpacity)+" "+e.join("px ")+"px")}b.push("text-shadow: "+c.join(","));return b.join("; ")}function sa(a,b){return"rgba("+a.concat(b).join(",")+")"}var na=[255,255,255],pa=[0,0,0];
ma.StandardColors={WHITE:na,BLACK:pa,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var oa=1;ma.StandardOpacities={OPAQUE:oa,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var qa=[];
ma.EdgeStyles={NONE:qa,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function ta(a,b){this.id=a;this.lang=b||"unknown";this.enabled=this.active=!1}p("shaka.player.TextTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:0});function ua(a,b,c,d,e,f,g){this.id=a;this.bandwidth=b||0;this.width=c||0;this.height=d||0;this.streamInfoID=e;this.fbQualityLabel=f;this.fbQualityClass=g;this.active=!1}function va(a,b){var c=a.width*a.height,d=b.width*b.height;return c<d?-1:c>d?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}p("shaka.player.VideoTrack.compare",va);function wa(a){for(var b=xa,c=[],d=0;d<a.length;++d){for(var e=!1,f=0;f<c.length&&!(e=b?b(a[d],c[f]):a[d]===c[f]);++f);e||c.push(a[d])}return c};function ya(){return Date.now()+za}var za=0;function Aa(a){this.b=a;this.c=0==Ca;this.a=0}var Ca=1;function Da(a){return a.a<a.b.byteLength}function Ea(a){var b=a.b.getUint8(a.a);a.a+=1;return b}function r(a){var b=a.b.getUint32(a.a,a.c);a.a+=4;return b}function Fa(a){var b,c;a.c?(b=a.b.getUint32(a.a,!0),c=a.b.getUint32(a.a+4,!0)):(c=a.b.getUint32(a.a,!1),b=a.b.getUint32(a.a+4,!1));if(2097151<c)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");a.a+=8;return c*Math.pow(2,32)+b}
function Ga(a){if(a.a+16>a.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var b=new Uint8Array(a.b.buffer,a.a,16);a.a+=16;return b}function u(a,b){if(a.a+b>a.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");a.a+=b};function Ha(a){this.b=a;this.a=new Aa(a);Ia||(Ia=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var Ia;
function v(a){var b;b=Ja(a);if(7<b.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=Ja(a);a:{for(d=0;d<Ia.length;d++)if(Ka(c,Ia[d])){d=!0;break a}d=!1}if(d)c=a.b.byteLength-a.a.a;else{if(8==c.length&&c[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];c=d}c=a.a.a+c<=a.b.byteLength?c:a.b.byteLength-a.a.a;d=new DataView(a.b.buffer,
a.b.byteOffset+a.a.a,c);u(a.a,c);return new La(b,d)}function Ja(a){var b=Ea(a.a),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=Ea(a.a);return d}function La(a,b){this.id=a;this.a=b}
function Ma(a){if(8<a.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==a.a.byteLength&&a.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var b=0,c=0;c<a.a.byteLength;c++)var d=a.a.getUint8(c),b=256*b+d;return b};function Na(a){this.c=Math.exp(Math.log(.5)/a);this.a=this.b=0}Na.prototype.sample=function(a,b){var c=Math.pow(this.c,a);this.b=b*(1-c)+c*this.b;this.a+=a};function Oa(a){return a.b/(1-Math.pow(a.c,a.a))};var Pa=window.CustomEvent;"function"!==typeof Pa&&(Pa=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail);return c},Pa.prototype=window.Event.prototype);function x(a){var b=new Pa(a.type,{detail:a.detail,bubbles:!!a.bubbles}),c;for(c in a)c in b||(b[c]=a[c]);return b}function y(a){return new Pa("error",{detail:a,bubbles:!0})};function Qa(a,b,c){Ra(b);Ra(c);return c==b||a>=Sa&&c==b.split("-")[0]||a>=Ta&&c.split("-")[0]==b.split("-")[0]?!0:!1}var Sa=1,Ta=2;function Ra(a){a=a.toLowerCase().split("-");var b=Ua[a[0]];b&&(a[0]=b);return a.join("-")}
var Ua={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function Wa(a){return Object.keys(a).map(function(b){return a[b]})}function z(a,b){return Xa(a,b,"boolean")}function A(a,b,c){a=Xa(a,b,"number");if(null==a)return null;if(isNaN(a)||a==Number.NEGATIVE_INFINITY||a==Number.POSITIVE_INFINITY)throw new RangeError("'"+b+"' must be finite.");if(null!=c&&a<c)throw new RangeError("'"+b+"' must be >= "+c);return a}function Ya(a,b){return Xa(a,b,"string")}
function Xa(a,b,c){a=a[b];if(null==a)return null;if(typeof a!=c)throw new TypeError("'"+b+"' must be a "+c+".");return a}function Za(a,b,c){a=a[b];if(null==a)return null;if(!(a instanceof c))throw new TypeError("'"+b+"' must be an instance of "+c.name+".");return a};function B(){this.a={}}B.prototype.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]};B.prototype.set=function(a,b){this.a[a]=b};B.prototype.get=function(a){return(a=this.a[a])?a.slice():null};function $a(a){var b=[],c;for(c in a.a)b.push.apply(b,a.a[c]);return b}function ab(a,b,c){if(a=a.a[b])for(b=0;b<a.length;++b)a[b]==c&&(a.splice(b,1),--b)}function bb(a){var b=[],c;for(c in a.a)b.push(c);return b};function cb(){this.a=new B}cb.prototype.destroy=function(){db(this);this.a=null};function C(a,b,c,d){b=new eb(b,c,d);a.a.push(c,b)}cb.prototype.Aa=function(a,b){for(var c=this.a.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.Aa(),ab(this.a,b,e))}};function db(a){for(var b=$a(a.a),c=0;c<b.length;++c)b[c].Aa();a.a.a={}}function eb(a,b,c){this.target=a;this.type=b;this.a=c;this.target.addEventListener(b,c,!1)}
eb.prototype.Aa=function(){this.target&&(this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null)};function D(a){this.Ia=new B;this.da=a}p("shaka.util.FakeEventTarget",D);m=D.prototype;m.addEventListener=function(a,b){this.Ia.push(a,b)};m.removeEventListener=function(a,b){ab(this.Ia,a,b)};
m.dispatchEvent=function(a){a.hasOwnProperty("srcElement")||(delete a.srcElement,Object.defineProperty(a,"srcElement",{get:function(){return null}}));if(a.hasOwnProperty("target"))a.target=this;else{delete a.target;var b=this;Object.defineProperty(a,"target",{get:function(){return b},set:function(a){b=a}})}if(a.hasOwnProperty("currentTarget"))a.currentTarget=null;else{delete a.currentTarget;var c=null;Object.defineProperty(a,"currentTarget",{get:function(){return c},set:function(a){c=a}})}return fb(this,
a)};m.Ya=!1;m.ka=function(a,b){return this.dispatchEvent(x({type:"debug/shakaEvent",bubbles:!0,detail:{type:a,event:b}}))};function fb(a,b){b.currentTarget=a;for(var c=a.Ia.get(b.type)||[],d=0;d<c.length;++d){var e=c[d];try{e.handleEvent?e.handleEvent(b):e.call(a,b)}catch(f){}}a.da&&b.bubbles&&fb(a.da,b);return b.defaultPrevented};function E(a,b,c){D.call(this,null);this.b=a;this.c=null;this.f=new cb;this.h=null;this.C=0;this.w=null;this.g=!1;this.G=this.H=!0;this.j=!1;this.a={enableAdaptation:!0,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new la};this.l=b;this.v=c;this.i=null;this.m=1;this.F=null;this.o=!1}q(E,D);p("shaka.player.Player",E);E.version="v1.6.4-fb";
E.isBrowserSupported=function(){return!!window.MediaSource&&!!window.Uint8Array};
E.prototype.ia=function(){var a={},b=this.c;if(b){var c=b.jb();a.BandwidthEstimator=c.BandwidthEstimator;var d=c.VideoSourceStream;d&&(a.VideoSourceStream=d,(d=a.VideoBufferManager=d.ia().SourceBufferManager)&&(a.VideoSourceBuffer=d.ia().SourceBuffer));(d=a.AudioSourceStream=c.AudioSourceStream)&&(d=a.AudioBufferManager=d.ia().SourceBufferManager)&&(a.AudioSourceBuffer=d.ia().SourceBuffer);a.TextSourceStream=c.TextSourceStream;a.getManifest=b.hb.bind(b)}else a.getManifest=function(){};a.lc=!0;return a};
E.prototype.getDebug=E.prototype.ia;E.prototype.P=function(a){this.H=a};E.prototype.setResumeAfterBuffering=E.prototype.P;function gb(a){return"text/vtt"==a?!!window.VTTCue:MediaSource.isTypeSupported(a)}E.isTypeSupported=gb;E.setTextStyle=function(a){var b=document.getElementById("ShakaPlayerTextStyle");b||(b=document.createElement("style"),b.id="ShakaPlayerTextStyle",document.head.appendChild(b));for(b=b.sheet;b.cssRules.length;)b.deleteRule(0);b.insertRule("::cue { "+ra(a)+" }",0)};
E.prototype.destroy=function(){return this.D().then(F(this,function(){this.f.destroy();this.b=this.f=null})).catch(function(){})};E.prototype.destroy=E.prototype.destroy;E.prototype.D=function(){this.j=!0;return hb(this)};E.prototype.unload=E.prototype.D;
function hb(a){var b;a.l&&(b=a.l.getOperationLogger("unload").start());if(!a.c)return b&&b.log(),Promise.resolve();a.g&&ib(a);a.b.pause();db(a.f);jb(a);kb(a);a.c&&(a.c.destroy(),a.c=null);a.b.src="";var c=Promise.resolve().then(function(){b&&b.log()});a.g=!1;return c}E.prototype.aa=function(a){return lb(this,a)};E.prototype.load=E.prototype.aa;
function lb(a,b){var c;a.l&&(c=a.l.getOperationLogger("load").setState("loading").start(),b.l=b.g.performanceLogger=a.l);a.v&&(b.g.abrLogger=a.v);mb(b,a.b);var d=null;a.j=!1;a.c&&(d=hb(a).then(F(a,function(){return b.Fa()})));a.b.autoplay&&(ea("load"),C(a.f,a.b,"timeupdate",a.Sb.bind(a)));b.Fb(a.a);b.O=a.F;a.F=null;d||(d=b.Fa());d.catch(F(a,function(a){b.destroy();return Promise.reject(a)}));return d.then(F(a,function(){if(!this.b||this.j)return nb();this.c=b;C(this.f,this.c,"seekrangechanged",this.Yb.bind(this));
var a=new B,c;c=this.c;if(c.F){c=c.a.a[0];for(var d=[],h=0;h<c.a.length;++h)d.push.apply(d,ob(c.a[h]));c=d}else c=[];for(d=0;d<c.length;d++)a.push(c[d].contentType,c[d]);c=this.c;if(c.F){for(var d={},l=c.a.a[0],h=0;h<l.a.length;++h){var k=l.a[h];d[k.J]=k}c.f.a={};l=bb(a);for(h=0;h<l.length;++h){var k=l[h],n=a.get(k);if("video"==k){var t=n[0].id;c.f.push(k,d[t])}else if("audio"==k)for(var t=n[0].a.split(";")[0],w=0;w<n.length;++w){var J=n[w];J.a.split(";")[0]==t&&c.f.push(k,d[J.id])}else for(w=0;w<
n.length;++w)t=n[w].id,c.f.push(k,d[t])}c.aa=!0;if(a=c.f.get("audio"))pb(c,a),c.f.set("audio",a),a=a[0].lang||c.C,Qa(2,c.C,a)&&(c.aa=!1);if(a=c.f.get("text"))pb(c,a),c.f.set("text",a),a=a[0].lang||c.C,Qa(2,c.C,a)||(c.aa=!1)}C(this.f,this.b,"error",this.fc.bind(this));C(this.f,this.b,"playing",this.Xb.bind(this));C(this.f,this.b,"pause",this.Vb.bind(this));return sb(this.c,this,this.b)})).then(F(a,function(){if(!this.b||this.j)return nb();tb(this);c&&c.updateState("ready").log()})).catch(F(a,function(a){c&&
c.setError(JSON.stringify(a)).log();if(!this.b||this.j)return nb();if("destroy"!=a.type){var b=y(a);this.dispatchEvent(b)}return this.D().then(function(){return Promise.reject(a)})}))}function nb(){var a=Error("Player destroyed");a.type="destroy";return Promise.reject(a)}m=E.prototype;m.Sb=function(){ia("load");this.f.Aa(this.b,"timeupdate")};
m.fc=function(){if(this.b.error){var a=this.b.error.code;a!=MediaError.MEDIA_ERR_ABORTED&&(a=Error(ub[a]||"Unknown playback error."),a.type="playback",a=y(a),this.dispatchEvent(a))}};m.Xb=function(){ea("playing");this.l&&this.l.getEventLogger("playing").setState("playing").log();!this.h&&0>this.m&&(this.b.playbackRate=0,this.B(this.b.currentTime,Date.now(),this.m));this.g&&!this.G&&ib(this)};m.Vb=function(){this.l&&this.l.getEventLogger("pause").setState("paused").log();ia("playing");kb(this)};
m.Yb=function(a){this.C=a.start};m.ec=function(){return this.c?this.c.N():[]};E.prototype.getVideoTracks=E.prototype.ec;E.prototype.W=function(){return this.c?this.c.Na():[]};E.prototype.getAudioTracks=E.prototype.W;E.prototype.$=function(){return this.c?this.c.Gb():[]};E.prototype.getTextTracks=E.prototype.$;E.prototype.selectVideoTrack=function(a,b){return this.c?this.c.selectVideoTrack(a,void 0==b?!0:b):!1};E.prototype.selectVideoTrack=E.prototype.selectVideoTrack;
E.prototype.ea=function(a,b,c){return this.c?vb(this.c,"audio",a,void 0==b?!0:b,c):!1};E.prototype.selectAudioTrack=E.prototype.ea;E.prototype.fa=function(a){return this.c?vb(this.c,"text",a,!1):!1};E.prototype.selectTextTrack=E.prototype.fa;E.prototype.V=function(a){this.c&&wb(this.c,a)};E.prototype.enableTextTrack=E.prototype.V;E.prototype.O=function(a){kb(this);this.o&&this.g||!(0<=a)?this.b.paused||(this.b.playbackRate=0,this.B(this.b.currentTime,Date.now(),a)):this.b.playbackRate=a;this.m=a};
E.prototype.setPlaybackRate=E.prototype.O;E.prototype.M=function(){return this.m};E.prototype.getPlaybackRate=E.prototype.M;E.prototype.ga=function(a){this.F=a};E.prototype.setPlaybackStartTime=E.prototype.ga;E.prototype.K=function(){return this.c?!!this.c.Oa():!1};E.prototype.isLive=E.prototype.K;
E.prototype.U=function(a){if(a){var b=z(a,"enableAdaptation");null!=b&&(this.a.enableAdaptation=b);b=z(a,"endBufferingOnPlaying");null!=b&&(this.G=b);b=z(a,"usePlaybackRateForBuffering");null!=b&&(this.o=b);b=A(a,"streamBufferSize",0);null!=b&&(this.a.streamBufferSize=b);b=A(a,"dynamicStreamBufferSize",0);null!=b&&(this.a.dynamicStreamBufferSize=b);null!=a.smartBufferAdjustmentParams&&(this.a.smartBufferAdjustmentParams=a.smartBufferAdjustmentParams);b=z(a,"addCdnDebugQueryParameters");null!=b&&(this.a.addCdnDebugQueryParameters=
b);b=A(a,"initialStreamBufferSize",0);null!=b&&(this.a.initialStreamBufferSize=b);b=z(a,"includeStreamBufferSizeInStartOffset");null!=b&&(this.a.includeStreamBufferSizeInStartOffset=b);b=A(a,"jumpToLiveThreshold");null!=b&&(this.a.jumpToLiveThreshold=b);b=A(a,"liveStreamEndTimeout",0);null!=b&&(this.a.liveStreamEndTimeout=b);b=A(a,"licenseRequestTimeout",0);null!=b&&(this.a.licenseRequestTimeout=b);b=A(a,"mpdRequestTimeout",0);null!=b&&(this.a.mpdRequestTimeout=b);b=A(a,"minMpdRefreshInterval",0);
null!=b&&(this.a.minMpdRefreshInterval=b);b=z(a,"enableLiveInterruptionDetection");null!=b&&(this.a.enableLiveInterruptionDetection=b);b=z(a,"enableManifestDebug");null!=b&&(this.a.enableManifestDebug=b,D.prototype.Ya=b,b||(D.prototype.ka=function(){}));b=z(a,"resolveVideoTimeUpdateOnFragmentedTimeRanges");null!=b&&(this.a.resolveVideoTimeUpdateOnFragmentedTimeRanges=b);b=A(a,"liveInterruptionConsecutiveUpdatesWithoutChange");null!=b&&(this.a.liveInterruptionConsecutiveUpdatesWithoutChange=b);b=A(a,
"liveInterruptionConsecutiveUpdatesWithChange");null!=b&&(this.a.liveInterruptionConsecutiveUpdatesWithChange=b);b=z(a,"reappendInitSegmentAfterAbort");null!=b&&(this.a.reappendInitSegmentAfterAbort=b);b=z(a,"liveSendPushHeaders");null!=b&&(this.a.liveSendPushHeaders=b);b=A(a,"liveMaxManifestFetchesWithPush");null!=b&&(this.a.liveMaxManifestFetchesWithPush=b);b=A(a,"liveMaxSegmentsToPush");null!=b&&(this.a.liveMaxSegmentsToPush=b);b=A(a,"segmentRequestTimeout",0);null!=b&&(this.a.segmentRequestTimeout=
b);b=Ya(a,"preferredLanguage");null!=b&&(this.a.preferredLanguage=b);b=Za(a,"restrictions",la);null!=b&&(this.a.restrictions=b.clone());b=a.liveInitialPushRepresentation;null!=b&&(this.a.liveInitialPushRepresentation=b);b=a.liveAudioPushRepresentation;null!=b&&(this.a.liveAudioPushRepresentation=b);b=a.useInlineInitSegment;null!=b&&(this.a.useInlineInitSegment=b);b=z(a,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=b&&(xb=!b);b=z(a,"currentTimeDuringReadyStateZeroThrows");null!=
b&&(this.a.currentTimeDuringReadyStateZeroThrows=b);b=A(a,"liveDataFetchMaxRetries");null!=b&&(this.a.liveDataFetchMaxRetries=b);b=A(a,"liveSourceBufferClearMaxRetries");null!=b&&(this.a.liveSourceBufferClearMaxRetries=b);b=z(a,"useLongCacheForManifest");null!=b&&(this.a.useLongCacheForManifest=b);b=z(a,"jumpToEarliestPositionInCurrentBlock");null!=b&&(this.a.jumpToEarliestPositionInCurrentBlock=b);b=z(a,"ignoreMinBufferTime");null!=b&&(this.a.ignoreMinBufferTime=b);b=A(a,"playheadFragmentedGapDiffAllowance");
null!=b&&(this.a.playheadFragmentedGapDiffAllowance=b);b=z(a,"fixBufferingGoalDetermination");null!=b&&(this.a.fixBufferingGoalDetermination=b);b=z(a,"skipEmptySegments");null!=b&&(this.a.skipEmptySegments=b);(a=z(a,"useMicroTaskTimeouts"))&&(this.a.useMicroTaskTimeouts=a);this.c&&this.c.Fb(this.a)}};E.prototype.configure=E.prototype.U;E.prototype.Z=function(){return this.a};E.prototype.getConfiguration=E.prototype.Z;function kb(a){a.h&&(clearTimeout(a.h),a.h=null)}
function tb(a){jb(a);a.w=setTimeout(a.N.bind(a),100)}function jb(a){a.w&&(clearTimeout(a.w),a.w=null)}E.prototype.B=function(a,b,c){this.h=null;var d=(Date.now()-b)/1E3*c;this.b.currentTime<this.C+(this.K()?1:.05)?this.b.pause():(d=Math.max(this.C,a+d),this.b.currentTime=d,this.h=setTimeout(this.B.bind(this,a,b,c),250))};
function ib(a){ia("buffering");a.i&&(a.i.log(),a.i=null);if(a.v){var b=Date.now();a.v.setEvent("buffering").setClientTimeBegin(Math.round(b-ja())).setClientTimeEnd(Math.round(b)).log()}a.o&&(a.b.playbackRate=a.m);a.g=!1;a.dispatchEvent(x({type:"bufferingEnd"}))}
E.prototype.N=function(){tb(this);if(!this.b.ended&&!this.b.seeking){var a=this.b.buffered,b=a.length?a.end(a.length-1):0,a=Math.max(b-this.b.currentTime,0),c=this.b.currentTime,d=this.b.duration,d=isNaN(d)?0:Math.max(d-.05,0),b=b>=d||c>=d;if(!this.g)!this.b.paused&&!b&&.5>a&&(this.g=!0,this.o?this.b.playbackRate=0:this.b.pause(),this.l&&!this.i&&(a=this.b.buffered,a=a.length?a.end(a.length-1):0,a=Math.max(a-this.b.currentTime,0),a=1E3*(yb(this.c)-a),this.i=this.l.getOperationLogger("buffering").setLength(Math.round(a)).start()),
ea("buffering"),this.dispatchEvent(x({type:"bufferingStart"}))),zb(this.c)&&ib(this);else if(a>yb(this.c)||zb(this.c))ib(this),this.H&&!this.o&&this.b.play()}};E.prototype.R=function(a){if(this.c){var b=this.c;b.b.video&&b.b.video.yb(a)}};E.prototype.setVideoStreamOffset=E.prototype.R;var ub={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function G(a){D.call(this,null);this.a=new Na(3);this.h=new Na(10);this.f=a||5E5;this.g=0}q(G,D);p("shaka.util.EWMABandwidthEstimator",G);
G.prototype.sample=function(a,b,c,d,e){if(VideoPlayerShakaExperiments.changeAbrAudioExclusionLogic?!c:65536>b)e&&e.setEvent("unsampled").setReason("audio").log();else{if(VideoPlayerShakaExperiments.useResourceTimingEntryForBandwidth){if(!d){e&&e.setEvent("unsampled").setReason("resource_timing_entry_missing").log();return}a=d.timeToLastByte;if(0>a){e&&e.setEvent("unsampled").setReason("resource_timing_entry_invalid").log();return}}a=Math.max(a,50);c=8E3*b/a;var f=a/1E3;this.a.sample(f,c,d);this.h.sample(f,
c,d);this.dispatchEvent(x({type:"bandwidth"}));e&&e.setEvent("sampled").setBytes(b).setDelayMs(parseInt(a,10)).log();this.g=Date.now()}};G.prototype.getBandwidth=function(){return.5>this.a.a?this.f:Math.min(Oa(this.a),Oa(this.h))};G.prototype.getFastMovingBandwidth=function(){return.5>this.a.a?this.f:Oa(this.a)};G.prototype.getDataAge=function(){return(Date.now()-this.g)/1E3};G.prototype.supportsCaching=function(){return!1};/*

 Copyright 2015 Facebook Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Ab(a,b,c){G.call(this,c);this.c=a||0;this.b=void 0===b?Infinity:b}q(Ab,G);p("shaka.util.EWMACacheBandwidthEstimator",Ab);Ab.prototype.sample=function(a,b,c,d,e){var f=8E3*b/a;e&&e.setBytes(b).setDelayMs(parseInt(a,10));a<=this.c&&f>this.b?e&&e.setEvent("unsampled").setReason("cached").log():G.prototype.sample.call(this,a,b,c,d,e)};Ab.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c};function Bb(){G.call(this)}q(Bb,G);p("shaka.util.EWMASignedURLBandwidthEstimator",Bb);Bb.prototype.supportsCaching=function(){return!0};function H(){var a,b,c=new Promise(function(c,e){a=c;b=e});c.resolve=a;c.reject=b;c.destroy=H.prototype.destroy;return c}H.prototype.destroy=function(){this.catch(function(){});var a=Error("Destroyed!");a.type="destroy";this.reject(a)};function Cb(){this.Ga=new H;this.c=!1;this.ha=null;this.a=[];this.b=null}function Db(a,b){if(a.c)throw Error("Cannot append to a running task!");a.a.push(b)}Cb.prototype.start=function(){if(this.c)throw Error("Task already started!");this.c=!0;this.a.unshift(function(){});Eb(this,void 0)};Cb.prototype.end=function(){this.a.splice(1)};
function Eb(a,b){var c=a.a[0](b),d;c?(d=c[0],a.b=c[1]):(d=Promise.resolve(),a.b=null);d.then(F(a,function(a){this.ha?(this.a=[],this.b=null,Fb(this)):(this.a.shift(),this.a.length?Eb(this,a):(this.Ga.resolve(a),this.b=null))})).catch(F(a,function(a){this.a=[];this.b=null;this.ha?Fb(this):this.Ga.reject(a)}))}
function Fb(a){function b(){var a=Error("Task aborted.");a.type="aborted";this.Ga.reject(a);setTimeout(function(){this.ha.resolve();this.ha=null}.bind(this),5)}a.f?a.f.then(function(){this.f=null;b.call(this)}.bind(a)):b.call(a)};function F(a,b){return b.bind(a)};function Gb(a,b,c,d,e){MediaSource.isTypeSupported(b);D.call(this,d);d=a.addSourceBuffer(b);this.v=a;this.a=d;this.N=c;this.C=new cb;this.K=this.l=this.U=null;this.H=!1;this.G=this.F=this.D=0;this.B=null;this.R=this.w=!1;this.W=e;this.c=[];this.P=0;this.i=this.f=this.b=null;this.j=this.o=this.O=0;this.M=!1;this.g=b&&b.charAt(0);C(this.C,this.a,"updateend",this.V.bind(this));this.m=null}q(Gb,D);Gb.prototype.ia=function(){return{SourceBuffer:this.a}};
function Hb(a,b,c){a.Ya&&a.ka(b,{type:a.g.charAt(0),segment:c,sourceBuffer:a.a})}var Ib=1/60;Gb.prototype.destroy=function(){Jb(this).catch(function(){});this.f&&this.f.destroy();this.c=this.b=this.f=null;this.C.destroy();this.v=this.a=this.C=null};function Kb(a,b){for(var c=a.a.buffered,d=0;d<c.length;++d){var e=c.start(d)-Ib,f=c.end(d)+Ib;if(b>=e&&b<=f)return c.end(d)-b}return 0}
function Lb(a,b,c){b=b.endTime?b.endTime-b.startTime:1;var d=new Mb;d.c=3;d.m=1E3*b;d.g=1E3*a.O;d.v=a.U;d.o=c;d.T=a.W;d.b=a.g;return d}
function Nb(a,b,c,d,e,f){var g;a.l&&(g=a.l.getOperationLogger("fetch").setResource(b.url.toString()).setMimeType(a.g).setLength(Math.round(1E3*(b.endTime-b.startTime))).start());a.m=g;if(a.b)return d=Error("Cannot fetch ("+a.g+"): previous operation not complete."),a.o>=a.D?(d.type="stream",g&&g.setError(d).log(),a.o=0):(a.o++,d.type="aborted"),Promise.reject(d);a.b=new Cb;d!=a.a.timestampOffset&&(a.a.timestampOffset=d);d=Lb(a,b,f);var h=Ob(b.url,d,a.N,a.l,a.m,a.K,a.g);Hb(a,"SegmentFetching",b);var l=
K.prototype.g.bind(b.url);a.B&&a.w&&(e=a.B);var k=0;e&&(a.B=e,a.w=!1,Db(a.b,function(){return[e.then(function(a){a.va>k&&(k=a.va);return Pb(this,a,null)}.bind(this)),this.h.bind(this)]}.bind(a)));Db(a.b,F(a,function(){return[h.then(function(a){Hb(this,"SegmentFetched",b);a.va>k&&(k=a.va);ca((this.N.getBandwidth()/1E6).toFixed(2));this.M&&extractCEA608(a,c).then(function(a){a.length&&this.dispatchEvent(x({type:"cea608-captions",bubbles:!0,detail:{captions:a}}))}.bind(this)).catch(function(a){console.error(a)});
return Pb(this,a,b)}.bind(this)),function(){Hb(this,"SegmentFailed",b);l();return this.h()}.bind(this)]}));var n=0==a.a.buffered.length&&0==a.c.length,t=null;Db(a.b,function(){if(0==this.a.buffered.length&&!this.R){var a=Error("Failed to buffer segment ("+this.g+").");a.type="stream";return[Promise.reject(a)]}this.a.buffered.length&&n&&(a=b.startTime,t=this.a.buffered.start(0)-a);a=Qb(this.c,b.startTime);0<=a?this.c.splice(a+1,0,b):this.c.push(b)}.bind(a));a.o=0;return Rb(a).then(function(){g&&g.log();
return Promise.resolve({ca:t,Ob:k})}.bind(a),function(a){g&&g.setError(a).log();return Promise.reject(a)})}
function Sb(a){if(a.b){var b=Error("Cannot clear ("+a.g+"): previous operation not complete.");a.j>=a.F?(b.type="stream",a.j=0):(a.j++,b.type="aborted");return Promise.reject(b)}a.b=new Cb;Db(a.b,function(){var a;a:if(0==this.a.buffered.length)a=Promise.resolve();else{try{this.a.remove(0,this.v.duration)}catch(b){a=Promise.reject(b);break a}this.c=[];a=this.f=new H}return[a,this.h.bind(this)]}.bind(a));a.j=0;return Rb(a)}
function Tb(a,b){if(a.b){var c=Error("Cannot clearAfter ("+a.g+"): previous operation not complete.");c.type="stream";return Promise.reject(c)}a.b=new Cb;Db(a.b,function(){return[Ub(this,b),this.h.bind(this)]}.bind(a));return Rb(a)}function Jb(a){a.b?(a=a.b,a.ha?a=a.ha:a.c?(a.b&&(a.f=a.b()),a.ha=new H,a=a.ha):(a.c=!0,a=Promise.resolve())):a=Promise.resolve();return a}
function Vb(a){for(var b=a.currentTime,c=b,d=0;d<a.buffered.length;d++)if(b<=a.buffered.start(d)){c=a.buffered.start(d);break}return c}function Wb(a,b){for(var c=b.currentTime,d=0;d<b.buffered.length;d++)if(c>=b.buffered.start(d)&&c<=b.buffered.end(d)-a.G)return!1;return!0}function Rb(a){a.b.start();return a.b.Ga.then(F(a,function(){this.b=null})).catch(F(a,function(a){this.b=null;return Promise.reject(a)}))}
function Pb(a,b,c){var d;if(a.l){var e=c?c.url.toString():"init";d=a.l.getOperationLogger("append").setResource(e).setMimeType(a.g).setLength(b.byteLength).start();a.m&&(d=d.setParentLogger(a.m))}try{a.a.appendBuffer(b)}catch(f){return d&&d.setError(f).log(),Promise.reject(f)}a.f=new H;a.i=c;return a.f.then(function(){d&&d.log()},function(a){d&&d.setError(a).log();return Promise.reject(a)})}
function Ub(a,b){if(0==a.a.buffered.length)return Promise.resolve();var c=Qb(a.c,b);if(-1==c||c==a.c.length-1)return Promise.resolve();try{a.a.remove(a.c[c+1].startTime,a.v.duration)}catch(d){return Promise.reject(d)}a.c=a.c.slice(0,c+1);a.f=new H;return a.f}Gb.prototype.h=function(){if(this.f){if("open"==this.v.readyState){var a=Error("Previous operation aborted.");a.type="aborted";this.f.reject(a);this.a.abort();this.H&&(this.w=!0);this.f=new H}return this.f}return Promise.resolve()};
Gb.prototype.V=function(){this.f&&(this.i&&(Hb(this,"SegmentAppended",this.i),this.i=null),this.f.resolve(),this.f=null)};function Xb(a){return String.fromCharCode.apply(null,a)}p("shaka.util.Uint8ArrayUtils.toString",Xb);function Yb(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}p("shaka.util.Uint8ArrayUtils.fromString",Yb);p("shaka.util.Uint8ArrayUtils.toBase64",function(a,b){var c=void 0==b?!0:b,d=window.btoa(Xb(a)).replace(/\+/g,"-").replace(/\//g,"_");return c?d:d.replace(/=*$/,"")});function Zb(a){return Yb(window.atob(a.replace(/-/g,"+").replace(/_/g,"/")))}
p("shaka.util.Uint8ArrayUtils.fromBase64",Zb);p("shaka.util.Uint8ArrayUtils.fromHex",function(a){for(var b=new Uint8Array(a.length/2),c=0;c<a.length;c+=2)b[c/2]=window.parseInt(a.substr(c,2),16);return b});function $b(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d);b+=d}return b}p("shaka.util.Uint8ArrayUtils.toHex",$b);function Ka(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0};function ac(){this.g=this.b="";this.m=!1;this.v=this.o=null;this.h=this.f=!1;this.j=this.c="";this.i=null;this.a=[]}function bc(a,b){var c=a.a.concat(b.map(function(a){return{initData:new Uint8Array(a.initData.buffer),initDataType:a.initDataType}}));a.a=wa(c)}function xa(a,b){return a.initDataType==b.initDataType&&Ka(a.initData,b.initData)};function cc(a,b,c,d){this.a=[];d&&this.a.push(d)}p("shaka.player.DrmSchemeInfo",cc);cc.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};cc.PersistentState={OPTIONAL:0,REQUIRED:1};cc.createUnencrypted=function(){return new cc(0,0,0,null)};function dc(a){this.systemIds=[];this.cencKeyIds=[];this.a=[];a=new Aa(new DataView(a.buffer));try{for(;Da(a);){var b=a.a,c=r(a),d=r(a);1==c?c=Fa(a):0==c&&(c=a.b.byteLength-b);if(1886614376!=d)u(a,c-(a.a-b));else{var e=Ea(a);if(1<e)u(a,c-(a.a-b));else{u(a,3);var f=$b(Ga(a)),g=[];if(0<e)for(var h=r(a),l=0;l<h;++l){var k=$b(Ga(a));g.push(k)}var n=r(a);u(a,n);this.cencKeyIds.push.apply(this.cencKeyIds,g);this.systemIds.push(f);this.a.push({start:b,end:a.a-1});a.a!=b+c&&u(a,c-(a.a-b))}}}}catch(t){}};var ec=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function L(a){var b;a instanceof L?(fc(this,a.ba),this.oa=a.oa,this.X=a.X,gc(this,a.ua),this.Y=a.Y,hc(this,a.a.clone()),this.la=a.la):a&&(b=String(a).match(ec))?(fc(this,b[1]||"",!0),this.oa=ic(b[2]||""),this.X=ic(b[3]||"",!0),gc(this,b[4]),this.Y=ic(b[5]||"",!0),hc(this,b[6]||"",!0),this.la=ic(b[7]||"")):this.a=new jc(null)}m=L.prototype;m.ba="";m.oa="";m.X="";m.ua=null;m.Y="";m.la="";
m.toString=function(){var a=[],b=this.ba;b&&a.push(kc(b,lc,!0),":");if(b=this.X){a.push("//");var c=this.oa;c&&a.push(kc(c,lc,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.ua;null!=b&&a.push(":",String(b))}if(b=this.Y)this.X&&"/"!=b.charAt(0)&&a.push("/"),a.push(kc(b,"/"==b.charAt(0)?mc:nc,!0));(b=this.a.toString())&&a.push("?",b);(b=this.la)&&a.push("#",kc(b,pc));return a.join("")};
m.resolve=function(a){var b=this.clone();"data"===b.ba&&(b=new L);var c=!!a.ba;c?fc(b,a.ba):c=!!a.oa;c?b.oa=a.oa:c=!!a.X;c?b.X=a.X:c=null!=a.ua;var d=a.Y;if(c)gc(b,a.ua);else if(c=!!a.Y){if("/"!=d.charAt(0))if(this.X&&!this.Y)d="/"+d;else{var e=b.Y.lastIndexOf("/");-1!=e&&(d=b.Y.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=0==d.lastIndexOf("/",0),d=d.split("/"),f=[],g=0;g<d.length;){var h=d[g++];"."==h?e&&g==d.length&&f.push(""):".."==h?((1<
f.length||1==f.length&&""!=f[0])&&f.pop(),e&&g==d.length&&f.push("")):(f.push(h),e=!0)}d=f.join("/")}}c?b.Y=d:c=""!==a.a.toString();c?hc(b,a.a.clone()):c=!!a.la;c&&(b.la=a.la);return b};m.clone=function(){return new L(this)};function fc(a,b,c){a.ba=c?ic(b,!0):b;a.ba&&(a.ba=a.ba.replace(/:$/,""))}function gc(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.ua=b}else a.ua=null}function hc(a,b,c){b instanceof jc?a.a=b:(c||(b=kc(b,qc)),a.a=new jc(b))}
function ic(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function kc(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,rc),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function rc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var lc=/[#\/\?@]/g,nc=/[\#\?:]/g,mc=/[\#\?]/g,qc=/[\#\?@]/g,pc=/#/g;function jc(a){this.b=a||null}jc.prototype.a=null;jc.prototype.c=null;
function M(a,b,c){if(!a.a&&(a.a={},a.c=0,a.b))for(var d=a.b.split("&"),e=0;e<d.length;e++){var f=d[e].indexOf("="),g=null,h=null;0<=f?(g=d[e].substring(0,f),h=d[e].substring(f+1)):g=d[e];g=decodeURIComponent(g.replace(/\+/g," "));h=h||"";M(a,g,decodeURIComponent(h.replace(/\+/g," ")))}a.b=null;(d=a.a.hasOwnProperty(b)&&a.a[b])||(a.a[b]=d=[]);d.push(c);a.c++}
jc.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var a=[],b;for(b in this.a)for(var c=encodeURIComponent(b),d=this.a[b],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e]));a.push(f)}return this.b=a.join("&")};jc.prototype.clone=function(){var a=new jc;a.b=this.b;if(this.a){var b={},c;for(c in this.a)b[c]=this.a[c].concat();a.a=b;a.c=this.c}return a};function sc(a,b,c){var d=a.indexOf("<?xml");0<=d&&(a=a.substr(d));a=(new DOMParser).parseFromString(a,"text/xml");if(!a)return null;"string"===typeof b&&(b=[new L(b)]);b=b||[new L("")];c=c||[new L("")];return N({qb:b,baseUrl:c},a,tc)}p("shaka.dash.mpd.parseMpd",sc);function tc(){this.id=this.url=null;this.type="static";this.b=this.j=this.baseUrl=this.qb=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[]}
function uc(){this.g=this.f=this.c=this.baseUrl=this.a=this.start=this.id=null;this.b=[]}function vc(){this.j=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.f=!1;this.i=this.h=this.g=this.baseUrl=null;this.m=[];this.a=[];this.c=null}function wc(){this.value=null}function xc(){this.lang=this.a=null}function yc(){this.contentType=this.lang=this.id=null}
function zc(){this.a=this.b=this.g=this.baseUrl=this.fbQualityClass=this.fbQualityLabel=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[]}function Ac(){this.b=this.a=this.f=this.c=null}function Bc(){this.parsedPssh=this.psshBox=null}function Cc(){this.url=null}function Dc(){this.url=null}function Ec(){this.baseUrl=null;this.a=1;this.f=this.c=this.g=this.b=this.h=null}
Ec.prototype.clone=function(){var a=new Ec;a.baseUrl=Fc(this.baseUrl);a.a=this.a;a.h=this.h;a.b=O(this.b);a.g=O(this.g);a.c=O(this.c);a.f=O(this.f);return a};function Gc(){this.a=this.url=null}Gc.prototype.clone=function(){var a=new Gc;a.url=Fc(this.url);a.a=O(this.a);return a};function Hc(){this.a=this.url=null}Hc.prototype.clone=function(){var a=new Hc;a.url=Fc(this.url);a.a=O(this.a);return a};
function Ic(){this.baseUrl=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null}Ic.prototype.clone=function(){var a=new Ic;a.baseUrl=Fc(this.baseUrl);a.a=this.a;a.g=this.g;a.c=this.c;a.i=this.i;a.h=O(this.h);a.b=Fc(this.b)||[];a.f=O(this.f);return a};function Jc(){this.a=this.b=null}Jc.prototype.clone=function(){var a=new Jc;a.b=Fc(this.b);a.a=O(this.a);return a};function Kc(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null}
Kc.prototype.clone=function(){var a=new Kc;a.a=this.a;a.i=this.i;a.b=this.b;a.j=this.j;a.h=this.h;a.f=this.f;a.g=this.g;a.c=O(this.c);return a};function Lc(){this.a=[]}Lc.prototype.clone=function(){var a=new Lc;a.a=Fc(this.a)||[];return a};function Mc(){this.b=this.a=this.startTime=null}Mc.prototype.clone=function(){var a=new Mc;a.startTime=this.startTime;a.a=this.a;a.b=this.b;return a};function Nc(a,b){this.sa=a;this.end=b}Nc.prototype.clone=function(){return new Nc(this.sa,this.end)};
tc.TAG_NAME="MPD";uc.TAG_NAME="Period";vc.TAG_NAME="AdaptationSet";wc.TAG_NAME="Role";xc.TAG_NAME="Accessibility";yc.TAG_NAME="ContentComponent";zc.TAG_NAME="Representation";Ac.TAG_NAME="ContentProtection";Bc.TAG_NAME="cenc:pssh";Cc.TAG_NAME="BaseURL";Dc.TAG_NAME="Location";Ec.TAG_NAME="SegmentBase";Gc.TAG_NAME="RepresentationIndex";Hc.TAG_NAME="Initialization";Ic.TAG_NAME="SegmentList";Jc.TAG_NAME="SegmentURL";Kc.TAG_NAME="SegmentTemplate";Lc.TAG_NAME="SegmentTimeline";Mc.TAG_NAME="S";
tc.prototype.parse=function(a,b){this.url=a.qb;this.id=P(b,"id",Q);this.type=P(b,"type",Q)||"static";this.b=P(b,"mediaPresentationDuration",Oc);this.h=P(b,"minBufferTime",Oc,this.h);this.g=P(b,"minimumUpdatePeriod",Oc,this.g);this.c=P(b,"availabilityStartTime",Pc,this.c);this.f=P(b,"timeShiftBufferDepth",Oc,this.f);this.f=null;this.i=P(b,"suggestedPresentationDelay",Oc,this.i);var c=a.baseUrl,d=R(this,b,Cc);this.baseUrl=Qc(c,d);if(d=N(this,b,Dc))this.j=Rc(c,d.url);this.a=R(this,b,uc)};
function Sc(a,b,c,d){if(0!==a.a.length){var e=new vc;e.contentType="text";e.lang=c||"en";e.f=!0;c=new zc;c.bandwidth=0;c.f=d||"text/vtt";c.baseUrl=[new L(b)];e.a.push(c);a.a[0].b.push(e);Tc(a.a[0])}}uc.prototype.parse=function(a,b){this.id=P(b,"id",Q);this.start=P(b,"start",Oc);this.a=P(b,"duration",Oc);var c=R(this,b,Cc);this.baseUrl=Qc(a.baseUrl,c);this.c=N(this,b,Ec);this.f=N(this,b,Ic);this.g=N(this,b,Kc);this.b=R(this,b,vc);Tc(this)};
function Tc(a){for(var b=[],c=0;c<a.b.length;++c){var d=a.b[c];null!=d.group&&(b[d.group]=!0)}for(c=0;c<a.b.length;++c)if(d=a.b[c],null==d.group){for(var e=1;1==b[e];)++e;b[e]=!0;d.group=e}}
vc.prototype.parse=function(a,b){var c=N(this,b,yc)||{},d=N(this,b,wc);this.id=P(b,"id",Q);this.group=P(b,"group",S);this.lang=P(b,"lang",Q,c.lang);this.contentType=P(b,"contentType",Q,c.contentType);this.width=P(b,"width",T);this.height=P(b,"height",T);this.b=P(b,"mimeType",Q);this.j=P(b,"codecs",Q);this.f=d&&"main"==d.value;this.lang&&(this.lang=Ra(this.lang));c=R(this,b,Cc);this.baseUrl=Qc(a.baseUrl,c);this.m=R(this,b,Ac);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.g=
a.c?Uc(this,b,a.c):N(this,b,Ec);this.h=a.f?Uc(this,b,a.f):N(this,b,Ic);this.i=a.g?Uc(this,b,a.g):N(this,b,Kc);this.a=R(this,b,zc);this.c=N(this,b,xc);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]))};wc.prototype.parse=function(a,b){this.value=P(b,"value",Q)};xc.prototype.parse=function(a,b){this.a=P(b,"schemeIdUri",Q);this.lang=P(b,"lang",Q)};
yc.prototype.parse=function(a,b){this.id=P(b,"id",Q);this.lang=P(b,"lang",Q);this.contentType=P(b,"contentType",Q);this.lang&&(this.lang=Ra(this.lang))};
zc.prototype.parse=function(a,b){this.id=P(b,"id",Q);this.bandwidth=P(b,"bandwidth",T);this.width=P(b,"width",T,a.width);this.height=P(b,"height",T,a.height);this.f=P(b,"mimeType",Q,a.b);this.h=P(b,"codecs",Q,a.j);this.fbQualityLabel=P(b,"FBQualityLabel",Q);this.fbQualityClass=P(b,"FBQualityClass",Q);this.lang=a.lang;var c=R(this,b,Cc);this.baseUrl=Qc(a.baseUrl,c);this.c=R(this,b,Ac);this.g=a.g?Uc(this,b,a.g):N(this,b,Ec);this.b=a.h?Uc(this,b,a.h):N(this,b,Ic);this.a=a.i?Uc(this,b,a.i):N(this,b,Kc);
this.c=this.c.concat(a.m)};Ac.prototype.parse=function(a,b){this.c=b;this.f=P(b,"schemeIdUri",Q);var c=P(b,"cenc:default_KID",Q);c&&(this.b=c.replace(/[-]/g,""));this.a=N(this,b,Bc)};Bc.prototype.parse=function(a,b){var c=Vc(b);if(c){this.psshBox=Zb(c);try{this.parsedPssh=new dc(this.psshBox)}catch(d){if(!(d instanceof RangeError))throw d;}}};
Cc.prototype.parse=function(a,b){var c=b.childNodes,d="";if(1==c.length)d=Vc(b);else for(var e=0;e<c.length;e++)c[e].nodeType==Node.TEXT_NODE&&(d+=c[e].nodeValue);this.url=d};Dc.prototype.parse=function(a,b){this.url=Vc(b)};
Ec.prototype.parse=function(a,b){this.baseUrl=a.baseUrl||this.baseUrl;this.a=P(b,"timescale",T,this.a);this.h=P(b,"presentationTimeOffset",S,this.h);this.b=P(b,"indexRange",Wc,this.b);this.g=P(b,"FBFirstSegmentRange",Wc,this.g);this.c=N(this,b,Gc)||this.c;this.f=N(this,b,Hc)||this.f};Gc.prototype.parse=function(a,b){var c=P(b,"sourceURL",Q);this.url=Rc(a.baseUrl,c);this.a=P(b,"range",Wc,O(a.b))};
Hc.prototype.parse=function(a,b){var c=P(b,"sourceURL",Q);this.url=Rc(a.baseUrl,c);this.a=P(b,"range",Wc)};Ic.prototype.parse=function(a,b){this.baseUrl=a.baseUrl||this.baseUrl;this.a=P(b,"timescale",T,this.a);this.g=P(b,"presentationTimeOffset",S,this.g);this.c=P(b,"duration",T,this.c);var c=P(b,"startNumber",T);null!=c&&(this.i=c);this.h=N(this,b,Hc)||this.h;this.b=(c=R(this,b,Jc))&&0<c.length?c:this.b;this.f=N(this,b,Lc)||this.f};
Jc.prototype.parse=function(a,b){var c=P(b,"media",Q);this.b=Rc(a.baseUrl,c);this.a=P(b,"mediaRange",Wc)};Kc.prototype.parse=function(a,b){this.a=P(b,"timescale",T,this.a);this.i=P(b,"presentationTimeOffset",S,this.i);this.b=P(b,"duration",T,this.b);var c=P(b,"startNumber",S);null!=c&&(this.j=c);this.h=P(b,"media",Q,this.h);this.f=P(b,"index",Q,this.f);this.g=P(b,"initialization",Q,this.g);this.c=N(this,b,Lc)||this.c};Lc.prototype.parse=function(a,b){this.a=R(this,b,Mc)};
Mc.prototype.parse=function(a,b){this.startTime=P(b,"t",S);this.a=P(b,"d",S);this.b=P(b,"r",Xc)};function Qc(a,b){if(!b||0===b.length)return a;for(var c=[],d=0;d<b.length;d++){var e=b[d].url;null==a||0===a.length?c.push(new L(e)):(e=Rc(a.slice(0,1),e),c.push(e[0]))}return c}function Rc(a,b){if(!b)return a;var c=new L(b);return a?a.map(function(a){return a.resolve(c)}):[c]}function Uc(a,b,c){var d=O(c);(b=Yc(b,c.constructor.TAG_NAME))&&d.parse(a,b);return d}
function N(a,b,c){var d=null;if(b=Yc(b,c.TAG_NAME))d=new c,d.parse(a,b);return d}function Yc(a,b){for(var c=null,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==b){if(c)return null;c=a.childNodes[d]}return c}function R(a,b,c){for(var d=[],e=0;e<b.childNodes.length;e++)if(b.childNodes[e].tagName==c.TAG_NAME){var f=new c;f.parse.call(f,a,b.childNodes[e]);d.push(f)}return d}function Vc(a){a=a.firstChild;return a.nodeType!=Node.TEXT_NODE?null:a.nodeValue}
function Fc(a){return a?a.map(function(a){return a.clone()}):null}function O(a){return a?a.clone():null}function P(a,b,c,d){a=c(a.getAttribute(b));return null!=a?a:void 0!==d?d:null}function Pc(a){if(!a)return null;a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)}
function Oc(a){if(!a)return null;var b=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!b)return null;a=0;var c=S(b[1]);c&&(a+=31536E3*c);(c=S(b[2]))&&(a+=2592E3*c);(c=S(b[3]))&&(a+=86400*c);(c=S(b[4]))&&(a+=3600*c);(c=S(b[5]))&&(a+=60*c);b=window.parseFloat(b[6]);(b=isNaN(b)?null:b)&&(a+=b);return a}
function Wc(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=S(b[1]);if(null==a)return null;b=S(b[2]);return null==b?null:new Nc(a,b)}function Xc(a){a=window.parseInt(a,10);return isNaN(a)?null:a}function T(a){a=window.parseInt(a,10);return 0<a?a:null}function S(a){a=window.parseInt(a,10);return 0<=a?a:null}function Q(a){return a};function Zc(a,b){this.url=a;this.b=b||new Mb;this.g=this.h=this.i=0;this.a=null;this.c=new H;this.f=null;this.w=this.b.j}p("shaka.util.AjaxRequest",Zc);function Mb(){this.body=null;this.c=1;this.m=1E3;this.g=0;this.method="GET";this.h="arraybuffer";this.f={};this.i=!1;this.T=this.a=this.v=null;this.o=!1;this.j=this.b=null}var xb=!0;function $c(a){ad(a);a.b.body=null;a.c.destroy();a.c=null;a.f=null}
function ad(a){a.a&&(a.a.onload=null,a.a.onreadystatechange=null,a.a.onerror=null,a.a.ontimeout=null);a.a=null}var bd=/(.*)\.(xx|fna)\.fbcdn\.net/,cd=/livestream-lookaside\.facebook\.com$/;
Zc.prototype.j=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var a=this.url.split(":")[1].split(";").pop().split(","),b=a.pop(),b="base64"==a.pop()?window.atob(b.replace(/-/g,"+").replace(/_/g,"/")):window.decodeURIComponent(b);"arraybuffer"==this.b.h&&(b=Yb(b).buffer);a=JSON.parse(JSON.stringify(new XMLHttpRequest));a.response=b;a.responseText=b.toString();b=this.c;b.resolve(a);$c(this);return b}if(0==this.url.lastIndexOf("idb:",0))return this.C();this.i++;this.h=performanceNow();
this.g||(this.g=this.b.m);this.a=new XMLHttpRequest;var c=this.url,a=new L(c);xb&&(this.f&&!this.f.supportsCaching()||this.b.i)&&M(a.a,"_",Date.now());c=bd.test(c);if(null!=this.b.a&&c){var d=this.b.a,e=a.a;null!=d.a&&(d.h=d.a.getSegmentsToPush(),d.f=d.a.getSegmentStartTime(),d.g=d.a.getSegmentOffset(),d.c=d.a.getPushVideoRepresentationID(),d.b=d.a.getPushAudioRepresentationID(),d.j=d.a.getUseLongCacheForManifest());null!=d.h&&M(e,"_nc_p_n",d.h);null!=d.f?M(e,"_nc_p_ts",d.f):null!=d.g&&M(e,"_nc_p_o",
d.g);null!=d.c&&null!=d.b&&(M(e,"_nc_p_rid",d.c),M(e,"_nc_p_arid",d.b));d.i&&M(e,"_nc_p_dbg","1");d.j&&M(e,"_nc_nc","1")}1==this.b.o&&c&&M(a.a,"_nc_playing",1);c=a.toString();a=cd.test(a.X);this.a.open(this.b.method,c,!0);this.a.responseType=this.b.h;this.a.timeout=this.b.g;this.a.withCredentials=a;setEventProperty(this.a,"onload",this.m.bind(this));setEventProperty(this.a,"onreadystatechange",this.o.bind(this));setEventProperty(this.a,"onerror",this.B.bind(this));setEventProperty(this.a,"ontimeout",
this.v.bind(this));for(b in this.b.f)this.a.setRequestHeader(b,this.b.f[b]);this.a.send(this.b.body);return this.c};Zc.prototype.send=Zc.prototype.j;function dd(a,b,c){b=Error(b);b.type=c;b.status=a.a.status;b.url=a.url;b.method=a.b.method;b.body=a.b.body;b.jc=a.a;return b}
Zc.prototype.m=function(a){if(this.f){var b=VideoPlayerResourceTimer.getResourceTimingEntry(this.url,this.h,performanceNow());this.f.sample(performanceNow()-this.h,a.loaded,this.b.b?"v"===this.b.b.charAt(0):!1,b,this.w)}a=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),$c(this)):this.i<this.b.c&&-1===a.indexOf(this.a.status)?ed(this):(a=dd(this,"HTTP error.","net"),this.c.reject(a),$c(this))};
Zc.prototype.o=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.va=Date.now()-this.h,this.b.a&&this.b.T&&fd(this.b.T,this.a),this.b.i)){var a=Date.parse(this.a.getResponseHeader("Date"));a&&(za=a-Date.now())}};Zc.prototype.B=function(){var a=dd(this,"Network failure.","net");this.c.reject(a);$c(this)};Zc.prototype.v=function(){if(this.i<this.b.c)ed(this);else{var a=dd(this,"Request timed out.","net");this.c.reject(a);$c(this)}};
function ed(a){ad(a);setTimeout(a.j.bind(a),a.g*(1+.5*(2*Math.random()-1)));a.g*=2}function gd(){this.a=new Map;this.b=!1}function fd(a,b){var c=b.getResponseHeader("X-FB-Debug-Num-Pushed"),d=b.getResponseHeader("X-FB-Debug-List-Pushed");null!=d&&null!=c&&(c=parseInt(c,10),d=d.split(","),c!=d.length&&console.warn("Inconsistent push debug headers.",c,d),c&&(-1<d[0].indexOf("/")&&(a.b=!0),d.forEach(function(a){this.a.set(a,(this.a.get(a)||0)+1)}.bind(a))))}var hd=/\/([^\/]+)$/,id=/\/([^\/]+\/[^\/]+)$/;
function jd(a,b){var c;c=(new L(b)).Y;c=(a.b?id:hd).exec(c);if(!c)return 0;c=c[1];return a.a.get(c)||0};function K(a,b,c,d){this.b=b;this.startByte=c||0;this.endByte=null!=d?d:null;this.f=this.c=null;this.i=a;this.h=null;this.j=!1;this.ya=this.a=null}var kd;p("shaka.util.FailoverUri",K);K.prototype.o=function(){return this.startByte};K.prototype.getStartByte=K.prototype.o;K.prototype.m=function(){return this.endByte};K.prototype.getEndByte=K.prototype.m;function ld(a,b){return a&&0!==a.length?a.map(function(a){return a.resolve(b)}):[b]}K.setPrefetchCacheValueGetter=function(a){kd=a};
function Ob(a,b,c,d,e,f,g){if(a.c)return a.c;a.c=md(a,0,b||new Mb,c,d,e,f,g);return a.c}K.prototype.g=function(){if(this.f){this.a=this.c=null;var a=this.f;if(a.a&&a.a.readyState!=XMLHttpRequest.DONE){a.a.abort();var b=dd(a,"Request aborted.","aborted");a.c.reject(b);$c(a)}this.h=this.f=null}};
function md(a,b,c,d,e,f,g,h){var l=a.b[b].toString(),k;if(e){c.a&&(c.a.i=!0);var n=0;c.T&&(n=jd(c.T,l));k=e.getOperationLogger("request").setPushed(n).setMimeType(h||null).setInitiator("shaka").start();f&&(k=k.setParentLogger(f))}var t=performanceNow();a.a=null;g&&(c.j=g);if(a.startByte||a.endByte)e=a.b[b].X,!e.endsWith("fbcdn.net")||e.startsWith("interncache")||e.endsWith("ak.fbcdn.net")?c.f.Range="bytes="+(a.startByte+"-"+(null!=a.endByte?a.endByte:"")):(l+="&bytestart="+a.startByte,l+=null!==a.endByte?
"&byteend="+a.endByte:"");a.i&&(l=a.i(l,c.f)||l);e=null;a.j=!1;kd&&(h=kd(l,F(a,function(a){this.a=a;this.j=!0;k&&k.setInitiator("prefetch");d&&a&&d.sample(a.timeToLastByte,a.transferSize,c.b?"v"===c.b.charAt(0):!1,a,g)})))&&(e=h);var w=null;!a.ya||a.ya.isDisabled()||e||(e=w=a.ya.getAndDeleteResponsePromise(nd(a)))||a.ya.disable();e||(a.f=new Zc(l,c),d&&(a.f.f=d),e=a.f.j());k&&k.setResource(l);f&&f.setResource(l);f=e.then(F(a,function(a){this.h=this.f=this.c=null;this.h=a.a?new L(a.a):this.b[b];a.response.va=
a.va;var c=VideoPlayerResourceTimer.getResourceTimingEntry(l,t,performanceNow());c&&(this.a=c);k&&!w&&(k=k.setLength(a.response.byteLength||a.response.length).setWasPrefetchCacheHit(this.j),null!=this.a&&(k=k.setTimeToLastByte(Math.round(this.a.timeToLastByte)).setTimeToFirstByte(Math.round(this.a.timeToFirstByte)).setTimeToRequestStart(Math.round(this.a.timeToRequestStart)),2E3<=this.a.timeToFirstByte&&-1<l.indexOf("akamaihd")&&logLongAkamaiRequest(a.getResponseHeader("Debug-Info")+", TTFB-> "+this.a.timeToFirstByte)),
k.log());return Promise.resolve(a.response)}));return f=f.catch(F(a,function(a){if(this.c&&b+1<this.b.length)return this.c=md(this,b+1,c,d);this.a=this.c=this.f=null;k&&k.setError(a).log();return Promise.reject(a)}))}function nd(a){return{baseUrl:a.toString(),startByte:a.startByte,endByte:a.endByte}}K.prototype.clone=function(){return new K(this.i,this.b.map(function(a){return a.clone()}),this.startByte,this.endByte)};K.prototype.getResourceTimingEntry=function(){return this.a};
K.prototype.toString=function(){return this.b[0].toString()};function od(a,b,c,d){this.a=new Mb;this.a.h="text";this.a.c=3;this.a.g=1E3*(null!=b?b:0);c&&(this.a.a=c);d&&(this.a.T=d);this.a.i=!0;this.b=a}function pd(a,b){var c=a.b;return Ob(c,a.a,null,b).then(function(a){a instanceof ArrayBuffer&&(a=String.fromCharCode.apply(null,new Uint8Array(a)));if(a=sc(a,c.b,[c.h]))return Promise.resolve(a);a=Error("MPD parse failure.");a.type="dash";return Promise.reject(a)})}function qd(a){this.a=null;this.h=a;this.c=this.g=this.f=null;this.i=!1;this.j=this.b=null};function rd(a,b,c,d){for(var e=b.a,f=[],g=0;g<d;++g){var h=g+c,l=(h-1)*e.b,k=l/e.a,n=(l+e.b)/e.a,h=sd(a,b,e.j+h-1,l);if(!h)return null;f.push(new td(k,n,h,l))}return f}function sd(a,b,c,d){if(!b.a)return null;var e=b.a.h;if(!e)return b.baseUrl?new K(a,b.baseUrl,0,null):null;c=ud(e,b.id,c,b.bandwidth,d);if(!c)return null;b=ld(b.baseUrl,c);return new K(a,b,0,null)}
function ud(a,b,c,d,e){var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};a=a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(a,b,c){if("$$"==a)return"$";var d=f[b];if(null==d)return a;"RepresentationID"==b&&c&&(c=void 0);a=d.toString();c=window.parseInt(c,10)||1;c=Math.max(0,c-a.length);return Array(c+1).join("0")+a});try{return new L(a)}catch(g){if(g instanceof URIError)return null;throw g;}}
function vd(a,b,c){var d=0;c*=b;a=a.a;for(var e=[],f=0;f<a.length&&a[f].a;++f){var g=a[f].startTime,g=null!=g?g:d,h=a[f].b||0;if(0>h)if(h=a[f].a,f+1===a.length)var l=a[0].startTime+c-g,h=Math.ceil(l/h)-1;else h=Math.ceil((a[f+1].startTime-g)/h)-1;if(0<e.length&&g!=d){var l=g-d,k=e[e.length-1];k.debugInfo={endTime:d/b,delta:l/b};k.end=g}for(l=0;l<=h;++l)d=g+a[f].a,e.push({start:g,end:d}),g=d}return e};function wd(a,b){this.a=a;this.b=b||null}wd.prototype.destroy=function(){this.a&&(this.a.g(),this.a=null);this.b=null};wd.prototype.create=function(a,b){var c=null;b&&(c=new Mb,c.T=b);return this.a?Ob(this.a,c,null,a):Promise.resolve(this.b)};wd.prototype.c=function(){return this.a};wd.prototype.getFailoverUri=wd.prototype.c;function td(a,b,c,d,e){this.startTime=a;this.endTime=b;this.url=c;this.a=null!=d?d:null;this.debugInfo=e||null}function Fd(a,b,c){return new td(b,c,a.url,null!=a.a?a.a:void 0)}function Qb(a,b){for(var c=a.length-1;0<=c;--c){var d=a[c];if(b>=d.startTime&&(null==d.endTime||b<d.endTime))return c}return-1}function Gd(a,b){return a.map(function(a){return Fd(a,a.startTime+b,null!=a.endTime?a.endTime+b:null)})};function Hd(){}
Hd.prototype.parse=function(a,b,c,d,e){var f=null;try{a:{var g=[],h=new Aa(a),l=r(h);if(1936286840!=r(h))f=null;else{1==l&&(l=Fa(h));var k=Ea(h);u(h,3);u(h,4);var n=r(h);if(0==n)f=null;else{var t,w;0==k?(t=r(h),w=r(h)):(t=Fa(h),w=Fa(h));u(h,2);var J=h.b.getUint16(h.a,h.c);h.a+=2;a=t;b=b+l+w;for(w=l=0;w<J;w++){var I=r(h);t=(I&2147483648)>>>31;var k=I&2147483647,fa=r(h);r(h);if(1==t){f=null;break a}var qb;qb=0==w&&e?e:new K(d,c,b,b+k-1);t=a/n;var rb=(a+fa)/n;0===w&&(l=t);g.push(new td(t-l,rb-l,qb));
a+=fa;b+=k}g.a=n;f=g}}}}catch(Va){if(!(Va instanceof RangeError))throw Va;}return f};function U(a,b){this.u=a;this.ca=0;this.a=b;this.g=[];this.Va=!1}U.prototype.da=function(){return!!this.g[this.g.length-1]};U.prototype.lastPollHadChanges=U.prototype.da;U.prototype.G=function(){var a=this.g,b=a.lastIndexOf(!0);if(1>b)return 0;a=a.lastIndexOf(!0,b-1);return 0>a?0:b-a-1};U.prototype.getFetchesBetweenRecentChanges=U.prototype.G;U.prototype.D=function(){return Math.floor((this.g.length-1-this.g.lastIndexOf(!0))/2)};U.prototype.getConsecutiveUpdatesWithoutChanges=U.prototype.D;
U.prototype.F=function(){return this.g.length-1-this.g.lastIndexOf(!1)};U.prototype.getConsecutiveUpdatesWithChanges=U.prototype.F;U.prototype.destroy=function(){this.u=null};U.prototype.length=function(){return this.u.length};U.prototype.H=function(){return(this.u||[]).slice()};U.prototype.getSegments=U.prototype.H;function V(a){if(0==a.u.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return a.u[0]}
U.prototype.A=function(){if(0==this.u.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.u[this.u.length-1]};U.prototype.last=U.prototype.A;m=U.prototype;m.get=function(a){if(0>a||a>=this.u.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.u[a]};m.wa=function(a){a=Qb(this.u,a);return 0<=a?this.u[a]:null};m.Ua=function(a){Id(this,a);return!0};
function Id(a,b){a.ca!=b.ca&&(b=new U(Gd(b.u,a.ca-b.ca),b.a));if(0==a.length())a.u=b.u.slice(0);else if(0!=b.length()&&null!=a.A().endTime)if(null!=b.A().endTime&&b.A().endTime<a.A().endTime)a.Va=!0;else{a.Va=!1;if(a.A().endTime<=V(b).startTime)var c=Fd(a.A(),a.A().startTime,V(b).startTime),c=a.u.slice(0,-1).concat([c]);else{var d;for(d=0;d<a.u.length&&!(a.u[d].endTime>=V(b).startTime);++d);a.u[d].startTime<V(b).startTime?(c=Fd(a.u[d],a.u[d].startTime,V(b).startTime),c=a.u.slice(0,d).concat([c])):
(V(a).startTime>V(b).startTime||V(b),c=a.u.slice(0,d))}a.u=c.concat(b.u)}}m.na=function(a){var b=a-this.ca;if(0==b)return 0;this.u=Gd(this.u,b);this.ca=a;return b};m.Ra=function(){return 0<this.length()?{start:V(this).startTime,end:this.A().endTime}:{start:0,end:0}};function W(a,b,c,d,e){U.call(this,a,b);this.i=c;this.B=d;this.h=e;this.j=this.i.b||this.i.a.reduce(function(a,b){return null==b.a?NaN:a+b.a},0)||0;this.b=this.v=this.f=null;Jd(this)}q(W,U);W.prototype.destroy=function(){this.B=this.i=null;U.prototype.destroy.call(this)};W.prototype.wa=function(a){Kd(this,ya()/1E3);return U.prototype.wa.call(this,a)};W.prototype.Ua=function(a){if(!(a instanceof W))return!1;Id(this,a);this.j=Math.max(this.j,a.j);null==this.f?(this.h=a.h,Jd(this)):Ld(this);return!0};
function Jd(a){Ld(a);if(0!=a.length()){a.length();var b=null!=a.A().endTime?a.A().endTime:a.A().startTime;if(a.i.c>a.h)a.f=b;else{var c=a.h-(a.i.c+a.B.start);0>c?a.f=b:c<Math.max(a.A().startTime,a.A().endTime||0)?(a.A(),a.f=b):a.f=c}a.v=a.A().startTime;a.b=V(a).startTime}}W.prototype.na=function(a){a=U.prototype.na.call(this,a);Math.min.apply(null,this.u.filter(function(a){return null!=a.endTime}).map(function(a){return a.endTime-a.startTime}));null!=this.f&&(this.v+=a,this.b+=a,this.f+=a);return a};
W.prototype.Ra=function(){return Md(this,ya()/1E3)};function Md(a,b){Kd(a,b);if(null==a.f||null==a.v||null==a.b)return{start:0,end:0};var c=Number.POSITIVE_INFINITY;a.j&&(c=a.j);var d=b-a.h,e=a.f+d;null!=a.i.f&&(e=e-a.b-a.i.f,0<e&&(a.b+=e));a.b=Math.min(a.b,c);d=a.v+d;if(d<a.b)return{start:a.b,end:a.b};d=0<a.length()?null!=a.A().endTime?Math.min(d,a.A().endTime):d:a.b;d=Math.max(d,a.b);d=Math.min(d,c);return{start:a.b,end:d}}
function Kd(a,b){Ld(a);if(null!=a.i.f)if(null==a.f)a.length();else{for(var c=a.f+(b-a.h),d=0,e=0;e<a.u.length;++e){var f=null;e<a.u.length-1?f=a.u[e+1].endTime:(f=a.u[e],f=null!=f.endTime?f.endTime+(f.endTime-f.startTime):null);if(null!=f&&f<c-a.i.f)++d;else break}0<d&&a.u.splice(0,d)}}function Ld(a){if(a.j){for(var b=0,c=a.u.length-1;0<=c;--c)if(a.u[c].startTime>a.j)++b;else break;0<b&&a.u.splice(-b)}};function Nd(a,b,c,d,e){var f=1,g=0,h;if(a.c>d)h=null;else{var l=a.i||0,k=a.f||0;h=c.a;h=h.b/h.a;var n=d-(a.c+b.start);0>n?h=null:(k=n-2*h-k,0>k&&(k=0),k=Math.ceil(k/h)*h,n-=h,0>n?h=null:(l=Math.floor(n/h)*h-l,0>l&&(l=0),l=Math.floor(l/h)*h,h={ab:k/h+1,current:(l>=k?l:k)/h+1}))}h&&(f=h.ab,g=h.current-h.ab+1);f=rd(e,c,f,g);if(null==f)throw a=Error("Failed to generate SegmentReferences."),a.type="stream",a;W.call(this,f,c.a.a||1,a,b,d);this.w=c;this.o=this.c=0<this.length()?a.c+b.start+this.A().endTime:
null;this.m=h?h.current+1:null;this.C=e}q(Nd,W);Nd.prototype.destroy=function(){this.C=this.w=null;W.prototype.destroy.call(this)};Nd.prototype.wa=function(a){var b=ya()/1E3;Od(this,b);Kd(this,b);return U.prototype.wa.call(this,a)};Nd.prototype.Ua=function(a){if(null!=this.c||!(a instanceof Nd)||null==a.c)return!1;this.c=a.c;this.o=a.o;this.m=a.m;this.h=a.h;this.j=a.j;Id(this,a);Od(this,ya()/1E3);Jd(this);return!0};
Nd.prototype.na=function(a){a=W.prototype.na.call(this,a);null!=this.c&&(this.c+=a,this.o+=a);return a};Nd.prototype.Ra=function(){var a=ya()/1E3;Od(this,a);return Md(this,a)};function Od(a,b){if(null!=a.c&&null!=a.o&&null!=a.m){var c=a.w.a,c=c.b/c.a,d=Math.floor((a.o+(b-a.h)-a.c)/c);if(0!=d){var e=rd(a.C,a.w,a.m,d);Array.prototype.push.apply(a.u,Gd(e,a.ca));a.c+=d*c;a.m+=d}}};function Pd(a,b,c,d,e){this.f=a;this.c=b;this.b=c;this.h=d;this.a=null;this.g=e}Pd.prototype.destroy=function(){this.g=this.b=this.c=this.f=null;this.a&&(this.a.destroy(),this.a=null)};
Pd.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type)try{this.a=new Nd(this.f,this.c,this.b,this.h,this.g)}catch(a){return Promise.reject(a)}else{var b;b=this.b.a;if(b=rd(this.g,this.b,1,Math.ceil(this.c.a/(b.b/b.a)))){if(0<b.length){var c=b[b.length-1];b[b.length-1]=Fd(c,c.startTime,this.c.a)}b=new U(b,this.b.a.a||1)}else b=null;this.a=b;if(!this.a)return b=Error("Failed to generate SegmentReferences"),b.type="stream",Promise.reject(b)}return Promise.resolve(this.a)};function Qd(a,b,c,d,e){this.c=a;this.b=b;this.g=c;this.a=null;this.h=d;this.f=e}Qd.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null)};
Qd.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=this.g.b,b=[];a.f&&(b=vd(a.f,a.a||1,this.b.a||0));var c=0;a.c&&a.i?c=(a.i-1)*a.c:0<b.length&&(c=b[0].start-(a.g||0));var d=c,e=a.b.length;0<b.length&&b.length!=a.b.length&&(e=Math.min(b.length,a.b.length));for(var f=[],g=0;g<e;++g){var h=a.b[g],l=c/a.a,k=null,n=null,t;a.c?(k=c+a.c,n=k/a.a):0<b.length?(t=b[g].debugInfo,k=b[g].end-(a.g||0),n=k/a.a):(n=l+this.b.a,k=n*a.a);var c=k,k=0,w=null;h.a&&(k=h.a.sa,w=h.a.end);n=Math.min(this.b.a+
d/a.a,n);f.push(new td(l,n,new K(this.f,h.b,k,w),null,t||null))}"dynamic"==this.c.type?this.a=new W(f,a.a||1,this.c,this.b,this.h):this.a=new U(f,a.a||1);return Promise.resolve(this.a)};function Rd(a,b,c,d,e){this.b=a;this.c=b;this.f=c;this.h=d;this.a=null;this.g=e}Rd.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null)};
Rd.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var a=this.f.a,b=vd(a.c,a.a||1,this.c.a||0),c=[],d=0;d<b.length;++d){var e=b[d].start,f=b[d].debugInfo,g=e/a.a,h=b[d].end/a.a,l=sd(this.g,this.f,d+a.j,e);if(!l)return a=Error("Failed to generate media URL."),a.type="dash",Promise.reject(a);var k=(a.i||0)/a.a;c.push(new td(g-k,h-k,l,e,f||null))}"dynamic"==this.b.type?this.a=new W(c,a.a||1,this.b,this.c,this.h):this.a=new U(c,a.a||1);return Promise.resolve(this.a)};function Sd(){this.J=Td++;this.id=this.L=this.I=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.switchReason=this.fbQualityClass=this.fbQualityLabel=null;this.f=[];this.ja=!1;this.S=!0}var Td=0;Sd.prototype.destroy=function(){this.I&&(this.I.destroy(),this.I=null);this.L&&(this.L.destroy(),this.L=null)};function Ud(a){var b=a.a||"";a.c&&(b+='; codecs="'+a.c+'"');return b}
function Vd(){this.J=Wd++;this.id=null;this.contentType=this.lang="";this.c=this.b=!1;this.s=[];this.a=[]}var Wd=0;Vd.prototype.destroy=function(){for(var a=0;a<this.s.length;++a)this.s[a].destroy();this.a=this.s=null};function ob(a){for(var b=[],c=0;c<a.a.length;++c){var d=new Xd;d.id=a.J;d.b=a.a[c];d.contentType=a.contentType;d.a=a.s.length?Ud(a.s[0]):"";b.push(d)}return b}function Yd(){this.id=null;this.start=0;this.b=null;this.a=[]}
Yd.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null};function Zd(){this.b=!1;this.h=this.g=this.f=null;this.c=0;this.a=[];this.i=!1}Zd.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null};function Xd(){this.id=0;this.b=null;this.a=this.contentType=""};function $d(a,b,c,d,e,f,g,h){D.call(this,a);this.b=b;this.a=new Gb(c,d,e,this,g);this.xa=g;this.c={};this.ea=0;this.O=this.F=this.g=null;this.V=!1;this.i=this.G=null;this.v=!1;this.K=0;this.N=!1;this.m=null;this.W=this.f=!1;this.j=new H;this.o=this.h=!1;this.$=this.B=0;this.H=15;this.qa=this.Z=this.M=!1;this.fa=f;this.aa=!1;this.l=null;this.ra=!1;this.U=null;this.w=h||null;this.C=null;this.D=!1;this.ga={};this.P=!1;this.pa=0}q($d,D);$d.prototype.ia=function(){return{SourceBufferManager:this.a}};
$d.prototype.getDebug=$d.prototype.ia;
$d.prototype.R=function(a){null!=a.initialStreamBufferSize&&(this.B=Number(a.initialStreamBufferSize));null!=a.dynamicStreamBufferSize&&(this.K=Number(a.dynamicStreamBufferSize));null!=a.smartBufferAdjustmentParams&&(this.ga=a.smartBufferAdjustmentParams);null!=a.smartBufferAdjustmentEnabled&&(this.D=Boolean(a.smartBufferAdjustmentEnabled));null!=a.streamBufferSize&&(this.H=Number(a.streamBufferSize));null!=a.fixBufferingGoalDetermination&&(this.M=Boolean(a.fixBufferingGoalDetermination));null!=a.addCdnDebugQueryParameters&&
(this.Z=Boolean(a.addCdnDebugQueryParameters));null!=a.useInitialBufferSizeWhenPaused&&(this.qa=Boolean(a.useInitialBufferSizeWhenPaused));null!=a.segmentRequestTimeout&&(this.a.O=Number(a.segmentRequestTimeout));null!=a.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.aa=Boolean(a.resolveVideoTimeUpdateOnFragmentedTimeRanges));null!=a.performanceLogger&&(this.l=this.c.performanceLogger=a.performanceLogger);null!=a.abrLogger&&(this.c.abrLogger=a.abrLogger);null!=a.reappendInitSegmentAfterAbort&&
(this.c.reappendInitSegmentAfterAbort=Boolean(a.reappendInitSegmentAfterAbort));null!=a.liveDataFetchMaxRetries&&(this.c.liveDataFetchMaxRetries=Number(a.liveDataFetchMaxRetries));null!=a.liveSourceBufferClearMaxRetries&&(this.c.liveSourceBufferClearMaxRetries=Number(a.liveSourceBufferClearMaxRetries));null!=a.skipEmptySegments&&(this.c.skipEmptySegments=Boolean(a.skipEmptySegments));null!=a.playheadFragmentedGapDiffAllowance&&(this.c.playheadFragmentedGapDiffAllowance=Number(a.playheadFragmentedGapDiffAllowance));
null!=a.useMicroTaskTimeouts&&(this.ra=Boolean(a.useMicroTaskTimeouts));a=this.a;var b=this.c;null!=b.reappendInitSegmentAfterAbort&&(a.H=Boolean(b.reappendInitSegmentAfterAbort));null!=b.performanceLogger&&(a.l=b.performanceLogger);null!=b.abrLogger&&(a.K=b.abrLogger);null!=b.liveDataFetchMaxRetries&&(a.D=b.liveDataFetchMaxRetries);null!=b.liveSourceBufferClearMaxRetries&&(a.F=b.liveSourceBufferClearMaxRetries);null!=b.playheadFragmentedGapDiffAllowance&&(a.G=b.playheadFragmentedGapDiffAllowance);
null!=b.skipEmptySegments&&(a.R=b.skipEmptySegments)};$d.prototype.destroy=function(){ae(this);this.j.destroy();this.g=this.j=null;this.a.destroy();this.da=this.b=this.a=null};m=$d.prototype;m.ta=function(){return this.g};m.Sa=function(){return this.F};m.zb=function(a){this.h||a.then(function(){this.h=!0;this.i||be(this,0)}.bind(this)).catch(function(){});return this.j};m.Ta=function(){return this.o};
m.za=function(a,b,c,d){a!=this.g&&(this.O=a.L.create(this.l,this.xa),a.I.create().then(F(this,function(e){if(this.b){var f=this.g;this.g=a;this.F=e;this.w&&this.w.updateSegments(a.id||"",e.u.map(function(a,b){var c=a.url;c.ya=this.w;return{startTime:a.startTime,endTime:a.endTime,segmentID:b,requestInfo:nd(c)}}.bind(this)));this.V=!0;this.G=d?d:null;this.v||(f?b&&ce(this,!0,c):be(this,0))}})).catch(F(this,function(a){"aborted"!=a.type&&(this.h?(a=y(a),this.dispatchEvent(a)):this.j.reject(a))})))};
m.ub=function(){return ce(this,!1)};m.wb=function(){this.N=!0};m.yb=function(a){this.pa=a};function ce(a,b,c){a.g&&!a.v&&(a.v=!0,ae(a),Jb(a.a).then(F(a,function(){var a=this.b.currentTime;if(!b&&0<Kb(this.a,a)&&0<=Qb(this.a.c,a))return Promise.resolve();if(c)return Tb(this.a,this.b.currentTime+c);this.P=!0;return Sb(this.a)})).then(F(a,function(){this.v=!1;be(this,0)})).catch(F(a,function(a){this.v=!1;"aborted"!=a.type&&(this.h?(a=y(a),this.dispatchEvent(a)):this.j.reject(a))})))}
m.xb=function(a){return 0<Kb(this.a,a)&&0<=Qb(this.a.c,a)};m.Ea=function(){};m.Qa=function(){return!0};
function de(a){a.W=a.W||!a.b.paused;a.b.paused||a.D||(a.C=Date.now(),a.D=!0);var b=a.ga,c=null;if(b.inExperiment)if(b.useSmartBuffering){if(a.D&&a.C){var c=(Date.now()-a.C)/1E3,d=null;1>c?c=null:(d=3>c?b.bufferSize_00_to_03:10>c?b.bufferSize_03_to_10:30>c?b.bufferSize_10_to_30:60>c?b.bufferSize_30_to_60:b.bufferSize_above_60,c=Math.min(d,a.b.duration))}}else a.C&&(c=b.nonSmartBufferSize);c||(c=a.qa&&a.b.paused?a.B:a.H,a.K&&!a.b.paused&&(c=Math.max(Math.min(a.F.A().endTime-a.b.currentTime,a.K),a.H)));
c=(a.M?a.f&&a.W:a.f)?Math.max(a.B,c):a.B;a.M&&!a.f&&(c=1);0<VideoPlayerShakaExperiments.audioVideoBufferDiffThreshold&&(b=a.b.buffered.length?a.b.buffered.end(a.b.buffered.length-1):0,b=Math.max(0,b-a.b.currentTime),c=Math.min(c,b+VideoPlayerShakaExperiments.audioVideoBufferDiffThreshold));return c}
m.pb=function(){if(this.f&&!this.h)this.i=null;else{var a;if(a=this.h&&!this.o)a=1<this.a.a.buffered.length?!0:!1;if(a&&(this.N||Wb(this.a,this.b)))this.aa&&(this.b.currentTime=Vb(this.b)),this.N=!1,ce(this,!0);else{this.i=null;a=this.g;var b=this.F,c=this.b.currentTime;VideoPlayerShakaExperiments.usePendingSeekPositionForReference&&0===this.b.readyState&&!c&&this.U&&(c=this.U);var d=this.f?c:c+(this.m||0);if(Kb(this.a,d)>=de(this))ee(this),be(this,1E3/(5*(Math.abs(this.b.playbackRate)||1)));else{var e=
fe(this,c,b);e?(this.w&&(d={playhead:c,bufferStart:d,bufferEnd:Kb(this.a,d)+d,bufferingGoal:de(this)},this.w.updatePlayerState(a.id||"",d)),b=Nb(this.a,e,b.a,a.b+this.pa,this.O,this.Z&&!this.b.paused),this.fa&&"video"===a.a.split("/")[0]&&this.fa(e.startTime,e.endTime,{id:a.id,reason:this.G,performanceLogger:this.l?this.l.getOperationLogger("stream_switch"):null}),this.O=null,this.V&&(this.V=!1,e=this.G,this.G=null,ge(this,a,e)),this.o=!1,b.then(F(this,function(a){var b=a.ca;a=a.Ob;this.f||(this.ea=
a);this.$++;null==this.m&&(this.m=b);this.P&&0<Kb(this.a,c)&&(this.P=!1,VideoPlayerShakaExperiments.disableNudge||(b=x({type:"should_nudge"}),this.dispatchEvent(b)));be(this,0)})).catch(F(this,function(a){if("aborted"!=a.type){var b=[0,404,410,502,503,504];"net"==a.type&&-1!=b.indexOf(a.jc.status)&&this.g&&be(this,1E3);a=y(a);this.dispatchEvent(a)}}))):(ee(this),this.h&&!this.o&&(this.o=!0,he(this)),be(this,200))}}}};
function fe(a,b,c){a=a.a;var d=a.c.length;a=0<d?a.c[d-1]:null;return null!=a?null!=a.endTime?c.wa(a.endTime):null:c.wa(b)||(c.length()?c.A():null)}function ee(a){if(!a.f&&null!=a.m){a.f=!0;var b=a.a,c=a.m,d=c-b.P;0!=d&&(b.c=Gd(b.c,d),b.P=c);a.j.resolve(a.m)}}function ge(a,b,c){var d=b.a.split("/")[0];b=x({type:"adaptation",id:b.id,bubbles:!0,contentType:d,size:"video"!=d?null:{width:b.width,height:b.height},bandwidth:b.bandwidth,reason:c});a.dispatchEvent(b)}
function he(a){var b=x({type:"ended"});a.dispatchEvent(b)}function be(a,b){ae(a);!b&&a.ra?Promise.resolve().then(a.pb.bind(a)):a.i=setTimeout(a.pb.bind(a),b)}function ae(a){null!=a.i&&(clearTimeout(a.i),a.i=null)}m.Da=function(){return this.ea};function ie(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.a.length;++d){for(var e=c.a[d],f=e,g=0;g<f.s.length;++g)gb(Ud(f.s[g]))||(f.s.splice(g,1),--g);0==e.s.length&&(c.a.splice(d,1),--d)}for(b=0;b<a.length;++b)for(c=a[b],d=0;d<c.a.length;++d)c.a[d].s.sort(je)}function je(a,b){var c=a.bandwidth||Number.MAX_VALUE,d=b.bandwidth||Number.MAX_VALUE;return c<d?-1:c>d?1:0};function ke(a){this.a=a}ke.prototype.destroy=function(){this.a.destroy();this.a=null};ke.prototype.update=function(a){var b=le(a),c=le(this.a);return Promise.all([b,c]).then(F(this,function(b){var c=b[0];b=b[1];ie(this.a.a);a.b&&!this.a.b&&(a.i=!0);a.f=this.a.f;a.g=this.a.g?this.a.g.clone():null;a.c=this.a.c;var f=[];me(a,this.a,c,b,f);ie(a.a);return Promise.resolve(f)}))};
function le(a){function b(a,b){return a.concat(b)}var c=a.a.map(function(a){return a.a}).reduce(b,[]).map(function(a){return a.s}).reduce(b,[]);a=c.map(function(a){return a.I.create()});return Promise.all(a).then(function(a){for(var b={},f=0;f<c.length;++f)b[c[f].J]=a[f];return Promise.resolve(b)})}
function me(a,b,c,d,e){var f=new B;a.a.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new B;b.a.forEach(function(a,b){g.push(a.id||""+b,a)});a=bb(f);for(b=0;b<a.length;++b){var h=a[b],l=f.get(h);1<l.length||(h=g.get(h))&&0!=h.length&&1==h.length&&(ne(l[0],h[0],c,d,e),l[0].b=h[0].b)}}
function ne(a,b,c,d,e){var f=new B;a.a.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new B;b.a.forEach(function(a,b){g.push(a.id||""+b,a)});a=bb(f);for(b=0;b<a.length;++b){var h=a[b],l=f.get(h);1<l.length||(h=g.get(h))&&0!=h.length&&1==h.length&&oe(l[0],h[0],c,d,e)}}
function oe(a,b,c,d,e){var f=new B;a.s.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new B;b.s.forEach(function(a,b){g.push(a.id||""+b,a)});b={};for(var h=bb(f),l=0;l<h.length;++l){var k=h[l];b[k]=k;var n=f.get(k);1<n.length||((k=g.get(k))&&0!=k.length?1==k.length&&(pe(n[0],k[0],c,d),n[0].L=k[0].L,k[0].L=null,n[0].b=k[0].b):(e.push(n[0]),a.s.splice(a.s.indexOf(n[0]),1)))}h=bb(g);for(l=0;l<h.length;++l)k=h[l],b[k]||(b[k]=k,k=g.get(k),a.s.push(k[0]))}
function pe(a,b,c,d){a=c[a.J];d=d[b.J];b=a.length();a.Ua(d)&&(d=a.length(),a.g.push(b!==d),50<a.g.length&&a.g.shift())};function qe(a){this.b=a;this.a=null}qe.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null)};qe.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=new td(0,null,this.b);this.a=new U([a],1);return Promise.resolve(this.a)};function re(a,b){D.call(this,a);this.c=b;this.h=!0;this.i=this.g=null;this.f=new H;this.b=null}q(re,D);re.prototype.R=function(){};re.prototype.destroy=function(){this.b&&this.c.removeChild(this.b);this.f.destroy();this.da=this.c=this.g=this.i=this.b=this.f=null};m=re.prototype;m.ta=function(){return this.g};m.Sa=function(){return this.i};m.zb=function(){return this.f};m.Ta=function(){return!0};
m.za=function(a){a.I.create().then(F(this,function(b){if(this.c){if(0==b.length())return Promise.reject(Error("No subtitles URL available."));var c=this.g;this.g=a;this.i=b;b=V(b).url.b[0].toString();var d=this.Qa();this.b&&(this.Ea(!1),this.c.removeChild(this.b));this.b=document.createElement("track");this.c.appendChild(this.b);this.b.src=b;this.Ea(d);b=x({type:"adaptation",bubbles:!0,contentType:"text",size:null,bandwidth:a.bandwidth});this.dispatchEvent(b);c||this.f.resolve(0)}}))};m.ub=function(){};
m.wb=function(){};m.xb=function(){return!0};m.Ea=function(a){this.h=a;this.b&&(this.b.track.mode=a?"showing":"disabled")};m.Qa=function(){this.b&&(this.h="showing"==this.b.track.mode);return this.h};m.Da=function(){return 0};m.yb=function(){};function se(){}
se.prototype.parse=function(a,b,c,d){var e=null;try{var f;var g=new Ha(b);if(440786851!=v(g).id)f=null;else{var h=v(g);if(408125543!=h.id)f=null;else{var l=h.a.byteOffset,k;var n=new Ha(h.a);for(b=null;Da(n.a);){var t=v(n);if(357149030==t.id){b=t;break}}if(b){for(var w=new Ha(b.a),n=1E6;Da(w.a);){var J=v(w);if(2807729==J.id){n=Ma(J);break}}k=n/1E9}else k=null;f=k?{cc:l,hc:k}:null}}if(f){var I=v(new Ha(a));if(475249515!=I.id)e=null;else{var fa=f.cc,qb=f.hc;a=[];var rb=new Ha(I.a);for(f=I=-1;Da(rb.a);){var Va=
v(rb);if(187==Va.id){var Ba;var xd=new Ha(Va.a),yd=v(xd);if(179!=yd.id)Ba=null;else{var Pe=Ma(yd),zd=v(xd);if(183!=zd.id)Ba=null;else{for(var Ad=new Ha(zd.a),l=0;Da(Ad.a);){var Bd=v(Ad);if(241==Bd.id){l=Ma(Bd);break}}Ba={ic:Pe,bc:l}}}if(Ba){var Cd=qb*Ba.ic,Dd=fa+Ba.bc;if(0<=I){var oc=new K(d,c,f,Dd-1);a.push(new td(I,Cd,oc))}I=Cd;f=Dd}}}0<=I&&(oc=new K(d,c,f,null),a.push(new td(I,null,oc)));e=a}}else e=null}catch(Ed){if(!(Ed instanceof RangeError))throw Ed;}return e};function te(a,b,c,d,e,f,g,h,l){this.g=a;this.i=b;this.f=c;this.a=d;this.c=e;this.b=f;this.j=g;this.ma=null;this.h=h;this.l=l||null}te.prototype.destroy=function(){this.h=this.i=this.g=null;this.a.g();this.a=null;this.b&&(this.b.g(),this.b=null);this.c&&(this.c.g(),this.c=null);this.ma=null};te.prototype.Nb=function(){return this.ma};te.prototype.create=function(){return ue(this)};te.prototype.Ba=function(){return ue(this)};
function ue(a){if(a.ma)return a.ma;var b=null;a.l&&(b=a.l.getOperationLogger("create_container_segment_index_source").start());var c=[Ob(a.a,null,null,a.l,b)];"webm"==a.f&&c.push(Ob(a.c,null,null,a.l,b));a.ma=Promise.all(c).then(F(a,function(a){var c=a[0];a=a[1]||null;var f=null;"mp4"==this.f?(f=new Hd,f=f.parse(new DataView(c),this.a.startByte,this.a.b,this.h,this.b)):"webm"==this.f&&(f=new se,f=f.parse(new DataView(c),new DataView(a),this.a.b,this.h));if(!f)return c=Error("Failed to parse SegmentReferences from "+
this.a.toString()+" (or one of its fallbacks)."),c.type="stream",Promise.reject(c);var g;"dynamic"==this.g.type?g=new W(f,f.a,this.g,this.i,this.j):g=new U(f,f.a);b&&b.log();return Promise.resolve(g)}));return a.ma};function ve(a,b){this.a=a;this.l=b||null}
function we(a,b,c){for(var d=ya()/1E3,e=0;e<b.a.length;++e)for(var f=b.a[e],g=0;g<f.b.length;++g){var h=f.b[g];if("text"!=h.contentType)for(var l=0;l<h.a.length;++l){var k=h.a[l],n=0,n=n+(k.g?1:0),n=n+(k.b?1:0),n=n+(k.a?1:0);0==n?(h.a.splice(l,1),--l):1!=n&&(k.g?(k.b=null,k.a=null):k.b&&(k.a=null))}}xe(b);for(e=0;e<b.a.length;++e)for(f=b.a[e],g=0;g<f.b.length;++g){l=h=f.b[g];k=null;for(n=0;n<l.a.length;++n){var t=l.a[n].f||"";k?t!=k&&(l.a.splice(n,1),--n):k=t}0==h.a.length&&(f.b.splice(g,1),--g)}"dynamic"==
b.type&&null==b.c&&(b.c=d);e=new Zd;"dynamic"==b.type&&(e.b=!0,e.f=b.g,e.g=new K(c,b.j||b.url),e.h=b.c);e.c=b.h||5;for(f=0;f<b.a.length;++f){g=b.a[f];if(null==g.start)break;g=ye(a,b,g,d,c);e.a.push(g)}return e}
function xe(a){if(a.a.length){null==a.a[0].start&&(a.a[0].start=0);var b=function(a){return 0==a||!!a};"dynamic"==a.type&&(a.b=null);b(a.b)&&1==a.a.length&&!b(a.a[0].a)&&(a.a[0].a=a.b);for(var c=0,d=!0,e=0;e<a.a.length;++e){var f=a.a[e-1],g=a.a[e],h=a.a[e+1]||{start:a.b};!b(g.start)&&f&&b(f.start)&&b(f.a)&&(g.start=f.start+f.a);!b(g.a)&&b(h.start)&&(g.a=h.start-g.start);null!=g.start&&null!=g.a?c+=g.a:d=!1}b(a.b)||(e=a.a[a.a.length-1],d?a.b=c:b(e.start)&&b(e.a)?a.b=e.start+e.a:"dynamic"!=a.type&&
(a.b=c))}}function ye(a,b,c,d,e){var f=new Yd;f.id=c.id;f.start=c.start;f.b=c.a;var g=new B;c.b.forEach(function(a){g.push(a.contentType||"",a)});for(var h=bb(g),l=0;l<h.length;++l){var k=new B;g.get(h[l]).forEach(function(a){k.push(a.group,a)});for(var n=bb(k),t=0;t<n.length;++t){var w=new B;k.get(n[t]).forEach(function(a){w.push(a.lang,a)});for(var J=bb(w),I=0;I<J.length;++I){var fa=w.get(J[I]),fa=ze(a,b,c,fa,d,e);f.a.push(fa)}}}return f}
function ze(a,b,c,d,e,f){ba(d.every(function(a){return a.group==d[0].group&&(a.lang||"")==(d[0].lang||"")&&(a.contentType||"")==(d[0].contentType||"")}));var g=new Vd,h=d.filter(function(a){return null!=a.id});h.length==d.length&&(g.id=h.map(function(a){return a.id}).sort().reduce(function(a,b){return a+","+b}));g.b=!(!d[0].c||"urn:scte:dash:cc:cea-608:2015"!==d[0].c.a);g.lang=d[0].lang||"";g.contentType=d[0].contentType||"";g.c=d.some(function(a){return a.f});for(var h={},l=0;l<d.length;++l)for(var k=
d[l],n=0;n<k.a.length;++n){var t=k.a[n],w=Ae(a,t),J=g.a.slice(0);Be(w,J);0==J.length&&0<g.a.length||!(t=Ce(a,b,c,t,e,f))||(g.s.push(t),g.a=J,h[t.J]=k)}if(g.a.some(function(a){return""==a.b}))return g.s.forEach(function(a){a.ja=!0}),g;a=De(d);for(l=0;l<g.s.length;++l)t=g.s[l],k=h[t.J],k==a&&(t.ja=!0);return g}function De(a){for(var b=null,c=null,d=0;d<a.length;++d)for(var e=a[d],f=0;f<e.a.length;++f){var g=e.a[f],g=(g.width||1)*(g.height||1)*(g.bandwidth||1);if(null==b||g<b)b=g,c=e}return c}
function Be(a,b){if(0==b.length)Array.prototype.push.apply(b,a);else for(var c=0;c<b.length;++c){for(var d=!1,e=0;e<a.length;++e){var f=b[c],g=a[e];if(f.b==g.b&&f.g==g.g&&f.m==g.m&&f.f==g.f&&f.h==g.h&&f.c==g.c&&f.j==g.j&&Ka(f.i,g.i)){d=!0;bc(b[c],a[e].a);break}}d||(b.splice(c,1),--c)}}function Ae(a,b){var c=[];if(0==b.c.length)c.push(new ac);else if(a.a)for(var d=0;d<b.c.length;++d)c.push.apply(c,Ee(a,b.c[d]));return c}
function Ee(a,b){var c=[];if(2!=a.a.length)return[];var d=a.a(b.f||"",b.c);if(!(d&&d instanceof Array))return[];for(var e=0;e<d.length;++e){var f;var g=d[e];f=new ac;if(g){var h=Ya(g,"keySystem");if(null!=h)f.b=h;else throw Error("'keySystem' cannot be null.");var l=Ya(g,"licenseServerUrl");if(null!=l)f.g=l;else if(h)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");h=z(g,"withCredentials");null!=h&&(f.m=h);h=Za(g,"licensePostProcessor",Function);null!=h&&
(f.o=h);h=Za(g,"licensePreProcessor",Function);null!=h&&(f.v=h);h=z(g,"distinctiveIdentifierRequired");null!=h&&(f.f=h);h=z(g,"persistentStateRequired");null!=h&&(f.h=h);h=Ya(g,"audioRobustness");null!=h&&(f.c=h);h=Ya(g,"videoRobustness");null!=h&&(f.j=h);h=Za(g,"serverCertificate",Uint8Array);null!=h&&(f.i=h);if(h=Za(g,"initData",Object)){g=Za(h,"initData",Uint8Array);if(null==g)throw Error("'initData.initData' cannot be null.");h=Ya(h,"initDataType");if(null==h)throw Error("'initData.initDataType' cannot be null.");
f.a.push({initData:new Uint8Array(g.buffer),initDataType:h})}}0==f.a.length&&b.a&&b.a.psshBox&&bc(f,[{initData:b.a.psshBox,initDataType:"cenc"}]);c.push(f)}return c}
function Ce(a,b,c,d,e,f){if(!d.baseUrl||0===d.baseUrl.length)return null;var g=null,h=1,l=0;if(d.g){g=d.f.split("/")[1];if("mp4"!=g&&"webm"!=g)g=null;else{var k=d.g;"webm"!=g||k.f?k.b||k.c&&k.c.a?(h=k.c,h||(h=new Gc,h.url=d.baseUrl,h.a=k.b?k.b.clone():null),l=Fe(h,f),h=k.f?Fe(k.f,f):null,k.g?(k=k.g,k=new K(f,d.baseUrl,k.sa,k.end)):k=null,b=new te(b,c,g,l,h,k,e,f,a.l),c=new wd(h),e=new Sd,e.I=b,e.L=c,g=e):g=null:g=null}h=d.g.a;l=d.g.h}else if(d.b)a=d.b,!a.c&&!a.f&&1<a.b.length?g=null:a.c||c.a||a.f||
1!=a.b.length?a.f&&0===a.f.a.length?g=null:(a=a.h?Fe(a.h,f):null,b=new Qd(b,c,d,e,f),c=new wd(a),e=new Sd,e.I=b,e.L=c,g=e):g=null,h=d.b.a,l=d.b.g;else if(d.a){a:if(g=d.a,h=0+(g.f?1:0),h+=g.c?1:0,h+=g.b?1:0,0==h?h=!1:(1!=h&&(g.f?(g.c=null,g.b=null):g.c&&(g.b=null)),h=!0),h){h=null;if(g.g&&(h=(g=d.a.g)?Ge(d,g,Hc):null,!h)){g=null;break a}g=h?Fe(h,f):null;h=d.a;h.f?(h=d.f.split("/")[1],"mp4"!=h&&"webm"!=h?b=null:"webm"!=h||g?sd(f,d,1,0)?(l=(l=d.a.f)?Ge(d,l,Gc):null)?(l=Fe(l,f),b=new te(b,c,h,l,g,null,
e,f,a.l)):b=null:b=null:b=null):b=h.h?h.c?new Rd(b,c,d,e,f):h.b?"dynamic"!=b.type&&null==c.a?null:new Pd(b,c,d,e,f):null:null;b?(c=new wd(g),e=new Sd,e.I=b,e.L=c,g=e):g=null}else g=null;h=d.a.a;l=d.a.i}else"text"==d.f.split("/")[0]&&(g=new Sd,g.I=new qe(new K(f,d.baseUrl)));if(!g)return null;g.id=d.id;l&&(g.b=-1*l/h);g.bandwidth=d.bandwidth;g.width=d.width;g.height=d.height;g.a=d.f||"";g.c=d.h||"";g.fbQualityLabel=d.fbQualityLabel||null;g.fbQualityClass=d.fbQualityClass||null;for(b=0;b<d.c.length;++b)c=
d.c[b],c.b&&g.f.push(c.b);return g}function Ge(a,b,c){b=ud(b,a.id,null,a.bandwidth,null);if(!b)return null;c=new c;c.url=ld(a.baseUrl,b);return c}function Fe(a,b){var c=a.url,d=0,e=null;a.a&&(d=a.a.sa,e=a.a.end);return new K(b,c,d,e)};function X(){this.a=this.b=null;this.f=new cb;this.c=Number.POSITIVE_INFINITY;this.i=!0;this.g=!1}p("shaka.media.SimpleAbrManager",X);X.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null};X.prototype.initialize=function(a,b){this.b||this.a||(this.b=a,this.a=b)};
X.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4E3,C(this.f,this.b,"bandwidth",this.m.bind(this)),C(this.f,this.a,"adaptation",this.j.bind(this)),C(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=!0)};X.prototype.enable=function(a){this.i=a};X.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var a=He(this);return a?a.id:null};X.prototype.getInitialSwitchReason=function(){return null};X.prototype.getInitialAudioTrackId=function(){return null};
X.prototype.selectVideoTrack=function(a,b,c){this.g&&this.a.selectVideoTrack(a.id,b,c)};X.prototype.m=function(){Date.now()<this.c||this.h()};X.prototype.h=function(){if(this.i){var a=He(this);if(a){if(a.active){this.c=Date.now()+3E3;return}this.selectVideoTrack(a,!1)}this.c=Number.POSITIVE_INFINITY}};X.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+3E4)};
function He(a){var b=a.a.N();if(0==b.length)return null;b.sort(va);var c;a:{c=a.a.Na();for(var d=0;d<c.length;++d)if(c[d].active){c=c[d];break a}c=null}c=c?c.bandwidth:0;a=a.b.getBandwidth();for(var d=b[0],e=0;e<b.length;++e){var f=b[e],g=e+1<b.length?b[e+1]:{bandwidth:Number.POSITIVE_INFINITY};if(f.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(f.bandwidth+c)/.95&&a<=g&&(d=f,d.active)))break}return d};function Y(a,b,c){D.call(this,null);this.a=a;this.$=b;this.j=new cb;this.h=new MediaSource;this.G=this.c=null;this.Pa=0;this.Wa=this.kb=!1;this.La=0;this.l=null;this.Ka=3;this.Ha=this.lb=!1;this.xa=0;this.T=new gd;this.Cb=1;this.vb=Infinity;this.ib=this.gb=!1;this.U=this.ra=null;this.ga=this.rb=this.R=!1;this.f=new B;this.m=c;this.m.initialize(b,this);this.F=!1;this.C="en";this.aa=!1;this.B=new H;this.Ja=new H;this.i=new la;this.v=null;this.Eb=1;this.b={};this.V=new H;this.qa=0;this.Bb=15;this.w=
null;this.tb=!1;this.sb=0;this.ea=!1;this.o={};this.O=this.M=this.H=null;this.g={};this.Z=!1;this.P=this.Xa=null}q(Y,D);p("shaka.player.StreamVideoSource",Y);Y.prototype.jb=function(){return{VideoSourceStream:this.b.video,AudioSourceStream:this.b.audio,TextSourceStream:this.b.text,BandwidthEstimator:this.$}};Y.prototype.getStreamDebug=Y.prototype.jb;
Y.prototype.Fb=function(a){null!=a.streamBufferSize&&(this.g.streamBufferSize=a.streamBufferSize);null!=a.initialStreamBufferSize&&(this.g.initialStreamBufferSize=a.initialStreamBufferSize);null!=a.dynamicStreamBufferSize&&(this.g.dynamicStreamBufferSize=a.dynamicStreamBufferSize);null!=a.smartBufferAdjustmentParams&&(this.g.smartBufferAdjustmentParams=a.smartBufferAdjustmentParams);null!=a.addCdnDebugQueryParameters&&(this.g.addCdnDebugQueryParameters=a.addCdnDebugQueryParameters);null!=a.segmentRequestTimeout&&
(this.g.segmentRequestTimeout=a.segmentRequestTimeout);null!=a.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.g.resolveVideoTimeUpdateOnFragmentedTimeRanges=a.resolveVideoTimeUpdateOnFragmentedTimeRanges);null!=a.reappendInitSegmentAfterAbort&&(this.g.reappendInitSegmentAfterAbort=a.reappendInitSegmentAfterAbort);null!=a.liveDataFetchMaxRetries&&(this.g.liveDataFetchMaxRetries=a.liveDataFetchMaxRetries);null!=a.liveSourceBufferClearMaxRetries&&(this.g.liveSourceBufferClearMaxRetries=a.liveSourceBufferClearMaxRetries);
null!=a.playheadFragmentedGapDiffAllowance&&(this.g.playheadFragmentedGapDiffAllowance=a.playheadFragmentedGapDiffAllowance);null!=a.fixBufferingGoalDetermination&&(this.g.fixBufferingGoalDetermination=a.fixBufferingGoalDetermination);null!=a.skipEmptySegments&&(this.g.skipEmptySegments=a.skipEmptySegments);null!=a.useMicroTaskTimeouts&&(this.g.useMicroTaskTimeouts=a.useMicroTaskTimeouts);Ie(this);null!=a.includeStreamBufferSizeInStartOffset&&(this.kb=Boolean(a.includeStreamBufferSizeInStartOffset));
null!=a.liveAudioPushRepresentation&&(this.U=String(a.liveAudioPushRepresentation));null!=a.liveInitialPushRepresentation&&(this.ra=String(a.liveInitialPushRepresentation));null!=a.enableAdaptation&&this.m.enable(Boolean(a.enableAdaptation));null!=a.mpdRequestTimeout&&(this.La=Number(a.mpdRequestTimeout));null!=a.minMpdRefreshInterval&&(this.Ka=Number(a.minMpdRefreshInterval)/1E3);null!=a.enableManifestDebug&&(this.ib=!!a.enableManifestDebug);null!=a.liveStreamEndTimeout&&(this.Bb=Number(a.liveStreamEndTimeout));
null!=a.preferredLanguage&&(this.C=Ra(String(a.preferredLanguage)));null!=a.liveSendPushHeaders&&(this.Ha=Boolean(a.liveSendPushHeaders));null!=a.liveMaxManifestFetchesWithPush&&(this.xa=Number(a.liveMaxManifestFetchesWithPush));null!=a.currentTimeDuringReadyStateZeroThrows&&(this.gb=Boolean(a.currentTimeDuringReadyStateZeroThrows));null!=a.liveMaxSegmentsToPush&&(this.vb=Number(a.liveMaxSegmentsToPush));null!=a.jumpToLiveThreshold&&(this.sb=Number(a.jumpToLiveThreshold));null!=a.restrictions&&(this.i=
a.restrictions,this.F&&Je(this));null!=a.useLongCacheForManifest&&(this.R=Boolean(a.useLongCacheForManifest));null!=a.jumpToEarliestPositionInCurrentBlock&&(this.rb=Boolean(a.jumpToEarliestPositionInCurrentBlock));null!=a.ignoreMinBufferTime&&(this.ga=Boolean(a.ignoreMinBufferTime))};
Y.prototype.destroy=function(){this.B.destroy();this.V.destroy();this.V=this.B=null;this.M&&(clearTimeout(this.M),this.M=null);this.H&&(clearTimeout(this.H),this.H=null);this.o=null;this.j.destroy();this.j=null;Wa(this.b).forEach(function(a){a.destroy()});this.f=this.b=null;this.a&&(this.a.destroy(),this.a=null);this.m.destroy();this.da=this.i=this.c=this.h=this.$=this.m=null;this.P&&(this.P.disable(),this.P=null)};
function mb(a,b){if(a.l){var c=a.l.getOperationLogger("media_source_open").start();a.Ja.then(function(){c.log()})}C(a.j,a.h,"sourceopen",a.Ub.bind(a));b.src=window.URL.createObjectURL(a.h)}m=Y.prototype;m.bb=function(){};
function sb(a,b,c){var d;a.l&&(d=a.l.getOperationLogger("source_attach").start());if(!a.F)return a=Error("Cannot call attach() right now."),a.type="app",d&&d.setError(a).log(),Promise.reject(a);a.da=b;a.c=c;a.G=null;C(a.j,a.c,"loadedmetadata",a.Tb.bind(a));C(a.j,a.$,"bandwidth",a.gc.bind(a));a.a.b&&(C(a.j,b,"bufferingStart",a.Rb.bind(a)),C(a.j,b,"bufferingEnd",a.Qb.bind(a)));Ke(a).then(F(a,function(){this.B&&this.B.resolve();this.bb()})).catch(F(a,function(a){this.B&&this.B.reject(a)}));return a.B.then(function(){d&&
d.log()})}
m.Fa=function(){if(this.F){var a=Error("Cannot call load() right now.");a.type="app";return Promise.reject(a)}if(!this.a||0==this.a.a.length)return a=Error("The manifest does not specify any content."),a.type="stream",Promise.reject(a);ie(this.a.a);if(0==this.a.a.length||0==this.a.a[0].a.length||!this.a.a[0].a.some(function(a){return"video"===a.contentType}))return a=Error("The manifest specifies content that cannot be displayed on this browser/platform."),a.type="stream",Promise.reject(a);this.F=
!0;this.ga||(this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c));Ie(this);Je(this);return Promise.resolve()};function Le(a){var b=x({type:"manifestwrapped",bubbles:!0});a.dispatchEvent(b)}
m.ob=function(a){var b;this.l&&(b=this.l.getOperationLogger("update_manifest").start());var c=Date.now(),d=this.H=null,e,f;if(this.Ha&&(!this.xa||this.xa>this.Cb)){e=Math.floor(Me(this))+1;e=Math.min(e,this.vb);var g=this.b.video;if(g=g?g.Sa():null)g=g.A(),null!=g.a&&(f=g.a);if(this.c.paused||this.Z)e=0}e&&this.Cb++;g=this.a.g;b&&!a&&b.setResource(g.toString());(a?this.mb():this.nb(g,e,f)).then(F(this,function(a){d=new ke(a);return d.update(this.a)})).then(F(this,function(a){d.destroy();d=null;var e=
Ne(this);this.ka("SegmentIndexesUpdated",e);e.some(function(a){return a.Va})&&Le(this);(e=Oe(this,e))&&this.c.paused&&e.end>this.c.currentTime+10&&(this.c.currentTime=e.end);if(zb(this))return b&&b.log(),this.Ca();for(e=0;e<a.length;++e)Qe(this,a[e]);this.ga||(this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c));this.g.useInitialBufferSizeWhenPaused=this.a.b;Ie(this);Je(this);0==Object.keys(this.b).length?Ke(this):Re(this,(Date.now()-c)/1E3);b&&b.log()})).catch(F(this,
function(a){b&&b.setError(a).log();d&&(d.destroy(),d=null);if("delay"==a.type)return Re(this,0);"aborted"!=a.type&&(a=y(a),this.dispatchEvent(a),this.a&&Re(this,0))}))};m.nb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")};m.mb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")};
function Re(a,b){if(null!=a.a.f){var c=Math.max(a.a.f,a.Ka),c=Math.max(c-b,0),d=a.ob.bind(a,!1);if(!c&&a.g.useMicroTaskTimeouts)return Promise.resolve().then(d);a.H=setTimeout(d,1E3*c)}}
function Qe(a,b){var c=b.a.split("/")[0],d=a.b[c];if(d&&d.ta()==b){var e=a.f.get(b.a.split("/")[0]).map(function(a){return a.s}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return a.ja&&a.S});if(0==e.length){c=Error("All usable streams have been removed from the manifest.");c.type="app";c=y(c);a.dispatchEvent(c);return}a.o[c].Ab==b&&delete a.o[c];d.za(e[0],!0);b.destroy()}b.destroy()}m.dc=function(a){this.Xa=a};Y.prototype.setTaggedTimeRangesEntryAdder=Y.prototype.dc;
Y.prototype.Ib=function(){if(!this.f||!this.f.a.hasOwnProperty("video"))return 0;var a=this.b.video;return a?a.$:0};Y.prototype.getFetchedVideoSegmentsCount=Y.prototype.Ib;
Y.prototype.N=function(){if(!this.f||!this.f.a.hasOwnProperty("video"))return[];for(var a=this.b.video,a=(a=a?a.ta():null)?a.J:0,b=[],c=this.f.get("video"),d=0;d<c.length;++d)for(var e=c[d],f=0;f<e.s.length;++f){var g=e.s[f];if(g.ja&&g.S){var h=g.J,g=new ua(h,g.bandwidth,g.width,g.height,g.id,g.fbQualityLabel,g.fbQualityClass);h==a&&(g.active=!0);b.push(g)}}return b};Y.prototype.getVideoTracks=Y.prototype.N;function Se(a){a=a.N();for(var b=0;b<a.length;b++)if(a[b].active)return a[b]}
Y.prototype.Na=function(){if(!this.f||!this.f.a.hasOwnProperty("audio"))return[];for(var a=this.b.audio,a=(a=a?a.ta():null)?a.J:0,b=[],c=this.f.get("audio"),d=0;d<c.length;++d)for(var e=c[d],f=e.lang,g=0;g<e.s.length;++g){var h=e.s[g];if(h.ja&&h.S){var l=h.J,h=new ka(l,h.bandwidth,f,h.id);l==a&&(h.active=!0);b.push(h)}}return b};Y.prototype.getAudioTracks=Y.prototype.Na;
Y.prototype.Gb=function(){if(!this.f||!this.f.a.hasOwnProperty("text"))return[];for(var a=this.b.text,b=a?a.ta():null,b=b?b.J:0,c=[],d=this.f.get("text"),e=0;e<d.length;++e)for(var f=d[e],g=f.lang,h=0;h<f.s.length;++h){var l=f.s[h].J,k=new ta(l,g);l==b&&(k.active=!0,k.enabled=a.Qa());c.push(k)}return c};Y.prototype.getTextTracks=Y.prototype.Gb;function yb(a){var b=Number(a.g.initialStreamBufferSize);a.g.fixBufferingGoalDetermination&&(b=1);return a.lb?Number(a.g.streamBufferSize):b}
Y.prototype.selectVideoTrack=function(a,b,c,d){return vb(this,"video",a,b,c,d)};function wb(a,b){var c=a.b.text;c&&c.Ea(b)}
function Je(a){if(a.i){for(var b=!1,c=0;c<a.a.a.length;++c)for(var d=a.a.a[c],e=0;e<d.a.length;++e){var f=d.a[e];if("video"==f.contentType)for(var g=0;g<f.s.length;++g){var h=f.s[g],l=h.S;h.S=!0;a.i.maxWidth&&h.width>a.i.maxWidth&&(h.S=!1);a.i.maxHeight&&h.height>a.i.maxHeight&&(h.S=!1);a.i.minHeight&&h.height<a.i.minHeight&&(h.S=!1);a.i.maxBandwidth&&h.bandwidth>a.i.maxBandwidth&&(h.S=!1);a.i.minBandwidth&&h.bandwidth<a.i.minBandwidth&&(h.S=!1);l!=h.S&&(b=!0)}}0!=$a(a.f).length&&b&&(b=x({type:"trackschanged",
bubbles:!0}),a.dispatchEvent(b),0<a.N().length||(b=Error("The application has restricted all video tracks!"),b.type="app",b=y(b),a.dispatchEvent(b)))}}Y.prototype.Oa=function(){return this.a?this.a.b:null};Y.prototype.isLive=Y.prototype.Oa;Y.prototype.Jb=function(a){this.lb=a};Y.prototype.setIsLiveInterrupted=Y.prototype.Jb;Y.prototype.Mb=function(){for(var a in this.b)this.b[a].wb()};Y.prototype.forceResyncVideoBuffer=Y.prototype.Mb;
function vb(a,b,c,d,e,f){if(!a.f.a.hasOwnProperty(b)||!a.b[b])return!1;for(var g=a.f.get(b),h=0;h<g.length;++h)for(var l=g[h],k=0;k<l.s.length;++k){var n=l.s[k];if(n.J==c){if(!n.ja||!n.S)return!1;if("text"!=b&&!a.ea)return c=a.o[b],a.o[b]={Ab:n,Za:null!=c&&c.Za||d,$a:null!=c&&c.$a||e,switchReason:f},!0;a.b[b].za(n,d,e,f);return!0}}return!1}
function pb(a,b){for(var c=0;2>=c;++c)for(var d=0;d<b.length;++d){var e=b[d];if(Qa(c,a.C,e.lang)){b.splice(d,1);b.splice(0,0,e);return}}for(d=0;d<b.length;++d)if(e=b[d],e.c){b.splice(d,1);b.splice(0,0,e);break}}m=Y.prototype;m.Ub=function(){this.j.Aa(this.h,"sourceopen");this.Ja.resolve()};
function Ke(a){var b;a.l&&(b=a.l.getOperationLogger("start_streams").start());for(var c=[],d=["audio","video","text"],e=0;e<d.length;++e){var f=d[e];a.f.a.hasOwnProperty(f)&&c.push(a.f.get(f)[0])}for(var g=Te(a,c),e=0;e<d.length;++e)if(f=d[e],a.f.a.hasOwnProperty(f)&&!g[f])return a=Error("Unable to select an initial "+f+" stream: all "+f+" streams have been restricted (by the application or by the key system)."),a.type="stream",b&&b.setError(a).log(),Promise.reject(a);c=Wa(g).map(function(a){return a.I.create()});
c.push(a.Ja);return Promise.all(c).then(F(a,function(a){a.pop();if(!a.every(function(a){return a.length()}))return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);a=Oe(this,a);if(!a)return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);if(!Ue(this,g))return a=Error("Failed to create Stream objects."),a.type="stream",Promise.reject(a);this.m.start();Ve(this,g,a);return Promise.resolve()})).then(function(){b&&b.log()}).catch(F(a,function(a){if("aborted"==
a.type)b&&b.setError(a).log();else{Object.keys(this.b);if(this.a.b)return ya()<this.a.h?(a=Math.max(this.a.h-Date.now()/1E3,this.Ka),this.H=setTimeout(this.ob.bind(this,!0),1E3*a)):Re(this,0),b&&b.log(),Promise.resolve();b&&b.setError(a).log();return Promise.reject(a)}}))}
function Te(a,b){for(var c={},d=0;d<b.length;++d){var e=b[d],f=null;if("video"==e.contentType){var g=a.m.getInitialVideoTrackId();if(null==g)continue;f=e.s.filter(function(a){return a.J==g});if(0==f.length)continue;f=f[0]}else if("audio"==e.contentType)if(g=a.m.getInitialAudioTrackId(),f=e.s.filter(function(a){return a.J==g}),0==f.length){f=e.s.filter(function(a){return a.ja&&a.S});if(0==f.length)continue;f=e.s[Math.floor(f.length/2)]}else f=f[0];else 0<e.s.length&&(f=e.s[0]);c[e.contentType]=f}return c}
function Ue(a,b){var c={},d;for(d in b){var e=b[d],e="text"==d?new re(a,a.c):We(a,e);if(!e)return Wa(c).forEach(function(a){a.destroy()}),!1;c[d]=e}a.Hb(a.Wa);a.b=c;return!0}function We(a,b){var c=Ud(b),d=a.Oa()?VideoPlayerShakaExperiments.enableRequestPipeliningForLive:VideoPlayerShakaExperiments.enableRequestPipeliningForVod,e=null;"video"===b.a.split("/")[0]&&d&&(e=a.P||new SegmentRequestManager(c.split(";")[0],a.l),a.P=e);c=new $d(a,a.c,a.h,c,a.$,a.Xa,a.T,e);c.R(a.g);return c}
function Xe(a,b){a.c.currentTime=b;a.v=b}
function Ve(a,b,c){a.Eb=a.c.playbackRate;a.c.playbackRate=0;Ye(a,c);var d;a.O&&a.O<=c.end&&a.O>=c.start?d=a.O:a.a.b?(d=c.end,a.tb=!0):d=c.start;C(a.j,a.c,"seeking",a.Zb.bind(a));if(a.c.currentTime!=d)if(a.gb)0!==a.c.readyState?Xe(a,d):Ze(a,d);else try{Xe(a,d)}catch(e){Ze(a,d)}$e(a,c.start,c.end);var f=[],g;for(g in a.b){c=a.b[g];F(a,function(a){f.push(a.zb(this.V).then(F(this,function(b){var c=a.Da();c>this.Pa&&(this.Pa=c);return b})))})(c);C(a.j,c,"ended",a.$b.bind(a));C(a.j,c,"should_nudge",a.Wb.bind(a));
d=b[g];var h=a.m.getInitialSwitchReason()||void 0;c.za(d,!1,void 0,h)}Promise.all(f).then(a.Pb.bind(a)).catch(F(a,function(a){"destroy"!=a.type&&(a=y(a),this.dispatchEvent(a))}));wb(a,a.aa)}function Ze(a,b){a.G=b;for(var c in a.b){var d=a.b[c];a.G&&(d.U=a.G)}}
m.Pb=function(a){ba(a&&a.length==Object.keys(this.b).length);for(var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=0;d<a.length;++d)var e=a[d],b=Math.min(b,e),c=Math.max(c,e);a=Ne(this);for(d=0;d<a.length;++d)a[d].na(c);af(this,a,c);var f=Wa(this.b).map(function(a){return a.ta().id});VideoPlayerShakaExperiments.sequentiallyLoadStreams?bf(this,f,c):(d=$a(this.f).map(function(a){return a.s}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return!~f.indexOf(a.id)}).map(function(a){var b=
[a.I.Ba?a.I.Ba():a.I.create()];a.L&&b.push(a.L.create(this.l,this.T));return Promise.all(b)}),Promise.all(d).then(F(this,function(a){for(var b=0;b<a.length;++b)a[b][0].na(c);this.ea=!0;cf(this)})).catch(F(this,function(a){"aborted"!=a.type&&(a=y(a),this.dispatchEvent(a))})))};
function bf(a,b,c){var d=Promise.resolve();$a(a.f).map(function(a){return a.s}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return!~b.indexOf(a.id)}).forEach(function(a){d=d.then(F(this,function(b){b&&b[0].na(c);b=[a.I.Ba?a.I.Ba():a.I.create()];a.L&&b.push(a.L.create(this.l,this.T));return Promise.all(b)})).catch(function(a){throw a;})});d.then(F(a,function(){this.ea=!0;cf(this)})).catch(F(a,function(a){"aborted"!=a.type&&(a=y(a),this.dispatchEvent(a))}))}
function cf(a){for(var b in a.o){var c=a.o[b];a.b[b].za(c.Ab,c.Za,c.$a,c.switchReason)}a.o={}}function af(a,b,c){if(b=Oe(a,b))Ye(a,b),$e(a,b.start,b.end);if(0!=c)b=a.c.currentTime+c,a.c.currentTime=b,a.v=b;else if(a.tb&&b){c=b.end;if(a.rb){var d=a.c.currentTime;d>=b.start&&d<=b.end&&d<c&&(c=d)}b=c;Math.abs(b-a.c.currentTime)>=a.sb&&(a.c.currentTime=b)}a.c.playbackRate=a.Eb;a.a.b&&null!=a.a.f&&Re(a,0);df(a);a.V.resolve()}
function Ye(a,b){if(a.a.b)isNaN(a.h.duration)&&(a.h.duration=b.end+2592E3);else if(isNaN(a.h.duration)||b.end>a.h.duration){a.h.duration=b.end;for(var c=0;c<a.h.sourceBuffers.length;++c)a.h.sourceBuffers[c].appendWindowEnd=b.end}}m.ac=function(){this.M=null;df(this);var a=Oe(this,Ne(this));a&&(this.a.b&&this.qa!=a.A&&(this.qa=a.A,null!=this.w&&(clearTimeout(this.w),this.w=null)),$e(this,a.start,a.end),this.c.paused||ef(this,this.c.currentTime,a.start,a.end))};
function $e(a,b,c){b=x({type:"seekrangechanged",bubbles:!0,start:b,end:c});a.dispatchEvent(b)}m.Zb=function(){var a=this.c.currentTime;if(null!=this.v){if(a>=this.v-.01&&a<=this.v+.01){this.v=null;return}this.v=null}var b=Oe(this,Ne(this));if(b){var c=b.end;(b=ef(this,a,b.start,c))||(a<=c+.01||this.a.b&&!ff(this,c)?b=!1:(this.c.currentTime=c,b=!0));if(!b)for(var d in this.b)this.b[d].ub()}};
function ef(a,b,c,d){if(b>=c-.01)return!1;b=0;a.a.b&&(b=.5,ff(a,c+b)||(b=a.a.c));a.c.currentTime=Math.min(c+b,d);return!0}function ff(a,b){for(var c in a.b)if(!a.b[c].xb(b))return!1;return!0}m.$b=function(){if(!this.a.b){for(var a in this.b)if(!this.b[a].Ta())return;this.Ca()}};m.Wb=function(){VideoPlayerShakaExperiments.ignoreSeekWhenNudging&&(this.v=this.c.currentTime);this.c.currentTime+=.001};
m.eb=function(){var a=this.a,b=null,c=null;a&&a.a&&a.a[0]&&(b=a.a[0]);b&&b.a&&b.a[0]&&(c=b.a[0]);return!!c&&c.b};Y.prototype.hasInlinedCea608Subtitles=Y.prototype.eb;Y.prototype.Hb=function(a){this.Wa=a;var b=this.b;"video"in b&&(b.video.a.M=a&&this.eb())};Y.prototype.setEnableCea608Parsing=Y.prototype.Hb;function zb(a){return a.a.i&&a.c.currentTime+.5>a.qa?!0:!1}m=Y.prototype;
m.Rb=function(){this.Z=!0;if(zb(this))return this.Ca();Wa(this.b).every(function(a){return a.Ta()})&&(this.w=setTimeout(this.Ca.bind(this),1E3*this.Bb))};m.Qb=function(){this.Z=!1;null!=this.w&&(clearTimeout(this.w),this.w=null)};m.Tb=function(){null!==this.G&&(Xe(this,this.G),Ze(this,null))};m.gc=function(){};m.Ca=function(){this.Z=!1;this.w=null;this.h.endOfStream()};function Ne(a){return Wa(a.b).map(function(a){return a.Sa()}).filter(function(a){return null!=a})}
function Me(a){return Math.max(a.a?a.a.c:1,a.kb?a.g.streamBufferSize||0:0)}function Oe(a,b){for(var c=0,d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,f=0;f<b.length;++f){var g=b[f].Ra(),c=Math.max(c,g.start);null!=g.end&&(d=Math.min(d,g.end));b[f].length()&&(e=Math.min(e,b[f].A().endTime))}if(d==Number.POSITIVE_INFINITY)if(d=a.a.a[0],d.b)d=(d.start||0)+d.b;else return null;a.a.b&&(f=Me(a),d=Math.max(d-f,c));if(c>d)return null;d=Math.floor(1E5*d)/1E5;return{start:c,end:d,A:e}}
function df(a){a.a.b&&(a.M=setTimeout(a.ac.bind(a),1E3))}function Ie(a){for(var b in a.b)a.b[b].R(a.g)}m.Da=function(){return this.Pa};Y.prototype.getLongestInitResponseTime=Y.prototype.Da;function Z(a,b,c,d){c||(c=new G);d||(d=new X);Y.call(this,null,c,d);"string"===typeof a?this.Db=a:this.Ma=a;this.K=null;this.W=b;this.fa=[];this.cb=[];this.fb=[];this.pa=0;this.D=null}q(Z,Y);p("shaka.player.DashVideoSource",Z);Z.prototype.hb=function(){return this.Ma||this.K};Z.prototype.debugGetManifest=Z.prototype.hb;Z.prototype.Kb=function(a,b,c){this.fa.push(a);this.cb.push(b||"");this.fb.push(c||"")};Z.prototype.addExternalCaptions=Z.prototype.Kb;Z.prototype.Lb=function(a){this.D=a};
Z.prototype.setNetworkCallback=Z.prototype.Lb;Z.prototype.destroy=function(){this.K=this.D=this.W=null;Y.prototype.destroy.call(this)};
Z.prototype.Fa=function(){var a;this.l&&(a=this.l.getOperationLogger("source_load").start());var b,c=F(this,function(c){this.ka("MPDFetchDuration",(Date.now()-b)/1E3);this.K=c;for(var d=0;d<this.fa.length;d++)Sc(c,this.fa[d],this.cb[d],this.fb[d]);this.a=we(new ve(this.W,this.l),c,this.D);return Y.prototype.Fa.call(this).then(function(){a&&a.log()})});if(this.Ma)return b=Date.now(),c(this.Ma);var d=[new L(this.Db)],e;if(this.Ha){var f=new VideoPushParametersHelper(this.Db);f.setStreamEndOffset(Me(this));
this.ra&&f.setPushVideoRepresentationID(this.ra);this.U&&f.setPushAudioRepresentationID(this.U);this.R&&f.setUseLongCacheForManifest(this.R);e=new qd(null);e.a=f}d=new K(this.D,d);e=new od(d,this.La,e,this.T);b=Date.now();return pd(e,this.l).then(c)};
Z.prototype.bb=function(){if(this.ib){var a=this.a;if(a=(a=a&&a.a)&&a[0]){var a=a.a.reduce(function(a,b){return a.concat(b.s)},[]),b=function(a){return null!=a};Promise.all(a.map(function(a){a=a.I;return a.Nb?a.ma:a.create()})).then(function(a){a=a.filter(b);this.ka("InitialSegmentIndexes",a)}.bind(this));Promise.all(a.map(function(a){return a.L})).then(function(a){a=a.filter(b);this.ka("SegmentInitSources",a)}.bind(this))}}};
Z.prototype.nb=function(a,b,c){if(this.c.paused&&this.pa+1E4>Date.now()&&this.a)return Promise.reject({type:"delay"});var d;if(b&&void 0!=c)d=new qd(b),d.f=c,b=Se(this),null!=b&&(d.c=b.streamInfoID,d.b=this.U);else for(b=a.b,c=0;c<b.length;c++){var e=new VideoPushParametersHelper(b[c].toString());this.R&&e.setUseLongCacheForManifest(this.R);b[c]=new L(e.getURL())}a=new od(a,this.La,d,this.T);var f=Date.now();return pd(a,this.l).then(F(this,function(a){this.pa=Date.now();this.ka("MPDFetchDuration",
(this.pa-f)/1E3);this.K=a;a=we(new ve(this.W,this.l),a,this.D);return Promise.resolve(a)}))};Z.prototype.mb=function(){var a=we(new ve(this.W),this.K,this.D);return Promise.resolve(a)};}.bind(g, global))();

module.exports = g.shaka;


/* Y0T9BhhVYlz */}),null);
__d("VideoPlayerUtils",[],(function a(b,c,d,e,f,g){var h={getBufferedAheadOf:function i(j){var k=1/60,l=j.currentTime,m=j.buffered;for(var n=0;n<m.length;n++){var o=m.start(n)-k,p=m.end(n)+k;if(l>=o&&l<=p)return m.end(n)-l;}return 0;}};f.exports=h;}),null);
__d('CastingExperienceManager',['invariant','regeneratorRuntime','Promise','ChromecastConfig','ChromecastScanner','ChromecastScannerEnum','ChromecastSession','EventEmitter','Map','Random','SubscriptionsHandler','WebStorage'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('WebStorage').getLocalStorage(),l=null;i=babelHelpers.inherits(m,c('EventEmitter'));j=i&&i.prototype;function m(){j.constructor.call(this);this.$CastingExperienceManager5=new (c('ChromecastScanner'))(c('ChromecastConfig').APP_ID,c('ChromecastConfig').NAMESPACE,c('ChromecastConfig').AUTO_SCAN);this.$CastingExperienceManager2=null;this.$CastingExperienceManager1=false;this.$CastingExperienceManager4=0;this.$CastingExperienceManager7=null;this.$CastingExperienceManager10=new (c('Map'))();var n=new (c('SubscriptionsHandler'))();n.addSubscriptions(this.$CastingExperienceManager5.addListener(c('ChromecastScannerEnum').RECEIVER_STATUS_CHANGED,function(o){return this.$CastingExperienceManager11(o);}.bind(this)),this.$CastingExperienceManager5.addListener(c('ChromecastScannerEnum').SESSION_DISCONNECTED,function(){return this.$CastingExperienceManager12();}.bind(this)),this.$CastingExperienceManager5.addListener(c('ChromecastScannerEnum').SESSION_STARTED,function(o){return this.$CastingExperienceManager13(o);}.bind(this)),this.$CastingExperienceManager5.addListener(c('ChromecastScannerEnum').SESSION_DISCONNECTED,function(){return this.$CastingExperienceManager14();}.bind(this)),this.$CastingExperienceManager5.addListener(c('ChromecastScannerEnum').ERROR,function(o){return this.$CastingExperienceManager15(o);}.bind(this)));this.$CastingExperienceManager8=this.$CastingExperienceManager5.ready();this.$CastingExperienceManager8.then(function(){this.$CastingExperienceManager2=true;this.$CastingExperienceManager1=true;this.emit(m.READY);}.bind(this),function(o){this.$CastingExperienceManager2=false;n.release();this.emit(m.NOT_SUPPORTED,o);}.bind(this)).done();}m.getInstance=function(){if(!l)l=new m();return l;};m.prototype.ready=function n(){return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:p.next=2;return c('regeneratorRuntime').awrap(this.$CastingExperienceManager8);case 2:case 'end':return p.stop();}},null,this);};m.prototype.getLastError=function(){return this.$CastingExperienceManager3;};m.prototype.hasSupport=function(){return this.$CastingExperienceManager2;};m.prototype.hasFoundReceiver=function(){return this.$CastingExperienceManager5.hasFoundReceiver();};m.prototype.getSession=function n(){var o;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:q.next=2;return c('regeneratorRuntime').awrap(this.ready());case 2:if(!this.$CastingExperienceManager6){q.next=4;break;}return q.abrupt('return',this.$CastingExperienceManager6);case 4:if(!this.$CastingExperienceManager9)this.$CastingExperienceManager9=this.$CastingExperienceManager16();o=null;q.prev=6;q.next=9;return c('regeneratorRuntime').awrap(this.$CastingExperienceManager9);case 9:o=q.sent;q.next=16;break;case 12:q.prev=12;q.t0=q['catch'](6);this.emit(m.ERROR,q.t0);throw q.t0;case 16:q.prev=16;this.$CastingExperienceManager9=null;return q.finish(16);case 19:return q.abrupt('return',o);case 20:case 'end':return q.stop();}},null,this,[[6,12,16,19]]);};m.prototype.$CastingExperienceManager16=function n(){var o;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:q.next=2;return c('regeneratorRuntime').awrap(this.$CastingExperienceManager5.getSession());case 2:o=q.sent;if(!this.$CastingExperienceManager6)this.$CastingExperienceManager6=o;return q.abrupt('return',this.$CastingExperienceManager6);case 5:case 'end':return q.stop();}},null,this);};m.prototype.isRequestingSession=function(){return !!this.$CastingExperienceManager9;};m.prototype.getSessionKey=function(){var n=null;if(k)n=k.getItem('CastingSessionKey');if(!n){n=c('Random').uint32().toString(16);if(k)k.setItem('CastingSessionKey',n);}return n;};m.prototype.isCasting=function(n){var o=!!this.$CastingExperienceManager6&&this.$CastingExperienceManager6.isCasting();if(o&&n)o=!!this.$CastingExperienceManager7&&this.$CastingExperienceManager7.indexOf(n)>=0;return o;};m.prototype.startCasting=function n(o,p,q){var r,s,t;return c('regeneratorRuntime').async(function u(v){while(1)switch(v.prev=v.next){case 0:if(this.isCasting(o)){v.next=14;break;}r=null;if(!(c('ChromecastConfig').VERSION_LAUNCH_MESSAGE&&q)){v.next=8;break;}v.next=5;return c('regeneratorRuntime').awrap(this.sendVersionLaunch(o,p,q));case 5:r=v.sent;v.next=11;break;case 8:v.next=10;return c('regeneratorRuntime').awrap(this.sendLaunch(o));case 10:r=v.sent;case 11:s=r;t=s.target;this.$CastingExperienceManager7=t;case 14:case 'end':return v.stop();}},null,this);};m.prototype.stopCasting=function n(){var o;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:if(!this.isCasting()){q.next=6;break;}q.next=3;return c('regeneratorRuntime').awrap(this.getSession());case 3:o=q.sent;q.next=6;return c('regeneratorRuntime').awrap(o.disconnect());case 6:this.$CastingExperienceManager17();case 7:case 'end':return q.stop();}},null,this);};m.prototype.$CastingExperienceManager17=function(){this.$CastingExperienceManager6=null;this.$CastingExperienceManager7=null;};m.prototype.getTarget=function n(){var o,p;return c('regeneratorRuntime').async(function q(r){while(1)switch(r.prev=r.next){case 0:if(this.$CastingExperienceManager7){r.next=10;break;}r.next=3;return c('regeneratorRuntime').awrap(this.getSession());case 3:r.next=5;return c('regeneratorRuntime').awrap(this.sendVersion());case 5:o=r.sent;p=o.currently_running_experience;if(p){r.next=9;break;}throw new Error('Session has no target');case 9:this.$CastingExperienceManager7=p;case 10:return r.abrupt('return',this.$CastingExperienceManager7);case 11:case 'end':return r.stop();}},null,this);};m.prototype.setVolume=function(n){if(this.isCasting())this.$CastingExperienceManager6&&this.$CastingExperienceManager6.setVolume(n);};m.prototype.mute=function(){if(this.isCasting())this.$CastingExperienceManager6&&this.$CastingExperienceManager6.mute();};m.prototype.unmute=function(){if(this.isCasting())this.$CastingExperienceManager6&&this.$CastingExperienceManager6.unmute();};m.prototype.isFeedbackEnabled=function n(){var o,p;return c('regeneratorRuntime').async(function q(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return c('regeneratorRuntime').awrap(this.getExperienceState());case 2:o=r.sent;p=o.feedback_disabled;return r.abrupt('return',!!p);case 5:case 'end':return r.stop();}},null,this);};m.prototype.setFeedbackEnabled=function n(o){var p;return c('regeneratorRuntime').async(function q(r){while(1)switch(r.prev=r.next){case 0:if(this.isCasting()){r.next=2;break;}return r.abrupt('return');case 2:p=o?'turn_on_feedback':'turn_off_feedback';r.next=5;return c('regeneratorRuntime').awrap(this.sendCommand(p));case 5:case 'end':return r.stop();}},null,this);};m.prototype.sendMessage=function n(o,p,q){var r,s;return c('regeneratorRuntime').async(function t(u){while(1)switch(u.prev=u.next){case 0:u.next=2;return c('regeneratorRuntime').awrap(this.getSession());case 2:r=u.sent;r||h(0);s={target:o,type:p,data:q,num:this.$CastingExperienceManager4+=2,timestamp:Date.now()};u.next=7;return c('regeneratorRuntime').awrap(r.sendMessage(s));case 7:return u.abrupt('return',{msgNum:s.num});case 8:case 'end':return u.stop();}},null,this);};m.prototype.receiveMessage=function n(o){var p;return c('regeneratorRuntime').async(function q(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return c('regeneratorRuntime').awrap(this.getSession());case 2:p=r.sent;p||h(0);return r.abrupt('return',new (c('Promise'))(function(s,t){var u=p.addListener('message',function(v){try{var w=JSON.parse(v),x=!o||o(w);if(x){u.remove();s(w);}}catch(y){u.remove();t(y);}});}));case 5:case 'end':return r.stop();}},null,this);};m.prototype.sendVersion=function n(){var o,p,q,r;return c('regeneratorRuntime').async(function s(t){while(1)switch(t.prev=t.next){case 0:o=this.getSessionKey();t.next=3;return c('regeneratorRuntime').awrap(this.sendMessage('version','version_request',{version:m.VERSION,client_cast_session:o}));case 3:p=t.sent;q=p.msgNum;t.next=7;return c('regeneratorRuntime').awrap(this.receiveMessage(function(u){return u.response_num===q;}));case 7:r=t.sent;r.type==='version_response'||h(0);r.data||h(0);return t.abrupt('return',r.data);case 11:case 'end':return t.stop();}},null,this);};m.prototype.sendLaunch=function n(o){var p,q,r;return c('regeneratorRuntime').async(function s(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return c('regeneratorRuntime').awrap(this.sendMessage('experience','launch',{name:o}));case 2:p=t.sent;q=p.msgNum;t.next=6;return c('regeneratorRuntime').awrap(this.receiveMessage(function(u){return u.response_num===q;}));case 6:r=t.sent;r.type==='launch_response'||h(0);return t.abrupt('return',r.data);case 9:case 'end':return t.stop();}},null,this);};m.prototype.sendVersionLaunch=function n(o,p,q){var r,s,t,u;return c('regeneratorRuntime').async(function v(w){while(1)switch(w.prev=w.next){case 0:r=this.getSessionKey();w.next=3;return c('regeneratorRuntime').awrap(this.sendMessage('version_launch','version_launch',{version:m.VERSION,client_cast_session:r,name:o,params:p,payload:q}));case 3:s=w.sent;t=s.msgNum;w.next=7;return c('regeneratorRuntime').awrap(this.receiveMessage(function(x){return x.response_num===t;}));case 7:u=w.sent;u.type==='version_launch_response'||h(0);return w.abrupt('return',u.data);case 10:case 'end':return w.stop();}},null,this);};m.prototype.sendCommand=function n(o,p,q){var r,s,t,u;return c('regeneratorRuntime').async(function v(w){while(1)switch(w.prev=w.next){case 0:w.next=2;return c('regeneratorRuntime').awrap(this.getTarget());case 2:r=w.sent;w.next=5;return c('regeneratorRuntime').awrap(this.sendMessage(r,'experience_command',{cmd:o,params:p,payload:q}));case 5:s=w.sent;t=s.msgNum;w.next=9;return c('regeneratorRuntime').awrap(this.receiveMessage(function(x){return x.response_num===t;}));case 9:u=w.sent;u.type==='command_result'||h(0);if(o==='stop_showing_photo')this.emit(m.STOP_VIEW);return w.abrupt('return',u.data);case 13:case 'end':return w.stop();}},null,this);};m.prototype.getExperienceState=function n(o){var p,q,r;return c('regeneratorRuntime').async(function s(t){while(1)switch(t.prev=t.next){case 0:p=o||'';q=this.$CastingExperienceManager10.get(p);if(!q){q=this.$CastingExperienceManager18(o);this.$CastingExperienceManager10.set(p,q);r=function(){return this.$CastingExperienceManager10['delete'](p);}.bind(this);q.then(r,r).done();}return t.abrupt('return',q);case 4:case 'end':return t.stop();}},null,this);};m.prototype.$CastingExperienceManager18=function n(o){var p,q,r;return c('regeneratorRuntime').async(function s(t){while(1)switch(t.prev=t.next){case 0:if(o){t.next=4;break;}t.next=3;return c('regeneratorRuntime').awrap(this.getTarget());case 3:o=t.sent;case 4:t.next=6;return c('regeneratorRuntime').awrap(this.sendMessage(o,'get_experience_state',{}));case 6:p=t.sent;q=p.msgNum;t.next=10;return c('regeneratorRuntime').awrap(this.receiveMessage(function(u){return u.response_num===q;}));case 10:r=t.sent;r.type==='experience_state'||h(0);return t.abrupt('return',r.data);case 13:case 'end':return t.stop();}},null,this);};m.prototype.$CastingExperienceManager11=function(n){var o=n.foundReceiver;this.emit(m.RECEIVER_STATUS_CHANGED,!!o);};m.prototype.$CastingExperienceManager12=function(){this.$CastingExperienceManager17();this.emit(m.RECEIVER_DISCONNECTED);};m.prototype.$CastingExperienceManager13=function n(o){var p,q,r,s;return c('regeneratorRuntime').async(function t(u){while(1)switch(u.prev=u.next){case 0:this.$CastingExperienceManager6=o;p='extension';if(this.$CastingExperienceManager9)p='site';u.next=5;return c('regeneratorRuntime').awrap(this.sendVersion());case 5:q=u.sent;r=q.success;s=q.currently_running_experience;if(r){u.next=10;break;}throw new Error('Failed to sync versions with session');case 10:if(s)this.$CastingExperienceManager7=s;this.emit(m.SESSION_STARTED,{session:o,source:p,success:r,target:this.$CastingExperienceManager7});o.addListener('message',function(v){try{var w=JSON.parse(v);this.$CastingExperienceManager19(w);}catch(x){this.emit(m.ERROR,x);}}.bind(this));case 13:case 'end':return u.stop();}},null,this);};m.prototype.$CastingExperienceManager14=function(){var n=this.$CastingExperienceManager6;this.$CastingExperienceManager17();this.emit(m.SESSION_DISCONNECTED,n);};m.prototype.$CastingExperienceManager19=function(n){this.emit(m.SESSION_MESSAGE,n);if(n.type==='experience_ended'){this.$CastingExperienceManager7=null;this.emit(m.EXPERIENCE_ENDED);}};m.prototype.$CastingExperienceManager15=function(n){this.$CastingExperienceManager3=n;this.emit(m.ERROR,n);};m.VERSION='1.2.0';m.RECEIVER_STATUS_CHANGED='receiverstatuschanged';m.RECEIVER_DISCONNECTED='receiverdisconnected';m.SESSION_STARTED='sessionstarted';m.SESSION_MESSAGE='sessionmessage';m.SESSION_DISCONNECTED='sessiondisconnected';m.EXPERIENCE_ENDED='experienceended';m.ERROR='error';m.NOT_SUPPORTED='notsupported';m.READY='ready';m.STOP_VIEW='stopview';f.exports=m;}),null);
__d('StreamingReactionsTrayEvents',[],(function a(b,c,d,e,f,g){var h='streamingReactionsTray/AddReactionAnimate',i='streamingReactionsTray/HideChannelViewDetails',j='streamingReactionsTray/ShowChannelViewDetails',k='streamingReactionsTray/UpdateSurface',l='streamingReactionsTray/ResizeChannelViewWindow',m='streamingReactionsTray/ReactionStateChange',n='streamingReactionsTray/FireworksAnimating',o={AddReactionAnimate:h,HideChannelViewDetails:i,ReactionStateChange:m,ResizeChannelViewWindow:l,ShowChannelViewDetails:j,UpdateSurface:k,FireworksAnimating:n};f.exports=o;}),null);
__d("XCastingVideoPayloadAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/cast\/async\/video\/payload\/",{});}),null);
__d('VideoCastingComponent',['cx','invariant','regeneratorRuntime','Promise','AsyncRequest','Arbiter','ChromecastConfig','collectDataAttributes','CSS','FunnelLogger','Random','ScriptPath','StreamingReactionsTrayEvents','SubscriptionsHandler','CastingExperienceManager','XCastingVideoPayloadAsyncController','VideoPlayerController','VideoPlayerReason','VideoPlayerLoggerEvent','VideoPlayerLoggerEventField'],(function a(b,c,d,e,f,g,h,i){'use strict';var j='WWW_VIDEOS_CASTING_FUNNEL';function k(l,m){this.$VideoCastingComponent1=c('ChromecastConfig').EXPERIENCE_NAME;this.$VideoCastingComponent2=c('CastingExperienceManager').getInstance();this.$VideoCastingComponent3=l;this.$VideoCastingComponent4=false;this.$VideoCastingComponent5=false;this.$VideoCastingComponent6=false;this.$VideoCastingComponent7=null;this.$VideoCastingComponent9=null;this.$VideoCastingComponent13=null;this.$VideoCastingComponent8=m;this.$VideoCastingComponent10=new (c('SubscriptionsHandler'))();c('CSS').addClass(this.$VideoCastingComponent3.getVideoNode(),"_1_d1");l.registerOption('casting','isSupported',function(){return this.$VideoCastingComponent2.hasSupport();}.bind(this));l.registerOption('casting','hasFoundReceiver',function(){return this.$VideoCastingComponent2.hasFoundReceiver();}.bind(this));l.registerOption('casting','isCasting',function(){return this.$VideoCastingComponent4;}.bind(this),function(n){return this.$VideoCastingComponent14(n).done();}.bind(this));l.registerOption('casting','isPlaying',function(){return this.$VideoCastingComponent6;}.bind(this),function(n){return this.$VideoCastingComponent15(n).done();}.bind(this));l.registerOption('casting','lastError',function(){return this.$VideoCastingComponent2.getLastError();}.bind(this));this.$VideoCastingComponent10.addSubscriptions(this.$VideoCastingComponent2.addListener(c('CastingExperienceManager').RECEIVER_STATUS_CHANGED,function(n){return this.$VideoCastingComponent16(n).done();}.bind(this)),this.$VideoCastingComponent2.addListener(c('CastingExperienceManager').RECEIVER_DISCONNECTED,function(){return this.$VideoCastingComponent17().done();}.bind(this)),this.$VideoCastingComponent2.addListener(c('CastingExperienceManager').SESSION_DISCONNECTED,function(){return this.$VideoCastingComponent17().done();}.bind(this)),this.$VideoCastingComponent2.addListener(c('CastingExperienceManager').EXPERIENCE_ENDED,function(){return this.$VideoCastingComponent17().done();}.bind(this)),this.$VideoCastingComponent2.addListener(c('CastingExperienceManager').NOT_SUPPORTED,function(){return this.$VideoCastingComponent18().done();}.bind(this)),this.$VideoCastingComponent2.addListener(c('CastingExperienceManager').READY,function(){return this.$VideoCastingComponent19().done();}.bind(this)),this.$VideoCastingComponent2.addListener(c('CastingExperienceManager').SESSION_MESSAGE,function(n){return this.$VideoCastingComponent20(n).done();}.bind(this)),this.$VideoCastingComponent2.addListener(c('CastingExperienceManager').ERROR,function(n){return this.$VideoCastingComponent21(n).done();}.bind(this)),this.$VideoCastingComponent3.addListener('seekEnd',function(n){var o=n.position;if(!this.$VideoCastingComponent3.isLiveVideo())this.$VideoCastingComponent22(o).done();}.bind(this)),this.$VideoCastingComponent3.addListener('muteVideo',function(){this.$VideoCastingComponent23().done();}.bind(this)),this.$VideoCastingComponent3.addListener('unmuteVideo',function(){this.$VideoCastingComponent24().done();}.bind(this)),this.$VideoCastingComponent3.addListener('changeVolume',function(n){var o=n.volume;this.$VideoCastingComponent25(o).done();}.bind(this)),this.$VideoCastingComponent3.addListener('stateChange',function(){if(this.$VideoCastingComponent3.isState('destroyed'))this.destroy();if(this.$VideoCastingComponent3.isState('playing'))this.$VideoCastingComponent26().done();}.bind(this)),c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').HideChannelViewDetails,function(){return this.$VideoCastingComponent27(true).done();}.bind(this)),c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').ShowChannelViewDetails,function(){return this.$VideoCastingComponent27(false).done();}.bind(this)));}k.prototype.destroy=function(){this.$VideoCastingComponent10.release();};k.prototype.$VideoCastingComponent28=function(l){l in c('FunnelLogger')||i(0);if(!this.$VideoCastingComponent11){this.$VideoCastingComponent11=c('Random').uint32();c('FunnelLogger').startFunnel(j,this.$VideoCastingComponent11);}for(var m=arguments.length,n=Array(m>1?m-1:0),o=1;o<m;o++)n[o-1]=arguments[o];c('FunnelLogger')[l].apply(c('FunnelLogger'),[j,this.$VideoCastingComponent11].concat(n));};k.prototype.$VideoCastingComponent29=function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:if(!this.$VideoCastingComponent7)this.$VideoCastingComponent7=this.$VideoCastingComponent30();n.next=3;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent7);case 3:return n.abrupt('return',n.sent);case 4:case 'end':return n.stop();}},null,this);};k.prototype.$VideoCastingComponent30=function l(){var m,n,o;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:m=c('XCastingVideoPayloadAsyncController').getURIBuilder().getURI();n=this.$VideoCastingComponent31();q.next=4;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(r,s){new (c('AsyncRequest'))().setURI(m).setMethod('POST').setData(n).setErrorHandler(function(t){return s(new Error(t.errorDescription));}).setHandler(function(t){return r(t.getPayload());}).send();}));case 4:o=q.sent;return q.abrupt('return',o);case 6:case 'end':return q.stop();}},null,this);};k.prototype.$VideoCastingComponent31=function(){var l=babelHelpers['extends']({},this.$VideoCastingComponent8,{video_id:this.$VideoCastingComponent3.getVideoID(),is_ad:this.$VideoCastingComponent3.isAd(),script_path:c('ScriptPath').getScriptPath()}),m=this.$VideoCastingComponent3.getVideoChannelID();if(m)l.video_channel_id=m;var n=this.$VideoCastingComponent3.getPlayerOrigin();if(n)l.player_origin=n;var o=this.$VideoCastingComponent3.getPlayerSuborigin();if(o)l.player_suborigin=o;var p=c('collectDataAttributes')(this.$VideoCastingComponent3.getRootNode(),['ft']);if(p&&p.ft)l.tracking_codes=[JSON.stringify(p.ft)];return l;};k.prototype.$VideoCastingComponent14=function l(m){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:this.$VideoCastingComponent3.logEvent(c('VideoPlayerLoggerEvent').CHROMECAST_CAST_CLICKED);if(!m){o.next=19;break;}this.$VideoCastingComponent4=true;this.$VideoCastingComponent3.emit('casting/castingStateChange',this.$VideoCastingComponent4);if(this.$VideoCastingComponent3.isState('playing'))this.$VideoCastingComponent3.pause(c('VideoPlayerReason').USER);o.prev=5;this.$VideoCastingComponent28('appendAction','cast_attempted');o.next=9;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent32());case 9:this.$VideoCastingComponent28('appendAction','cast_started');o.next=17;break;case 12:o.prev=12;o.t0=o['catch'](5);this.$VideoCastingComponent28('appendAction','cast_failed');this.$VideoCastingComponent4=false;this.$VideoCastingComponent3.emit('casting/castingStateChange',this.$VideoCastingComponent4);case 17:o.next=23;break;case 19:this.$VideoCastingComponent4=false;this.$VideoCastingComponent3.emit('casting/castingStateChange',this.$VideoCastingComponent4);o.next=23;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent33());case 23:case 'end':return o.stop();}},null,this,[[5,12]]);};k.prototype.$VideoCastingComponent32=function l(){var m,n,o,p,q,r,s,t,u,v,w,x,y;return c('regeneratorRuntime').async(function z(aa){while(1)switch(aa.prev=aa.next){case 0:this.$VideoCastingComponent3.pause(c('VideoPlayerReason').USER);m=this.$VideoCastingComponent3.getCurrentTimePosition();this.$VideoCastingComponent13=m;n=this.$VideoCastingComponent29();o=this.$VideoCastingComponent2.isCasting(this.$VideoCastingComponent1);if(o){aa.next=21;break;}this.$VideoCastingComponent28('appendAction','session_requested');if(!c('ChromecastConfig').VERSION_LAUNCH_MESSAGE){aa.next=18;break;}aa.next=10;return c('regeneratorRuntime').awrap(c('Promise').all([n,this.$VideoCastingComponent2.getSession()]));case 10:p=aa.sent;q=p[0];aa.next=14;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent34(true));case 14:aa.next=16;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent2.startCasting(this.$VideoCastingComponent1,{position:m},q));case 16:aa.next=20;break;case 18:aa.next=20;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent2.startCasting(this.$VideoCastingComponent1));case 20:this.$VideoCastingComponent28('appendAction','session_started');case 21:aa.next=23;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent34(true));case 23:aa.next=25;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent2.getSession());case 25:r=aa.sent;s=r.getVolume();if(!r.isMuted()&&s){this.$VideoCastingComponent3.unmute();this.$VideoCastingComponent3.setVolume(s);}if(!(!o&&c('ChromecastConfig').VERSION_LAUNCH_MESSAGE)){aa.next=30;break;}return aa.abrupt('return');case 30:aa.next=32;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent35());case 32:t=aa.sent;u=!!t.playing_video_id;v=this.$VideoCastingComponent9&&t.playing_video_id===this.$VideoCastingComponent9;if(!(!u||!v)){aa.next=42;break;}aa.next=38;return c('regeneratorRuntime').awrap(n);case 38:w=aa.sent;this.$VideoCastingComponent28('appendAction','request_next_video');aa.next=42;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent36(w));case 42:if(!(!u||v)){aa.next=51;break;}this.$VideoCastingComponent28('appendAction','request_playing');aa.next=46;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent37(m));case 46:x=aa.sent;this.$VideoCastingComponent28('appendAction','playing');this.$VideoCastingComponent9=x.reference_id;aa.next=60;break;case 51:this.$VideoCastingComponent9=null;this.$VideoCastingComponent28('appendAction','request_skip');aa.next=55;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent38());case 55:aa.next=57;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent39(m));case 57:y=aa.sent;this.$VideoCastingComponent28('appendAction','playing');this.$VideoCastingComponent9=y.reference_id;case 60:case 'end':return aa.stop();}},null,this);};k.prototype.$VideoCastingComponent33=function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:if(!this.$VideoCastingComponent6){n.next=4;break;}n.next=3;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent40());case 3:this.$VideoCastingComponent6=false;case 4:n.next=6;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent41());case 6:case 'end':return n.stop();}},null,this);};k.prototype.$VideoCastingComponent15=function l(m){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:if(!m){o.next=5;break;}o.next=3;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent37());case 3:o.next=7;break;case 5:o.next=7;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent42());case 7:this.$VideoCastingComponent6=m;this.$VideoCastingComponent3.emit('casting/playStateChange',this.$VideoCastingComponent6);case 9:case 'end':return o.stop();}},null,this);};k.prototype.$VideoCastingComponent34=function l(m){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:c('CSS').conditionClass(this.$VideoCastingComponent3.getVideoNode(),"_1_d3",m);case 1:case 'end':return o.stop();}},null,this);};k.prototype.$VideoCastingComponent43=function l(m){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:if(typeof m!=='number')m=this.$VideoCastingComponent13;this.$VideoCastingComponent3.seek(m);case 2:case 'end':return o.stop();}},null,this);};k.prototype.$VideoCastingComponent27=function l(m){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent2.setFeedbackEnabled(!m));case 2:this.$VideoCastingComponent5=m;case 3:case 'end':return o.stop();}},null,this);};k.prototype.$VideoCastingComponent41=function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:if(this.$VideoCastingComponent6){this.$VideoCastingComponent6=false;this.$VideoCastingComponent3.emit('casting/playStateChange',this.$VideoCastingComponent6);}if(this.$VideoCastingComponent4){this.$VideoCastingComponent4=false;this.$VideoCastingComponent3.emit('casting/castingStateChange',this.$VideoCastingComponent4);}if(!(typeof this.$VideoCastingComponent13==='number')){n.next=5;break;}n.next=5;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent43());case 5:n.next=7;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent34(false));case 7:case 'end':return n.stop();}},null,this);};k.prototype.$VideoCastingComponent20=function l(m){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:if(!this.$VideoCastingComponent4){o.next=4;break;}if(!(m.type==='status_update')){o.next=4;break;}o.next=4;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent44(m.data));case 4:case 'end':return o.stop();}},null,this);};k.prototype.$VideoCastingComponent44=function l(m){var n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:if(!(this.$VideoCastingComponent9&&this.$VideoCastingComponent9!==m.reference_id)){p.next=4;break;}p.next=3;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent41());case 3:return p.abrupt('return');case 4:n=m.state==='play';if(n!==this.$VideoCastingComponent6){this.$VideoCastingComponent6=n;this.$VideoCastingComponent3.emit('casting/playStateChange',this.$VideoCastingComponent6);}if(m.position>0){this.$VideoCastingComponent13=m.position;this.$VideoCastingComponent3.emit('casting/updateStatus',{position:m.position});}case 7:case 'end':return p.stop();}},null,this);};k.prototype.$VideoCastingComponent22=function l(m){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:if(this.$VideoCastingComponent4){o.next=2;break;}return o.abrupt('return');case 2:o.next=4;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent39(m));case 4:if(this.$VideoCastingComponent6){o.next=7;break;}o.next=7;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent15(true));case 7:case 'end':return o.stop();}},null,this);};k.prototype.$VideoCastingComponent25=function l(m){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:if(this.$VideoCastingComponent4){o.next=2;break;}return o.abrupt('return');case 2:this.$VideoCastingComponent2.setVolume(m);case 3:case 'end':return o.stop();}},null,this);};k.prototype.$VideoCastingComponent23=function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:if(this.$VideoCastingComponent4){n.next=2;break;}return n.abrupt('return');case 2:this.$VideoCastingComponent2.mute();case 3:case 'end':return n.stop();}},null,this);};k.prototype.$VideoCastingComponent24=function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:if(this.$VideoCastingComponent4){n.next=2;break;}return n.abrupt('return');case 2:this.$VideoCastingComponent2.unmute();case 3:case 'end':return n.stop();}},null,this);};k.prototype.$VideoCastingComponent16=function l(m){var n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:if(m)this.$VideoCastingComponent28('appendActionIfNew','found_receiver');this.$VideoCastingComponent3.logEvent(c('VideoPlayerLoggerEvent').CHROMECAST_AVAILABILITY_CHECKED,(n={player:this.$VideoCastingComponent3.getPlayerVersion(),cast_button_visible:m,connection:null,raw_client_time:Date.now()/1000},n[c('VideoPlayerLoggerEventField').CHROMECAST_RECEIVER_AVAILABLE]=m,n));this.$VideoCastingComponent3.emit('casting/receiverStateChange',m);case 3:case 'end':return p.stop();}},null,this);};k.prototype.$VideoCastingComponent17=function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:this.$VideoCastingComponent28('appendAction','session_disconnected');n.next=3;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent41());case 3:case 'end':return n.stop();}},null,this);};k.prototype.$VideoCastingComponent19=function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:this.$VideoCastingComponent3.emit('casting/supportStateChange');case 1:case 'end':return n.stop();}},null,this);};k.prototype.$VideoCastingComponent18=function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:this.$VideoCastingComponent3.logEvent(c('VideoPlayerLoggerEvent').CHROMECAST_NOT_SUPPORTED);this.$VideoCastingComponent3.emit('casting/notSupported');case 2:case 'end':return n.stop();}},null,this);};k.prototype.$VideoCastingComponent26=function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:if(!this.$VideoCastingComponent4){n.next=9;break;}this.$VideoCastingComponent3.pause(c('VideoPlayerReason').USER);if(!this.$VideoCastingComponent6){n.next=7;break;}n.next=5;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent42());case 5:n.next=9;break;case 7:n.next=9;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent37());case 9:case 'end':return n.stop();}},null,this);};k.prototype.$VideoCastingComponent36=function l(m){var n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:p.next=2;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent2.sendCommand('next_video',{feedback_disabled:this.$VideoCastingComponent5},m));case 2:n=p.sent;return p.abrupt('return',n);case 4:case 'end':return p.stop();}},null,this);};k.prototype.$VideoCastingComponent37=function l(m){var n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:p.next=2;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent2.sendCommand('play_video',{position:m}));case 2:n=p.sent;return p.abrupt('return',n);case 4:case 'end':return p.stop();}},null,this);};k.prototype.$VideoCastingComponent42=function l(){var m;return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent2.sendCommand('pause_video'));case 2:m=o.sent;return o.abrupt('return',m);case 4:case 'end':return o.stop();}},null,this);};k.prototype.$VideoCastingComponent39=function l(m){var n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:p.next=2;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent2.sendCommand('seek_video',{position:m}));case 2:n=p.sent;return p.abrupt('return',n);case 4:case 'end':return p.stop();}},null,this);};k.prototype.$VideoCastingComponent38=function l(){var m;return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent2.sendCommand('skip_video'));case 2:m=o.sent;return o.abrupt('return',m);case 4:case 'end':return o.stop();}},null,this);};k.prototype.$VideoCastingComponent40=function l(){var m;return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent2.sendCommand('stop_video'));case 2:m=o.sent;return o.abrupt('return',m);case 4:case 'end':return o.stop();}},null,this);};k.prototype.$VideoCastingComponent35=function l(){var m;return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return c('regeneratorRuntime').awrap(this.$VideoCastingComponent2.getExperienceState());case 2:m=o.sent;return o.abrupt('return',m.experience_specific_state);case 4:case 'end':return o.stop();}},null,this);};k.prototype.$VideoCastingComponent21=function l(m){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:this.$VideoCastingComponent12=m;this.$VideoCastingComponent3.emit('casting/error',m);case 2:case 'end':return o.stop();}},null,this);};f.exports=k;}),null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','Shaka','VideoPlayerStreamSwitchReasons','VideoPlayerUtils','VideoQualityClasses','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){var h=c('Shaka').player.VideoTrack;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=-1;this.$CustomAbrManager6=true;this.$CustomAbrManager7=false;this.$CustomAbrManager8=j.maxWidth;this.$CustomAbrManager9=j.maxHeight;this.$CustomAbrManager10=j.minPlayQuality?j.minPlayQuality:null;this.$CustomAbrManager11=j.maxPlayQuality?j.maxPlayQuality:null;this.$CustomAbrManager12=j.initiallyForcedRepresentations;this.$CustomAbrManager13=j.video;this.$CustomAbrManager19=null;this.$CustomAbrManager16=null;this.$CustomAbrManager18=null;this.$CustomAbrManager17=j.abrLogger;if(j.enableAdaptation){this.$CustomAbrManager14=j.bandwidthDowngradeTarget;this.$CustomAbrManager15=j.bandwidthUpgradeTarget;}}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager6=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager8=j;this.$CustomAbrManager9=k;this.$CustomAbrManager20();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager7)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;if(i.FIRST_SWITCH_INTERVAL===0)this.$CustomAbrManager5=i.FIRST_SWITCH_SEGMENT_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager21.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager22.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager23.bind(this)));this.$CustomAbrManager7=true;};i.prototype.$CustomAbrManager23=function(){'use strict';this.$CustomAbrManager20();};i.prototype.setPreferredVideoTrack=function(j){'use strict';var k=i.$CustomAbrManager24(this.$CustomAbrManager2.getVideoTracks()),l=k?h.compare(k,j)<0:false;this.$CustomAbrManager19=j;this.$CustomAbrManager20(null,l);};i.prototype.unsetPreferredVideoTrack=function(){'use strict';this.$CustomAbrManager19=null;this.$CustomAbrManager20(null,false);};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager6=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager25();return j?j.id:null;};i.prototype.getInitialSwitchReason=function(){'use strict';return this.$CustomAbrManager18;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager26();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l,m){'use strict';if(!this.$CustomAbrManager7)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l,m);};i.$CustomAbrManager24=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager21=function(event){'use strict';if(this.$CustomAbrManager5<0){if(Date.now()<this.$CustomAbrManager4)return;}else{var j=this.$CustomAbrManager2?this.$CustomAbrManager2.getFetchedVideoSegmentsCount():0;if(this.$CustomAbrManager5>j)return;this.$CustomAbrManager5=-1;}this.$CustomAbrManager20(event);};i.prototype.$CustomAbrManager20=function(event,j){'use strict';if(!this.$CustomAbrManager6)return;var k=this.$CustomAbrManager25();if(k){if(k.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(k,!!j,0,this.$CustomAbrManager16);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager22=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager27=function(j,k){'use strict';if(this.$CustomAbrManager17)this.$CustomAbrManager17.setEvent('track_selection').setReason(j).setRepresentationID(k.streamInfoID).log();};i.prototype.$CustomAbrManager25=function(){var j,k=this,l;'use strict';var m=this.$CustomAbrManager2.getVideoTracks();if(m.length==0)return null;if(!this.$CustomAbrManager7)for(var n=0;n<m.length;n++)if(this.$CustomAbrManager12&&this.$CustomAbrManager12.includes(m[n].streamInfoID)){this.$CustomAbrManager16=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager18=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager27(this.$CustomAbrManager16,m[n]);return m[n];}if(this.$CustomAbrManager19){var j=function(){var ea=k.$CustomAbrManager19.id,fa=m.find(function(ga){return ga.id===ea;});if(fa){k.$CustomAbrManager16=c('VideoPlayerStreamSwitchReasons').USER;k.$CustomAbrManager27(k.$CustomAbrManager16,fa);return {v:fa};}}();if(typeof j==="object")return j.v;}m.sort(h.compare);if(this.$CustomAbrManager10!==null||this.$CustomAbrManager11!==null){var l=function(){var ea=k.$CustomAbrManager10!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager10):0,fa=k.$CustomAbrManager11!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager11):c('VideoQualityClasses').length-1;if(ea<=fa){var ga=m.filter(function(ia){return c('VideoQualityClasses').indexOf(ia.fbQualityClass)>=ea&&c('VideoQualityClasses').indexOf(ia.fbQualityClass)<=fa;});k.$CustomAbrManager16=c('VideoPlayerStreamSwitchReasons').PREFER_QUALITY_CLASS;if(!ga.length){k.$CustomAbrManager27(k.$CustomAbrManager16,m[m.length-1]);return {v:m[m.length-1]};}var ha=c('VideoQualityClasses').indexOf('sd');if(m.length==2&&ga.length==2&&fa<=ha){k.$CustomAbrManager27(k.$CustomAbrManager16,m[0]);return {v:m[0]};}m=ga;}}();if(typeof l==="object")return l.v;}var o=m[0],p=this.$CustomAbrManager9,q=this.$CustomAbrManager8,r=m;m=m.filter(function(ea){return ea.width<=q||ea.height<=p;});var s=i.$CustomAbrManager24(this.$CustomAbrManager2.getAudioTracks()),t=s?s.bandwidth:0,u=c('VideoPlayerUtils').getBufferedAheadOf(this.$CustomAbrManager13);if(u<c('VideoPlayerShakaExperiments').forceLowestRepresentationThreshold){var v=i.$CustomAbrManager24(r),w=0,x=r.indexOf(v);if(x>-1)w=Math.floor(x*c('VideoPlayerShakaExperiments').forceLowerRepresentationStepRatio);if(w>=m.length)w=m.length-1;this.$CustomAbrManager16=c('VideoPlayerStreamSwitchReasons').LOW_BUFFER_AVAILABILITY;o=m[w];this.$CustomAbrManager27(this.$CustomAbrManager16,o);return o;}else{var y=this.$CustomAbrManager1.getBandwidth();for(var z=0;z<m.length;z++){var aa=m[z],ba=z+1<m.length?m[z+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!aa.bandwidth)continue;var ca=(aa.bandwidth+t)/this.$CustomAbrManager14,da=(ba.bandwidth+t)/this.$CustomAbrManager15;if(y>=ca&&y<=da){o=aa;if(o.active)break;}}this.$CustomAbrManager16=c('VideoPlayerStreamSwitchReasons').BANDWIDTH;}this.$CustomAbrManager27(this.$CustomAbrManager16,o);return o;};i.prototype.$CustomAbrManager26=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager7)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager12&&this.$CustomAbrManager12.includes(j[k].streamInfoID))return j[k];return null;};i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval;i.FIRST_SWITCH_SEGMENT_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchSegmentInterval;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval;f.exports=i;}),null);
__d('VideoPlayerAbrLogger',['VideoPlayerAbrTypedLogger','VideoPlayerShakaBandwidthEstimator','VideoPlayerUtils'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('VideoPlayerAbrTypedLogger'));i=h&&h.prototype;function j(k){i.constructor.call(this);i.setSession.call(this,k.uniqueID);i.setVideoID.call(this,k.videoID);this.$VideoPlayerAbrLogger4();}j.prototype.setVideoElement=function(k){this.$VideoPlayerAbrLogger3=k;return this;};j.prototype.setBytes=function(k){this.$VideoPlayerAbrLogger1.bytes=k;return this;};j.prototype.setDelayMs=function(k){this.$VideoPlayerAbrLogger1.delayMs=k;return this;};j.prototype.setEvent=function(event){this.$VideoPlayerAbrLogger1.event=event;return this;};j.prototype.setUnsampledReason=function(k){this.$VideoPlayerAbrLogger1.unsampledReason=k;return this;};j.prototype.setReason=function(k){this.$VideoPlayerAbrLogger1.reason=k;return this;};j.prototype.setRepresentationID=function(k){this.$VideoPlayerAbrLogger2=k;return this;};j.prototype.setClientTimeBegin=function(k){this.$VideoPlayerAbrLogger1.clientTimeBegin=k;return this;};j.prototype.setClientTimeEnd=function(k){this.$VideoPlayerAbrLogger1.clientTimeEnd=k;return this;};j.prototype.$VideoPlayerAbrLogger4=function(){this.$VideoPlayerAbrLogger1={bytes:null,delayMs:null,event:null,unsampledReason:null,reason:null,clientTimeBegin:null,clientTimeEnd:null};};j.prototype.$VideoPlayerAbrLogger5=function(){if(this.$VideoPlayerAbrLogger1.event==null)return;i.setBytes.call(this,this.$VideoPlayerAbrLogger1.bytes);i.setDelayMs.call(this,this.$VideoPlayerAbrLogger1.delayMs);i.setEvent.call(this,this.$VideoPlayerAbrLogger1.event);i.setUnsampledReason.call(this,this.$VideoPlayerAbrLogger1.unsampledReason);i.setReason.call(this,this.$VideoPlayerAbrLogger1.reason);var k=this.$VideoPlayerAbrLogger1.clientTimeBegin,l=this.$VideoPlayerAbrLogger1.clientTimeEnd;if(k==null){k=Date.now();l=k;}else if(l==null)l=k;i.setClientTimeBegin.call(this,k);i.setClientTimeEnd.call(this,l);};j.prototype.log=function(){this.$VideoPlayerAbrLogger5();i.setBandwidthEstimate.call(this,parseInt(c('VideoPlayerShakaBandwidthEstimator').getBandwidth(),10));i.setRepresentationID.call(this,this.$VideoPlayerAbrLogger2);if(this.$VideoPlayerAbrLogger3){i.setPlayhead.call(this,Math.round(this.$VideoPlayerAbrLogger3.currentTime*1000));i.setBufferedAhead.call(this,Math.round(c('VideoPlayerUtils').getBufferedAheadOf(this.$VideoPlayerAbrLogger3)));}i.log.call(this);this.$VideoPlayerAbrLogger4();};f.exports=j;}),null);
__d('PerformanceResourceBuffer',['BanzaiODS','EventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=b.__isResourceTimingBufferFull;delete b.__isResourceTimingBufferFull;performance.onresourcetimingbufferfull=function(){j=true;if(k)k.emit('full');};var k=void 0;h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){i.constructor.call(this);}l.prototype.isBufferFull=function(){return j;};k=new l();if(k.isBufferFull()){c('BanzaiODS').bumpEntityKey('performance','resourcetimingbufferfull');}else k.addListener('full',function(){return c('BanzaiODS').bumpEntityKey('performance','resourcetimingbufferfull');});f.exports=k;}),null);
__d('VideoPlayerLiveStreamState',['RTISubscriptionManager','EventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={interrupt:'streamInterruptAt',ended:'endedAt'};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$VideoPlayerLiveStreamState1=[];for(var m in j)this.$VideoPlayerLiveStreamState1.push(c('RTISubscriptionManager').subscribe('video_broadcast/'+m+'_'+l,this.$VideoPlayerLiveStreamState2.bind(this,j[m])));}k.prototype.unsubscribe=function(){for(var l=this.$VideoPlayerLiveStreamState1,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++];}else{n=l.next();if(n.done)break;o=n.value;}var p=o;p.unsubscribe();}};k.prototype.$VideoPlayerLiveStreamState2=function(l,m){var n=JSON.parse(m.payload||'{}')||{},o=n.time_position;if(typeof o==='number'){o/=1000;this.emit(l,o);}};f.exports=k;}),null);
__d('VideoPlayerHTML5Shaka',['invariant','Promise','CustomAbrManager','EventEmitter','EventListener','Event','TaggedTimeRanges','URI','VideoDashPrefetchCache','VideoPlayerAbrLogger','VideoPlayerLiveStreamState','VideoPlayerShakaBandwidthEstimator','VideoPlayerShakaExperiments','VideoPlayerShakaPerformanceLogger','dispatchEvent','guid','Shaka','PerformanceResourceBuffer'],(function a(b,c,d,e,f,g,h){var i,j,k=c('Shaka').player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('Shaka').dash.mpd.parseMpd,p=c('Shaka').util.FailoverUri,q=window.devicePixelRatio||1,r=c('VideoPlayerShakaBandwidthEstimator').getEstimator();c('PerformanceResourceBuffer');p.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);function s(u,event){var v=c('EventListener').capture(u.parentNode,event,function(w){if(w.target!=u)return;v.remove();c('Event').kill(w);});}i=babelHelpers.inherits(t,c('EventEmitter'));j=i&&i.prototype;function t(u,v,w){var x=w.videoID,y=w.width,z=w.height,aa=w.manifest,ba=w.manifestUrl,ca=w.isLive,da=w.minPlayQuality,ea=w.maxPlayQuality,fa=w.accessToken,ga=w.startTimestamp,ha=w.playerOrigin,ia=w.playerSuborigin,ja=w.isSpherical;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=da;this.$VideoPlayerHTML5Shaka2=ea;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka5=1;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka7=ca;this.$VideoPlayerHTML5Shaka8=false;this.$VideoPlayerHTML5Shaka9=ja;this.$VideoPlayerHTML5Shaka10=y;this.$VideoPlayerHTML5Shaka11=z;this.$VideoPlayerHTML5Shaka12=v;this.$VideoPlayerHTML5Shaka13=null;var ka=this.$VideoPlayerHTML5Shaka13,la=c('guid')();this.$VideoPlayerHTML5Shaka14=c('VideoPlayerShakaPerformanceLogger').isEnabled()?new (c('VideoPlayerShakaPerformanceLogger'))({videoID:x,video:u,representationId:ka,isLive:ca,accessToken:fa,playerOrigin:ha,playerSuborigin:ia,uniqueID:la}):null;this.$VideoPlayerHTML5Shaka15=new (c('VideoPlayerAbrLogger'))({videoID:x,uniqueID:la}).setRepresentationID(ka).setVideoElement(u);if(!c('VideoPlayerShakaExperiments').improveRebufferLogging)this.$VideoPlayerHTML5Shaka16=true;c('EventListener').listen(u,'playing',this.$VideoPlayerHTML5Shaka17.bind(this));c('EventListener').listen(u,'timeupdate',function(pa){this.$VideoPlayerHTML5Shaka18(pa.target.currentTime);}.bind(this));c('EventListener').listen(u,'pause',this.$VideoPlayerHTML5Shaka19.bind(this));c('EventListener').listen(u,'play',function(){this.$VideoPlayerHTML5Shaka8=true;}.bind(this));this.$VideoPlayerHTML5Shaka20=null;this.$VideoPlayerHTML5Shaka21=null;this.$VideoPlayerHTML5Shaka22=null;this.$VideoPlayerHTML5Shaka23=new l(u,this.$VideoPlayerHTML5Shaka14,this.$VideoPlayerHTML5Shaka15);this.$VideoPlayerHTML5Shaka23.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka24();}.bind(this));this.$VideoPlayerHTML5Shaka23.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka25();}.bind(this));this.$VideoPlayerHTML5Shaka23.addEventListener('error',function(pa){return this.$VideoPlayerHTML5Shaka26(pa);}.bind(this));this.$VideoPlayerHTML5Shaka23.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka27.bind(this));this.$VideoPlayerHTML5Shaka23.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka28.bind(this));this.$VideoPlayerHTML5Shaka23.addEventListener('debug/shakaEvent',function(pa){return this.emit('debug/shakaEvent',pa.detail);}.bind(this));this.$VideoPlayerHTML5Shaka23.addEventListener('manifestwrapped',this.$VideoPlayerHTML5Shaka29.bind(this));this.$VideoPlayerHTML5Shaka23.addEventListener('cea608-captions',function(pa){this.emit('cea608CaptionsParsed',pa.detail.captions);}.bind(this));this.$VideoPlayerHTML5Shaka23.addEventListener('manifestIsUpdating',this.$VideoPlayerHTML5Shaka30.bind(this));var ma=false,na=null,oa=null;this.$VideoPlayerHTML5Shaka31=c('VideoPlayerShakaExperiments').liveSendPushHeaders;if(aa){this.$VideoPlayerHTML5Shaka32=o(aa,ba);}else{this.$VideoPlayerHTML5Shaka32=ba;ma=ba.indexOf('dash-abr')!==-1;}if(ma){this.$VideoPlayerHTML5Shaka31=c('VideoPlayerShakaExperiments').liveAbrSendPushHeaders;if(this.$VideoPlayerHTML5Shaka31){na=c('VideoPlayerShakaExperiments').liveAbrInitialPushRepresentation;oa=c('VideoPlayerShakaExperiments').liveAbrAudioPushRepresentation;this.$VideoPlayerHTML5Shaka12=[c('VideoPlayerShakaExperiments').liveAbrInitialPushRepresentation];}if(c('VideoPlayerShakaExperiments').liveAbrAlwaysForceRepresentation)this.$VideoPlayerHTML5Shaka12=[c('VideoPlayerShakaExperiments').liveAbrInitialPushRepresentation];}this.$VideoPlayerHTML5Shaka33=u;this.$VideoPlayerHTML5Shaka34=this.$VideoPlayerHTML5Shaka35();this.$VideoPlayerHTML5Shaka36=this.$VideoPlayerHTML5Shaka37();this.$VideoPlayerHTML5Shaka23.configure({enableAdaptation:this.getIsAbrEnabled(),appendPlayingQueryParam:c('VideoPlayerShakaExperiments').addCdnDebugQueryParameters,endBufferingOnPlaying:c('VideoPlayerShakaExperiments').endBufferingOnPlaying,usePlaybackRateForBuffering:c('VideoPlayerShakaExperiments').improveRebufferLogging,streamBufferSize:c('VideoPlayerShakaExperiments').useStreamBufferSizeOverride?0:this.$VideoPlayerHTML5Shaka38(),initialStreamBufferSize:t.isAutoplayBandwidthRestrained(ca)||c('VideoPlayerShakaExperiments').useStreamBufferSizeOverride?0:this.$VideoPlayerHTML5Shaka39(),smartBufferAdjustmentParams:c('VideoPlayerShakaExperiments').smartBufferAdjustmentParams,dynamicStreamBufferSize:ca?c('VideoPlayerShakaExperiments').liveDynamicStreamBufferSize:null,includeStreamBufferSizeInStartOffset:true,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:true,liveInterruptionConsecutiveUpdatesWithoutChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithChange,liveMaxSegmentsToPush:c('VideoPlayerShakaExperiments').liveMaxSegmentsToPush,liveSendPushHeaders:t.isAutoplayBandwidthRestrained(ca)?false:this.$VideoPlayerHTML5Shaka40(),liveMaxManifestFetchesWithPush:c('VideoPlayerShakaExperiments').liveMaxManifestFetchesWithPush,resolveVideoTimeUpdateOnFragmentedTimeRanges:c('VideoPlayerShakaExperiments').resolveVideoTimeUpdateOnFragmentedTimeRanges,enableManifestDebug:c('VideoPlayerShakaExperiments').enableVideoDebug,reappendInitSegmentAfterAbort:c('VideoPlayerShakaExperiments').reappendInitSegmentAfterAbort,useInlineInitSegment:c('VideoPlayerShakaExperiments').useInlineInitSegment,currentTimeDuringReadyStateZeroThrows:c('VideoPlayerShakaExperiments').currentTimeDuringReadyStateZeroThrows,liveInitialPushRepresentation:na,liveAudioPushRepresentation:oa,jumpToLiveThreshold:c('VideoPlayerShakaExperiments').jumpToLiveThreshold,liveDataFetchMaxRetries:c('VideoPlayerShakaExperiments').liveDataFetchMaxRetries,liveSourceBufferClearMaxRetries:c('VideoPlayerShakaExperiments').liveSourceBufferClearMaxRetries,useLongCacheForManifest:c('VideoPlayerShakaExperiments').useLongCacheForManifest,jumpToEarliestPositionInCurrentBlock:c('VideoPlayerShakaExperiments').jumpToEarliestPositionInCurrentBlock,ignoreMinBufferTime:c('VideoPlayerShakaExperiments').ignoreMinBufferTime,playheadFragmentedGapDiffAllowance:c('VideoPlayerShakaExperiments').playheadFragmentedGapDiffAllowance,fixBufferingGoalDetermination:c('VideoPlayerShakaExperiments').fixBufferingGoalDetermination,skipEmptySegments:c('VideoPlayerShakaExperiments').skipEmptySegments,useMicroTaskTimeouts:true});if(ca){this.$VideoPlayerHTML5Shaka41=new (c('VideoPlayerLiveStreamState'))(x);this.$VideoPlayerHTML5Shaka41.addListener('streamInterruptAt',this.$VideoPlayerHTML5Shaka42.bind(this));['streamInterruptAt','commercialBreakAt','endedAt'].forEach(function(pa){this.$VideoPlayerHTML5Shaka41.addListener(pa,function(event){this.emit('debug/shakaEvent',{type:pa,event:event});}.bind(this));}.bind(this));}if(ga)this.$VideoPlayerHTML5Shaka23.setPlaybackStartTime(ga);this.$VideoPlayerHTML5Shaka23.load(this.$VideoPlayerHTML5Shaka36)['catch'](function(pa){if(this.$VideoPlayerHTML5Shaka3&&c('VideoPlayerShakaExperiments').ignoreErrorsAfterUnload)return;throw pa;}.bind(this));}t.prototype.hasSubtitles=function(){'use strict';return this.$VideoPlayerHTML5Shaka36.hasInlinedCea608Subtitles()&&c('VideoPlayerShakaExperiments').enableCea608Parsing;};t.prototype.enableSubtitles=function(u){'use strict';this.$VideoPlayerHTML5Shaka36.setEnableCea608Parsing(u&&c('VideoPlayerShakaExperiments').enableCea608Parsing);};t.prototype.getDebug=function(){'use strict';return {AbrManager:this.$VideoPlayerHTML5Shaka34,VideoSource:this.$VideoPlayerHTML5Shaka36,ShakaPlayer:this.$VideoPlayerHTML5Shaka23};};t.getEstimatedBandwidth=function(){'use strict';return r.getBandwidth();};t.isAutoplayBandwidthRestrained=function(u){'use strict';var v=c('VideoPlayerShakaBandwidthEstimator').isAutoplayBandwidthRestrained(u);return v;};t.prototype.$VideoPlayerHTML5Shaka18=function(u){'use strict';var v=this.$VideoPlayerHTML5Shaka43.get(u);if(!v)return;var w=v.id,x=v.reason,y=v.performanceLogger;if(this.$VideoPlayerHTML5Shaka13!==w){var z=this.$VideoPlayerHTML5Shaka13;this.$VideoPlayerHTML5Shaka13=w;if(y)y.setStreamSwitchReason(x).log();this.emit('representation_ended',{representationID:z,nextRepresentationID:w,streamSwitchReason:x});}};t.prototype.getStreamInfoIDForTimePosition=function(u){'use strict';var v=this.$VideoPlayerHTML5Shaka43.get(u),w=null;if(v)w=v.id;return w;};t.prototype.$VideoPlayerHTML5Shaka44=function(u,v){'use strict';if(u.fbQualityLabel){return u.fbQualityLabel;}else if(n.compare(u,v[0])==0){return 'SD';}else if(n.compare(u,v[v.length-1])==0){return 'HD';}else return null;};t.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka20;var u=this.$VideoPlayerHTML5Shaka36.getVideoTracks();u.sort(n.compare);return u.every(function(v){return v.fbQualityLabel!==null;})?u.map(function(v){return v.fbQualityLabel;}):u.length>1?['SD','HD']:['SD'];};t.prototype.getIsAbrEnabled=function(){'use strict';return true;};t.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka21;var u=this.$VideoPlayerHTML5Shaka36.getVideoTracks();u.sort(n.compare);var v=u.find(function(w){return w.active;});return v?this.$VideoPlayerHTML5Shaka44(v,u):null;};t.prototype.canAutoSelectVideoQuality=function(){'use strict';return true;};t.prototype.setPreloadDisabled=function(u){'use strict';if(c('VideoPlayerShakaExperiments').blockAutoplayAllowPreloadSettingsChange)this.$VideoPlayerHTML5Shaka23.configure({initialStreamBufferSize:u?0:this.$VideoPlayerHTML5Shaka39(),liveSendPushHeaders:u?false:this.$VideoPlayerHTML5Shaka40()});};t.prototype.restoreStreamBufferSize=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useStreamBufferSizeOverride)return;this.$VideoPlayerHTML5Shaka23.configure({initialStreamBufferSize:this.$VideoPlayerHTML5Shaka39(),streamBufferSize:this.$VideoPlayerHTML5Shaka38()});};t.prototype.$VideoPlayerHTML5Shaka39=function(){'use strict';return this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveInitialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize;};t.prototype.$VideoPlayerHTML5Shaka38=function(){'use strict';return this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveStreamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize;};t.prototype.$VideoPlayerHTML5Shaka40=function(){'use strict';return this.$VideoPlayerHTML5Shaka31;};t.prototype.setPreferredVideoQuality=function(u){'use strict';var v=this.$VideoPlayerHTML5Shaka36.getVideoTracks();v.sort(n.compare);var w=v.find(function(x){return u==this.$VideoPlayerHTML5Shaka44(x,v);}.bind(this));if(w){this.$VideoPlayerHTML5Shaka22=u;this.$VideoPlayerHTML5Shaka34.setPreferredVideoTrack(w);}};t.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Shaka22=null;this.$VideoPlayerHTML5Shaka34.unsetPreferredVideoTrack();};t.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka45&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka46=true;this.$VideoPlayerHTML5Shaka47=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka33,'pause');this.$VideoPlayerHTML5Shaka23.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka33.pause();};t.prototype.play=function(){'use strict';this.$VideoPlayerHTML5Shaka8=true;if(this.$VideoPlayerHTML5Shaka14&&(this.$VideoPlayerHTML5Shaka33.paused||this.$VideoPlayerHTML5Shaka33.ended))this.$VideoPlayerHTML5Shaka48=this.$VideoPlayerHTML5Shaka14.getOperationLogger('play').setState('pending_play').start();if(this.$VideoPlayerHTML5Shaka45&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka46=false;this.$VideoPlayerHTML5Shaka47=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka33,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka33,'waiting');this.$VideoPlayerHTML5Shaka23.setResumeAfterBuffering(true);return c('Promise').resolve();}else return this.$VideoPlayerHTML5Shaka33.play();};t.prototype.$VideoPlayerHTML5Shaka49=function(){'use strict';var u=this.$VideoPlayerHTML5Shaka4;if(u){var v=this.$VideoPlayerHTML5Shaka33.currentTime,w=4,x=v>u-w,y=v>u;if(y){this.emit('debug/shakaEvent',{type:'streamResumedAt',event:this.$VideoPlayerHTML5Shaka4});this.$VideoPlayerHTML5Shaka4=null;}else if(this.$VideoPlayerHTML5Shaka45)this.$VideoPlayerHTML5Shaka6=x;}return this.$VideoPlayerHTML5Shaka6;};t.prototype.$VideoPlayerHTML5Shaka24=function(){'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){s(this.$VideoPlayerHTML5Shaka33,'pause');this.$VideoPlayerHTML5Shaka46=false;this.$VideoPlayerHTML5Shaka47=false;}this.$VideoPlayerHTML5Shaka45=true;if(this.$VideoPlayerHTML5Shaka49()){if(!c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka14&&!this.$VideoPlayerHTML5Shaka50)this.$VideoPlayerHTML5Shaka50=this.$VideoPlayerHTML5Shaka14.getOperationLogger('stream_interrupted').start();this.$VideoPlayerHTML5Shaka36.setIsLiveInterrupted(true);}this.emit('streamInterrupted');}else{this.$VideoPlayerHTML5Shaka23.setResumeAfterBuffering(true);this.emit('bufferingStart');}};t.prototype.$VideoPlayerHTML5Shaka25=function(){var u,v=this;'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka46)s(this.$VideoPlayerHTML5Shaka33,'play');if(!this.$VideoPlayerHTML5Shaka47)(function(){var w=c('EventListener').capture(v.$VideoPlayerHTML5Shaka33.parentNode,'playing',function(x){if(x.target!=this.$VideoPlayerHTML5Shaka33)return;w.remove();if(this.$VideoPlayerHTML5Shaka16){this.$VideoPlayerHTML5Shaka16=false;return;}c('Event').kill(x);}.bind(v));})();}this.$VideoPlayerHTML5Shaka45=false;if(this.$VideoPlayerHTML5Shaka50){this.$VideoPlayerHTML5Shaka50.log();this.$VideoPlayerHTML5Shaka50=null;}this.$VideoPlayerHTML5Shaka36.setIsLiveInterrupted(false);if(this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka51();}else this.emit('bufferingEnd');};t.prototype.$VideoPlayerHTML5Shaka26=function(u){'use strict';var v=u.detail||{},w=v.type||'undefined',x=v.status||null,y=v.url||null;if(this.$VideoPlayerHTML5Shaka7&&Object.values(c('VideoPlayerShakaExperiments').blockPlayRequestHTTPStatusList).indexOf(x)!=-1){if(this.$VideoPlayerHTML5Shaka8){c('dispatchEvent')(this.$VideoPlayerHTML5Shaka33,'playing');this.$VideoPlayerHTML5Shaka8=false;}return this.$VideoPlayerHTML5Shaka52();}this.emit('error',{error:'SHAKA_'+w.toUpperCase(),message:v.message,httpStatus:x,url:y});return undefined;};t.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka21=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka20=this.getAvailableVideoQualities();if(!this.$VideoPlayerHTML5Shaka36){this.$VideoPlayerHTML5Shaka7=false;}else if(this.$VideoPlayerHTML5Shaka36.isLive()!==null)this.$VideoPlayerHTML5Shaka7=this.$VideoPlayerHTML5Shaka36.isLive();this.$VideoPlayerHTML5Shaka3=true;this.$VideoPlayerHTML5Shaka23.unload()['catch'](function(u){if(c('VideoPlayerShakaExperiments').ignoreErrorsAfterUnload)return;throw u;});};t.prototype.$VideoPlayerHTML5Shaka35=function(){'use strict';var u={enableAdaptation:this.getIsAbrEnabled(),minPlayQuality:this.$VideoPlayerHTML5Shaka1,maxPlayQuality:this.$VideoPlayerHTML5Shaka2,maxWidth:this.$VideoPlayerHTML5Shaka53(),maxHeight:this.$VideoPlayerHTML5Shaka54(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka12,bandwidthDowngradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthDowngradeTarget:c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget,bandwidthUpgradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthUpgradeTarget:c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget,video:this.$VideoPlayerHTML5Shaka33,abrLogger:this.$VideoPlayerHTML5Shaka15};return new (c('CustomAbrManager'))(u);};t.prototype.$VideoPlayerHTML5Shaka37=function(){'use strict';this.$VideoPlayerHTML5Shaka34||h(0);this.$VideoPlayerHTML5Shaka32||h(0);var u=new m(this.$VideoPlayerHTML5Shaka32,null,r,this.$VideoPlayerHTML5Shaka34);this.$VideoPlayerHTML5Shaka43=new (c('TaggedTimeRanges'))(function(v,w){return v.id===w.id&&v.reason===w.reason;});u.setTaggedTimeRangesEntryAdder(function(v,w,x){this.$VideoPlayerHTML5Shaka43.add(v,w,x);}.bind(this));return u;};t.prototype.reload=function(u){'use strict';if(!this.$VideoPlayerHTML5Shaka3)return;this.$VideoPlayerHTML5Shaka34=this.$VideoPlayerHTML5Shaka35();this.$VideoPlayerHTML5Shaka36=this.$VideoPlayerHTML5Shaka37();if(this.$VideoPlayerHTML5Shaka49()){this.$VideoPlayerHTML5Shaka5=this.$VideoPlayerHTML5Shaka23.getPlaybackRate();this.$VideoPlayerHTML5Shaka33.playbackRate=0;this.emit('streamInterrupted');}this.$VideoPlayerHTML5Shaka23.setPlaybackStartTime(u);this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka23.load(this.$VideoPlayerHTML5Shaka36).then(function(){if(this.$VideoPlayerHTML5Shaka7!=this.$VideoPlayerHTML5Shaka36.isLive())return this.$VideoPlayerHTML5Shaka52();if(this.$VideoPlayerHTML5Shaka22)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka22);this.$VideoPlayerHTML5Shaka21=null;this.$VideoPlayerHTML5Shaka55=null;return undefined;}.bind(this))['catch'](function(v){if(this.$VideoPlayerHTML5Shaka3&&c('VideoPlayerShakaExperiments').ignoreErrorsAfterUnload)return;throw v;}.bind(this));};t.prototype.setPlaybackRate=function(u){'use strict';this.$VideoPlayerHTML5Shaka5=u;if(!this.$VideoPlayerHTML5Shaka49())this.$VideoPlayerHTML5Shaka23.setPlaybackRate(u);};t.prototype.setSmartBufferAdjustmentEnabled=function(u){'use strict';this.$VideoPlayerHTML5Shaka23.configure({smartBufferAdjustmentEnabled:u});};t.prototype.setVideoStreamOffset=function(u){'use strict';this.$VideoPlayerHTML5Shaka23.setVideoStreamOffset(u);};t.prototype.$VideoPlayerHTML5Shaka52=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka33,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka33,'playing');if(c('VideoPlayerShakaExperiments').endLivePlaybackWithPause){c('dispatchEvent')(this.$VideoPlayerHTML5Shaka33,'pause');}else c('dispatchEvent')(this.$VideoPlayerHTML5Shaka33,'ended');this.emit('streamResumed');this.$VideoPlayerHTML5Shaka41.unsubscribe();this.unload();};t.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka36.getLongestInitResponseTime();};t.$VideoPlayerHTML5Shaka56=function(){'use strict';return c('VideoPlayerShakaExperiments').resolutionConstraintFactor*q;};t.prototype.$VideoPlayerHTML5Shaka53=function(){'use strict';if(this.$VideoPlayerHTML5Shaka9||!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka10*t.$VideoPlayerHTML5Shaka56();};t.prototype.$VideoPlayerHTML5Shaka54=function(){'use strict';if(this.$VideoPlayerHTML5Shaka9||!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka11*t.$VideoPlayerHTML5Shaka56();};t.prototype.setDimensions=function(u,v){'use strict';this.$VideoPlayerHTML5Shaka10=u;this.$VideoPlayerHTML5Shaka11=v;this.$VideoPlayerHTML5Shaka34.setResolutionConstraint(this.$VideoPlayerHTML5Shaka53(),this.$VideoPlayerHTML5Shaka54());};t.isSupported=function(){'use strict';return l.isBrowserSupported();};t.prototype.$VideoPlayerHTML5Shaka28=function(){'use strict';this.emit('tracksChanged');};t.prototype.$VideoPlayerHTML5Shaka27=function(event){'use strict';if(event.contentType==='video'){if(this.$VideoPlayerHTML5Shaka14)this.$VideoPlayerHTML5Shaka14.setRepresentationID(event.id);if(this.$VideoPlayerHTML5Shaka15)this.$VideoPlayerHTML5Shaka15.setRepresentationID(event.id);this.emit('adaptation',{reason:event.reason});}};t.prototype.$VideoPlayerHTML5Shaka42=function(u){'use strict';if(c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka14&&!this.$VideoPlayerHTML5Shaka50)this.$VideoPlayerHTML5Shaka50=this.$VideoPlayerHTML5Shaka14.getOperationLogger('stream_interrupted').start();this.$VideoPlayerHTML5Shaka36.setIsLiveInterrupted(true);}this.$VideoPlayerHTML5Shaka4=u;};t.prototype.$VideoPlayerHTML5Shaka30=function(){'use strict';if(this.$VideoPlayerHTML5Shaka49())this.$VideoPlayerHTML5Shaka51();};t.prototype.$VideoPlayerHTML5Shaka51=function(){'use strict';this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka36.forceResyncVideoBuffer();this.$VideoPlayerHTML5Shaka23.setPlaybackRate(this.$VideoPlayerHTML5Shaka5);this.emit('streamResumed');};t.prototype.$VideoPlayerHTML5Shaka29=function(){'use strict';var u=!this.$VideoPlayerHTML5Shaka33.paused;this.unload();this.reload().then(function(){if(this.$VideoPlayerHTML5Shaka6)this.$VideoPlayerHTML5Shaka51();if(u)this.play();}.bind(this))['catch'](function(v){});};t.prototype.$VideoPlayerHTML5Shaka17=function(){'use strict';this.$VideoPlayerHTML5Shaka8=false;if(this.$VideoPlayerHTML5Shaka16)this.$VideoPlayerHTML5Shaka16=false;if(this.$VideoPlayerHTML5Shaka48){this.$VideoPlayerHTML5Shaka48.log();this.$VideoPlayerHTML5Shaka48=null;}};t.prototype.$VideoPlayerHTML5Shaka19=function(){'use strict';if(this.$VideoPlayerHTML5Shaka8)this.$VideoPlayerHTML5Shaka8=false;if(this.$VideoPlayerHTML5Shaka48){this.$VideoPlayerHTML5Shaka48.setResult('aborted').log();this.$VideoPlayerHTML5Shaka48=null;}};f.exports=t;}),null);