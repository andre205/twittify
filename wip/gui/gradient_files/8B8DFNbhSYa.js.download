if (self.CavalryLogger) { CavalryLogger.start_js(["KYVSO"]); }

__d('bs_char',['bs_caml_string','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(m){if(m<0||m>255){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Char.chr"];}else return m;}function i(m){var n=0;if(m>=40){if(m!==92){n=m>=127?1:2;}else return "\\\\";}else if(m>=32){if(m>=39){return "\\'";}else n=2;}else if(m>=14){n=1;}else switch(m){case 8:return "\\b";case 9:return "\\t";case 10:return "\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:n=1;break;case 13:return "\\r";}switch(n){case 1:var o=new Array(4);o[0]=92;o[1]=48+(m/100|0)|0;o[2]=48+(m/10|0)%10|0;o[3]=48+m%10|0;return c('bs_caml_string').bytes_to_string(o);case 2:var p=new Array(1);p[0]=m;return c('bs_caml_string').bytes_to_string(p);}}function j(m){if(m>=65&&m<=90||m>=192&&m<=214||m>=216&&m<=222){return m+32|0;}else return m;}function k(m){if(m>=97&&m<=122||m>=224&&m<=246||m>=248&&m<=254){return m-32|0;}else return m;}function l(m,n){return m-n|0;}g.chr=h;g.escaped=i;g.lowercase=j;g.uppercase=k;g.compare=l;}),null);
__d('bs_bytes',['bs_char','bs_list','bs_curry','bs_caml_obj','bs_caml_int32','bs_pervasives','bs_caml_string','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(ta,ua){var va=c('bs_caml_string').caml_create_string(ta);c('bs_caml_string').caml_fill_string(va,0,ta,ua);return va;}function i(ta,ua){var va=c('bs_caml_string').caml_create_string(ta);for(var wa=0,xa=ta-1|0;wa<=xa;++wa)va[wa]=c('bs_curry')._1(ua,wa);return va;}var j=[];function k(ta){var ua=ta.length,va=c('bs_caml_string').caml_create_string(ua);c('bs_caml_string').caml_blit_bytes(ta,0,va,0,ua);return va;}function l(ta){return c('bs_caml_string').bytes_to_string(k(ta));}function m(ta){return k(c('bs_caml_string').bytes_of_string(ta));}function n(ta,ua,va){if(ua<0||va<0||ua>(ta.length-va|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.sub / Bytes.sub"];}else{var wa=c('bs_caml_string').caml_create_string(va);c('bs_caml_string').caml_blit_bytes(ta,ua,wa,0,va);return wa;}}function o(ta,ua,va){return c('bs_caml_string').bytes_to_string(n(ta,ua,va));}function p(ta,ua,va){var wa=(ta.length+ua|0)+va|0,xa=c('bs_caml_string').caml_create_string(wa),ya=ua<0?[-ua|0,0]:[0,ua],za=ya[1],ab=ya[0],bb=c('bs_pervasives').min(ta.length-ab|0,wa-za|0);if(bb>0)c('bs_caml_string').caml_blit_bytes(ta,ab,xa,za,bb);return xa;}function q(ta,ua,va,wa){if(ua<0||va<0||ua>(ta.length-va|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.fill / Bytes.fill"];}else return c('bs_caml_string').caml_fill_string(ta,ua,va,wa);}function r(ta,ua,va,wa,xa){if(xa<0||ua<0||ua>(ta.length-xa|0)||wa<0||wa>(va.length-xa|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Bytes.blit"];}else return c('bs_caml_string').caml_blit_bytes(ta,ua,va,wa,xa);}function s(ta,ua,va,wa,xa){if(xa<0||ua<0||ua>(ta.length-xa|0)||wa<0||wa>(va.length-xa|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.blit / Bytes.blit_string"];}else return c('bs_caml_string').caml_blit_string(ta,ua,va,wa,xa);}function t(ta,ua){for(var va=0,wa=ua.length-1|0;va<=wa;++va)c('bs_curry')._1(ta,ua[va]);return 0;}function u(ta,ua){for(var va=0,wa=ua.length-1|0;va<=wa;++va)c('bs_curry')._2(ta,va,ua[va]);return 0;}function v(ta,ua){if(ua){var va=ua[0],wa=[0],xa=[0];c('bs_list').iter(function(ab){wa[0]=wa[0]+1|0;xa[0]=xa[0]+ab.length|0;return 0;},ua);var ya=c('bs_caml_string').caml_create_string(xa[0]+c('bs_caml_int32').imul(ta.length,wa[0]-1|0)|0);c('bs_caml_string').caml_blit_bytes(va,0,ya,0,va.length);var za=[va.length];c('bs_list').iter(function(ab){c('bs_caml_string').caml_blit_bytes(ta,0,ya,za[0],ta.length);za[0]=za[0]+ta.length|0;c('bs_caml_string').caml_blit_bytes(ab,0,ya,za[0],ab.length);za[0]=za[0]+ab.length|0;return 0;},ua[1]);return ya;}else return j;}function w(ta,ua){return ta.concat(ua);}function x(ta){var ua=ta-9|0;if(ua>4||ua<0){if(ua!==23){return 0;}else return 1;}else if(ua!==2){return 1;}else return 0;}function y(ta){var ua=ta.length,va=0;while(va<ua&&x(ta[va]))va=va+1|0;var wa=ua-1|0;while(wa>=va&&x(ta[wa]))wa=wa-1|0;if(wa>=va){return n(ta,va,(wa-va|0)+1|0);}else return j;}function z(ta){var ua=0;for(var va=0,wa=ta.length-1|0;va<=wa;++va){var xa=ta[va],ya;if(xa>=32){var za=xa-34|0;ya=za>58||za<0?za>=93?4:1:za>57||za<1?2:1;}else ya=xa>=11?xa!==13?4:2:xa>=8?2:4;ua=ua+ya|0;}if(ua===ta.length){return k(ta);}else{var ab=c('bs_caml_string').caml_create_string(ua);ua=0;for(var bb=0,cb=ta.length-1|0;bb<=cb;++bb){var db=ta[bb],eb=0;if(db>=35){if(db!==92){if(db>=127){eb=1;}else ab[ua]=db;}else eb=2;}else if(db>=32){if(db>=34){eb=2;}else ab[ua]=db;}else if(db>=14){eb=1;}else switch(db){case 8:ab[ua]=92;ua=ua+1|0;ab[ua]=98;break;case 9:ab[ua]=92;ua=ua+1|0;ab[ua]=116;break;case 10:ab[ua]=92;ua=ua+1|0;ab[ua]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:eb=1;break;case 13:ab[ua]=92;ua=ua+1|0;ab[ua]=114;break;}switch(eb){case 1:ab[ua]=92;ua=ua+1|0;ab[ua]=48+(db/100|0)|0;ua=ua+1|0;ab[ua]=48+(db/10|0)%10|0;ua=ua+1|0;ab[ua]=48+db%10|0;break;case 2:ab[ua]=92;ua=ua+1|0;ab[ua]=db;break;}ua=ua+1|0;}return ab;}}function aa(ta,ua){var va=ua.length;if(va){var wa=c('bs_caml_string').caml_create_string(va);for(var xa=0,ya=va-1|0;xa<=ya;++xa)wa[xa]=c('bs_curry')._1(ta,ua[xa]);return wa;}else return ua;}function ba(ta,ua){var va=ua.length;if(va){var wa=c('bs_caml_string').caml_create_string(va);for(var xa=0,ya=va-1|0;xa<=ya;++xa)wa[xa]=c('bs_curry')._2(ta,xa,ua[xa]);return wa;}else return ua;}function ca(ta){return aa(c('bs_char').uppercase,ta);}function da(ta){return aa(c('bs_char').lowercase,ta);}function ea(ta,ua){if(ua.length){var va=k(ua);va[0]=c('bs_curry')._1(ta,ua[0]);return va;}else return ua;}function fa(ta){return ea(c('bs_char').uppercase,ta);}function ga(ta){return ea(c('bs_char').lowercase,ta);}function ha(ta,ua,va,wa){while(true){var xa=va;if(xa>=ua){throw c('bs_caml_builtin_exceptions').not_found;}else if(ta[xa]===wa){return xa;}else{va=xa+1|0;continue;}}}function ia(ta,ua){return ha(ta,ta.length,0,ua);}function ja(ta,ua,va){var wa=ta.length;if(ua<0||ua>wa){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.index_from / Bytes.index_from"];}else return ha(ta,wa,ua,va);}function ka(ta,ua,va){while(true){var wa=ua;if(wa<0){throw c('bs_caml_builtin_exceptions').not_found;}else if(ta[wa]===va){return wa;}else{ua=wa-1|0;continue;}}}function la(ta,ua){return ka(ta,ta.length-1|0,ua);}function ma(ta,ua,va){if(ua<-1||ua>=ta.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.rindex_from / Bytes.rindex_from"];}else return ka(ta,ua,va);}function na(ta,ua,va){var wa=ta.length;if(ua<0||ua>wa){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.contains_from / Bytes.contains_from"];}else try{ha(ta,wa,ua,va);return 1;}catch(xa){if(xa===c('bs_caml_builtin_exceptions').not_found){return 0;}else throw xa;}}function oa(ta,ua){return na(ta,0,ua);}function pa(ta,ua,va){if(ua<0||ua>=ta.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.rcontains_from / Bytes.rcontains_from"];}else try{ka(ta,ua,va);return 1;}catch(wa){if(wa===c('bs_caml_builtin_exceptions').not_found){return 0;}else throw wa;}}var qa=c('bs_caml_obj').caml_compare,ra=c('bs_caml_string').bytes_to_string,sa=c('bs_caml_string').bytes_of_string;g.make=h;g.init=i;g.empty=j;g.copy=k;g.of_string=m;g.to_string=l;g.sub=n;g.sub_string=o;g.extend=p;g.fill=q;g.blit=r;g.blit_string=s;g.concat=v;g.cat=w;g.iter=t;g.iteri=u;g.map=aa;g.mapi=ba;g.trim=y;g.escaped=z;g.index=ia;g.rindex=la;g.index_from=ja;g.rindex_from=ma;g.contains=oa;g.contains_from=na;g.rcontains_from=pa;g.uppercase=ca;g.lowercase=da;g.capitalize=fa;g.uncapitalize=ga;g.compare=qa;g.unsafe_to_string=ra;g.unsafe_of_string=sa;}),null);
__d('bs_js_undefined',[],(function a(b,c,d,e,f,g){'use strict';function h(k,l){if(k!==undefined){return l(k);}else return undefined;}function i(k,l){if(k!==undefined){return l(k);}else return 0;}function j(k){if(k){return k[0];}else return undefined;}g.bind=h;g.iter=i;g.from_opt=j;}),null);
__d('bs_string',['bs_list','bs_bytes','bs_caml_int32','bs_caml_string'],(function a(b,c,d,e,f,g){'use strict';function h(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').make(ha,ia));}function i(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').init(ha,ia));}function j(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').copy(c('bs_caml_string').bytes_of_string(ha)));}function k(ha,ia,ja){return c('bs_caml_string').bytes_to_string(c('bs_bytes').sub(c('bs_caml_string').bytes_of_string(ha),ia,ja));}function l(ha,ia){if(ia){var ja=ia[0],ka=[0],la=[0];c('bs_list').iter(function(oa){ka[0]=ka[0]+1|0;la[0]=la[0]+oa.length|0;return 0;},ia);var ma=c('bs_caml_string').caml_create_string(la[0]+c('bs_caml_int32').imul(ha.length,ka[0]-1|0)|0);c('bs_caml_string').caml_blit_string(ja,0,ma,0,ja.length);var na=[ja.length];c('bs_list').iter(function(oa){c('bs_caml_string').caml_blit_string(ha,0,ma,na[0],ha.length);na[0]=na[0]+ha.length|0;c('bs_caml_string').caml_blit_string(oa,0,ma,na[0],oa.length);na[0]=na[0]+oa.length|0;return 0;},ia[1]);return c('bs_caml_string').bytes_to_string(ma);}else return "";}function m(ha,ia){return c('bs_bytes').iter(ha,c('bs_caml_string').bytes_of_string(ia));}function n(ha,ia){return c('bs_bytes').iteri(ha,c('bs_caml_string').bytes_of_string(ia));}function o(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').map(ha,c('bs_caml_string').bytes_of_string(ia)));}function p(ha,ia){return c('bs_caml_string').bytes_to_string(c('bs_bytes').mapi(ha,c('bs_caml_string').bytes_of_string(ia)));}function q(ha){var ia=ha-9|0;if(ia>4||ia<0){if(ia!==23){return 0;}else return 1;}else if(ia!==2){return 1;}else return 0;}function r(ha){if(ha===""||!(q(ha.charCodeAt(0))||q(ha.charCodeAt(ha.length-1|0)))){return ha;}else return c('bs_caml_string').bytes_to_string(c('bs_bytes').trim(c('bs_caml_string').bytes_of_string(ha)));}function s(ha){var ia=function ja(ka){while(true){var la=ka;if(la>=ha.length){return 0;}else{var ma=ha.charCodeAt(la);if(ma>=32){var na=ma-34|0;if(na>58||na<0){if(na>=93){return 1;}else{ka=la+1|0;continue;}}else if(na>57||na<1){return 1;}else{ka=la+1|0;continue;}}else return 1;}}};if(ia(0)){return c('bs_caml_string').bytes_to_string(c('bs_bytes').escaped(c('bs_caml_string').bytes_of_string(ha)));}else return ha;}function t(ha,ia){return c('bs_bytes').index(c('bs_caml_string').bytes_of_string(ha),ia);}function u(ha,ia){return c('bs_bytes').rindex(c('bs_caml_string').bytes_of_string(ha),ia);}function v(ha,ia,ja){return c('bs_bytes').index_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function w(ha,ia,ja){return c('bs_bytes').rindex_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function x(ha,ia){return c('bs_bytes').contains(c('bs_caml_string').bytes_of_string(ha),ia);}function y(ha,ia,ja){return c('bs_bytes').contains_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function z(ha,ia,ja){return c('bs_bytes').rcontains_from(c('bs_caml_string').bytes_of_string(ha),ia,ja);}function aa(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').uppercase(c('bs_caml_string').bytes_of_string(ha)));}function ba(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').lowercase(c('bs_caml_string').bytes_of_string(ha)));}function ca(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').capitalize(c('bs_caml_string').bytes_of_string(ha)));}function da(ha){return c('bs_caml_string').bytes_to_string(c('bs_bytes').uncapitalize(c('bs_caml_string').bytes_of_string(ha)));}var ea=c('bs_caml_string').caml_string_compare,fa=c('bs_bytes').fill,ga=c('bs_bytes').blit_string;g.make=h;g.init=i;g.copy=j;g.sub=k;g.fill=fa;g.blit=ga;g.concat=l;g.iter=m;g.iteri=n;g.map=o;g.mapi=p;g.trim=r;g.escaped=s;g.index=t;g.rindex=u;g.index_from=v;g.rindex_from=w;g.contains=x;g.contains_from=y;g.rcontains_from=z;g.uppercase=aa;g.lowercase=ba;g.capitalize=ca;g.uncapitalize=da;g.compare=ea;}),null);
__d("MessengerThreadsWebGraphQLQuery",["WebGraphQLQueryHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLQueryHelper").getExports({docID:"1283744655076739",queryID:"144918229379083"});}),null);
__d("messengerGraphQLThreadFetcherRe",["fbt","FBID","bs_array","bs_block","bs_curry","bs_string","ActorURI","getByPath","bs_caml_array","bs_caml_int32","bs_js_boolean","MercuryIDs","bs_pervasives","bs_caml_format","CurrentUser","AsyncRequest","bs_js_primitive","bs_js_undefined","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","P2PTransferStatus","MessagingSourceEnum","MessagingThreadType","MNCommerceMessageType","MercuryAttachmentType","MercuryLogMessageType","bs_caml_builtin_exceptions","MercuryAttachmentContentType","MessagingGenericAdminTextType","MessengerThreadsWebGraphQLQuery","MessengerThreadCannotReplyReason"],(function a(b,c,d,e,f,g,h){'use strict';function i(ab){return c("bs_array").map(function(bb){return {title:bb.title,url:bb.url};},ab);}function j(ab){var bb=ab.native_component_flow_request,cb;if(c("bs_js_primitive").is_nil_undef(bb)){cb=null;}else{var db=bb.page,eb=bb.page,fb=bb.page,gb;if(c("bs_js_primitive").is_nil_undef(fb)){gb=undefined;}else{var hb=fb.profile_picture;gb=c("bs_js_primitive").is_nil_undef(hb)?undefined:hb.uri;}var ib=bb.suggested_time_range,jb=bb.product_item,kb=bb.product_item,lb=bb.product_item,mb;if(c("bs_js_primitive").is_nil_undef(lb)){mb=undefined;}else{var nb=lb.profile_picture;mb=c("bs_js_primitive").is_nil_undef(nb)?undefined:nb.uri;}var ob=bb.user,pb=bb.user,qb=bb.user,rb;if(c("bs_js_primitive").is_nil_undef(qb)){rb=undefined;}else{var sb=qb.profile_picture;rb=c("bs_js_primitive").is_nil_undef(sb)?undefined:sb.uri;}cb={availability:bb.availability,generalInfo:bb.service_general_info,id:bb.id,pageID:c("bs_js_primitive").is_nil_undef(db)?undefined:db.id,pageName:c("bs_js_primitive").is_nil_undef(eb)?undefined:eb.name,pageProfilePic:gb,preferredTimeRange:c("bs_js_primitive").is_nil_undef(ib)?null:{end:ib.end,start:ib.start},price:c("bs_js_primitive").is_nil_undef(jb)?null:jb.experimental_freeform_price,requestedTime:bb.requested_time,serviceName:c("bs_js_primitive").is_nil_undef(kb)?null:kb.name,serviceProfilePic:mb,specialRequest:bb.special_request,status:bb.booking_status_value,statusLabel:bb.status,userID:c("bs_js_primitive").is_nil_undef(ob)?undefined:ob.id,username:c("bs_js_primitive").is_nil_undef(pb)?undefined:pb.short_name,userProfilePic:rb};}var tb=ab.status,ub;switch(tb){case "CANCELLED":ub=["Cancelled",h._("Cancelled")];break;case "DECLINED":ub=["Declined",h._("Declined")];break;case "REQUESTED":ub=["Requested",h._("Requested")];break;case "SCHEDULEED":ub=["Scheduled",h._("Scheduled")];break;default:throw [c("bs_caml_builtin_exceptions").invalid_argument,"Rrroneous target status"];}var vb=ab.page;return {id:ab.id,pageID:c("bs_js_primitive").is_nil_undef(vb)?undefined:vb.id,userID:ab.user.id,status:ub[0],statusLabel:ub[1],viewerID:c("CurrentUser").getAccountID(),requestMetadata:cb};}function k(ab){return {live_location_id:ab.live_location_id,is_expired:c("bs_js_boolean").to_js_boolean(ab.is_expired)};}function l(ab){return {message:ab.message,call_to_actions:ab.call_to_actions};}function m(ab){return {message:ab.message};}function n(ab){return {snippet:ab.snippet};}function o(ab){return {snippet:ab.snippet};}function p(ab){return {payment_snippet:ab.payment_snippet};}var q=function ab(bb){var cb={},db=[];for(var eb=bb.field_data_list,fb=Array.isArray(eb),gb=0,eb=fb?eb:eb[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var hb;if(fb){if(gb>=eb.length)break;hb=eb[gb++];}else{gb=eb.next();if(gb.done)break;hb=gb.value;}var ib=hb,jb=ib.field_type,kb=ib.label,lb=ib.values;if(jb===LeadGenInfoFieldTypes.CUSTOM){db.push({label:kb,values:lb});}else cb[jb]={label:kb,values:lb};}cb.questions=db;return cb;};function r(ab,bb){var cb=bb.invite_recipient,db=c("bs_js_primitive").is_nil_undef(cb)?null:cb.id,eb=bb.invite_sender,fb=c("bs_js_primitive").is_nil_undef(eb)?null:eb.id;return {quick_invite_id:bb.id,recipient_id:db,sender_id:fb,is_viewer_recipient:c("bs_js_boolean").to_js_boolean(+(ab===db))};}function s(ab){var bb=ab.requester,cb=c("bs_js_primitive").is_nil_undef(bb)?undefined:{id:bb.id,name:bb.short_name},db=ab.requestee,eb=c("bs_js_primitive").is_nil_undef(db)?undefined:{id:db.id,name:db.short_name},fb=c("bs_js_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("P2PTransferStatus")[ab.request_status]));return {amountWithSymbol:ab.amount.formatted,requestee:eb,requester:cb,currentStatus:fb};}function t(ab){var bb=ab.receiver_profile,cb=c("bs_js_primitive").is_nil_undef(bb)?null:{id:bb.id,name:bb.short_name},db=ab.sender,eb=c("bs_js_primitive").is_nil_undef(db)?{}:db;return {sender:eb,amountWithSymbol:ab.transaction_amount.formatted_amount,status:c("bs_js_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("P2PTransferStatus")[ab.transfer_status])),receiver:cb};}function u(ab,bb){var cb=bb.media,db=c("bs_js_primitive").is_nil_undef(cb)?null:cb.animated_image,eb=c("bs_js_primitive").is_nil_undef(cb)?null:cb.image,fb={};c("bs_array").iter(function(nb){var ob=nb.value;fb[nb.key]=c("bs_js_primitive").is_nil_undef(ob)?null:ob.text;return 0;},bb.properties);var gb=bb.target,hb;if(c("bs_js_primitive").is_nil_undef(gb)){hb=null;}else switch(gb.tag|0){case 0:hb=t(gb[0]);break;case 1:hb=s(gb[0]);break;case 2:hb=p(gb[0]);break;case 3:hb=o(gb[0]);break;case 4:hb=n(gb[0]);break;case 5:hb=m(gb[0]);break;case 6:hb=l(gb[0]);break;case 7:hb={video_id:gb[0].video_id};break;case 8:hb=c("bs_curry")._1(q,gb[0]);break;case 9:hb=k(gb[0]);break;case 10:hb=r(ab,gb[0]);break;case 11:hb=j(gb[0]);break;case 12:hb={genie_id:gb[0].id};break;}var ib=bb.target,jb=!c("bs_js_primitive").is_nil_undef(ib)&&ib.tag===5?0:null,kb=bb.description,lb=bb.source,mb=bb.title_with_entities;return {description:c("bs_js_primitive").is_nil_undef(kb)?null:kb.text,media:{animated_image:c("bs_js_primitive").is_nil_undef(db)?null:db.uri,animated_image_size:c("bs_js_primitive").is_nil_undef(db)?{height:null,width:null}:{height:db.height,width:db.width},image:c("bs_js_primitive").is_nil_undef(eb)?null:eb.uri,image_size:c("bs_js_primitive").is_nil_undef(eb)?{height:null,width:null}:{height:eb.height,width:eb.width},duration:c("bs_js_primitive").is_nil_undef(cb)?null:cb.playable_duration,playable:c("bs_js_primitive").is_nil_undef(cb)?null:cb.is_playable,source:c("bs_js_primitive").is_nil_undef(cb)?null:cb.playable_url},source:c("bs_js_primitive").is_nil_undef(lb)?null:lb.text,style_list:bb.style_list,title:c("bs_js_primitive").is_nil_undef(mb)?null:mb.text,action_links:i(bb.action_links),properties:fb,uri:bb.url,deduplication_key:bb.deduplication_key,target:hb,label:jb};}var v=[i,j,k,l,m,n,o,p,q,r,s,t,u];function w(ab){if(ab.is_malicious){return {app_attribution:null,icon_type:c("MercuryAttachmentContentType").UNKNOWN,metadata:null,name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:null,thumbnail_url:null,url:null,attach_type:c("MercuryAttachmentType").ERROR,error_msg:h._("This attachment has been marked as malicious.")};}else{var bb=ab.attribution_app,cb;if(c("bs_js_primitive").is_nil_undef(bb)){cb=null;}else{var db=bb.square_logo;cb={id:bb.id,icon_url:c("bs_js_primitive").is_nil_undef(db)?null:db.uri,name:bb.name};}var eb=ab.url;return {app_attribution:cb,icon_type:ab.content_type,metadata:null,name:ab.filename,preview_height:null,preview_url:null,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:c("bs_js_primitive").is_nil_undef(eb)?null:eb,attach_type:c("MercuryAttachmentType").FILE,error_msg:undefined};}}function x(ab){var bb=ab.chat_image,cb=c("bs_js_primitive").is_nil_undef(bb)?[null,null,null]:[bb.uri,bb.width,bb.height],db=cb[0],eb=ab.chat_image,fb=c("bs_js_primitive").is_nil_undef(eb)?null:c("bs_pervasives").string_of_int(eb.width)+(","+c("bs_pervasives").string_of_int(eb.height)),gb=ab.large_image,hb=c("bs_js_primitive").is_nil_undef(gb)?[null,null]:[gb.uri,c("bs_pervasives").string_of_int(gb.width)+(","+c("bs_pervasives").string_of_int(gb.height))],ib=ab.inbox_image,jb=c("bs_js_primitive").is_nil_undef(ib)?[null,null]:[ib.uri,c("bs_pervasives").string_of_int(ib.width)+(","+c("bs_pervasives").string_of_int(ib.height))],kb=ab.attribution_app,lb;if(c("bs_js_primitive").is_nil_undef(kb)){lb=null;}else{var mb=kb.square_logo;lb={id:kb.id,icon_url:c("bs_js_primitive").is_nil_undef(mb)?null:mb.uri,name:kb.name};}return {app_attribution:lb,attach_type:c("MercuryAttachmentType").VIDEO,name:ab.filename,url:ab.playable_url,rel:"async",preview_url:db,preview_width:cb[1],preview_height:cb[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").VIDEO,metadata:{fbid:ab.legacy_attachment_id,render_as_sticker:c("bs_js_boolean").to_js_boolean(+(ab.video_type==="SPEAKING_STICKER")),dimensions:c("bs_pervasives").string_of_int(ab.original_dimensions.x)+(","+c("bs_pervasives").string_of_int(ab.original_dimensions.y)),duration:ab.playable_duration_in_ms,large_size:hb[1],large_preview:hb[0],chat_size:fb,chat_preview:db,inbox_size:jb[1],inbox_preview:jb[0]},thumbnail_url:db,share:null};}function y(ab){var bb=ab.attribution_app,cb;if(c("bs_js_primitive").is_nil_undef(bb)){cb=null;}else{var db=bb.square_logo;cb={id:bb.id,icon_url:c("bs_js_primitive").is_nil_undef(db)?null:db.uri,name:bb.name};}return {app_attribution:cb,attach_type:c("MercuryAttachmentType").FILE,name:ab.filename,url:ab.playable_url,rel:"ignore",preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").MUSIC,metadata:{duration:ab.playable_duration_in_ms,isVoicemail:ab.is_voicemail?"1":"0",type:ab.audio_type},thumbnail_url:null,share:null};}function z(ab){var bb=ab.preview_image,cb=c("bs_js_primitive").is_nil_undef(bb)?[null,null,null]:[bb.uri,bb.width,bb.height],db=ab.animated_image,eb=c("bs_js_primitive").is_nil_undef(db)?null:db.uri,fb=ab.attribution_app,gb;if(c("bs_js_primitive").is_nil_undef(fb)){gb=null;}else{var hb=fb.square_logo;gb={id:fb.id,icon_url:c("bs_js_primitive").is_nil_undef(hb)?null:hb.uri,name:fb.name};}return {app_attribution:gb,attach_type:c("MercuryAttachmentType").ANIMATED_IMAGE,name:ab.filename,url:eb,rel:"async",preview_url:cb[0],preview_width:cb[1],preview_height:cb[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").PHOTO,metadata:{fbid:ab.legacy_attachment_id,image:eb,dimensions:c("bs_pervasives").string_of_int(ab.original_dimensions.x)+(","+c("bs_pervasives").string_of_int(ab.original_dimensions.y))},thumbnail_url:eb,share:null};}function aa(ab){var bb=ab.preview,cb=c("bs_js_primitive").is_nil_undef(bb)?[null,null,null]:[bb.uri,bb.width,bb.height],db=ab.large_preview,eb=c("bs_js_primitive").is_nil_undef(db)?[null,null,null]:[db.uri,db.width,db.height],fb=ab.attribution_app,gb;if(c("bs_js_primitive").is_nil_undef(fb)){gb=null;}else{var hb=fb.square_logo;gb={id:fb.id,icon_url:c("bs_js_primitive").is_nil_undef(hb)?null:hb.uri,name:fb.name};}var ib=ab.thumbnail;return {app_attribution:gb,attach_type:c("MercuryAttachmentType").PHOTO,name:ab.filename,url:null,rel:"async",preview_url:cb[0],preview_width:cb[1],preview_height:cb[2],large_preview_url:eb[0],large_preview_width:eb[1],large_preview_height:eb[2],icon_type:c("MercuryAttachmentContentType").PHOTO,metadata:{fbid:ab.legacy_attachment_id,dimensions:c("bs_pervasives").string_of_int(ab.original_dimensions.x)+(","+c("bs_pervasives").string_of_int(ab.original_dimensions.y))},thumbnail_url:c("bs_js_primitive").is_nil_undef(ib)?null:ib.uri,share:null};}function ba(ab,bb){if(ab>=bb){var cb=c("bs_pervasives").min(120,ab/2|0),db=c("bs_caml_int32").div(cb,ab/2|0);return [cb,c("bs_caml_int32").imul(bb/2|0,db)];}else{var eb=c("bs_pervasives").min(120,bb/2|0),fb=c("bs_caml_int32").div(eb,bb/2|0);return [c("bs_caml_int32").imul(ab/2|0,fb),eb];}}function ca(ab){var bb=ba(ab.width,ab.height),cb=ab.pack,db=ab.sprite_image,eb=ab.sprite_image_2x,fb=ab.padded_sprite_image,gb=ab.padded_sprite_image_2x;return {app_attribution:null,attach_type:c("MercuryAttachmentType").STICKER,name:null,url:ab.url,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").UNKNOWN,metadata:{stickerID:ab.id,packID:c("bs_js_primitive").is_nil_undef(cb)?null:cb.id,frameCount:ab.frame_count,frameRate:ab.frame_rate,framesPerRow:ab.frame_count>1?ab.frames_per_row:1,framesPerCol:ab.frame_count>1?ab.frames_per_column:1,height:bb[1],width:bb[0],spriteURI:c("bs_js_primitive").is_nil_undef(db)?null:db.uri,spriteURI2x:c("bs_js_primitive").is_nil_undef(eb)?null:eb.uri,paddedSpriteURI:c("bs_js_primitive").is_nil_undef(fb)?null:fb.uri,paddedSpriteURI2x:c("bs_js_primitive").is_nil_undef(gb)?null:gb.uri,thumbnail_url:null,share:null}};}function da(ab,bb){var cb=bb.story_attachment,db;if(c("bs_js_primitive").is_nil_undef(cb)){db=null;}else{var eb={share_id:bb.legacy_attachment_id,subattachments:c("bs_array").map(function(gb){return u(ab,gb);},cb.subattachments)},fb={description:cb.description,media:cb.media,source:cb.source,style_list:cb.style_list,title_with_entities:cb.title_with_entities,properties:cb.properties,url:cb.url,deduplication_key:cb.deduplication_key,action_links:cb.action_links,target:cb.target};db=Object.assign(eb,u(ab,fb));}return {app_attribution:null,attach_type:c("MercuryAttachmentType").SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:db,thumbnail_url:null};}function ea(ab,bb){var cb=[],db=bb.extensible_attachment;if(!c("bs_js_primitive").is_nil_undef(db))cb.push(da(ab,db));var eb=bb.sticker;if(!c("bs_js_primitive").is_nil_undef(eb))cb.push(ca(eb));var fb=bb.blob_attachments;if(!c("bs_js_primitive").is_nil_undef(fb))c("bs_array").iter(function(gb){switch(gb.tag|0){case 0:cb.push(aa(gb[0]));return 0;case 1:cb.push(z(gb[0]));return 0;case 2:cb.push(y(gb[0]));return 0;case 3:cb.push(x(gb[0]));return 0;case 4:cb.push(w(gb[0]));return 0;}},fb);return cb;}var fa=[w,x,y,z,aa,ba,ca,da,ea];function ga(ab,bb,cb){var db;if(ab.__typename==="GroupPollExtensibleMessageAdminText"){var eb=Object.assign({},ab.question);Object.assign(eb,{total_count:ab.total_count,options:c("bs_array").map(function(fb){var gb=Object.assign({},fb);return Object.assign(gb,{total_count:fb.voters.nodes.length,voters:c("bs_array").map(function(hb){return hb.id;},fb.voters.nodes)});},ab.question.options.nodes)});db={message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[bb])),untyped_data:{event_type:c("bs_string").lowercase(ab.event_type),question_id:ab.question.id,question_json:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(JSON.stringify(eb)))}};}else db=ab.__typename==="InstantGameUpdateExtensibleMessageAdminText"?{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[bb])),untyped_data:{game_id:c("getByPath")(ab,["game","id"])}}:ab.__typename==="ThemeColorExtensibleMessageAdminText"||ab.__typename==="ThreadIconExtensibleMessageAdminText"||ab.__typename==="ThreadNicknameExtensibleMessageAdminText"||ab.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||ab.__typename==="AddContactExtensibleMessageAdminText"||ab.__typename==="RtcCallLogExtensibleMessageAdminText"||ab.__typename==="GameScoreExtensibleMessageAdminText"?{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[bb])),untyped_data:Object.assign({},ab)}:{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[bb])),untyped_data:undefined};return {log_message_body:cb,log_message_data:db,log_message_type:c("MercuryLogMessageType").GENERIC_ADMIN_TEXT};}function ha(ab){var bb=ab.target,cb=c("bs_js_primitive").is_nil_undef(bb)?null:bb.__typename==="PeerToPeerTransfer"?c("bs_block").__(0,[{sender:bb.sender,receiver_profile:bb.receiver_profile,transaction_amount:bb.transaction_amount,transfer_status:bb.transfer_status}]):bb.__typename==="PeerToPeerPaymentRequest"?c("bs_block").__(1,[{amount:bb.amount,requester:bb.requester,requestee:bb.requestee,request_status:bb.request_status}]):bb.__typename==="PaymentPlatformAttachment"?c("bs_block").__(2,[{payment_snippet:bb.payment_snippet}]):bb.__typename==="MomentsAppMessengerInvitation"?c("bs_block").__(3,[{snippet:bb.snippet}]):bb.__typename==="MomentsAppMessengerPhotoRequest"?c("bs_block").__(4,[{snippet:bb.snippet}]):bb.__typename==="MessengerRetailPromotion"?c("bs_block").__(5,[{message:bb.message}]):bb.__typename==="MessengerBusinessMessage"?c("bs_block").__(6,[{message:bb.message,call_to_actions:bb.call_to_actions}]):bb.__typename==="Video"?c("bs_block").__(7,[{video_id:bb.video_id}]):bb.__typename==="PagesPlatformLeadGenInfo"?c("bs_block").__(8,[{field_data_list:bb.field_data_list}]):bb.__typename==="MessageLiveLocation"?c("bs_block").__(9,[{live_location_id:bb.live_location_id,is_expired:bb.is_expired}]):bb.__typename==="QuickInvite"?c("bs_block").__(10,[{id:bb.id,invite_sender:bb.invite_sender,invite_recipient:bb.invite_recipient}]):bb.__typename==="PagesPlatformBookingMessage"?c("bs_block").__(11,[{id:bb.id,page:bb.page,status:bb.status,user:bb.user,native_component_flow_request:bb.native_component_flow_request}]):bb.__typename==="GenieMessage"?c("bs_block").__(12,[{id:bb.id}]):null;return {description:ab.description,media:ab.media,source:ab.source,style_list:ab.style_list,title_with_entities:ab.title_with_entities,properties:ab.properties,url:ab.url,deduplication_key:ab.deduplication_key,action_links:ab.action_links,subattachments:ab.subattachments,target:cb};}function ia(ab){var bb=ab.blob_attachments,cb=[];if(!c("bs_js_primitive").is_nil_undef(bb))c("bs_array").iter(function(db){if(db.__typename==="MessageImage"){cb.push(c("bs_block").__(0,[{attribution_app:db.attribution_app,filename:db.filename,preview:db.preview,large_preview:db.large_preview,thumbnail:db.thumbnail,legacy_attachment_id:db.legacy_attachment_id,original_dimensions:db.original_dimensions}]));return 0;}else if(db.__typename==="MessageAnimatedImage"){cb.push(c("bs_block").__(1,[{attribution_app:db.attribution_app,filename:db.filename,animated_image:db.animated_image,legacy_attachment_id:db.legacy_attachment_id,preview_image:db.preview_image,original_dimensions:db.original_dimensions}]));return 0;}else if(db.__typename==="MessageAudio"){cb.push(c("bs_block").__(2,[{attribution_app:db.attribution_app,filename:db.filename,playable_url:db.playable_url,playable_duration_in_ms:db.playable_duration_in_ms,is_voicemail:db.is_voicemail,audio_type:db.audio_type}]));return 0;}else if(db.__typename==="MessageVideo"){cb.push(c("bs_block").__(3,[{attribution_app:db.attribution_app,filename:db.filename,playable_url:db.playable_url,playable_duration_in_ms:db.playable_duration_in_ms,legacy_attachment_id:db.legacy_attachment_id,chat_image:db.chat_image,video_type:db.video_type,original_dimensions:db.original_dimensions,large_image:db.large_image,inbox_image:db.inbox_image}]));return 0;}else if(db.__typename==="MessageFile"){cb.push(c("bs_block").__(4,[{attribution_app:db.attribution_app,filename:db.filename,url:db.url,content_type:db.content_type,is_malicious:db.is_malicious}]));return 0;}else return 0;},bb);return cb;}function ja(ab){var bb=ab.message;if(c("bs_js_primitive").is_nil_undef(bb)){return [];}else{var cb=[];c("bs_array").iter(function(db){var eb=db.entity;if(c("bs_js_primitive").is_nil_undef(eb)){return 0;}else{var fb=eb.id;if(c("bs_js_primitive").is_nil_undef(fb)){return 0;}else{cb.push({id:fb,offset:db.offset,length:db.length});return 0;}}},bb.ranges);return cb;}}function ka(ab,bb,cb){var db={};c("bs_array").iter(function(bc){db[bc.user.id]=bc.reaction;return 0;},bb.message_reactions);var eb=c("FBID").isUser(c("bs_caml_format").caml_float_of_string(bb.message_sender.id)),fb=eb?c("MessagingTagUtils").getSourceFromTags(bb.tags_list):c("MessagingSourceEnum").UNKNOWN,gb=eb?c("MessagingTagUtils").getSourceTags(bb.tags_list,fb):[],hb=bb.commerce_message_type,ib=bb.customizations,jb={thread_id:cb.thread_id,thread_fbid:cb.thread_fbid,other_user_fbid:cb.other_user_fbid,action_type:bb.__typename==="UserMessage"?c("MercuryActionType").USER_GENERATED_MESSAGE:c("MercuryActionType").LOG_MESSAGE,message_id:bb.message_id,threading_id:null,offline_threading_id:bb.offline_threading_id,author:c("MercuryIDs").getParticipantIDFromUserID(bb.message_sender.id),author_email:bb.message_sender.email,ephemeral_ttl_mode:bb.ttl,timestamp:c("bs_caml_format").caml_float_of_string(bb.timestamp_precise),is_unread:bb.unread,is_filtered_content:c("bs_js_boolean").to_js_boolean(+(bb.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT)!==-1)),is_filtered_content_bh:c("bs_js_boolean").to_js_boolean(+(bb.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_BH)!==-1)),is_filtered_content_account:c("bs_js_boolean").to_js_boolean(+(bb.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_ACCOUNT)!==-1)),is_filtered_content_quasar:c("bs_js_boolean").to_js_boolean(+(bb.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_QUASAR)!==-1)),is_filtered_content_invalid_app:c("bs_js_boolean").to_js_boolean(+(bb.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_INVALID_APP)!==-1)),is_sponsored:bb.is_sponsored,commerce_message_type:c("bs_js_primitive").is_nil_undef(hb)?null:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MNCommerceMessageType")[hb])),customizations:c("bs_js_primitive").is_nil_undef(ib)?[]:ib,source:fb,source_tags:gb,tags:bb.tags_list,is_spoof_warning:c("bs_js_boolean").to_js_boolean(+(bb.tags_list.indexOf(c("MessagingTag").DOMAIN_AUTH_FAIL)!==-1||bb.tags_list.indexOf(c("MessagingTag").SPAM_SPOOFING)!==-1||bb.tags_list.indexOf(c("MessagingTag").SPOOF_WARNING)!==-1)),folder:cb.folder,platform_xmd:bb.platform_xmd_encoded,message_source:bb.message_source_data,montage_reply_data:bb.montage_reply_data,skip_bump_thread:false,profile_ranges:ja(bb),reactions:db};if(bb.__typename==="UserMessage"){var kb=ia(bb),lb=bb.extensible_attachment,mb;if(c("bs_js_primitive").is_nil_undef(lb)){mb=null;}else{var nb=lb.story_attachment;mb={legacy_attachment_id:lb.legacy_attachment_id,story_attachment:c("bs_js_primitive").is_nil_undef(nb)?null:ha(nb)};}var ob=ea(ab,{extensible_attachment:mb,blob_attachments:kb,sticker:bb.sticker}),pb=bb.message;Object.assign(jb,{body:c("bs_js_primitive").is_nil_undef(pb)?null:pb.text,subject:null,has_attachment:c("bs_js_boolean").to_js_boolean(+(ob.length>0)),attachments:ob,raw_attachments:null,ranges:[],meta_ranges:[]});}else if(bb.__typename==="VoiceCallMessage"){var qb=bb.message_sender.id,rb=cb.other_user_fbid,sb=c("bs_js_primitive").is_nil_undef(rb)?null:c("MercuryIDs").getParticipantIDFromUserID(qb===rb?c("CurrentUser").getID():rb),tb=bb.answered;Object.assign(jb,{log_message_type:c("MercuryLogMessageType").PHONE_CALL,log_message_data:{answered:c("bs_js_primitive").is_nil_undef(tb)?false:tb,caller:c("MercuryIDs").getParticipantIDFromUserID(qb),callee:sb},log_message_body:bb.snippet});}else if(bb.__typename==="ThreadNameMessage"){Object.assign(jb,{log_message_type:c("MercuryLogMessageType").THREAD_NAME,log_message_data:{name:bb.thread_name},log_message_body:bb.snippet});}else if(bb.__typename==="ThreadImageMessage"){var ub=bb.image_with_metadata,vb;if(c("bs_js_primitive").is_nil_undef(ub)){vb=null;}else{var wb=ub.preview;vb={preview_url:c("bs_js_primitive").is_nil_undef(wb)?null:wb.uri,metadata:{fbid:ub.legacy_attachment_id,dimensions:c("bs_pervasives").string_of_int(ub.original_dimensions.x)+(","+c("bs_pervasives").string_of_int(ub.original_dimensions.y))}};}Object.assign(jb,{log_message_type:c("MercuryLogMessageType").THREAD_IMAGE,log_message_data:{image:vb},log_message_body:bb.snippet});}else if(bb.__typename==="ParticipantsAddedMessage"){var xb=bb.participants_added;Object.assign(jb,{log_message_type:c("MercuryLogMessageType").SUBSCRIBE,log_message_data:{added_participants:c("bs_js_primitive").is_nil_undef(xb)?[]:c("bs_array").map(function(bc){return c("MercuryIDs").getParticipantIDFromUserID(bc.id);},xb)},log_message_body:bb.snippet});}else if(bb.__typename==="ParticipantLeftMessage"){var yb=bb.participants_removed;Object.assign(jb,{log_message_type:c("MercuryLogMessageType").UNSUBSCRIBE,log_message_data:{removed_participants:c("bs_js_primitive").is_nil_undef(yb)?[]:c("bs_array").map(function(bc){return c("MercuryIDs").getParticipantIDFromUserID(bc.id);},yb)},log_message_body:bb.snippet});}else if(bb.__typename==="GenericAdminTextMessage"){var zb=bb.extensible_message_admin_text,ac=bb.extensible_message_admin_text_type;if(!c("bs_js_primitive").is_nil_undef(zb))if(!c("bs_js_primitive").is_nil_undef(ac))Object.assign(jb,ga(zb,ac,bb.snippet));}return jb;}var la=[ga,ha,ia,ja,ka];function ma(ab){var bb=ab.associated_object;if(c("bs_js_primitive").is_nil_undef(bb)){return null;}else{var cb=bb.profile_picture;return {id:bb.id,name:bb.name,action_link:bb.action_link,profile_picture:c("bs_js_primitive").is_nil_undef(cb)?null:cb.uri,privacy_mode:ab.privacy_mode};}}function na(ab){var bb=ab.related_page_thread;if(c("bs_js_primitive").is_nil_undef(bb)){return null;}else{var cb=bb.page,db=c("bs_js_primitive").is_nil_undef(cb)?[]:c("bs_array").map(function(eb){return eb.name;},cb.custom_tags.nodes);return {flagged:bb.is_flagged,customTagNames:db};}}function oa(ab){var bb=ab.thread_key.other_user_id;if(c("bs_js_primitive").is_nil_undef(bb)){return 0;}else{var cb=ab.all_participants.nodes;return c("bs_array").fold_left(function(db,eb){var fb=eb.messaging_actor;if(fb.id===bb){return +(fb.__typename==="User");}else return db;},0,cb);}}function pa(ab){if(ab.length){var bb={};c("bs_array").iter(function(cb){var db=cb.nickname;if(c("bs_js_primitive").is_nil_undef(db)){return 0;}else{bb[cb.participant_id]=db;return 0;}},ab);return bb;}else return null;}function qa(ab){if(!c("bs_js_primitive").is_nil_undef(ab)&&ab!==""){return "#"+c("bs_string").sub(ab,2,ab.length-2|0);}else return null;}function ra(ab,bb){var cb=bb.customization_info,db;if(c("bs_js_primitive").is_nil_undef(cb)){db=[null,null,null];}else{var eb=cb.emoji;db=[qa(cb.outgoing_bubble_color),c("bs_js_primitive").is_nil_undef(eb)?null:{emoji:eb},pa(cb.participant_customizations)];}var fb=bb.last_message.nodes.length?[c("bs_caml_array").caml_array_get(bb.last_message.nodes,0)]:0,gb=bb.last_read_receipt.nodes.length?[c("bs_caml_array").caml_array_get(bb.last_read_receipt.nodes,0)]:0,hb;if(fb){var ib=fb[0];hb=ea(ab,{extensible_attachment:ib.extensible_attachment,blob_attachments:ib.blob_attachments,sticker:ib.sticker});}else hb=[];var jb=bb.cannot_reply_reason,kb=bb.thread_queue_metadata,lb=bb.thread_type,mb=bb.montage_thread,nb=bb.image,ob=bb.thread_key.other_user_id,pb=bb.thread_queue_metadata,qb=bb.name,rb=bb.thread_key.other_user_id,sb;if(c("bs_js_primitive").is_nil_undef(rb)){var tb=bb.thread_key.thread_fbid;sb=c("bs_js_primitive").is_nil_undef(tb)?bb.thread_key.legacy_thread_id:tb;}else sb=rb;var ub=bb.thread_key.legacy_thread_id,vb=bb.rtc_call_data,wb;if(c("bs_js_primitive").is_nil_undef(vb)){wb=null;}else{var xb=vb.initiator;wb={call_state:vb.call_state,server_info_data:vb.server_info_data,initiator_fbid:c("bs_js_primitive").is_nil_undef(xb)?0:c("bs_caml_format").caml_float_of_string(xb.id)};}return {admin_ids:c("bs_array").map(function(yb){return yb.id;},bb.thread_admins),approval_mode:bb.approval_mode,approval_queue_ids:c("bs_js_primitive").is_nil_undef(kb)?[]:c("bs_array").map(function(yb){return yb.id;},kb.approval_requests.nodes),can_reply:c("bs_js_primitive").is_nil_undef(jb)?true:false,cannot_reply_reason:bb.cannot_reply_reason,custom_color:db[0],custom_like_icon:db[1],custom_nickname:db[2],customization_enabled:bb.customization_enabled,thread_type:c("bs_js_primitive").is_nil_undef(lb)?null:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingThreadType")[lb])),ephemeral_ttl_mode:bb.ephemeral_ttl_mode,folder:c("bs_string").lowercase(bb.folder),has_email_participant:c("bs_js_primitive").is_nil_undef(jb)?false:c("bs_js_boolean").to_js_boolean(+(jb===c("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT)),has_montage:c("bs_js_primitive").is_nil_undef(mb)?false:true,image_src:c("bs_js_primitive").is_nil_undef(nb)?null:nb.uri,is_archived:c("bs_js_boolean").to_js_boolean(bb.has_viewer_archived),is_canonical_user:c("bs_js_boolean").to_js_boolean(oa(bb)),is_canonical:c("bs_js_primitive").is_nil_undef(ob)?false:true,is_pin_protected:c("bs_js_boolean").to_js_boolean(bb.is_pin_protected),is_subscribed:c("bs_js_boolean").to_js_boolean(bb.is_viewer_subscribed),is_thread_queue_enabled:c("bs_js_primitive").is_nil_undef(pb)?false:true,joinable_mode:{mode:c("bs_caml_format").caml_int_of_string(bb.joinable_mode.mode),link:bb.joinable_mode.link},last_message_timestamp:fb?c("bs_caml_format").caml_float_of_string(fb[0].timestamp_precise):0,last_message_type:fb?fb[0].commerce_message_type:null,last_read_timestamp:gb?c("bs_caml_format").caml_float_of_string(gb[0].timestamp_precise):0,lightweight_event:null,message_count:bb.message_count,mute_until:bb.mute_until,name:c("bs_js_primitive").is_nil_undef(qb)?"":qb,other_user_fbid:bb.thread_key.other_user_id,page_thread_info:na(bb),participants:c("bs_array").map(function(yb){return c("MercuryIDs").getParticipantIDFromUserID(yb.messaging_actor.id);},bb.all_participants.nodes),read_only:c("bs_js_primitive").is_nil_undef(jb)?false:c("bs_js_boolean").to_js_boolean(+(jb===c("MessengerThreadCannotReplyReason").READ_ONLY)),recipients_loadable:c("bs_js_primitive").is_nil_undef(jb)?true:c("bs_js_boolean").to_js_boolean(+(jb!==c("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE)),server_timestamp:c("bs_caml_format").caml_float_of_string(bb.updated_time_precise),snippet_attachments:hb,snippet_sender:fb?c("MercuryIDs").getParticipantIDFromUserID(fb[0].message_sender.messaging_actor.id):null,snippet:fb?fb[0].snippet:null,thread_fbid:sb,thread_id:c("bs_js_primitive").is_nil_undef(ub)?"":ub,timestamp:c("bs_caml_format").caml_float_of_string(bb.updated_time_precise),unread_count:bb.unread_count,rtc_call_data:wb,associated_object:ma(bb),reactions_mute_mode:bb.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:bb.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1};}var sa=[ma,na,oa,pa,qa,ra];function ta(ab,bb){var cb={};c("bs_array").iter(function(db){var eb=db.actor;if(!c("bs_js_primitive").is_nil_undef(eb)&&ab!==eb.id){cb[eb.id]={action:c("bs_caml_format").caml_float_of_string(db.action),watermark:c("bs_caml_format").caml_float_of_string(db.watermark)};return 0;}else return 0;},bb.nodes);return cb;}var ua=[ta];function va(ab,bb,cb,db){return new (c("AsyncRequest"))(ab).setAllowCrossPageTransition(true).exec().then(function(eb){var fb=eb.getPayload().data.message_thread;if(c("bs_js_primitive").is_nil_undef(fb)){if(db!==0){return {actions:null,thread:undefined,end_of_history:{type:"user",fbid:bb},roger:null};}else return {actions:null,thread:undefined,end_of_history:undefined,roger:null};}else{var gb=c("bs_array").map(function(ob){var pb=ia(ob),qb=ob.extensible_attachment,rb;if(c("bs_js_primitive").is_nil_undef(qb)){rb=null;}else{var sb=qb.story_attachment;rb={legacy_attachment_id:qb.legacy_attachment_id,story_attachment:c("bs_js_primitive").is_nil_undef(sb)?null:ha(sb)};}return {snippet:ob.snippet,message_sender:ob.message_sender,timestamp_precise:ob.timestamp_precise,commerce_message_type:ob.commerce_message_type,extensible_attachment:rb,blob_attachments:pb,sticker:ob.sticker};},fb.last_message.nodes),hb=ra(cb,{thread_key:fb.thread_key,name:fb.name,all_participants:fb.all_participants,last_message:{nodes:gb},unread_count:fb.unread_count,message_count:fb.messages_count,image:fb.image,updated_time_precise:fb.updated_time_precise,mute_until:fb.mute_until,is_pin_protected:fb.is_pin_protected,is_viewer_subscribed:fb.is_viewer_subscribed,thread_queue_enabled:fb.thread_queue_enabled,folder:fb.folder,has_viewer_archived:fb.has_viewer_archived,cannot_reply_reason:fb.cannot_reply_reason,ephemeral_ttl_mode:fb.ephemeral_ttl_mode,customization_info:fb.customization_info,thread_admins:fb.thread_admins,approval_mode:fb.approval_mode,joinable_mode:fb.joinable_mode,thread_queue_metadata:fb.thread_queue_metadata,event_reminders:fb.event_reminders,montage_thread:fb.montage_thread,last_read_receipt:fb.last_read_receipt,related_page_thread:fb.related_page_thread,rtc_call_data:fb.rtc_call_data,associated_object:fb.associated_object,reactions_mute_mode:fb.reactions_mute_mode,mentions_mute_mode:fb.mentions_mute_mode,privacy_mode:fb.privacy_mode,customization_enabled:fb.customization_enabled,thread_type:fb.thread_type}),ib=fb.messages,jb=c("bs_js_primitive").is_nil_undef(ib)?null:c("bs_array").map(function(ob){return ka(cb,ob,{thread_id:fb.thread_key.legacy_thread_id,thread_fbid:fb.thread_key.thread_fbid,other_user_fbid:fb.thread_key.other_user_id,folder:hb.folder});},ib.nodes),kb=fb.read_receipts,lb;if(c("bs_js_primitive").is_nil_undef(kb)){lb=null;}else{var mb={};mb[bb]=ta(cb,kb);lb=mb;}var nb=c("getByPath")(hb,["messages","page_info"]);if(c("bs_js_primitive").is_nil_undef(nb)){return {actions:jb,thread:hb,end_of_history:undefined,roger:lb};}else if(nb.has_previous_page){return {actions:jb,thread:hb,end_of_history:undefined,roger:lb};}else return {actions:jb,thread:hb,end_of_history:{type:"thread",fbid:bb},roger:lb};}});}function wa(ab,bb,cb,db,eb){return va(c("MessengerThreadsWebGraphQLQuery").getURI({id:bb,message_limit:cb,load_messages:+(cb>0),load_read_receipts:db,before:eb}),bb,ab,1);}function xa(ab,bb,cb,db,eb){return va(c("MessengerThreadsWebGraphQLQuery").getURI({id:bb,message_limit:cb,load_messages:+(cb>0),load_read_receipts:db,before:eb}),bb,ab,0);}function ya(ab,bb,cb,db,eb){var fb=c("ActorURI").create(c("MessengerThreadsWebGraphQLQuery").getURI({id:bb,message_limit:cb,load_messages:+(cb>0),load_read_receipts:db,before:eb}),ab);return va(fb,bb,ab,1);}function za(ab,bb,cb,db,eb){var fb=c("ActorURI").create(c("MessengerThreadsWebGraphQLQuery").getURI({id:bb,message_limit:cb,load_messages:+(cb>0),load_read_receipts:db,before:eb}),ab);return va(fb,bb,ab,0);}g.StoryAttachmentTransformer=v;g.AttachmentTransformer=fa;g.MessageTransformer=la;g.ThreadTransformer=sa;g.ReadReceiptTransformer=ua;g._fetchThread=va;g.forIDCanonical=wa;g.forIDNonCanonical=xa;g.forIDCanonicalWithPageAsActor=ya;g.forIDNonCanonicalWithPageAsActor=za;}),null);