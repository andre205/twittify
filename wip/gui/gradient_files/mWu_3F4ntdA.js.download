if (self.CavalryLogger) { CavalryLogger.start_js(["JLrDW"]); }

__d('AppUserRoleConstants.brands',[],(function a(b,c,d,e,f,g){var h={ADMIN:'ADMIN',MANAGER:'MANAGER',EMPLOYEE:'EMPLOYEE',NO_PERMISSION:'NO_PERMISSION'};f.exports=h;}),null);
__d('BusinessURI.brands',['BizSiteIdentifier.brands','BusinessConf','isFacebookURI','URI'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('URI'));i=h&&h.prototype;function j(l,m){'use strict';i.constructor.call(this,l);if(c('BizSiteIdentifier.brands').isBizSite()){var n=m||c('BizSiteIdentifier.brands').getBusinessID();if(n)this.addQueryData(c('BusinessConf').BIZ_ID_PARAM_NAME,n);if(!this.$BusinessURI1(this.getSubdomain()))this.setSubdomain(c('BusinessConf').DOMAIN);}if(!c('isFacebookURI')(this))throw new Error('Business URI must be FB URI');return this;}j.prototype.$BusinessURI1=function(l){'use strict';return l==='developers';};var k=function l(m,n){return new j(m,n);};k.BusinessURI=j;f.exports=k;}),null);
__d('NotificationURI',['BusinessURI.brands','URI','isFacebookURI','VideoPermalinkURI'],(function a(b,c,d,e,f,g){var h={localize:function i(j){try{j=c('BusinessURI.brands')(j);}catch(l){return j.toString();}var k=j.getSubdomain();return j.getUnqualifiedURI().getQualifiedURI().setSubdomain(k).toString();},snowliftable:function i(j){if(!j)return false;j=new (c('URI'))(j);var k=j.getQueryData();return c('isFacebookURI')(j)&&(c('VideoPermalinkURI').isValid(j)||'fbid' in k);},isVaultSetURI:function i(j){return this._areEquals(j,'/ajax/vault/sharer_preview.php');},isAlbumDraftRecoveryDialogURI:function i(j){return this._areEquals(j,'/ajax/photos/upload/overlay/');},isQuicksilverURI:function i(j){return this._areEquals(j,'/games/quicksilver/spotlight/');},_areEquals:function i(j,k){if(!j)return false;var l=new (c('URI'))(j);return c('isFacebookURI')(l)&&l.getPath()===k;},_startsWith:function i(j,k){if(!j)return false;var l=new (c('URI'))(j);return c('isFacebookURI')(l)&&l.getPath().startsWith(k);}};f.exports=h;}),null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers['extends']({},this.$UFICommentTypedLogger1,j);return this;};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this;};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this;};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this;};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this;};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this;};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this;};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this;};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h;}),null);
__d('UFICommentLogger',['UFICommentTypedLogger'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={};}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers['extends']({timestamp:j},k);new (c('UFICommentTypedLogger'))().setEvent('new_comment_post').setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('new_comment_received').setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();}delete this.$UFICommentLogger2[i];};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers['extends']({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined){this.$UFICommentLogger1[i]=[l];}else this.$UFICommentLogger1[i].push(l);new (c('UFICommentTypedLogger'))().setEvent('fetch_comment').setIsReply(k.is_reply).setRequestLength(k.request_length).log();};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('fetch_comment_received').setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i];}};f.exports=new h();}),null);
__d('UFIReactionsUtils',[],(function a(b,c,d,e,f,g){var h={getReactionData:function i(j,k,l,m){k=parseInt(k,10);var n=!!k,o=j.reactorids?j.reactorids.slice(0):[],p=o.indexOf(l),q=0;if(n){if(p<0){o.unshift(l);q=1;}}else if(p>-1){o.splice(p,1);q=-1;}var r=Math.max(j.reactioncount+q,0),s=j.reactioncountreduced;if(s&&!isNaN(s))if(m){s=m(r);}else s=r.toString();var t=j.reactioncountmap||{},u,v=j.viewerreaction;if(v&&t[v]){t[v]['default']=Math.max((t[v]['default']||0)-1,0);u=t[v].reduced;if(u&&!isNaN(u))t[v].reduced=t[v]['default'].toString();}if(n&&t[k]){t[k]['default']=(t[k]['default']||0)+1;u=t[k].reduced;if(u&&!isNaN(u))t[k].reduced=t[k]['default'].toString();}var w=j.userreactions;if(!w||Array.isArray(w))w={};if(n){w[l]=k;}else delete w[l];var x=null;if(j.reactionsentences){var y=!(v&&k);x={current:j.reactionsentences[y?'alternate':'current'],alternate:j.reactionsentences[y?'current':'alternate']};}return {reactioncount:r,reactioncountmap:t,reactioncountreduced:s,reactionsentences:x,reactorids:o,userreactions:w,viewerreaction:k};},getReactionCountMapFromSummary:function i(j){var k={};if(!j)return k;for(var l=0;l<j.length;l++){var m=j[l],n=m.feedback_reaction.key;k[n]={'default':m.reactors&&m.reactors.count,reduced:m.reactors&&m.reactors.display_count};}return k;}};f.exports=h;}),null);
__d("XUFIReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}});}),null);
__d('UFIReplyCommentList',['getObjectValues','UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentListImpl'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m,n){if(!h[m])h[m]={};if(!h[m][n]){var o=new (c('UFIReplyCommentListImpl'))(l,m,n),p=i.getReplyListsForParentCommentID(String(m));if(p.length)o.updateCommentCount(p[0].getCommentCount());h[m][n]=o;}return h[m][n];},getReplyListsForParentCommentID:function k(l){return c('getObjectValues')(h[l]||{});},resetWithContext:function k(l,m,n,o){var p=h[m][o];if(!p)return;p.reset();p.actorID=n;}};function j(k){var l=c('UFIComments').getComment(k.commentid),m=l.id,n=l.parentcommentid;if(!n)return;if(l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getReplyListsForParentCommentID(n).forEach(function(o){o.deleteComment(m);});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.replies&&Object.keys(m).length)for(var n in m.replies){var o=m.replies[n],p=o.ftentidentifier,q=o.containerorderingmode,r=i.getCommentList(String(p),String(n),q);r.addCommentIDs(o.range.offset,o.range.length,o.values);r.updateCommentCount(o.count);}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){var n=m.parentcommentid;if(!n)return;i.getReplyListsForParentCommentID(String(n)).forEach(function(o){o.addOrUpdateComment(m);});});});f.exports=i;}),22);
__d("XUFIActorChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/actor\/change\/",{});}),null);
__d("XUFIAddCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/add\/comment\/",{});}),null);
__d("XUFICommentLikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/like\/",{});}),null);
__d("XUFIDeleteCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});}),null);
__d("XUFIEditCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});}),null);
__d("XUFIHideCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});}),null);
__d("XUFITranslateCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});}),null);
__d('UFIUserActions',['errorCode','fbt','ActorURI','AsyncRequest','AsyncResponse','ChannelClientID','ClientIDs','CommentPostedLiveState','ImmutableObject','UFICentralUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFIComments','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionUserActions','UFIUserActionUtils','UFIVideoPlayerRegistry','MercuryServerDispatcher','UnicodeBidi','XConstituencyTitleEditVisibilityDialogController','XConstituencyTitleEnableController','XUFIActorChangeController','XUFIAddCommentController','XUFICommentAcceptAnswerController','XUFICommentLikeController','XUFIDeleteCommentController','XUFIEditCommentController','XUFIHideCommentController','XUFILikeController','XUFITranslateCommentController','ifRequired'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={BAN:'ban',UNDO_BAN:'undo_ban'},k={changeActor:function ga(ha,ia){c('UFIFeedbackTargets').getFeedbackTarget(ha,function(ja){c('UFIToplevelPagedCommentList').resetCommentListsWithContext(ha,ia);c('UFIToplevelStreamedCommentList').resetAllCommentLists(ha);c('UFICentralUpdates').inform('actor-changed',{actorID:ia});var ka={from_actor_id:ja.actorforpost,ft_ent_identifier:ha};ka[c('ActorURI').PARAMETER_ACTOR]=ia;var la=c('XUFIActorChangeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(la,ka);});},changeCommentLike:function ga(ha,ia,ja){var ka=c('UFIComments').getComment(ha);if(ka.hasviewerliked!=ia){var la=c('UFIUserActionUtils').trackingData(ja.target),ma=ia?1:-1,na={commentid:ha,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ia,likecount:(ka.likecount||0)+ma};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[na]});c('UFIFeedbackTargets').getFeedbackTarget(ka.ftentidentifier,function(oa){var pa={};pa[c('ActorURI').PARAMETER_ACTOR]=oa.actorforpost;var qa=c('XUFICommentLikeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(qa,babelHelpers['extends']({comment_id:ha,legacy_id:ka.legacyid,like_action:ia,ft_ent_identifier:ka.ftentidentifier,source:ja.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},la,pa));});}},_getAttachment:function ga(ha){return ha;},_getLocalComment:function ga(ha,ia,ja,ka,la,ma){var na=c('ClientIDs').getNewClientID(),oa=c('UnicodeBidi').isDirectionLTR(ja)?'ltr':'rtl',pa=this._getAttachment(la.attachedsticker);return {ftentidentifier:ia,body:{text:ja,dir:oa},author:ha.actorforpost,id:na,islocal:true,ufiinstanceid:la.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:la.replyid,replycommentparentid:la.replycommentparentid,attachment:pa,photo_comment:la.attachedphoto,video_comment:la.attachedvideo,timestamp:{time:Math.floor(Date.now()/1000),text:i._("A few seconds ago")},photoTextTagID:la.photoTextTagID,isPhotoTag:la.isPhotoTag,photoTagX:la.photoTagX,photoTagY:la.photoTagY,videoTimeOffset:ma,postedLiveState:la.islivestreaming?c('CommentPostedLiveState').LIVE:c('CommentPostedLiveState').ON_DEMAND};},addComment:function ga(ha,ia,ja,ka){c('UFIFeedbackTargets').getFeedbackTarget(ha,function(la){var ma=this.createComment(ha,ia,ja,ka);if(!ma)return;var na={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:la.actorforpost,hasviewersubscribed:true,entidentifier:la.entidentifier},oa={actiontype:c('UFIConstants').UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:la.targetfbid};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ma],actions:[na,oa]});}.bind(this));},createComment:function ga(ha,ia,ja,ka){var la=c('UFIFeedbackTargets').getFeedbackTargetIfExists(ha);if(!la.actorforpost)return null;var ma=null;if(ka.isBroadcasterUFI){ma=c('ifRequired')('LiveVideoBroadcastBroadcastStore',function(qa){return qa.getCurrentBroadcastTime();});}else if(ka.fluentContentToken&&(ka.isLiveVOD||ka.islivestreaming||ka.enableVODCommentTimestamps)){var na=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(ka.target,ka.fluentContentToken);if(ka.isLiveVOD||ka.islivestreaming){ma=na;}else{var oa=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(ka.target,ka.fluentContentToken);if(oa!=null&&na>0&&na<Math.floor(oa.getPlaybackDuration()))ma=na;}}var pa=this._getLocalComment(la,ha,ia,ja,ka,ma);this._sendCommentToServer(ha,la.actorforpost,ia,ja,ka,pa.id,ma);return pa;},_sendCommentToServer:function ga(ha,ia,ja,ka,la,ma,na){var oa=null;if(la.reply_fbid){oa=la.reply_fbid;}else if(la.replyid)oa=c('UFIComments').getComment(la.replyid).fbid;var pa;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentPost(ma,la.timestamp,{has_photo:!!la.attachedphoto,has_video:!!la.attachedvideo,has_sticker:!!la.attachedsticker,is_reply:!!la.replyid});var qa={};qa[c('ActorURI').PARAMETER_ACTOR]=ia;var ra=c('XUFIAddCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ra,babelHelpers['extends']({ft_ent_identifier:ha,comment_text:ka,source:la.source,client_id:ma,session_id:c('ChannelClientID').getID(),reply_fbid:oa,parent_comment_id:la.parent_comment_id||la.replyid,reply_comment_parent_id:la.replycommentparentid,rootid:la.rootid,clp:pa,attached_sticker_fbid:la.attachedsticker?la.attachedsticker.fbid:0,attached_photo_fbid:la.attachedphoto?la.attachedphoto.fbid:0,attached_video_fbid:la.attachedvideo?la.attachedvideo.fbid:0,attached_share_url:la.attachedshareurl,feedback_referrer:la.feedbackReferrer,feed_context:la.feedcontext,video_time_offset:na,is_live_streaming:la.islivestreaming,is_markdown:la.isMarkdown},c('UFIUserActionUtils').trackingData(la.target),qa,{photo_text_tag_id:la.photoTextTagID,is_private:la.isPrivate,is_photo_tag:la.isPhotoTag,photo_fbid:la.photoFBID,photo_tag_x:la.photoTagX,photo_tag_y:la.photoTagY}));},_hasCommentTextChanged:function ga(ha,ia){return ha.body&&ha.body.text!=ia;},_hasCommentPhotoChanged:function ga(ha,ia){return (ha||ia)&&!(ha&&ia)||ha&&ia&&ha.fbid!=ia.fbid;},_hasCommentVideoChanged:function ga(ha,ia){return (ha||ia)&&!(ha&&ia)||ha&&ia&&ha.fbid!=ia.fbid;},_hasCommentStickerChanged:function ga(ha,ia){return (ha||ia)&&!(ha&&ia)||ha&&ha.type=='sticker'&&ia&&ha.fbid!=ia.fbid;},_hasCommentShareURLChanged:function ga(ha,ia){if(ia){return true;}else return ha&&ha.type=='share';},editComment:function ga(ha,ia,ja,ka){var la=c('UFIUserActionUtils').trackingData(ka.target),ma=c('UFIComments').getComment(ha),na=this._hasCommentTextChanged(ma,ia)||this._hasCommentPhotoChanged(ma.photo_comment,ka.attachedPhoto)||this._hasCommentStickerChanged(ma.attachment,ka.attachedSticker)||this._hasCommentVideoChanged(ma.video_comment,ka.attachedVideo)||this._hasCommentShareURLChanged(ma.attachment,ka.attachedShareURL);ma=c('ImmutableObject').set(ma,{status:c('UFIConstants').UFIStatus.PENDING_EDIT,body:{text:ia},editnux:null,attachment:ka.attachedSticker,photo_comment:ka.attachedPhoto,video_comment:ka.attachedVideo});if(na)ma=c('ImmutableObject').set(ma,{originalTimestamp:ma.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:i._("A few seconds ago")}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ma]});c('UFIFeedbackTargets').getFeedbackTarget(ma.ftentidentifier,function(oa){var pa={};pa[c('ActorURI').PARAMETER_ACTOR]=oa.actorforpost;var qa=c('XUFIEditCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(qa,babelHelpers['extends']({ft_ent_identifier:ma.ftentidentifier,comment_text:ja,source:ka.source,comment_id:ma.id,parent_comment_id:ma.parentcommentid,attached_sticker_fbid:ka.attachedSticker?ka.attachedSticker.fbid:0,attached_photo_fbid:ka.attachedPhoto?ka.attachedPhoto.fbid:0,attached_video_fbid:ka.attachedVideo?ka.attachedVideo.fbid:0,attached_share_url:ka.attachedShareURL},la,pa));});},translateComments:function ga(ha,ia,ja,ka){var la=c('XUFITranslateCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(la,{ft_ent_identifier:ha,comment_ids:ia,source:ka.source,trigger:ja});},setHideAsSpam:function ga(ha,ia,ja){var ka=c('UFIUserActionUtils').trackingData(ja.target),la=c('UFIComments').getComment(ha),ma={commentid:ha,actiontype:c('UFIConstants').UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:ia};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ma]});c('UFIFeedbackTargets').getFeedbackTarget(la.ftentidentifier,function(na){var oa={};oa[c('ActorURI').PARAMETER_ACTOR]=na.actorforpost;var pa=c('XUFIHideCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(pa,babelHelpers['extends']({comment_id:ha,spam_action:ia,ft_ent_identifier:la.ftentidentifier,source:ja.source},ka,oa));});},removeComment:function ga(ha,ia){var ja=c('UFIUserActionUtils').trackingData(ia.target),ka=c('UFIComments').getComment(ha),la={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:ha,islocal:true,oneclick:ia.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[la]});c('UFIFeedbackTargets').getFeedbackTarget(ka.ftentidentifier,function(ma){var na={};na[c('ActorURI').PARAMETER_ACTOR]=ma.actorforpost;var oa=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(oa,babelHelpers['extends']({comment_id:ka.id,comment_legacyid:ka.legacyid,ft_ent_identifier:ka.ftentidentifier,one_click:ia.oneclick,source:ia.source,client_id:c('ClientIDs').getNewClientID()},ja,na));});},changeAcceptedAnswer:function ga(ha,ia){c('MercuryServerDispatcher').trySend(w,{ft_ent_identifier:ha.id,do_accept:ia});},banUser:function ga(ha,ia,ja,ka){var la=ja?j.BAN:j.UNDO_BAN;c('MercuryServerDispatcher').trySend('/ajax/ufi/ban_user.php',{page_id:ia,commenter_id:ha.author,action:la,comment_id:ha.id,client_side:true});},changeSubscribe:function ga(ha,ia,ja){c('UFIFeedbackTargets').getFeedbackTarget(ha,function(ka){var la=c('UFIUserActionUtils').trackingData(ja.target);if(ka.hasviewersubscribed!==ia){var ma={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ka.actorforpost,hasviewersubscribed:ia,entidentifier:ha};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ma]});var na={};na[c('ActorURI').PARAMETER_ACTOR]=ka.actorforpost;c('MercuryServerDispatcher').trySend('/ajax/ufi/subscribe.php',babelHelpers['extends']({subscribe_action:ia,ft_ent_identifier:ha,source:ja.source,client_id:c('ClientIDs').getNewClientID(),rootid:ja.rootid,comment_expand_mode:ja.commentexpandmode},la,na));}});},fetchSpamComments:function ga(ha,ia,ja,ka){c('MercuryServerDispatcher').trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ha,viewas:ka,comment_ids:ia,parent_comment_id:ja,source:null});},hideConstituentTitle:function ga(ha){var ia=c('XConstituencyTitleEnableController').getURIBuilder().getURI();new (c('AsyncRequest'))(ia).setMethod('POST').setData({ft_id:ha.ftentidentifier,enable:false,source:'comment_edit_menu',comment_id:ha.id}).send();},showConstituentTitle:function ga(ha){var ia=c('XConstituencyTitleEditVisibilityDialogController').getURIBuilder().setFBID('ft_id',ha.ftentidentifier).setEnum('action_type','comment_show_constituent_title').setEnum('source','comment_edit_menu').setString('comment_id',ha.id).getURI();new (c('AsyncRequest'))(ia).send();},removePreview:function ga(ha,ia){var ja=c('UFIUserActionUtils').trackingData(ia.target),ka={commentid:ha.id,actiontype:c('UFIConstants').UFIActionType.REMOVE_PREVIEW};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ka]});c('MercuryServerDispatcher').trySend('/ajax/ufi/remove_preview.php',babelHelpers['extends']({comment_id:ha.id,ft_ent_identifier:ha.ftentidentifier,source:ia.source},ja));}};function l(ga){c('AsyncResponse').defaultErrorHandler(ga);}function m(ga){var ha=ga.request.data;c('AsyncResponse').defaultErrorHandler(ga);var ia=ha.client_id||ha.comment_id,ja=c('UFIComments').getComment(ia),ka=ja.status===c('UFIConstants').UFIStatus.PENDING_EDIT?c('UFIConstants').UFIStatus.FAILED_EDIT:c('UFIConstants').UFIStatus.FAILED_ADD;ja=c('ImmutableObject').setDeep(ja,{status:ka,allowRetry:n(ga),body:{mentionstext:ha.comment_text,mentionsphoto:ja.photo_comment,mentionsvideo:ja.video_comment}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ja]});}function n(ga){var ha=ga.getError();if(ga.isBlockedAction())return false;if(ga.silentError)return true;if(ha===1357012||ha===1357006)return false;return true;}function o(ga){var ha=ga.request.data,ia=ha.comment_id,ja=c('UFIComments').getComment(ia);ja=c('ImmutableObject').set(ja,{status:ja.priorstatus||null,priorstatus:undefined});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ja]});}function p(ga){var ha=ga.request.data,ia=ha.comment_id,ja=c('UFIComments').getComment(ia);if(ha.like_action===ja.hasviewerliked){var ka=ja.hasviewerliked?-1:1,la={commentid:ia,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:!ja.hasviewerliked,likecount:(ja.likecount||0)+ka};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[la]});}c('AsyncResponse').defaultErrorHandler(ga);}function q(ga){var ha=ga.request.data,ia=ha.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(ia,function(ja){if(ja.hasviewerliked===ha.like_action){var ka=ja.hasviewerliked?-1:1,la={actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:ja.actorforpost,hasviewerliked:!ja.hasviewerliked,likecount:(ja.likecount||0)+ka,entidentifier:ia,likesentences:{current:ja.likesentences.alternate,alternate:ja.likesentences.current}};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[la]});}});c('AsyncResponse').defaultErrorHandler(ga);}function r(ga){var ha=ga.request.data,ia=ha.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(ia,function(ja){if(ja.hasviewersubscribed===ha.subscribe_action){var ka={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ja.actorforpost,hasviewersubscribed:!ja.hasviewersubscribed,entidentifier:ia};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ka]});}});c('AsyncResponse').defaultErrorHandler(ga);}var s={'/ajax/ufi/ban_user.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:l},'/ajax/ufi/subscribe.php':{mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:r,batch_if:ea,batch_function:fa},'/ajax/ufi/id_comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:c('MercuryServerDispatcher').IMMEDIATE}},t=c('XUFIAddCommentController').getURIBuilder().getURI();s[t]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:m};var u=c('XUFIDeleteCommentController').getURIBuilder().getURI();s[u]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var v=c('XUFICommentLikeController').getURIBuilder().getURI();s[v]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:p,batch_if:ca,batch_function:fa};var w=c('XUFICommentAcceptAnswerController').getURIBuilder().getURI();s[w]={mode:c('MercuryServerDispatcher').IMMEDIATE};var x=c('XUFIHideCommentController').getURIBuilder().getURI();s[x]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var y=c('XUFILikeController').getURIBuilder().getURI();s[y]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:q,batch_if:da,batch_function:fa};var z=c('XUFIEditCommentController').getURIBuilder().getURI();s[z]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:m};var aa=c('XUFITranslateCommentController').getURIBuilder().getURI();s[aa]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ba=c('XUFIActorChangeController').getURIBuilder().getURI();s[ba]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(s);function ca(ga,ha){return ga&&ga.ft_ent_identifier==ha.ft_ent_identifier&&ga.comment_id==ha.comment_id;}function da(ga,ha){return ga&&ga.ft_ent_identifier==ha.ft_ent_identifier;}function ea(ga,ha){return ga&&ga.ft_ent_identifier==ha.ft_ent_identifier;}function fa(ga,ha){return ha;}f.exports=babelHelpers['extends']({},k,c('UFIReactionUserActions'));}),null);
__d('UFIDispatcher',['ReactDispatcher_DEPRECATED','UFISharedDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ReactDispatcher_DEPRECATED'));i=h&&h.prototype;j.prototype.dispatch=function(k){i.dispatch.call(this,k);c('UFISharedDispatcher').dispatch(k);};function j(){h.apply(this,arguments);}f.exports=j;}),18);
__d('UFIAddCommentAction',['UFIAddCommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={cancel:function i(j){return {type:c('UFIAddCommentActionType').CANCEL,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},changeContent:function i(j,k,l){return {type:c('UFIAddCommentActionType').CHANGE_CONTENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,text:k,replyFBID:l};},retrySubmit:function i(j,k){return {type:c('UFIAddCommentActionType').RETRY_SUBMIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,comment:k};},submitEdit:function i(j,k,l,m){return {type:c('UFIAddCommentActionType').SUBMIT_EDIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,comment:k,commentData:l,target:m};},submitNew:function i(j,k,l,m){return {type:c('UFIAddCommentActionType').SUBMIT_NEW,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,comment:k,target:l,replyCommentID:m,timestamp:Date.now()};}};f.exports=h;}),null);
__d('HovercardLinkInterpolator',['cx','fbt','Badge.react','HovercardLink','Link.react','React','URI','isFacebookURI','isRTL'],(function a(b,c,d,e,f,g,h,i){function j(k,l,m,n,o){var p=arguments.length<=5||arguments[5]===undefined?null:arguments[5],q=l.entity,r=m||(q.external?'_blank':null),s,t=(!q.external?"profileLink":'')+(q.weakreference?' '+"weakReference":''),u,v=q.hashtag?k.substring(1):k;u=c('isRTL')(v)?'rtl':'ltr';var w=new (c('URI'))(q.url);if(c('isFacebookURI')(w))w.addQueryData({hc_location:o});var x=q.shimhash?q.shimhash:null,y=!q.external&&!q.hashtag&&!q.photo&&!q.note&&!q.statusupdate&&!q.video,z=y?{'data-hovercard':c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(q,n,o,null,p).toString()}:{};if(q.hashtag){s=c('React').createElement('a',babelHelpers['extends']({},z,{className:"_58cn",dir:u,href:w.toString(),target:r}),c('React').createElement('span',{'aria-label':i._("hashtag"),className:"_58cl"},k.substring(0,1)),c('React').createElement('span',{className:"_58cm"},k.substring(1)));}else{var aa=[];if(q.weakreference)aa.push(c('React').createElement('i',{key:'weakreference',className:'UFIWeakReferenceIcon'}));aa.push(k);if(q.noncoworker)aa.push(c('React').createElement(c('Badge.react'),{key:'noncoworker',type:'work_non_coworker'}));s=c('React').createElement(c('Link.react'),babelHelpers['extends']({},z,{className:t,dir:u,href:{url:w.toString(),shimhash:x},target:r}),aa);}return s;}f.exports=j;}),null);
__d('URITruncator',['fbt','URI'],(function a(b,c,d,e,f,g,h){var i=3,j=h._("..."),k=j.length||j.toString().length;function l(m,n){if(!m||n===undefined||m.length<=n||n<=k||m.toString().length<=k)return m;if(!c('URI').isValidURI(m))return m.substring(0,n-k)+j;var o=new (c('URI'))(m),p=o.getOrigin();if(p.length>n-k)return p.substring(0,n-k)+j;var q=false;if(!!o.getFragment()){q=true;o.setFragment('');if(o.toString().length<=n-k)return o.toString()+j;}var r=o.getQueryData();if(r){var s=Object.keys(r);if(s.length>0){q=true;for(var t=s.length-1;t>=0;t--){o.removeQueryData(s[t]);if(o.toString().length<=n-k)return o.toString()+j;}}}var u=o.getPath()+(q?j:''),v=u.split('/'),w=p.length+u.length-n,x=0;while(w>0&&v.length>x+1){var y=x+1,z=v[y];if(w+k+i<=z.length){var aa=z.length-1,ba=z.length-w-k,ca=/[a-zA-Z0-9]/;w+=k;while(w>0){while(aa>0&&ca.test(z[aa])){aa--;w--;}while(aa>0&&!ca.test(z[aa])){aa--;w--;}}if(aa===0)aa=ba-1;v[y]=z.substring(0,aa+1)+j;}else{x++;w-=z.length;if(x===1){w+=k;}else w--;}}if(x>0){if(v[v.length-1].length===0&&v.length===x+2)x++;v.splice(1,x,j);}var da=p+v.join('/');if(da.length>n)da=da.substring(0,n-k)+j;return da;}f.exports=l;}),null);
__d('transformTextRanges',['UnicodeUtils'],(function a(b,c,d,e,f,g){var h=function i(j,k,l){if(!j||!k||!l)return j;k.sort(function(s,t){return s.offset-t.offset;});var m=0;for(var n=0;n<k.length;n++){k[n].offset+=m;var o=c('UnicodeUtils').substr(j,k[n].offset,k[n].length),p=c('UnicodeUtils').strlen(o),q=l(o,k[n]),r=c('UnicodeUtils').strlen(q);if(o!==q){j=c('UnicodeUtils').substr(j,0,k[n].offset)+q+c('UnicodeUtils').substr(j,k[n].offset+k[n].length);k[n].length=r;m+=r-p;}}return j;};f.exports=h;}),null);
__d('UFICommentUtils',['Bootloader','HovercardLinkInterpolator','React','UFIConstants','UFIVideoPlayerRegistry','URI','URITruncator','VideoTimestampsClicksWWWTypedLogger','transformTextRanges'],(function a(b,c,d,e,f,g){'use strict';var h={getCommentTextWithTruncatedURIs:function i(j,k){if(c('UFIConstants').commentURLTruncationLength)if(j&&j.length>0)k=c('transformTextRanges')(k,j,function(l,m){var n=m.entity.external||m.entity.__type__&&m.entity.__type__.name==='ExternalUrl';return n?c('URITruncator')(l,c('UFIConstants').commentURLTruncationLength):l;});return k;},getCommentBodyInterpolator:function i(j,k,l,m){return function(n,o){if(o.videoTimestamp){if(m)return c('React').createElement('span',null,o.entity);var p=function t(u){u.preventDefault();new (c('VideoTimestampsClicksWWWTypedLogger'))().setVideoTimestamp(o.integerTimestamp).setCommentID(l).setIsContentTimestamp(false).log();if(k){c('UFIVideoPlayerRegistry').seekAvailableVideoPlayerController(k,o.integerTimestamp);c('UFIVideoPlayerRegistry').scrollToAvailableVideo(k);}return false;};return c('React').createElement('a',{className:'TimestampLink',onClick:p,href:'#'},o.entity);}else if(o.sphericalViewport){var q=function t(u){u.preventDefault();if(k)c('UFIVideoPlayerRegistry').setAvailableVideoPlayerControllerSphericalViewport(k,{yaw:o.yaw,pitch:o.pitch});return false;};return c('React').createElement('a',{onClick:q,href:'#'},o.entity);}else if(o.sphericalViewportAndTimestamp){var r=function t(u){u.preventDefault();if(k){c('UFIVideoPlayerRegistry').setAvailableVideoPlayerControllerSphericalViewport(k,{yaw:o.yaw,pitch:o.pitch});c('UFIVideoPlayerRegistry').seekAvailableVideoPlayerController(k,o.integerTimestamp);}return false;};return c('React').createElement('a',{onClick:r,href:'#'},o.entity);}else if(o.entity&&o.entity.__type__=='EntTextDelightCampaign'){var s=null;if(o.animationURI)s=function t(u){u.preventDefault();c('Bootloader').loadModules(["TextDelightAnimation"],function(v){v.playCommentAnimationOnTap(o.animationURI);},'UFICommentUtils');};return c('React').createElement('span',{style:o.highlightStyle,onClick:s},n);}else return c('HovercardLinkInterpolator')(n,o,'_blank',j,'ufi');};},shallowCopyRanges:function i(j){if(!j)return j;var k=[];j.forEach(function(l){k.push(babelHelpers['extends']({},l));});return k;},annotateProfileURIIfPublic:function i(j,k){if(!j)return k;return new (c('URI'))(k).addQueryData('rc','p').toString();},shouldShowTranslateAll:function i(j,k,l,m){if(!j)return false;var n=0,o=void 0,p=void 0;for(var q=0;q<j.length;q++){o=j[q];if(o.istranslatable&&!o.translationdata&&!m[o.id])n++;if(n>1)return true;if(l[o.id]){p=k?k[o.id]:[];for(var r=0;r<p.length;r++){o=p[r];if(o.istranslatable&&!o.translationdata&&!m[o.id])n++;if(n>1)return true;}}}return false;}};f.exports=h;}),null);
__d('UFICallbackStore',['FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){var l=k.type,m=babelHelpers.objectWithoutProperties(k,['type']);this.__emitter.emit(l,m);};j.prototype.on=function(k,l){return this.__emitter.addListener(k,l);};j.prototype.remove=function(){this.__emitter.removeAllListeners();};function j(){h.apply(this,arguments);}f.exports=j;}),18);
__d('LegacyMentionsInput.react',['cx','FocusListener','Bootloader','TypeaheadMetricsConfig','Event','Keys','React','ReactDOM'],(function a(b,c,d,e,f,g,h){var i,j;c('FocusListener');var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.hasEnteredText=function(){return !!(this.$ReactLegacyMentionsInput2&&this.$ReactLegacyMentionsInput2.getValue().trim());}.bind(this),this.submitComment=function(event){var r;if(event){r=event.target.value&&event.target.value.trim();}else{var s=c('ReactDOM').findDOMNode(this.refs.textarea);if(s.value&&s.value!==s.placeholder)r=s.value;}r=r||'';var t={visibleValue:r,encodedValue:r};if(this.$ReactLegacyMentionsInput2)t.encodedValue=this.$ReactLegacyMentionsInput2.getRawValue().trim();var u=this.props.onEnterSubmit(t,event);if(u&&this.$ReactLegacyMentionsInput2){this.$ReactLegacyMentionsInput2.reset();event&&event.preventDefault();}}.bind(this),this.$ReactLegacyMentionsInput3=function(event){var r=event.nativeEvent,s=c('Event').getKeyCode(r)==c('Keys').RETURN&&!c('Event').$E(r).getModifiers().any,t=this.$ReactLegacyMentionsInput2&&this.$ReactLegacyMentionsInput2.getTypeahead().getView().getSelection();if(this.props.onEnterSubmit&&s&&!t)this.submitComment(event);}.bind(this),this.$ReactLegacyMentionsInput4=function(){this.props.onFocus&&this.props.onFocus();this.$ReactLegacyMentionsInput1(c('ReactDOM').findDOMNode(this.refs.root));}.bind(this),this.$ReactLegacyMentionsInput5=function(){this.props.onBlur&&this.props.onBlur();}.bind(this),this.$ReactLegacyMentionsInput1=function(r){if(this.props.disableInitTextarea||this.$ReactLegacyMentionsInput2||this.$ReactLegacyMentionsInput6)return;this.$ReactLegacyMentionsInput6=true;c('Bootloader').loadModules(["CompactTypeaheadRenderer","ContextualTypeaheadView","InputSelection","MentionsInput","TextAreaControl","Typeahead","TypeaheadAreaCore","TypeaheadBestName","TypeaheadHoistFriends","TypeaheadMetrics","TypeaheadMetricsX","TypingDetector","UFIComments"],function(s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){var fa=c('ReactDOM').findDOMNode(this.refs.textarea);new w(fa);if(this.props.onTypingStateChange){var ga=new da(fa);ga.init();ga.subscribe('change',this.props.onTypingStateChange);}var ha={autoSelect:true,renderer:s,causalElement:fa,autoflip:this.props.autoflip};if(this.props.viewOptionsTypeObjects)ha.typeObjects=this.props.viewOptionsTypeObjects;if(this.props.viewOptionsTypeObjectsOrder)ha.typeObjectsOrder=this.props.viewOptionsTypeObjectsOrder;var ia=new x(this.props.datasource,{ctor:t,options:ha},{ctor:y},c('ReactDOM').findDOMNode(this.refs.typeahead)),ja=[z,aa];if(c('TypeaheadMetricsConfig').gkResults){var ka=new ca({extraData:{event_name:'mention_metric_x'}});ka.init(ia);}var la=new ba({extraData:{event_name:'mentions',from_location:'comments'}});x.initNow(ia,ja,la);this.$ReactLegacyMentionsInput2=new v(r,ia,fa,{hashtags:this.props.hashtags});this.$ReactLegacyMentionsInput2.init({},this.props.initialData);if(this.props.initialData)u.set(fa,fa.value.length);if(this.props.onPaste)c('Event').listen(fa,'paste',this.props.onPaste);if(this.props.onContentChange)this.$ReactLegacyMentionsInput7=this.$ReactLegacyMentionsInput2.subscribe('valueUpdate',function(ma,na){var oa=na.value;this.props.onContentChange(oa);}.bind(this));this.$ReactLegacyMentionsInput6=false;}.bind(this),'LegacyMentionsInput.react');}.bind(this),this.focus=function(){try{c('ReactDOM').findDOMNode(this.refs.textarea).focus();}catch(r){}}.bind(this),n;}l.prototype.componentDidMount=function(){'use strict';this.props.initialData&&this.$ReactLegacyMentionsInput1(c('ReactDOM').findDOMNode(this));};l.prototype.getText=function(){'use strict';return this.$ReactLegacyMentionsInput2&&this.$ReactLegacyMentionsInput2.getRawValue().trim();};l.prototype.componentWillUnmount=function(){'use strict';if(this.$ReactLegacyMentionsInput2&&this.$ReactLegacyMentionsInput7)this.$ReactLegacyMentionsInput2.unsubscribe(this.$ReactLegacyMentionsInput7);};l.prototype.render=function(){'use strict';var m="textInput"+(' '+"mentionsTextarea")+(' '+"uiTextareaAutogrow")+(' '+"uiTextareaNoResize")+(' '+"UFIAddCommentInput")+(' '+"_2xww");return c('React').createElement('div',{ref:'root',className:"uiMentionsInput textBoxContainer ReactLegacyMentionsInput _2xwx",'data-interaction-root-id':"_28pm"},c('React').createElement('div',{className:'highlighter'},c('React').createElement('div',null,c('React').createElement('span',{className:'highlighterContent hidden_elem'}))),c('React').createElement('div',{ref:'typeahead',className:'uiTypeahead mentionsTypeahead'},c('React').createElement('div',{className:'wrap'},c('React').createElement('input',{type:'hidden',autoComplete:'off',className:'hiddenInput'}),c('React').createElement('div',{className:'innerWrap'},c('React').createElement('textarea',{ref:'textarea',name:'add_comment_text',className:m,title:this.props.placeholder,placeholder:this.props.placeholder,onFocus:this.$ReactLegacyMentionsInput4,onBlur:this.$ReactLegacyMentionsInput5,onKeyDown:this.$ReactLegacyMentionsInput3})))),c('React').createElement('input',{type:'hidden',autoComplete:'off',className:'mentionsHidden',defaultValue:''}));};l.propTypes={initialData:k.object,disableInitTextarea:k.bool,placeholder:k.string,datasource:k.object,ref:k.string,viewOptionsTypeObjects:k.object,viewOptionsTypeObjectsOrder:k.array,hashtags:k.bool,autoflip:k.bool,onEnterSubmit:k.func,onFocus:k.func,onBlur:k.func,onContentChange:k.func,onTypingStateChange:k.func,onPaste:k.func};f.exports=l;}),null);
__d('SeeMore.react',['cx','fbt','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={isCollapsed:true},this.handleClick=function(r){if(this.props.clickCallback!==null)this.props.clickCallback(r);this.setState({isCollapsed:false});}.bind(this),n;}l.prototype.render=function(){'use strict';var m=this.state.isCollapsed,n=this.props.exposeTextInHtml,o=null;if(m){var p=null;if(this.props.allowSeeMoreLinebreak)p=c('React').createElement('span',{className:"_1ipe",role:'hidden'},' ');o=c('React').createElement('span',{className:"_5uzb"},i._("..."),p);}var q=this.props.children[0],r=null;if(m){if(n)r=c('React').createElement('span',{className:"_1x3s"},this.props.children[1]);}else r=c('React').createElement('span',null,this.props.children[1]);var s=!m?null:c('React').createElement('a',{className:"_5v47 fss",onClick:this.handleClick,href:'#',role:'button'},i._("See more"));return c('React').createElement('span',{className:c('joinClasses')(this.props.className,"_1n4g")},q,o,s,r);};l.defaultProps={clickCallback:null,exposeTextInHtml:false,allowSeeMoreLinebreak:false};f.exports=l;}),null);
__d('findSplitPointForText',[],(function a(b,c,d,e,f,g){function h(i,j,k){var l=null,m=i.split('\n');if(j&&i.length>j)l=j;if(k&&m.length>k){var n=m.slice(0,k).join('\n').length;if(l!==null){l=Math.min(n,l);}else l=n;}return l;}f.exports=h;}),null);
__d('partitionTextAndRanges',['UnicodeUtils'],(function a(b,c,d,e,f,g){function h(k,l){var m=k.offset+k.length;return l>k.offset&&l<m;}function i(k,l){for(var m=0;m<k.length;m++){var n=k[m];if(h(n,l))return n.offset;}return l;}var j=function k(l,m,n){var o=[],p=[],q=i(m,n);for(var r=0;r<m.length;r++){var s=m[r];if(s.offset<q){o.push(s);}else p.push(babelHelpers['extends']({},s,{offset:s.offset-q}));}return {before:{ranges:o,text:c('UnicodeUtils').substr(l,0,q)},after:{ranges:p,text:c('UnicodeUtils').substr(l,q)}};};f.exports=j;}),null);
__d('TruncatedTextWithEntities.react',['React','SeeMore.react','TextWithEntities.react','findSplitPointForText','partitionTextAndRanges'],(function a(b,c,d,e,f,g){var h,i,j=30;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$TruncatedTextWithEntities1=function(q){if(!this.props.allowSeeMoreLinebreakOnLongWords||!q)return false;if(q.length<=j)return false;var r=/(^|\s)(\S+)$/,s=r.exec(q),t=s?s[2]:null;return !!(t&&t.length>j);}.bind(this),m;}k.prototype.render=function(){'use strict';var l=this.props.text||'',m=this.props.ranges||[];l=l.replace(/\s*$/,'');var n=this.props.maxLines,o=this.props.maxLength;if(o&&l.length>o){var p=this.props.truncationPercent||.6;o=Math.floor(p*o);}var q=null;if(!this.props.shouldExpand)q=c('findSplitPointForText')(l,o,n);if(q!==null){while(l[q-1]==='\n')q--;var r=c('partitionTextAndRanges')(l,m,q),s=this.$TruncatedTextWithEntities1(r.before.text);return c('React').createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},c('React').createElement(c('SeeMore.react'),{className:this.props.className,clickCallback:this.props.markViewerHasInteracted,allowSeeMoreLinebreak:s},c('React').createElement(c('TextWithEntities.react'),{interpolator:this.props.interpolator,ranges:r.before.ranges,aggregatedRanges:this.props.aggregatedRanges,text:r.before.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}),c('React').createElement(c('TextWithEntities.react'),{interpolator:this.props.interpolator,ranges:r.after.ranges,aggregatedRanges:this.props.aggregatedRanges,text:r.after.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji})));}else return c('React').createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},c('React').createElement(c('TextWithEntities.react'),{className:this.props.className,interpolator:this.props.interpolator,ranges:m,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:l,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}));};f.exports=k;}),null);
__d('UFIBusinessActorIcon.react',['cx','AppUserRoleConstants.brands','BusinessActorUtils.brands','React','joinClasses','getObjectValues'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=c('BusinessActorUtils.brands').getInitials(this.props.firstName,this.props.lastName),n=this.props.businessRole===c('AppUserRoleConstants.brands').ADMIN;return c('React').createElement('div',{className:c('joinClasses')(this.props.classNames,"_1rpl")},c('React').createElement('div',{className:c('joinClasses')(this.props.textClassNames,n?"_1rpm":null)},m));};function l(){i.apply(this,arguments);}l.propTypes={firstName:k.string.isRequired,lastName:k.string.isRequired,classNames:k.string,textClassNames:k.string,businessRole:k.oneOf(c('getObjectValues')(c('AppUserRoleConstants.brands')))};f.exports=l;}),null);
__d('UFIActorIconContainer.react',['cx','Image.react','React','ShortProfiles','UFIBusinessActorIcon.react','XUISpinner.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=c('React').createElement(c('XUISpinner.react'),{size:'large'});i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={actor:null},o;}m.prototype.componentWillMount=function(){this.$UFIActorIconContainer1();};m.prototype.componentDidUpdate=function(n){if(this.props.actorID!==n.actorID)this.$UFIActorIconContainer1();};m.prototype.$UFIActorIconContainer1=function(){c('ShortProfiles').get(this.props.actorID,function(n){return this.setState({actor:n});}.bind(this));};m.prototype.render=function(){var n=this.state.actor;if(!n)return l;var o=c('joinClasses')("img UFIActorImage _54ru",this.props.className);return n.isBusinessPersona?c('React').createElement(c('UFIBusinessActorIcon.react'),{classNames:o,firstName:n.firstName,lastName:n.lastName,textClassNames:"UFIBusinessActorIconText"}):c('React').createElement(c('Image.react'),{alt:n.name,className:o,src:n.thumbSrc});};m.propTypes={actorID:k.string.isRequired,className:k.string};f.exports=m;}),null);
__d('ClipboardPhotoUploader',['ArbiterMixin','AsyncRequest','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.uploadURIString=k;this.data=l;}j.prototype.handlePaste=function(event){'use strict';var k=j.getImages(event);for(var l=0;l<k.length;++l){var m=new FormData();m.append('pasted_file',k[l]);var n=new (c('AsyncRequest'))();n.setURI(this.uploadURIString).setData(this.data).setRawData(m).setHandler(function(o){this.inform('upload_success',o);}.bind(this)).setErrorHandler(function(o){this.inform('upload_error',o);}.bind(this)).setAbortHandler(function(o){this.inform('upload_error',o);}.bind(this));this.inform('upload_start');n.send();break;}};j.getImages=function(event){'use strict';if(!event.clipboardData)return [];var k=event.clipboardData.items;if(!k)return [];var l,m=[];for(var n=0;n<k.length;++n){l=k[n];if(l.kind==='string')return [];if(l.kind==='file'&&l.type.indexOf('image/')!==-1)m.push(l.getAsFile());if(l.kind==='blob')m.push(l.blob);}return m;};f.exports=j;}),null);
__d('LitestandStoryInsertionStatus',['ArbiterMixin'],(function a(b,c,d,e,f,g){var h='check',i={registerBlocker:function j(k){return this.subscribe(h,function(l,m){if(m.can_insert&&k())m.can_insert=false;});},canInsert:function j(){var k={can_insert:true};this.inform(h,k);return k.can_insert;}};Object.assign(i,c('ArbiterMixin'));f.exports=i;}),null);
__d("MentionsInputUtils",[],(function a(b,c,d,e,f,g){var h={generateDataFromTextWithEntities:function i(j){var k=j.text,l=[];(j.ranges||[]).forEach(function(n){var o=n.entity;if(!o.external&&!n.videoTimestamp&&!n.sphericalViewport&&!/\D/.test(o.id))l.push({uid:o.id,text:k.substr(n.offset,n.length),offset:n.offset,length:n.length,weakreference:!!o.weakreference});});var m={value:k,mentions:l};return m;}};f.exports=h;}),null);
__d('SnowflakePermalinkUtils',['URI'],(function a(b,c,d,e,f,g){var h=/\/[^/]+\/(albums\/([^/]+)|posts\/([a-zA-Z]+[^/]+))\/([^/]+\/)?/,i=/\/[^/]+\/(albums|posts)\/([^/]+)\/([^/]+\/)?/,j={isPermalinkURI:function k(l){l=new (c('URI'))(l);return h.test(l.getPath());}};f.exports=j;}),null);
__d('AbstractCommentLiveTypingController',['ex','destroyOnUnload'],(function a(b,c,d,e,f,g){'use strict';var h={START:'start',STOP:'stop'},i=10*1000;function j(k,l,m){this.$AbstractCommentLiveTypingController5=k;this.$AbstractCommentLiveTypingController6=l;this.$AbstractCommentLiveTypingController7=m;this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;c('destroyOnUnload')(this.destroy.bind(this));}j.prototype.destroy=function(){this.$AbstractCommentLiveTypingController1&&this.$AbstractCommentLiveTypingController1.destroy();this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;};j.prototype.bootloadPublisherModule=function(k){throw new Error(c('ex')('bootloadPublisherModule not implemented, '+'should be overridden by subclass'));};j.prototype.$AbstractCommentLiveTypingController8=function(k){var l=new k(this.$AbstractCommentLiveTypingController5,this.$AbstractCommentLiveTypingController6,this.$AbstractCommentLiveTypingController7),m=Date.now(),n=this.$AbstractCommentLiveTypingController3;if(n&&n+i>=m){var o=this.$AbstractCommentLiveTypingController4;if(o===h.START){l.handleStartEvent();}else if(o===h.STOP)l.handleStopEvent();}this.$AbstractCommentLiveTypingController1=l;};j.prototype.$AbstractCommentLiveTypingController9=function(){if(this.$AbstractCommentLiveTypingController2||!this.$AbstractCommentLiveTypingController5)return;this.$AbstractCommentLiveTypingController2=true;this.bootloadPublisherModule(this.$AbstractCommentLiveTypingController8.bind(this));};j.prototype.attemptPublishStartEvent=function(){this.$AbstractCommentLiveTypingController4=h.START;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStartEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};j.prototype.attemptPublishStopEvent=function(){this.$AbstractCommentLiveTypingController4=h.STOP;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStopEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};f.exports=j;}),null);
__d('UFIAddCommentLiveTypingController',['AbstractCommentLiveTypingController','Bootloader'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('AbstractCommentLiveTypingController'));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,k,l,m);}j.prototype.bootloadPublisherModule=function(k){c('Bootloader').loadModules(["UFIAddCommentLiveTypingPublisher"],k,'UFIAddCommentLiveTypingController');};j.prototype.attemptPublishStartEvent=function(){i.attemptPublishStartEvent.call(this);};j.prototype.attemptPublishStopEvent=function(){i.attemptPublishStopEvent.call(this);};f.exports=j;}),null);
__d('UFIAttachMediaSection.react',['cx','fbt','Bootloader','Focus','React','UFICommentFileInputAcceptValues','XUIError.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={bootloaded:false,hasUploadFailure:false},this.$UFIAttachMediaSection1=null,this.$UFIAttachMediaSection2=function(){this.setState({hasUploadFailure:false});}.bind(this),this.$UFIAttachMediaSection3=function(){this.setState({hasUploadFailure:false});}.bind(this),this.$UFIAttachMediaSection4=function(){this.setState({hasUploadFailure:true});}.bind(this),this.$UFIAttachMediaSection5=function(event){this.props.onClick&&this.props.onClick();if(this.state.bootloaded)return;c('Bootloader').loadModules(["UFIUploader"],function(s){this.$UFIAttachMediaSection1=new s(this.refs.inputContainer,this.refs.inputControl,this.refs.input,this.props.getPhotoUploadData,this.props.prepareForAttachedPhotoPreview,this.props.prepareForAttachedVideoPreview,this.props.onPhotoUploadComplete,this.props.onVideoEncodeUpdate,this.props.onVideoUploadUpdate,this.props.onVideoUploadComplete,this.props.setFileInput,this.props.viewerActorID,this.$UFIAttachMediaSection2,this.$UFIAttachMediaSection3,this.$UFIAttachMediaSection4);}.bind(this),'UFIAttachMediaSection.react');this.setState({bootloaded:true});}.bind(this),o;}m.prototype.componentDidMount=function(){var n=this.refs,o=n.input,p=n.inputControl;if(o&&p)c('Focus').relocate(o,p);};m.prototype.componentWillUnmount=function(){this.$UFIAttachMediaSection1&&this.$UFIAttachMediaSection1.destroy();};m.prototype.render=function(){var n=this.props.allowVideoAttachments?i._("Attach a photo or video"):i._("Attach a photo"),o=i._("There was a problem with attaching the file, please try again"),p=this.state.hasUploadFailure,q=c('React').createElement('div',{className:"_r1a"+(' '+"UFIPhotoAttachLinkWrapper")+(' '+"_m")+(!!this.props.attachment?' '+"_5t1p":''),'data-hover':p?null:'tooltip','data-interaction-root-id':"_4i89",'data-tooltip-alignh':p?null:'center','data-tooltip-content':p?null:n,onClick:this.$UFIAttachMediaSection5,ref:'inputContainer',role:'presentation'},c('React').createElement('span',{className:"UFICommentPhotoIcon",ref:'inputControl'},c('React').createElement('input',{accept:this.props.allowVideoAttachments?c('UFICommentFileInputAcceptValues').both:c('UFICommentFileInputAcceptValues').photos,'aria-label':n,className:"_n",name:'file',ref:'input',title:n,type:'file',key:'0'})));return c('React').createElement(c('XUIError.react'),{xuiError:p?o:null,xuiErrorPosition:'above',xuiErrorAlignh:'center'},q);};m.propTypes={getPhotoUploadData:l.func.isRequired,prepareForAttachedPhotoPreview:l.func.isRequired,prepareForAttachedVideoPreview:l.func,onPhotoUploadComplete:l.func.isRequired,onVideoUploadComplete:l.func,onVideoUploadUpdate:l.func,onVideoEncodeUpdate:l.func,onClick:l.func,setFileInput:l.func.isRequired,targetId:l.string,allowVideoAttachments:l.bool,attachment:l.object,viewerActorID:l.string.isRequired};f.exports=m;}),null);
__d('UFIImageBlock.react',['cx','ImageBlock.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('ImageBlock.react'),babelHelpers['extends']({},this.props,{imageClassName:"UFIImageBlockImage",contentClassName:"UFIImageBlockContent"}),this.props.children);};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('UFIStickerButton.react',['cx','fbt','Arbiter','Bootloader','FocusRelocator.react','Link.react','React','StickerInterfaces','getObjectValues'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFIStickerButton',_clickGuard:false,_updateListener:null,_linkRef:null,propTypes:{onStickerFlyoutShow:j.func,onStickerSelected:j.func.isRequired,onEmoticonSelected:j.func,showTooltip:j.bool,stickerInterface:j.oneOf(c('getObjectValues')(c('StickerInterfaces'))),tabIndex:j.number},getDefaultProps:function l(){return {showTooltip:true,stickerInterface:c('StickerInterfaces').COMMENTS};},getInitialState:function l(){return {renderFlyout:null,flyoutShown:false};},componentDidMount:function l(){this._updateListener=c('Arbiter').subscribe('page_transition',function(){return this._hideFlyout();}.bind(this));},componentWillUnmount:function l(){this._updateListener&&this._updateListener.unsubscribe();},render:function l(){var m=i._("Post a sticker");return c('React').createElement(c('FocusRelocator.react'),{from:this._linkRef,to:this.refs.icon},c('React').createElement(c('Link.react'),{'aria-label':m,className:"_r1a UFICommentStickerButton",'data-hover':'tooltip','data-interaction-root-id':"_ara",'data-tooltip-content':this.props.showTooltip?m:null,linkRef:this._setRef,onClick:this._onLinkClicked,onMouseDown:this._prepareForClick,role:'button',tabIndex:this.props.tabIndex},c('React').createElement('div',{ref:'icon',className:"UFICommentStickerIcon"+(this.state.flyoutShown?' '+"UFICommentStickerIconActive":'')}),this.props.children,this.state.renderFlyout?this.state.renderFlyout():null));},_hideFlyout:function l(){this.setState({flyoutShown:false});},_prepareForClick:function l(){this._clickGuard=this.state.flyoutShown;},_onLinkClicked:function l(m){m.preventDefault();if(this.state.renderFlyout!==null){if(!this._clickGuard){this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();this.setState({flyoutShown:true});}return;}c('Bootloader').loadModules(["ContextualLayerAutoFlip","LayerTabIsolation","StickersFlyout.react","XUIContextualDialog.react"],function(n,o,p,q){this.setState({flyoutShown:true,renderFlyout:function(){return c('React').createElement(q,{alignment:'right',behaviors:{ContextualLayerAutoFlip:n,LayerTabIsolation:o},className:"_5e-r",contextRef:function(){return this._linkRef;}.bind(this),onBlur:this._hideFlyout,onToggle:function(r){if(!r&&this.state.flyoutShown)this._hideFlyout();}.bind(this),position:'above',shown:this.state.flyoutShown,hasActionableContext:true,width:278},c('React').createElement('div',null,c('React').createElement(p,{onEscKeyDown:this._hideFlyout,onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,stickerInterface:this.props.stickerInterface,shown:this.state.flyoutShown})));}.bind(this)});this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();}.bind(this),'UFIStickerButton.react');},_onStickerSelected:function l(m,event){this.props.onStickerSelected(m,event);this._hideFlyout();},_onEmoticonSelected:function l(m){this.props.onEmoticonSelected&&this.props.onEmoticonSelected(m);this._hideFlyout();},_setRef:function l(m){this._linkRef=m;}});f.exports=k;}),null);
__d("XFeedNUXSaveSeenStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false},env:{type:"Enum",enumType:0}});}),null);
__d('UFIAddComment.react',['cx','fbt','ActorURI','Arbiter','AsyncRequest','Badge.react','BootloadedComponent.react','Bootloader','ClipboardPhotoUploader','UFIEmojiInputButton','Event','JSResource','Keys','Link.react','LitestandStoryInsertionStatus','MentionsInputUtils','React','ReactDOM','Run','SnowflakePermalinkUtils','SubscriptionsHandler','TextDelightGatekeeperChecks','TrackingNodes','UFIActorIconContainer.react','UFIAddCommentAction','UFIAddCommentLiveTypingController','UFIAttachMediaSection.react','UFICommercialBreakStore','UFIComposerIsTypingStore','UFIConfig','UFIGifButton.react','UFIImageBlock.react','UFIMarkdownButton.react','UFISharedDispatcher','UFIStickerButton.react','UFITipJarButton.react','URI','VideoPermalinkURI','XFeedNUXSaveSeenStateController','XUFICommentMarkdownPreviewController','XUFICommentGIFPreprocessController','getActiveElement','joinClasses','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('UFIEmojiInputButton').EmojiInputButton,k=b.URL||b.webkitURL||{},l=c('React').PropTypes,m=i._("Write a comment..."),n=i._("Write a reply..."),o=i._("Write an answer..."),p="fcg fss UFICommentTip",q=19,r='/ajax/ufi/upload/',s='/ajax/ufi/sticker_preview/',t=1000,u='comment_content_change',v={UPLOAD:'uploading',ENCODE:'encoding'},w=false,x=false,y=c('React').createClass({displayName:'UFIAddComment',propTypes:{contextArgs:l.object.isRequired,viewerActorID:l.string.isRequired,editingComment:l.object.isRequired,className:l.string,allowPhotoAttachments:l.bool,allowVideoAttachments:l.bool,allowStickerAttachments:l.bool,allowGifAttachments:l.bool,allowTipJar:l.bool,isEditing:l.bool,isFirstComponent:l.bool,isLastComponent:l.bool,isQAndA:l.bool,mentionsDataSource:l.object,replyCommentID:l.string,showSendOnEnterTip:l.bool,multiCompanyGroupsCount:l.number,subtitle:l.any,targetID:l.string,withoutSeparator:l.bool,markViewerHasInteracted:l.func,allowCommentMarkdown:l.bool,allowCommentPrivate:l.bool,keepFocus:l.bool},contextTypes:{dispatch:l.func},getInitialState:function z(){var aa=this.props.editingComment,ba=aa.attachment||{type:null},ca=ba.type==='photo'?ba:null;return {attachedPhoto:aa.photo_comment||ca,attachedVideo:aa.video_comment||null,commentMarkdownPreviewContent:null,commentMarkdownEnabled:false,videoStatus:null,videoFileURL:null,videoProgress:0,isVideoFileTranscodedGIF:false,attachedSticker:ba.type=='sticker'?ba:null,attachedGIF:ba.type=='share'?ba:null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,isFocused:this.props.isEditing,gifsInCommentsNUXVisible:false,markdownNUXVisible:false,hasSubmitted:false,inCommercialBreak:false};},_onKeyDown:function z(event){if(this.props.isEditing&&c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)this.context.dispatch(c('UFIAddCommentAction').cancel(this.props.contextArgs));if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){c('Run').onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var aa=c('getActiveElement')();if(c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)aa.blur();},_onContentChange:function z(aa){c('UFISharedDispatcher').dispatch(c('UFIAddCommentAction').changeContent(this.props.contextArgs,aa,this.props.replyCommentID));c('Arbiter').inform(u,{fbid:this.props.replyCommentID,text:aa,instanceid:this.props.contextArgs.instanceid,ftentidentifier:this.props.contextArgs.ftentidentifier});if(this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled)this._sendMarkdownUpdate(aa);},_sendMarkdownUpdate:function z(aa){var ba=c('XUFICommentMarkdownPreviewController').getURIBuilder().setString('comment_body',aa).getURI();new (c('AsyncRequest'))(ba).setHandler(this._handleMarkdownUpdate).send();},_handleMarkdownUpdate:function z(aa){if(!aa)return;this.setState({commentMarkdownPreviewContent:aa.payload?aa.payload.markup:null});},_handleUnsavedChanges:function z(){var aa=b.PageTransitions;if(aa){var ba=c('URI').getNextURI(),ca=aa.getMostRecentURI();if(Object.prototype.hasOwnProperty.call(ba.getQueryData(),'theater')||Object.prototype.hasOwnProperty.call(ca.getQueryData(),'theater')||Object.prototype.hasOwnProperty.call(ba.getQueryData(),'sdialog')||c('SnowflakePermalinkUtils').isPermalinkURI(ba)||c('SnowflakePermalinkUtils').isPermalinkURI(ca)||c('VideoPermalinkURI').isValid(ba)&&ba.getQueryData().ref==='channel'||c('VideoPermalinkURI').isValid(ca)&&ca.getQueryData().ref==='channel')return;var da=b.DialogNavigationStack;if(da&&da.isActiveURI(ba))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return i._("You haven't finished your comment yet. Do you want to leave without finishing?");},_blur:function z(){this.setState({markdownNUXVisible:false,gifsInCommentsNUXVisible:false});setTimeout(function(){if(this.isMounted())this.setState({isFocused:false});}.bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function z(event){var aa=new (c('ClipboardPhotoUploader'))(r,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[aa.subscribe('upload_start',this._prepareForAttachedPhotoPreview),aa.subscribe('upload_error',this._onRemoveAttachedMediaPreviewClicked),aa.subscribe('upload_success',function(ba,ca){this._onPhotoUploadComplete(ca);}.bind(this))];aa.handlePaste(event);},_onEnterSubmit:function z(aa,event){this.setState({hasSubmitted:true});var ba=this.state.attachedPhoto||this.state.attachedVideo||this.state.attachedSticker||this.state.attachedGIF,ca=this.props.isEditing||ba;if(this.state.isLoadingPhoto||this._isLoadingVideo()){return false;}else if(!aa.encodedValue.trim()&&!ca)return false;aa.encodedValue=aa.encodedValue.trim();if(this.state.commentMarkdownEnabled){aa.isMarkdown=true;this.setState({commentMarkdownEnabled:false,commentMarkdownPreviewContent:null});}if(ba){aa.attachedPhoto=this.state.attachedPhoto;aa.attachedVideo=this.state.attachedVideo;aa.attachedSticker=this.state.attachedSticker;if(this.state.attachedGIF)if(this.state.attachedGIF.source){aa.attachedShareURL=this.state.attachedGIF.source.url;}else if(this.state.attachedGIF.originalImageUrl)aa.attachedShareURL=this.state.attachedGIF.originalImageUrl;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedVideo:null,attachedSticker:null,attachedGIF:null});}else{aa.attachedPhoto=null;aa.attachedVideo=null;aa.attachedSticker=null;aa.attachedShareURL=null;}if(this.props.isEditing){this.context.dispatch(c('UFIAddCommentAction').submitEdit(this.props.contextArgs,this.props.editingComment,aa,event.target));}else this.context.dispatch(c('UFIAddCommentAction').submitNew(this.props.contextArgs,aa,event.target,this.props.replyCommentID));return true;},_isLoadingVideo:function z(){return this.state.videoStatus===v.UPLOAD||this.state.videoStatus===v.ENCODE&&this.state.videoProgress!==100;},_cancelCurrentSubscriptions:function z(){if(this._subscriptions)this._subscriptions.forEach(function(aa){aa.unsubscribe();});},componentWillMount:function z(){this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=c('LitestandStoryInsertionStatus').registerBlocker(function(){return this.state.isCommenting;}.bind(this));this._storeSubscriptions&&this._storeSubscriptions.release();this._storeSubscriptions=new (c('SubscriptionsHandler'))();this._storeSubscriptions.addSubscriptions(c('UFICommercialBreakStore').addListener(function(){this.setState({inCommercialBreak:c('UFICommercialBreakStore').getValueFor(this.props.contextArgs.instanceid)});}.bind(this)));this._typingEventController=null;if(c('UFIConfig').canPublishLive)this._storeSubscriptions.addSubscriptions(c('UFIComposerIsTypingStore').addListener(function(){var aa=c('UFIComposerIsTypingStore').getValueFor(this.props.contextArgs.ftentidentifier);if(aa===null)return;if(!this._typingEventController)this._typingEventController=new (c('UFIAddCommentLiveTypingController'))(this.props.contextArgs.ftentidentifier,this.props.replyCommentID,this.props.viewerActorID);if(aa){this._typingEventController.attemptPublishStartEvent();}else this._typingEventController.attemptPublishStopEvent();}.bind(this)));},_destroyLiveTypingController:function z(){this._typingEventController&&this._typingEventController.destroy();this._typingEventController=null;},componentWillReceiveProps:function z(aa){var ba=this.props.contextArgs.ftentidentifier,ca=aa.contextArgs.ftentidentifier;if(ca!==ba||this.props.replyCommentID!==aa.replyCommentID||this.props.viewerActorID!==aa.viewerActorID)this._destroyLiveTypingController();},componentWillUnmount:function z(){this._cancelCurrentSubscriptions();if(this._remixedImageToken)c('Arbiter').unsubscribe(this._remixedImageToken);if(this._focusCommentFieldToken)c('Arbiter').unsubscribe(this._focusCommentFieldToken);this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;this._storeSubscriptions&&this._storeSubscriptions.release();this._destroyLiveTypingController();},focus:function z(){var aa={isCommenting:true,isFocused:true,hasSubmitted:false},ba=this.props.contextArgs.loggedOutLinkConfig;if(ba&&ba.showAddComment)c('Bootloader').loadModules(["AsyncDialog"],function(fa){fa.bootstrap(ba.addCommentAjaxifyURI,null,'dialog');},'UFIAddComment.react');var ca=c('TextDelightGatekeeperChecks').gk;if(ca.delights_text_trigger_prefetch_comment_anim_enable&&c('TextDelightGatekeeperChecks').commentAnimationURI)c('Bootloader').loadModules(["TextDelightAnimation"],function(fa){fa.setupCommentAnimation(c('TextDelightGatekeeperChecks').commentAnimationURI);},'UFIAddComment.react');if(this.props.allowGifAttachments&&c('UFIConfig').shouldShowGIFsInCommentsNux)if(!w){w=true;var da=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','gif_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(da).send();aa.gifsInCommentsNUXVisible=true;}if(this.props.allowCommentMarkdown&&c('UFIConfig').shouldShowMarkdownCommentNUX&&!c('UFIConfig').shouldShowGIFsInCommentsNux)if(!x){x=true;var ea=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','markdown_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(ea).send();aa.markdownNUXVisible=true;}this.setState(aa);if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();if(this.props.onFocus)this.props.onFocus();},_renderGIFsInCommentsNUX:function z(){if(this.state.gifsInCommentsNUXVisible)return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.gif_button;}.bind(this),shown:this.state.gifsInCommentsNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideGIFsInCommentsNUXVisible},i._("You can now add GIFs to comments"));return null;},_renderMarkdownCommentsNUX:function z(){if(this.state.markdownNUXVisible)return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.markdownButton;}.bind(this),shown:this.state.markdownNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideMarkdownCommentsNUX},i._("[FB-Only] Markdown in Comments! Click to enable."));return null;},_setFileInput:function z(aa,ba){this.setState({fileInput:aa,fileUploader:ba});},render:function z(){var aa=this.props.contextArgs.loggedOutLinkConfig,ba=true;if(aa&&aa.showAddComment)ba=false;var ca=(!this.props.contextArgs.collapseaddcomment||this.state.isCommenting)&&ba&&!this.props.contextArgs.hideActorPhoto,da=null;if(this.props.subtitle){da=c('React').createElement('span',{className:p},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){da=c('React').createElement('span',{className:p},i._("{cancel}",[i.param('cancel',c('React').createElement(c('Link.react'),{onClick:function(){return this.context.dispatch(c('UFIAddCommentAction').cancel(this.props.contextArgs));}.bind(this)},i._("Cancel")))]));}else if(this.props.isEditing){da=c('React').createElement('span',{className:p},i._("Press Esc to {cancel}.",[i.param('cancel',c('React').createElement(c('Link.react'),{onMouseDown:function(){return this.context.dispatch(c('UFIAddCommentAction').cancel(this.props.contextArgs));}.bind(this)},i._("cancel")))]));}else if(this.props.multiCompanyGroupsCount&&this.state.isFocused){da=c('React').createElement('div',{className:"fcg fsm _2pid"},c('React').createElement(c('Badge.react'),{key:'noncoworker',type:'work_non_coworker'}),c('React').createElement('span',{className:"_2pir _4zk5"},i._({"*":"People from {number} companies will see this.","268435456":"People from 1 company will see this."},[i.plural(this.props.multiCompanyGroupsCount,'number')])));}else if(this.props.showSendOnEnterTip)da=c('React').createElement('span',{className:p},i._("Press Enter to post."));var ea=null,fa=null,ga=null,ha=null,ia=this.state.attachedPhoto||this.state.attachedSticker||this.state.attachedVideo||this.state.attachedGIF,ja=null,ka=null;if(this.props.allowCommentMarkdown)ha=c('React').createElement(c('UFIMarkdownButton.react'),{active:this.state.commentMarkdownEnabled,ref:'markdownButton',onClick:function(){var bb=!this.state.commentMarkdownEnabled;this.setState({commentMarkdownEnabled:bb});if(this.refs.mentionsinput&&bb)this._sendMarkdownUpdate(this.refs.mentionsinput.getText());}.bind(this)});if(this.props.allowStickerAttachments&&!ia)fa=c('React').createElement(c('UFIStickerButton.react'),{ref:'sticker_button',onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText,onStickerFlyoutShow:function(){c('Arbiter').inform('comment_content_change',{addingAttachment:true});if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});if(this.props.allowGifAttachments&&!ia)ga=c('React').createElement(c('UFIGifButton.react'),{ref:'gif_button',onGifSelected:this.onGifSelected,onGifFlyoutShow:function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});if(this.props.allowTipJar)ka=c('React').createElement(c('UFITipJarButton.react'),{instanceID:this.props.contextArgs.instanceid,permalink:this.props.contextArgs.permalink,receiverID:this.props.targetID,videoID:this.props.contextArgs.ftentidentifier});if(this.props.allowPhotoAttachments||this.props.allowVideoAttachments){ja=this._onPaste;ea=c('React').createElement(c('UFIAttachMediaSection.react'),{ref:'media_section',getPhotoUploadData:this._getPhotoUploadData,prepareForAttachedPhotoPreview:this._prepareForAttachedPhotoPreview,prepareForAttachedVideoPreview:this._prepareForAttachedVideoPreview,allowVideoAttachments:this.props.allowVideoAttachments,onPhotoUploadComplete:this._onPhotoUploadComplete,onVideoUploadComplete:this._onVideoUploadComplete,onVideoEncodeUpdate:this._onVideoEncodeUpdate,onVideoUploadUpdate:this._onVideoUploadUpdate,setFileInput:this._setFileInput,targetId:this.props.targetID,onClick:function(){c('Arbiter').inform('comment_content_change',{addingAttachment:true});if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this),attachment:ia,viewerActorID:this.props.viewerActorID});}var la=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.ADD_COMMENT_BOX),ma='addComment_'+this.props.contextArgs.ftentidentifier,na;if(!!this.props.replyCommentID){na=n;}else if(this.props.isQAndA){na=i._("Ask a question...");}else if(this.props.contextArgs.isaskquestion){na=o;}else na=m;var oa=this.props.contextArgs.viewoptionstypeobjects,pa=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)da=null;var qa;if(this.state.attachedPhoto||this.state.isLoadingPhoto||this.state.attachedVideo||this.state.videoStatus===v.UPLOAD||this.state.attachedSticker||this.state.attachedGIF)qa=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFIAttachedMediaPreview.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('span',null),attachedPhoto:this.state.attachedPhoto,attachedVideo:this.state.attachedVideo,attachedSticker:this.state.attachedSticker,attachedGIF:this.state.attachedGIF,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedMediaPreviewClicked:this._onRemoveAttachedMediaPreviewClicked,onRemoveAttachedStickerPreview:this._onRemoveAttachedStickerPreviewClicked,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto,videoFileURL:this.state.videoFileURL,videoStatus:this.state.videoStatus,videoProgress:this.state.videoProgress,isVideoFileTranscodedGIF:this.state.isVideoFileTranscodedGIF});var ra=this.props.contextArgs.mentionsinput,sa=ra.inputComponent,ta=ra.viewComponent,ua=ra.viewProps,va=this.props.editingComment.body,wa=va?c('MentionsInputUtils').generateDataFromTextWithEntities(va):null,xa=null;if(this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled)xa=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFICommentMarkdownPreview.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('span',null),markup:this.state.commentMarkdownPreviewContent});var ya=null;if(j)ya=c('React').createElement(j,{buttonClassName:"_r1a UFICommentEmojiButton",iconActiveClassName:"UFICommentEmojiIconActive",iconClassName:"UFICommentEmojiIcon",onClick:function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this),onSelect:function(bb){this.refs.mentionsinput.insertEmoji(bb);}.bind(this)});var za="_fmk"+(' '+"UFICommentAttachmentButtons")+(c('UFIConfig').hasFaceliftCommentComposerIcons?' '+"_5op2":'');if(c('UFIConfig').emojiPickerClassName)za=c('joinClasses')(za,c('UFIConfig').emojiPickerClassName);var ab=c('React').createElement('div',{className:'UFICommentContainer'},c('React').createElement('div',{className:"_fmi UFIInputContainer"},c('React').createElement(sa,{disableInitTextarea:!ba,replyCommentID:this.props.replyCommentID,initialData:wa,placeholder:na,datasource:this.props.mentionsDataSource,ref:'mentionsinput',viewComponent:ta,viewProps:ua,viewOptionsTypeObjects:oa,viewOptionsTypeObjectsOrder:pa,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:c('UFIConfig').showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onContentChange:this._onContentChange,onPaste:ja,ftEntIdentifier:this.props.contextArgs.ftentidentifier,instanceID:this.props.contextArgs.instanceid,isBroadcasterUFI:this.props.contextArgs.isBroadcasterUFI}),c('React').createElement('div',{className:za},ya,ha,ea,ga,fa,ka)),xa,qa,da);if(ca)ab=c('React').createElement(c('UFIImageBlock.react'),{className:"UFIMentionsInputWrap"+(this.props.allowStickerAttachments?' '+"UFIStickersEnabledInput":'')+(this.props.allowCommentMarkdown?' '+"UFIMarkdownEnabledInput":'')+(this.props.allowGifAttachments?' '+"UFIGifEnabledInput":'')+(this.props.allowTipJar?' '+"UFITipJarEnabledInput":'')},c('React').createElement('div',{className:'UFIReplyActorPhotoWrapper',onClick:this.focus,role:'presentation'},c('React').createElement(c('UFIActorIconContainer.react'),{actorID:this.props.viewerActorID})),ab);return c('React').createElement('div',{ref:function(bb){return this.rootNode=bb;}.bind(this),id:ma,className:c('joinClasses')("UFIRow"+(' '+"_4oep")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.state.inCommercialBreak?' '+"hidden_elem":''),this.props.className),onKeyDown:this._onKeyDown,'data-ft':la},ab,this._renderGIFsInCommentsNUX(),this._renderMarkdownCommentsNUX());},componentDidUpdate:function z(aa,ba,ca){if(!ba.attachedPhoto&&this.state.attachedPhoto||!ba.attachedSticker&&this.state.attachedSticker||!ba.attachedVideo&&this.state.attachedVideo||!ba.isCommenting&&this.state.isCommenting){this.refs.mentionsinput.focus();}else if(this.props.keepFocus&&this.state.hasSubmitted)this.refs.mentionsinput.focus();if(aa.viewerActorID!==this.props.viewerActorID){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedMediaPreviewClicked();}},componentDidMount:function z(){this._sendMarkdownUpdate=c('throttle')(this._sendMarkdownUpdate,t,this);if(!this.props.allowPhotoAttachments&&!this.props.allowVideoAttachments)return;if(this.props.replyCommentID===null){this._focusCommentFieldToken=c('Arbiter').subscribe('focusCommentField'+this.props.contextArgs.ftentidentifier,function(aa){this.refs.mentionsinput.focus();}.bind(this));if(this.props.contextArgs.issnowlift)this._remixedImageToken=c('Arbiter').subscribe('newRemixedImage'+this.props.contextArgs.ftentidentifier,function(aa,ba){var event={clipboardData:{items:[ba]}};this._onPaste(event);}.bind(this));}},insertMention:function z(aa){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(aa);},_getPhotoUploadData:function z(){var aa=this.props.viewerActorID,ba={profile_id:aa,target_id:this.props.targetID,source:q};ba[c('ActorURI').PARAMETER_ACTOR]=aa;return ba;},_onPhotoUploadComplete:function z(aa){if(!this.state.isLoadingPhoto)return;var ba=aa.getPayload();if(ba&&ba.fbid){this.setState({attachedPhoto:ba,isLoadingPhoto:false});}else this._onRemoveAttachedMediaPreviewClicked(null);},_onVideoEncodeUpdate:function z(aa,ba){if(!this.state.attachedVideo||this.state.videoStatus!==v.ENCODE)return;if(ba.obj.progress<this.state.videoProgress)return;ba.obj.fbid=ba.obj.videoID;this.setState({attachedVideo:ba.obj,videoProgress:ba.obj.progress,videoStatus:v.ENCODE});if(this._isEncodingFinished(ba.obj.stage))this._onEncodeComplete();},_onVideoUploadUpdate:function z(aa){this.setState({videoProgress:aa});},_isEncodingFinished:function z(aa){return aa==='finish';},_onEncodeComplete:function z(){this.state.fileInput.clear();},_onVideoUploadComplete:function z(aa){if(this.state.videoStatus!==v.UPLOAD)return;if(aa&&aa.video_id)this.setState({videoProgress:0,attachedVideo:aa,videoStatus:v.ENCODE});},_onRemoveAttachedMediaPreviewClicked:function z(event){c('Arbiter').inform('video_upload_cancel',{});if(this.state.fileInput)this.state.fileInput.clear();this.setState({attachedPhoto:null,attachedVideo:null,attachedGIF:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:false,videoProgress:0,isVideoFileTranscodedGIF:false});},_prepareForAttachedPhotoPreview:function z(){this.setState({attachedPhoto:null,isLoadingPhoto:true});},_prepareForAttachedVideoPreview:function z(){var aa,ba=this.state.fileInput.input.files[0];if(ba&&k.createObjectURL)aa=k.createObjectURL(ba);this.setState({attachedVideo:null,videoStatus:v.UPLOAD,videoFileURL:aa,videoProgress:0,isVideoFileTranscodedGIF:ba&&ba.type==='image/gif'});},_onStickerUploadComplete:function z(aa){if(!this.state.isLoadingPhoto)return;var ba=aa.getPayload();if(ba&&ba.fbid){this.setState({attachedSticker:ba,isLoadingPhoto:false});}else{c('Bootloader').loadModules(["Dialog"],function(ca){var da=i._("Sticker Failed"),ea=i._("There was a problem with attaching the sticker.");new ca().setTitle(da).setBody(ea).setButtons(ca.OK).show();},'UFIAddComment.react');this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function z(event){this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function z(aa,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()||c('UFIConfig').alwaysPreviewSticker){this._prepareForAttachedStickerPreview(aa);return;}this.sendSticker(aa,event);},_prepareForAttachedStickerPreview:function z(aa){this.setState({attachedSticker:null,isLoadingPhoto:true});new (c('AsyncRequest'))(s).setData({sticker_id:aa}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function z(aa,event){var ba={encodedValue:'',visibleValue:'',attachedPhoto:null,attachedSticker:{fbid:aa}};this.context.dispatch(c('UFIAddCommentAction').submitNew(this.props.contextArgs,ba,event.target,this.props.replyCommentID));},_insertEmoticonIntoCommentText:function z(aa){c('Bootloader').loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(ba,ca,da,ea){var fa=ba.symbols[aa];if(!fa)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(fa);return;}if(!this._selectionPosition)this._selectionPosition=new ea(c('ReactDOM').findDOMNode(this.refs.mentionsinput.refs.textarea));var ga=this.refs.mentionsinput.refs.getTextFieldDOM(),ha=da.getInstance(ga),ia=ha.getValue(),ja=ca.insertEmoticon(fa,ia,this._selectionPosition.getPos());ha.setValue(ja.result);this._selectionPosition.setPos(ja.start,ja.end);}.bind(this),'UFIAddComment.react');},_hideGIFsInCommentsNUX:function z(){this.setState({gifsInCommentsNUXVisible:false});},_hideMarkdownCommentsNUX:function z(){this.setState({markdownNUXVisible:false});},onGifSelected:function z(aa){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this.setState({attachedGIF:aa});this.preprocessGIF(aa);return;}this.sendGIF(aa);},preprocessGIF:function z(aa){var ba=c('XUFICommentGIFPreprocessController').getURIBuilder().getURI();new (c('AsyncRequest'))(ba).setData({gif_url:aa.source.url}).send();},sendGIF:function z(aa){var ba={encodedValue:'',visibleValue:'',attachedShareURL:aa.source.url};this.context.dispatch(c('UFIAddCommentAction').submitNew(this.props.contextArgs,ba,this.rootNode,this.props.replyCommentID));}});f.exports=y;}),null);
__d('concatMap',[],(function a(b,c,d,e,f,g){function h(i,j){var k=-1,l=j.length,m=[],n=void 0;while(++k<l){n=i(j[k],k,j);if(Array.isArray(n)){Array.prototype.push.apply(m,n);}else Array.prototype.push.call(m,n);}return m;}f.exports=h;}),null);
__d('LitestandEllipsis',['BinarySearch','DOMQuery','concatMap','getElementText','isTextNode'],(function a(b,c,d,e,f,g){var h,i='\u2026';function j(o,p,q){var r=o.slice(0,p).join(' ')+i;if(q===0)r=r.trimLeft();return r;}function k(o,p,q){var r=o.substr(0,p).trimRight()+i;if(q===0)r=r.trimLeft();return r;}var l={add:function o(p,q,r){var s;r=r||p;c('DOMQuery').scry(p,'br').forEach(function(y){y.parentNode&&y.parentNode.removeChild(y);});var t=r.offsetHeight||0;if(t<=q)return;var u=n(p),v=u.length-1,w=q+1,x=function y(){var z=c('getElementText')(u[v]).split(/[\n\s]/g),aa=c('BinarySearch').greatestLowerBound(function(ca){m(u[v],j(z,ca,v));return r.offsetHeight||0;},w,0,z.length,function(ca,da){return ca-da;});if(aa>0){m(u[v],j(z,aa,v));return 'break';}var ba=c('BinarySearch').greatestLowerBound(function(ca){m(u[v],k(z[0],ca,v));return r.offsetHeight||0;},w,0,z[0].length-i.length-2,function(ca,da){return ca-da;});if(ba>-1){m(u[v],k(z[0],ba,v));return 'break';}m(u[v],'');v--;};while(v>=0){var s=x();if(s==='break')break;}}};function m(o,p){h=h||(o.textContent!=null?'textContent':'innerText');o[h]=p;}function n(o){if(c('isTextNode')(o))return [o];return c('concatMap')(n,Array.from(o.childNodes));}f.exports=l;}),null);
__d('LitestandShareAttachment',['csx','cx','CSS','DOMQuery','LitestandEllipsis','queryThenMutateDOM'],(function a(b,c,d,e,f,g,h,i){var j=16,k=22,l=20,m=5,n=3,o=2,p=2,q=5,r=5,s="_5qqr",t="_6m2",u={getSimpleCropClass:function y(){return s;},_truncateText:function y(z,aa){var ba=void 0,ca=void 0,da=void 0,ea=v(z);c('queryThenMutateDOM')(function(){ba=c('DOMQuery').scry(z,"._6m6")[0];ca=c('DOMQuery').scry(z,"._6m7")[0];da=w(z,ba,ea);},function(){if(!z.offsetHeight){if(aa)c('CSS').addClass(z,s);return;}if(!da){if(ca)c('CSS').hide(ca);ba&&c('LitestandEllipsis').add(ba,ea*x(z));}else if(ca&&da){c('CSS').show(ca);c('LitestandEllipsis').add(ca,da*j);}});},init:function y(z){if(c('CSS').hasClass(z,s)){var aa=false;c('queryThenMutateDOM')(function(){if(z.offsetHeight)aa=true;},function(){if(aa){c('CSS').removeClass(z,s);this._truncateText(z,true);}}.bind(this));return;}else{var ba=c('CSS').hasClass(z,t);this._truncateText(z,ba);}},getNumDescriptionLines:function y(z){return w(z,c('DOMQuery').scry(z,"._6m6")[0],v(z));},getDescriptionLineHeight:function y(){return j;}};function v(y){var z=c('CSS').matchesSelector(y,"._59ap"),aa=c('CSS').matchesSelector(y,"._pb2"),ba=c('DOMQuery').scry(y,"^div._4rtc").length>0,ca=void 0;if(aa){ca=p;}else if(ba){ca=o;}else if(z){ca=n;}else ca=m;return ca;}function w(y,z,aa){var ba=c('DOMQuery').scry(y,"._6m3")[0];if(!z||!ba)return 0;var ca=c('DOMQuery').scry(y,"._59tj")[0],da=c('CSS').matchesSelector(y,"._59ap"),ea=c('CSS').matchesSelector(y,"._pb2"),fa=Math.round(z.scrollHeight/x(y));if(fa>aa&&!ea)return 0;var ga=ba.offsetHeight-q-z.offsetHeight-(ca?ca.offsetHeight:0)-(da?0:r)+1;return Math.floor(Math.max(ga,0)/j);}function x(y){var z=c('CSS').matchesSelector(y,"._pb2");return z?l:k;}f.exports=u;}),null);
__d("XVideoInLiveCommentPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/in_live_comment\/",{});}),null);
__d('UFICommentAttachment.react',['cx','AsyncRequest','BootloadedComponent.react','CSS','DOM','DOMQuery','HTML','Image.react','JSResource','Link.react','LitestandShareAttachment','React','ReactDOM','SubscriptionsHandler','UFILocallyComposedCommentStore','XAnimatedImageInLiveCommentPreviewController','XUISpinner.react','XVideoInLiveCommentPreviewController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l='ufi_comment_photo',m=80,n='ufi_comment_sticker';i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.$UFICommentAttachment1=function(q){return q.photo_comment||q.video_comment||q.gif_comment||q.attachment;};this.renderPhoto=function(q){var r="_2rn3 _4-eo";return c('React').createElement('div',{className:"_4iv9"},c('React').createElement(c('Link.react'),{className:r,'data-testid':l,href:q.metadata.url},c('React').createElement('div',{style:{height:q.metadata.height}},c('React').createElement(c('Image.react'),{src:q.metadata.preview_uri}))));};this.renderShare=function(q){return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('UFILiveCommentLinkPreview.react').__setRef('UFICommentAttachment.react'),attachment:q});};this.renderLivePlaceInfo=function(q){return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('PlaceListLiveCommentAttachment.react').__setRef('UFICommentAttachment.react'),commentID:this.props.comment.fbid,data:q,postID:this.props.comment.ftentidentifier});}.bind(this);this.state={localCommentIDs:c('UFILocallyComposedCommentStore').getStateForInstance(this.props.comment.ufiinstanceid),randomInstanceID:Math.floor(Math.random()*10000)};}o.prototype.$UFICommentAttachment2=function(p,q){var r,s,t;if(q>p){t=m/q;r=p*t;s=q*t;}else{t=m/p;r=p*t;s=q*t;}return {height:Math.round(r),width:Math.round(s)};};o.prototype.componentDidMount=function(){var p=this.$UFICommentAttachment1(this.props.comment);if(p)this.renderAttachment(p);this.$UFICommentAttachment3=new (c('SubscriptionsHandler'))();this.$UFICommentAttachment3.addSubscriptions(c('UFILocallyComposedCommentStore').addListener(function(){this.setState({localCommentIDs:c('UFILocallyComposedCommentStore').getStateForInstance(this.props.comment.ufiinstanceid)});}.bind(this)));};o.prototype.shouldComponentUpdate=function(p,q){var r=this.$UFICommentAttachment1(this.props.comment),s=this.$UFICommentAttachment1(p.comment);if(!r&&!s)return false;if(!r||!s||r.markup!=s.markup){return true;}else return false;};o.prototype.componentDidUpdate=function(p){var q=this.$UFICommentAttachment1(this.props.comment);if(!q)return;if(q.type!=='sticker'&&q.type!=='photo')this.renderAttachment(q);};o.prototype.componentWillUnmount=function(){this.$UFICommentAttachment3&&this.$UFICommentAttachment3.release();};o.prototype.renderAttachment=function(p){if(p&&this.refs&&this.refs.contents&&p.markup){var q=p.markup;if(c('HTML').isHTML(q.markup))q=c('HTML').replaceJSONWrapper(q.markup).getRootNode();var r=q.parentNode,s=c('ReactDOM').findDOMNode(this.refs.contents);if(r&&r!==s)q=q.cloneNode(true);if(this.props.disableTheater){var t=q.querySelector('a[rel="theater"]');if(t)c('DOM').setAttributes(t,{target:'_blank',rel:''});}c('DOM').setContent(s,q);if(p.type=='share'){var u="_6m2",v=c('CSS').hasClass(s,u)?s:c('DOMQuery').scry(s,'.'+u)[0];c('LitestandShareAttachment').init(v?v:s);}}else if(p&&p.type=='video'&&!p.markup){var w=c('XVideoInLiveCommentPreviewController').getURIBuilder();new (c('AsyncRequest'))(w.getURI()).setMethod('POST').setData({video_id:p.target.id}).setHandler(function(x){this.renderAttachment(x.payload.video_preview.video_comment);}.bind(this)).send();}else if(p&&p.type=='gif'&&!p.markup)new (c('AsyncRequest'))(c('XAnimatedImageInLiveCommentPreviewController').getURIBuilder().getURI()).setMethod('POST').setData({comment_id:this.props.comment.id,dom_selector:'div#'+this.$UFICommentAttachment4()}).send();};o.prototype.renderSticker=function(p){var q=this.$UFICommentAttachment2(p.metadata.height,p.metadata.width),r=null,s=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){r=p.metadata.sprite_uri_2x;s=p.metadata.source_uri_2x;}else{r=p.metadata.sprite_uri;s=p.metadata.source_uri;}return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),null),bootloadLoader:c('JSResource')('Sticker.react').__setRef('UFICommentAttachment.react'),animationTrigger:'load_and_hover',frameCount:p.metadata.frameCount,frameRate:p.metadata.frameRate,framesPerCol:p.metadata.framesPerCol,framesPerRow:p.metadata.framesPerRow,spriteURI:r,sourceHeight:q.height,sourceURI:s,sourceWidth:q.width,testID:n});};o.prototype.renderPlaceInfo=function(p){var q=this.props.comment.islocal||this.state.localCommentIDs[this.props.comment.id];return c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),null),bootloadLoader:c('JSResource')('MultiPlacePageInfoCard.react').__setRef('UFICommentAttachment.react'),isLocallyComposed:q},p.props));};o.prototype.$UFICommentAttachment4=function(){return 'gif_comment_attachment_'+this.props.comment.id+this.state.randomInstanceID;};o.prototype.render=function(){var p=this.$UFICommentAttachment1(this.props.comment);if(p)if(p&&p.type==='sticker'){return this.renderSticker(p);}else if(p&&p.type==='gif'){return c('React').createElement('div',{ref:'contents',id:this.$UFICommentAttachment4()},c('React').createElement(c('XUISpinner.react'),null));}else if(p&&p.type==='photo'){return this.renderPhoto(p);}else if(p&&p.type==='live_share'){return this.renderShare(p);}else if(p&&p.type=='comment_place_info'){return this.renderPlaceInfo(p);}else if(p&&p.type=='live_comment_place_info'){return this.renderLivePlaceInfo(p);}else return c('React').createElement('div',{ref:'contents'});return c('React').createElement('span',null);};o.propTypes={comment:k.object.isRequired,disableTheater:k.bool};f.exports=o;}),null);
__d('IntlLang',['UnicodeBidi'],(function a(b,c,d,e,f,g){'use strict';var h={HE:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F'},i=new RegExp('['+h.HE+']');function j(l){var m=c('UnicodeBidi').firstStrongChar(l);if(m===null)return null;if(i.exec(m))return 'he';return null;}var k={getLang:j};f.exports=k;}),null);
__d('UFICommentBody.react',['cx','Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UnicodeBidi','IntlLang','UFICommentUtils','UFIConfig','UFIConstants'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.commentText,o=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_MESSAGE),p=c('UnicodeBidi').isDirectionLTR(n),q=!p,r=p&&c('Locale').isRTL()?'ltr':q&&!c('Locale').isRTL()?'rtl':null,s=c('IntlLang').getLang(n),t=c('UFICommentUtils').getCommentBodyInterpolator(m.groupOrEventID,m.ufiInstanceID,m.commentFBID,!!m.isLiveStreaming),u=c('React').createElement(c('TruncatedTextWithEntities.react'),{key:'comment-body',className:"UFICommentBody",interpolator:t,ranges:m.commentRanges,text:n,truncationPercent:c('UFIConstants').commentTruncationPercent,maxLength:m.maxLength,maxLines:m.maxLines,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji,'data-ft':o,dir:r,lang:s,markViewerHasInteracted:this.props.markViewerHasInteracted,allowSeeMoreLinebreakOnLongWords:true,shouldExpand:this.props.shouldExpand});if(m.socialContext){u=c('React').createElement('div',{key:'body'},u);}else{var v=(p&&c('Locale').isRTL()?"_5wjy":'')+(p&&c('Locale').isRTL()?' '+"_5wjz":'')+(q&&!c('Locale').isRTL()?' '+"_5wj-":'')+(q&&!c('Locale').isRTL()?' '+"_5wj_":'');u=v?c('React').createElement('div',{key:'body',className:v},u):[' ',u];}return c('React').createElement('span',null,u);};function l(){i.apply(this,arguments);}l.propTypes={commentText:k.string.isRequired,commentRanges:k.array,groupOrEventID:k.string,maxLength:k.number,maxLines:k.number,socialContext:k.object,markViewerHasInteracted:k.func,ufiInstanceID:k.string,commentFBID:k.oneOfType([k.string,k.number]),isLiveStreaming:k.bool,shouldExpand:k.bool};f.exports=l;}),null);
__d('UFIDispatcherContext.react',['React','UFIDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.getChildContext=function(){return {dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores};};k.prototype.render=function(){return this.props.children;};function k(){h.apply(this,arguments);}k.propTypes={dispatcher:j.instanceOf(c('UFIDispatcher')).isRequired,stores:j.object.isRequired};k.childContextTypes={dispatch:j.func,stores:j.object};f.exports=k;}),18);
__d('UFIFeedbackContext.react',['React','UFICentralUpdates','UFIFeedbackTargets'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$UFIFeedbackContext1=null,this.state={contextArgs:this.props.contextArgs,feedback:null},m;}k.prototype.loadFeedbackTarget=function(l){if(!this.$UFIFeedbackContext1)this.$UFIFeedbackContext1=c('UFIFeedbackTargets').getFeedbackTarget(l,function(m){this.$UFIFeedbackContext1=null;this.setState({feedback:m});}.bind(this));};k.prototype.componentDidMount=function(){this.loadFeedbackTarget(this.state.contextArgs.ftentidentifier);this.ufiCentralUpdatesSubscriptions=[c('UFICentralUpdates').subscribe('feedback-updated',function(l,m){var n=this.state.contextArgs;if(n.ftentidentifier in m.updates)this.loadFeedbackTarget(n.ftentidentifier);}.bind(this))];};k.prototype.componentWillUnmount=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(l){return l&&c('UFICentralUpdates').unsubscribe(l);});if(this.$UFIFeedbackContext1)c('UFIFeedbackTargets').unsubscribe(this.$UFIFeedbackContext1);};k.prototype.render=function(){if(this.state.feedback)return this.props.render(this.state.contextArgs,this.state.feedback);return null;};k.propTypes={contextArgs:j.object.isRequired,render:j.func.isRequired};k.contextTypes={stores:j.object};f.exports=k;}),null);
__d('FBProfilePhotoShadow.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var l=this.props,m=l.className,n=l.children,o=babelHelpers.objectWithoutProperties(l,['className','children']),p=c('React').Children.only(n);return c('React').createElement('div',babelHelpers['extends']({},o,{className:c('joinClasses')(m,"_38vo")}),c('React').cloneElement(p,{className:c('joinClasses')(p.props.className,"_44ma")}));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('CrossDomainButton',['AsyncRequest','Event','isFacebookURI','URI'],(function a(b,c,d,e,f,g){var h={initButton:function i(j,k){c('Event').listen(j,'click',function(){new (c('AsyncRequest'))().setAllowCrossOrigin(true).setReadOnly(true).setURI(k).setMethod('GET').setRelativeTo(j).send();});},initButtonWithinIFrame:function i(j,k,l){if(!c('isFacebookURI')(new (c('URI'))(k))||!c('isFacebookURI')(new (c('URI'))(l))){throw new Error("Invalid URI in button initialization.");}else c('Event').listen(j,'click',function(){new (c('AsyncRequest'))().setURI(k).setRelativeTo(j).setHandler(function(){window.top.location.href=l;}).send();});}};f.exports=h;}),null);
__d('dotAccess',[],(function a(b,c,d,e,f,g){function h(i,j,k){var l=j.split('.');do{var m=l.shift();i=i[m]||k&&(i[m]={});}while(l.length&&i);return i;}f.exports=h;}),null);
__d("XUFITypingIndicatorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/typing\/{feedback_id}\/{update}\/",{feedback_id:{type:"String",required:true},parent_comment_id:{type:"String"},update:{type:"Enum",required:true,enumType:1},session_id:{type:"String"}});}),null);