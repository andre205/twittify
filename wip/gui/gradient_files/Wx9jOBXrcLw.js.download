if (self.CavalryLogger) { CavalryLogger.start_js(["ps\/A3"]); }

__d("messengerAddToConversationDialogReact",["cx","fbt","bs_array","bs_curry","React","reactRe","utilsRe","immutable","bs_js_boolean","MercuryIDs","bs_pervasives","bs_js_primitive","messengerDialogsRe","MercuryMessageObject","messengerDialogReact","MercuryLogMessageType","MercuryMessageActions","MercuryTriodeSourceUtil","MessengerAdminGroupUtils","messengerGraphQLTokenizerReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reactRe").Component[8][7],k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=j[5],q="MessengerAddToConversationDialogReact";function r(){return [c("immutable").List([])];}function s(ia){return c("MercuryMessageActions").getForFBID(ia[1]);}function t(ia){return c("MercuryMessageObject").getForFBID(ia[1]);}function u(ia,ja){return [[ia[0][0].push(ja)]];}function v(ia,ja){var ka=ja.getUniqueID();return [[ia[0][0].filter(function(la){return c("bs_js_boolean").to_js_boolean(+(la.getUniqueID()!==ka));})]];}function w(ia,ja){return [[c("immutable").List([])]];}function x(ia,ja){var ka=ia[1],la=ia[0],ma=ka[0].joinable_mode,na=la[0].count(),oa=+c("MessengerAdminGroupUtils").isJoinableThread(ka[0]),pa=+c("MessengerAdminGroupUtils").shouldInvite(ka[0]),qa=0;if(na!==0)if(oa!==0){if(c("bs_js_primitive").is_nil_undef(ma)){throw c("bs_pervasives").invalid_arg("Joinable threads must have joinable_mode");}else if(pa!==0){la[0].forEach(function(ra,sa,ta){var ua=c("MercuryIDs").getThreadIDFromUserID(ra.getUniqueID());c("MercuryMessageActions").getForFBID(ka[1]).send(c("MercuryMessageObject").getForFBID(ka[1]).constructUserGeneratedMessageObject(ma.link,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),ua,[]),undefined,undefined);return true;});}else qa=1;}else if(pa!==0){throw c("bs_pervasives").invalid_arg("Only joinable threads can invite");}else qa=1;if(qa===1)c("MercuryMessageActions").getForFBID(ka[1]).send(c("MercuryMessageObject").getForFBID(ka[1]).constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),ka[0].thread_id,c("MercuryLogMessageType").SUBSCRIBE,{added_participants:la[0].map(function(ra,sa,ta){return c("MercuryIDs").getParticipantIDFromUserID(ra.getUniqueID());}).toArray()}),undefined,undefined);ja.preventDefault();c("messengerDialogsRe").removeDialog(0);return 0;}function y(ia){if(ia){return 0;}else return c("messengerDialogsRe").removeDialog(0);}function z(ia){var ja=ia[2],ka=ia[1],la=+c("MessengerAdminGroupUtils").shouldInvite(ka[0]),ma=ka[0].participants,na=c("bs_js_primitive").is_nil_undef(ma)?c("immutable").Set([]):c("immutable").Set(c("utilsRe").arrayCompact(c("bs_array").map(function(oa){return c("bs_js_primitive").null_undefined_to_opt(c("MercuryIDs").getUserIDFromParticipantID(oa));},ma)));return c("bs_curry").app(c("messengerDialogReact").Dialog[0],[0,y,0,[1],0,["default"],[460],[c("React").createElement("div",{className:"_4jgp"},c("bs_curry")._6(c("messengerDialogReact").Header[0],0,0,[c("bs_curry")._5(c("messengerDialogReact").CancelButton[0],0,0,0,0,0),[c("bs_curry")._5(c("messengerDialogReact").Title[0],0,[la!==0?i._("Invite more people"):i._("Add more people"),0],0,0,0),[c("bs_curry").app(c("messengerDialogReact").Button[0],[0,[i._("Done")],0,0,[c("bs_curry")._1(ja,x)],[0],0,0,0,0,0,0]),0]]],0,0,0),c("messengerGraphQLTokenizerReact").createElement(1,["_4jgt"],0,0,0,ia[0][0],1,1,[1],0,c("bs_curry")._1(ja,u),[c("bs_curry")._1(ja,w)],c("bs_curry")._1(ja,v),na,la!==0?i._("Invite to group:"):i._("Add to group:"),c("bs_js_primitive").null_undefined_to_opt(ka[0].associated_object),["_4jgu"],0,0,0,c("bs_js_primitive").null_undefined_to_opt(ka[0].thread_fbid),0,ka[1],460)(0,0,0,0)),0],0,0,0]);}var aa=[function(ia){return [ia.thread,ia.viewer];}],ba=[k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa],ca=c("reactRe").CreateComponent([q,p,r,k,n,l,m,o,aa,z]),da=ca[1];function ea(ia,ja){return c("bs_curry")._1(da,[ia,ja]);}var fa=c("utilsRe").$pipe$unknown,ga=460,ha=ca[0];g.$pipe$unknown=fa;g.dialogWidth=ga;g.MessengerAddToConversationDialog=ba;g.comp=ha;g.wrapProps=da;g.createElement=ea;}),null);