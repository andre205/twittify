if (self.CavalryLogger) { CavalryLogger.start_js(["9ge1P"]); }

__d('ChatSidebarPreloadStore',['ChatSidebarData','InitialChatFriendsList'],(function a(b,c,d,e,f,g){'use strict';var h={onLoaded:function i(j){if(c('ChatSidebarData').AsyncDataPreloader){c('ChatSidebarData').AsyncDataPreloader.onLoaded(function(k){var l=k.result,m=l.list,n=l.groups,o=l.shortProfiles,p=l.nearby,q=l.adminedPages,r=l.pageListModule;return j({buddies:m,groups:n,shortProfiles:o,nearby:p,adminedPages:q,pageListModule:r,profiles:[]});});}else if(c('ChatSidebarData').WebGraphQLPreloader){c('ChatSidebarData').WebGraphQLPreloader.onLoaded(function(k){return j(c('ChatSidebarData').WebGraphQLNormalizer.normalize(k));});}else j({buddies:c('InitialChatFriendsList').list||[],groups:c('InitialChatFriendsList').groups||[],shortProfiles:c('InitialChatFriendsList').shortProfiles||{},nearby:c('InitialChatFriendsList').nearby||[],adminedPages:c('InitialChatFriendsList').adminedPages||[],pageListModule:c('InitialChatFriendsList').pageListModule,profiles:[]});}};f.exports=h;}),18);
__d('ChatSortUsers',['ShortProfiles','TokenizeUtil'],(function a(b,c,d,e,f,g){var h={};function i(k){if(h[k])return h[k];var l=(c('ShortProfiles').getNow(k)||{}).name;if(l)return h[k]=c('TokenizeUtil').flatten(l);return '~';}var j={sortAlphabetical:function k(l,m){var n=i(l),o=i(m);if(n!==o)return n<o?-1:1;return 0;}};f.exports=j;}),null);
__d('PresenceStatusActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({AVAILABILITY_CHANGED:null});}),null);
__d('ChatDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationDispatcher'));i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=new j({strict:false});}),18);
__d('PresenceStatusStore',['ChatDispatcher','FluxStore','PresenceStatus','PresenceStatusActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('ChatDispatcher'));}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('PresenceStatusActionTypes').AVAILABILITY_CHANGED:this.__emitChange();break;default:break;}};j.prototype.get=function(k){return c('PresenceStatus').get(k);};j.prototype.getIsPlaying=function(k){return c('PresenceStatus').isPlayingCanvasGameUser(k);};f.exports=new j();}),null);
__d('MeasurePeopleTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MeasurePeopleLoggerConfig',this.$MeasurePeopleTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MeasurePeopleLoggerConfig',this.$MeasurePeopleTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MeasurePeopleTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MeasurePeopleTypedLogger1=babelHelpers['extends']({},this.$MeasurePeopleTypedLogger1,j);return this;};var i={};f.exports=h;}),null);
__d('MessengerChatOnOffToggle.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerChatOnOffToggle1=function(){this.props.onAvailabilityChange&&this.props.onAvailabilityChange(!this.props.isUserAvailable);}.bind(this),o;}m.prototype.render=function(){var n=this.props.isUserAvailable;return c('React').createElement(c('Link.react'),{onClick:this.$MessengerChatOnOffToggle1,title:n?i._("Go Offline"):i._("Go Online")},c('React').createElement('div',{className:"_3dwl"+(n?' '+"_337l":'')},c('React').createElement('div',{className:"_3dwf"+(n?' '+"_3dwk":'')})));};m.propTypes={isUserAvailable:l.bool.isRequired,onAvailabilityChange:l.func};f.exports=m;}),null);
__d('PresenceOrderedList',['ChatSidebarPreloadStore','ChatSortUsers','PresencePrivacy','PresenceStatus'],(function a(b,c,d,e,f,g){function h(k){return k.map(function(l){var m=l.slice(0,-2),n=Number(l.slice(-1));return [m,n];});}function i(k,l){var m=[];k.forEach(function(n){var o=n[0],p=n[1];if(m.length>=l)return;if(c('PresencePrivacy').getFriendVisibility(o)==c('PresencePrivacy').BLACKLISTED)return;if(p==c('PresenceStatus').get(o))m.push(o);});return m;}function j(){'use strict';this.$PresenceOrderedList1=null;}j.prototype.getSorted=function(k,l){'use strict';if(this.$PresenceOrderedList1){l(i(this.$PresenceOrderedList1,k));return;}c('ChatSidebarPreloadStore').onLoaded(function(m){var n=m.buddies;this.$PresenceOrderedList1=h(n);l(i(this.$PresenceOrderedList1,k));}.bind(this));};j.prototype.getAvailableSorted=function(k){'use strict';var l=c('PresenceStatus').getOnlineIDs();if(k)l=l.filter(function(m){return k&&k.indexOf(m)===-1;});return l.sort(c('ChatSortUsers').sortAlphabetical);};j.prototype.getAllSorted=function(k){'use strict';var l=[],m=this.$PresenceOrderedList1||[];c('PresenceStatus').getAllIDs().concat(m.map(function(n){return n[0];})).forEach(function(n){return l.indexOf(n)===-1&&l.push(n);});if(k)l=l.filter(function(n){return k&&k.indexOf(n)===-1;});return l.sort(c('ChatSortUsers').sortAlphabetical);};f.exports=new j();}),18);
__d('getScrollPosition',['getDocumentScrollElement','getUnboundedScrollPosition'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('getDocumentScrollElement')(i.ownerDocument||i.document);if(i.Window&&i instanceof i.Window)i=j;var k=c('getUnboundedScrollPosition')(i),l=i===j?i.ownerDocument.documentElement:i,m=i.scrollWidth-l.clientWidth,n=i.scrollHeight-l.clientHeight;k.x=Math.max(0,Math.min(k.x,m));k.y=Math.max(0,Math.min(k.y,n));return k;}f.exports=h;}),null);
__d("messengerSignalsRe",["EventEmitter"],(function a(b,c,d,e,f,g){'use strict';var h=new (c("EventEmitter"))(),i="resize";function j(){h.emit(i);return 0;}function k(l){return h.addListener(i,l);}g.emitter=h;g.resizeEvent=i;g.resize=j;g.onResize=k;}),null);
__d('MessengerFlexArea.react',['cx','CSS','Event','messengerSignalsRe','React','ReactDOM','ResponsiveBlock.react','Style','SubscriptionsHandler','Vector','getScrollPosition','joinClasses','throttle'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerFlexArea',propTypes:{beforeResize:i.func,onResize:i.func},_subscriptions:null,_onResizeTimeout:null,getInitialState:function k(){return {height:0};},componentDidMount:function k(){var l=new (c('SubscriptionsHandler'))();l.addSubscriptions(c('Event').listen(window,'resize',c('throttle')(this.recalculateHeight,51)),c('messengerSignalsRe').onResize(function(){this.recalculateHeight();}.bind(this)));this._subscriptions=l;this.recalculateHeight();},componentWillUnmount:function k(){this._subscriptions&&this._subscriptions.release();clearTimeout(this._onResizeTimeout);},render:function k(){return c('React').createElement(c('ResponsiveBlock.react'),{className:c('joinClasses')(this.props.className,"_9hq"),onResize:this._handleResponsiveBlockResize,style:{height:this.state.height+'px'}},this.props.children);},recalculateHeight:function k(){if(!this.isMounted())return;var l=c('ReactDOM').findDOMNode(this),m=l.parentNode,n=this.state.height,o=c('Vector').getViewportDimensions().y,p=false;if(m&&c('Style').get(m,'display')==='none'){c('Style').set(m,'display','initial');p=true;}var q=false;if(m&&c('CSS').hasClass(m,'hidden_elem')){c('CSS').removeClass(m,'hidden_elem');q=true;}o-=c('Vector').getElementPosition(m||l).y;var r=c('getScrollPosition')(window);o+=r.y;if(m){Array.from(m.childNodes).forEach(function(s){if(s.nodeType===Node.COMMENT_NODE||c('Style').get(s,'position')==='absolute')return;o-=c('Vector').getElementDimensions(s).y;});o+=c('Vector').getElementDimensions(l).y;}if(p)c('Style').set(m,'display','');if(q)c('CSS').addClass(m,'hidden_elem');if(isNaN(o)||o<0)o=0;if(o!==n){this.props.beforeResize&&this.props.beforeResize();this.setState({height:o},this.props.onResize);}},_handleResponsiveBlockResize:c('throttle')(function(k,l){if(!this.isMounted())return;if(l===this.state.height){this.props.beforeResize&&this.props.beforeResize();clearTimeout(this._onResizeTimeout);if(this.props.onResize)this._onResizeTimeout=setTimeout(this.props.onResize,0);}},51)});f.exports=j;}),null);
__d('MessengerFlexScrollableArea.react',['MessengerFlexArea.react','MessengerScrollableArea.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={shouldTrackBottom:this.props.shouldStickToBottom},this.$MessengerFlexScrollableArea3=function(){this.props.onScroll&&this.props.onScroll();if(!this.props.shouldStickToBottom)return;this.$MessengerFlexScrollableArea4();}.bind(this),this.getArea=function(){return this.refs.scrollable&&this.refs.scrollable.getArea();}.bind(this),this.$MessengerFlexScrollableArea2=function(){this.trackBottomIfRequired();}.bind(this),this.handleResize=function(){this.refs.flexArea&&this.refs.flexArea.recalculateHeight();}.bind(this),this.trackBottomIfRequired=function(){if(this.state.shouldTrackBottom)this.scrollToBottom();}.bind(this),this.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom();}.bind(this),this.scrollToTop=function(q){this.refs.scrollable&&this.refs.scrollable.scrollToTop(q);}.bind(this),this.isScrolledToBottom=function(){var q=this.refs.scrollable;return q?q.isScrolledToBottom():true;}.bind(this),this.isScrolledToBottomWithHeight=function(q){return this.refs.scrollable.isScrolledToBottomWithHeight(q);}.bind(this),this.isScrolledToTop=function(){return this.refs.scrollable&&this.refs.scrollable.isScrolledToTop();}.bind(this),this.getScrollTop=function(){return this.refs.scrollable&&this.refs.scrollable.getScrollTop()||0;}.bind(this),m;}k.prototype.componentDidMount=function(){this.props.onMount&&this.props.onMount();};k.prototype.render=function(){return c('React').createElement(c('MessengerFlexArea.react'),{className:this.props.className,onResize:this.$MessengerFlexScrollableArea2,ref:'flexArea'},this.props.flexChildren,c('React').createElement(c('MessengerScrollableArea.react'),{height:'100%',needsFastScrollHandler:this.state.shouldTrackBottom,onScroll:this.$MessengerFlexScrollableArea3,ref:'scrollable',tabIndex:this.props.tabIndex},this.props.children),this.props.footerChildren);};k.prototype.$MessengerFlexScrollableArea4=function(){if(this.isScrolledToBottom()){this.setState({shouldTrackBottom:true});this.$MessengerFlexScrollableArea5();}else{this.setState({shouldTrackBottom:false});this.$MessengerFlexScrollableArea6();}};k.prototype.$MessengerFlexScrollableArea5=function(){if(!this.props.useScrollProtection)return;this.$MessengerFlexScrollableArea6();this.$MessengerFlexScrollableArea1=setInterval(function(){this.trackBottomIfRequired();}.bind(this),500);};k.prototype.$MessengerFlexScrollableArea6=function(){if(this.$MessengerFlexScrollableArea1)clearInterval(this.$MessengerFlexScrollableArea1);};k.prototype.scrollToPosition=function(l,m,n){this.refs.scrollable&&this.refs.scrollable.scrollToPosition(l,m,n);};k.propTypes={flexChildren:j.node,footerChildren:j.node,onMount:j.func,onScroll:j.func,shouldStickToBottom:j.bool,tabIndex:j.number,useScrollProtection:j.bool};f.exports=k;}),null);
__d('messengerFlexScrollableAreaReact',['reactRe','bs_js_null_undefined','MessengerFlexScrollableArea.react'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j={onScroll:c('bs_js_null_undefined').from_opt(i)},k=c('MessengerFlexScrollableArea.react');return function(l,m,n,o){return c('reactRe').wrapPropsShamelessly(k,j,l,m,n,o);};}g.createElement=h;}),null);
__d('messengerChatOnOffToggleReact',['reactRe','bs_js_boolean','bs_js_null_undefined','MessengerChatOnOffToggle.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k={isUserAvailable:c('bs_js_boolean').to_js_boolean(i),onAvailabilityChange:c('bs_js_null_undefined').from_opt(j)},l=c('MessengerChatOnOffToggle.react');return function(m,n,o,p){return c('reactRe').wrapPropsShamelessly(l,k,m,n,o,p);};}g.createElement=h;}),null);
__d('messengerViewerCardReact',['cx','bs_curry','React','reactRe','utilsRe','joinClasses','bs_js_primitive','imageBlockReact','messengerContactImageReact','messengerChatOnOffToggleReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reactRe').Component[9],j=i[0],k=i[1],l=i[2],m=i[3],n=i[4],o=i[5],p=i[6],q="MessengerViewerCardReact";function r(z){var aa=z[1],ba=aa[3];if(ba){var ca=ba[0];return c('imageBlockReact').createElement([c('joinClasses')(c('utilsRe').$pipe$unknown(aa[0],""),"_1u5d")],0,0,["medium"])([c('bs_curry').app(c('messengerContactImageReact').StraightJSComponent[0],[["_1u5h"],0,[1],34,[ca.image_src],0,0,0,0]),[c('React').createElement("div",{className:"_1u5i"},c('React').createElement("div",{className:"_364g"},ca.name)),[c('messengerChatOnOffToggleReact').createElement(aa[1],aa[2])(0,0,0,0),0]]],0,0,0);}else return c('React').createElement("div",undefined);}var s=[function(z){return [c('bs_js_primitive').null_undefined_to_opt(z.className),+z.isUserAvailable,c('bs_js_primitive').null_undefined_to_opt(z.onAvailabilityChange),c('bs_js_primitive').null_undefined_to_opt(z.viewerData)];}],t=[j,k,l,m,n,o,p,q,34,r,s],u=c('reactRe').CreateComponent([q,o,p,j,m,k,l,n,s,r]),v=u[1];function w(z,aa,ba,ca){return c('bs_curry')._1(v,[z,aa,ba,ca]);}var x=c('utilsRe').$pipe$unknown,y=u[0];g.$pipe$unknown=x;g.MessengerViewerCard=t;g.comp=y;g.wrapProps=v;g.createElement=w;}),null);
__d("messengerActiveUsersListReact",["cx","fbt","bs_list","bs_array","bs_curry","React","reactRe","utilsRe","MercuryIDs","bs_pervasives","bs_js_primitive","MercuryThreads","PresencePrivacy","MessengerActions","bs_js_null_undefined","MercuryParticipants","PresenceOrderedList","PresenceStatusStore","AvailableListConstants","MeasurePeopleTypedLogger","MessengerContactAdapters","messengerViewerCardReact","messengerContactListRowReact","messengerFlexScrollableAreaReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("MercuryThreads").get(),k=c("reactRe").Component[8][8][6],l=k[1],m=k[2],n=k[3],o="MessengerActiveUsersListReact";function p(){return [0,0];}function q(fa){var ga=c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(fa[1]));return [0,+(c("PresencePrivacy").getVisibility()===c("PresencePrivacy").ONLINE),c("bs_js_primitive").null_undefined_to_opt(ga)];}function r(fa,ga){var ha=fa.fbid;if(c("bs_js_primitive").is_nil_undef(ha)){return 0;}else{j.getThreadMeta(c("MercuryIDs").getThreadIDFromUserID(ha),function(ia){c("MessengerActions").selectThread(ia.thread_id,undefined);return 0;});return 0;}}function s(fa,ga){var ha=fa[5],ia=fa[1];c("PresenceOrderedList").getSorted(200,function(ja){var ka=c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(ia[1])),la=c("bs_js_primitive").null_undefined_to_opt(ka),ma=c("PresenceOrderedList").getAvailableSorted(ja),na=ja.filter(function(pa){return +c("PresencePrivacy").allows(pa);}),oa=c("utilsRe").listFilterMap(function(pa){return c("bs_js_primitive").null_undefined_to_opt(c("MercuryParticipants").getOrFetch(pa));},c("bs_list").map(function(pa){return c("MercuryIDs").getParticipantIDFromUserID(pa);},c("bs_list").filter(function(pa){return +(c("PresenceStatusStore").get(pa)===c("AvailableListConstants").ACTIVE);})(c("bs_array").to_list(c("bs_curry")._1(c("bs_array").concat,[na,[ma,0]])))));return c("bs_curry")._1(ha,function(){return [oa,+(c("PresencePrivacy").getVisibility()===c("PresencePrivacy").ONLINE),la];});});return 0;}function t(fa){var ga=fa[4],ha=fa[2];new (c("MeasurePeopleTypedLogger"))().log();ga[0]=[c("MercuryParticipants").addListener("change",function(ia,ja){return c("bs_curry")._2(ha,s,0);})];ga[1]=[c("PresenceStatusStore").addListener(function(){return c("bs_curry")._2(ha,s,0);})];c("PresencePrivacy").subscribe("privacy-user-presence-changed",function(){return c("bs_curry")._2(ha,s,0);});s(fa,0);return 0;}function u(fa){var ga=fa[4],ha=ga[0];if(ha)ha[0].remove();var ia=ga[1];if(ia){ia[0].remove();return 0;}else return 0;}function v(fa){var ga=+fa;c("PresencePrivacy").setVisibility(ga!==0?c("PresencePrivacy").ONLINE:c("PresencePrivacy").OFFLINE);return 0;}var w=c("messengerContactListRowReact").Make([]);function x(fa){var ga=fa[1],ha=fa[0],ia=c("MercuryIDs").getUserIDFromThreadID(c("bs_js_null_undefined").from_opt(ga[0])),ja=!c("bs_js_primitive").is_nil_undef(ia)&&ia!==""?[ia]:0,ka=ha[1],la=ka!==0?c("React").createElement("div",undefined,c("React").createElement("div",{className:"_225b"},i._("Active contacts ({number_of_contacts})",[i.param("number_of_contacts",c("bs_pervasives").string_of_int(c("bs_list").length(ha[0])))])),c("React").createElement("ul",undefined,c("bs_array").of_list(c("bs_list").map(function(ma){var na=ma.fbid,oa=!c("bs_js_primitive").is_nil_undef(na)&&ja?+(na===ja[0]):0;return c("bs_curry").app(w[3],[0,0,function(pa){return c("MessengerContactAdapters").fromMercuryParticipant(pa);},0,0,0,0,[oa],0,0,0,0,r,0,ma,0,0,[1],0,ga[1],0,0,[ma.id],0]);},ha[0])))):null;return c("messengerFlexScrollableAreaReact").createElement(0)([c("bs_curry")._4(c("messengerViewerCardReact").createElement(0,ha[1],[v],ha[2]),0,0,0,0),[la,0]],0,0,0);}var y=[function(fa){return [c("bs_js_primitive").null_undefined_to_opt(fa.activeThreadID),fa.viewer];}],z=[l,m,n,o,p,q,r,s,t,u,v,w,x,y],aa=c("reactRe").CreateComponent([o,p,q,t,n,l,m,u,y,x]),ba=aa[1];function ca(fa,ga){return c("bs_curry")._1(ba,[fa,ga]);}var da=200,ea=aa[0];g.numTopUsers=da;g.mercuryThreadsRe=j;g.MessengerActiveUsersList=z;g.comp=ea;g.wrapProps=ba;g.createElement=ca;}),null);
__d('MessengerPeopleList.react',['messengerActiveUsersListReact','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('messengerActiveUsersListReact').comp,i=function j(k){return c('React').createElement(h,{activeThreadID:k.activeThreadID||undefined,viewer:k.viewer});};f.exports=i;}),null);