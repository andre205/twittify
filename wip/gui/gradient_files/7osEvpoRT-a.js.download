if (self.CavalryLogger) { CavalryLogger.start_js(["zFuw6"]); }

__d("P2PGatingFailReason",[],(function a(b,c,d,e,f,g){f.exports={NON_PERSONAL_USER:"non_personal_user",IS_WORK_USER:"is_work_user",P2P_ENABLED_GK_FAIL:"p2p_enabled_gk_fail",P2P_ELIGIBLE_GK_FAIL:"p2p_eligible_gk_fail",HAS_NOT_RECEIVED_MONEY:"has_not_received_money",PAYMENT_ACCOUNT_DISABLED:"payment_account_disabled",MBASIC:"mbasic",IS_PARTIAL_ACCOUNT:"is_partial_account",IS_MOMENTS_ONLY_ACCOUNT:"is_moments_only_account",EXCEPTION:"exception",APP_CAPABILITY:"app_capability",USER_BLOCKED:"user_blocked",MESSAGES_BLOCKED:"messages_blocked",SVA_RECEIVER_GATING:"sva_receiver_gating"};}),null);
__d("P2PTransferRiskResult",[],(function a(b,c,d,e,f,g){f.exports={SUCCESS:"SUCCESS",UNDER_MANUAL_REVIEW:"UNDER_MANUAL_REVIEW",REQUIRE_VERIFICATION:"REQUIRE_VERIFICATION"};}),null);
__d('MessengerHorizontalScroll.react',['ix','cx','fbt','Animation','Image.react','Link.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=250,m='left',n='right',o=c('React').createClass({displayName:'MessengerHorizontalScroll',_rightArrowBoundOnClick:Function,_leftArrowBoundOnClick:Function,propTypes:{batchScroll:k.bool.isRequired,childPadding:k.number.isRequired,childWidth:k.number.isRequired,freeScroll:k.bool.isRequired,leftOffset:k.number.isRequired,numChildrenVisible:k.number.isRequired,width:k.number.isRequired},getInitialState:function p(){var q=this._calculateState();return babelHelpers['extends']({index:0,scrollLeft:0},q);},getDefaultProps:function p(){return {batchScroll:false,childPadding:0,freeScroll:false,leftOffset:0,numChildrenVisible:1};},componentWillMount:function p(){this._rightArrowBoundOnClick=this._updatePosition.bind(this,n);this._leftArrowBoundOnClick=this._updatePosition.bind(this,m);},componentWillReceiveProps:function p(q){this.setState(this._calculateState(q));},render:function p(){var q=this.props;if(this.refs&&this.refs.childContainer&&!q.freeScroll)new (c('Animation'))(this.refs.childContainer).to('scrollLeft',this.state.scrollLeft).duration(l).go();var r=this._calculateVisibleWidth(),s=this.state.scrollLeft===0||q.freeScroll||r<q.width,t=this.state.scrollLeft===this.state.maxScrollLeft||q.freeScroll||r<q.width,u=q.freeScroll?'scroll':'hidden',v={overflow:u,width:q.width};return c('React').createElement('div',{className:"_5agf",style:{width:q.width}},c('React').createElement(c('Link.react'),{'aria-label':j._("See more results from the left"),className:(s?"hidden_elem":'')+(' '+"_5agg"),onClick:this._leftArrowBoundOnClick,role:'button'},c('React').createElement(c('Image.react'),{className:"_5agh",src:h("141823")})),c('React').createElement(c('Link.react'),{'aria-label':j._("See more results from the right"),className:(t?"hidden_elem":'')+(' '+"_5agi"),onClick:this._rightArrowBoundOnClick,role:'button'},c('React').createElement(c('Image.react'),{className:"_5agh",src:h("141833")})),c('React').createElement('div',{className:"_5agj",ref:'childContainer',style:v},c('React').createElement('div',{className:"_5agk"},this._renderChildren())));},_calculateState:function p(q){if(!q||q.children!==this.props.children)var r=c('React').Children.map(this.props.children,function(s,t){return this._onChildClick.bind(null,t);}.bind(this));return {maxScrollLeft:this._getMaxScrollLeft(),boundChildOnClicks:r||this.state.boundChildOnClicks};},_updatePosition:function p(q){var r=c('React').Children.count(this.props.children)-this.props.numChildrenVisible,s=this.state.scrollLeft,t=s,u=this.state.index;switch(q){case n:if(this.props.batchScroll){u+=this.props.numChildrenVisible;if(u>r)u=r;}else u+=1;t=Math.min(this._getNextScrollLeft(u),this.state.maxScrollLeft);break;case m:if(this.props.batchScroll){u-=this.props.numChildrenVisible;if(u<0)u=0;}else u-=1;t=Math.max(0,this._getNextScrollLeft(u));break;}this.setState({scrollLeft:t,index:u});},_onChildClick:function p(q){if(this._isVisibleChild(q))return;var r=q<this.state.index?m:n;this._updatePosition(r);},_getNextScrollLeft:function p(q){if(q===0)return 0;var r=this.props,s=r.width,t=r.childWidth,u=r.childPadding,v=r.leftOffset,w=r.numChildrenVisible,x=t*w,y=u*(w-1),z=(s-(x+y))/2,aa=q*(u+t)-z;return aa+v;},_calculateVisibleWidth:function p(){var q=this.props,r=c('React').Children.count(q.children);return q.childWidth*r+q.childPadding*(r-1)+q.leftOffset;},_getMaxScrollLeft:function p(){var q=this._calculateVisibleWidth();return q-this.props.width;},_renderChildren:function p(){var q=this.props,r=c('React').Children.count(q.children);return c('React').Children.map(q.children,function(s,t){var u={};u.width=q.childWidth;if(t<r-1)u.paddingRight=q.childPadding;if(t===0&&q.leftOffset)u.paddingLeft=q.leftOffset;var v=this._isVisibleChild(t),w=q.freeScroll?null:this.state.boundChildOnClicks[t];return c('React').createElement('div',{className:"_5agl"+(v||q.freeScroll?' '+"_5agm":''),key:t,onClick:w,role:'presentation',style:u},s);}.bind(this));},_isVisibleChild:function p(q){var r=this.props,s=r.children,t=r.numChildrenVisible,u=c('React').Children.count(s),v=this.state.index,w=v===u-1,x=w?v:v+t-1,y=w?v-(t-1):v;return q<=x&&q>=y;}});f.exports=o;}),null);
__d('P2PListRow.react',['cx','invariant','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props;c('React').Children.count(n.children)===2||i(0);var o=n.offset,p=n.offsetRight!==undefined&&n.offsetRight+'px',q=n.offsetBottom!==undefined&&n.offsetBottom+'px';return c('React').createElement('div',{className:"_3q6c"+(o==='large'?' '+"_3q6d":'')+(o==='small'?' '+"_3q6o":'')},c('React').createElement('div',{className:"_3q6p",style:{paddingRight:p,paddingBottom:q}},n.children[0]),c('React').createElement('div',{className:"_3q6q",style:{paddingBottom:q}},n.children[1]));};function m(){j.apply(this,arguments);}m.propTypes={offset:l.oneOf(['large','small']),offsetBottom:l.number,offsetRight:l.number};m.defaultProps={offset:'large'};f.exports=m;}),null);
__d('P2PAddCreditCardDialog.react',['cx','fbt','MessengerEnvironment','Link.react','MessengerPaymentProductType','P2PAPI','P2PAPIUtils','P2PCreditCardStore','P2PCreditCardForm.react','P2PLoadingMask.react','P2PLogger','P2PPaymentLoggerEvent','P2PLinkConstants','React','P2PButton.react','P2PDialog.react','P2PDialogTitle.react','P2PDialogBody.react','P2PDialogFooter.react','P2PText.react','emptyFunction','getObjectValues'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='fbP2PAddCreditCardDialog_learnMoreSentenceID';j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={isValid:false,formData:{},loading:false,requestID:'',saveErrors:null},this.onCreditCardStoreChange=function(){var t=c('P2PCreditCardStore').getAsyncRequestState(),u=t[this.state.requestID];this.setState({asyncRequestState:t});if(u){this.setState({requestID:''});if(u.error){this.handleOnSaveError(u.error);}else this.handleOnSaveSuccess(u);}}.bind(this),this.log=function(t,u){c('P2PLogger').log(t,babelHelpers['extends']({www_event_flow:this.props.eventFlow,object_id:this.props.loggingObjectID},this.props.loggingData,u));}.bind(this),this.onSaveClick=function(){var t=c('P2PAPIUtils').genRequestID();this.setState({loading:true,requestID:t,saveErrors:null});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CONFIRM_CARD_DETAILS);c('P2PAPI').addCreditCard(babelHelpers['extends']({requestID:t,product_type:this.props.productType},this.state.formData));}.bind(this),this.handleOnSaveSuccess=function(t){this.props.onSuccess(t);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_ADD_CARD_SUCCESS);}.bind(this),this.handleOnSaveError=function(t){this.setState({loading:false,saveErrors:t});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_ADD_CARD_FAIL,{message:t&&t.general?t.general.message:''});}.bind(this),this.handleValidation=function(t,u){this.setState({isValid:t,formData:u});}.bind(this),this.isSaveButtonDisabled=function(){return this.state.loading||!this.state.isValid;}.bind(this),this.onToggle=function(t){if(!t){this.props.onCancel();this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CANCEL_ADD_CARD);}}.bind(this),this.onCancelClicked=function(){this.onToggle(false);}.bind(this),this.renderAddCardForm=function(){var t=void 0,u=this.props.title;if(this.props.showCancelButton)t=c('React').createElement(c('P2PButton.react'),{use:'default',size:'medium',label:this.props.cancelButtonText,disabled:this.state.loading,onClick:this.onCancelClicked});return c('React').createElement('div',null,c('React').createElement(c('P2PDialogTitle.react'),null,u),c('React').createElement(c('P2PDialogBody.react'),null,c('React').createElement(c('P2PText.react'),{type:'primary',className:"_3-96"},this.props.text),c('React').createElement(c('P2PCreditCardForm.react'),{asyncRequestState:this.state.asyncRequestState,compactMode:true,onValidation:this.handleValidation,productType:this.props.productType,saveErrors:this.state.saveErrors,showIcons:false,showLabels:true,showPlaceholderOnFocus:true,showSecondaryIcons:true,useGutters:true}),c('React').createElement(c('P2PText.react'),{className:"_3-8y",id:m,type:'secondary'},i._("Your payment info is stored securely."),c('React').createElement('div',null,c('React').createElement(c('Link.react'),{'aria-describedby':m,href:c('P2PLinkConstants').addDebitCardHelpURI,target:'_blank'},i._("Learn More"))))),c('React').createElement(c('P2PDialogFooter.react'),{leftContent:this.props.leftContent},t,c('React').createElement(c('P2PButton.react'),{use:'confirm',size:'medium',label:this.props.saveButtonText,disabled:this.isSaveButtonDisabled(),onClick:this.onSaveClick})));}.bind(this),p;}n.prototype.componentDidMount=function(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_ADD_CARD);this.creditCardStoreSub=c('P2PCreditCardStore').addListener('change',this.onCreditCardStoreChange);};n.prototype.componentWillUnmount=function(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}};n.prototype.render=function(){return c('React').createElement(c('P2PDialog.react'),{behaviors:this.props.behaviors,layerHideOnBlur:false,ref:'dialog',onToggle:this.onToggle,repositionOnUpdate:true,shown:true,width:this.props.width},this.renderAddCardForm(),c('React').createElement(c('P2PLoadingMask.react'),{visible:this.state.loading}));};n.propTypes={cancelButtonText:l.string,eventFlow:l.string.isRequired,loggingData:l.object,loggingObjectID:l.string,onCancel:l.func,onSuccess:l.func,productType:l.oneOf(c('getObjectValues')(c('MessengerPaymentProductType'))),saveButtonText:l.string,showCancelButton:l.bool,text:l.string,title:l.string};n.defaultProps=function(){var o=void 0;if(c('MessengerEnvironment').messengerui){o=480;}else o=430;return {cancelButtonText:i._("Cancel"),loggingData:{},onCancel:c('emptyFunction'),onSuccess:c('emptyFunction'),productType:c('MessengerPaymentProductType').P2P,saveButtonText:i._("Save"),showCancelButton:true,text:i._("Please enter a Visa or MasterCard debit card. Credit cards can't be used."),title:i._("Add Debit Card"),width:o};}();f.exports=n;}),null);
__d('P2PConfirmAmountDialog.react',['fbt','MessengerEnvironment','React','P2PButton.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PLoadingMask.react','P2PText.react','emptyFunction'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes,l=c('MessengerEnvironment').messengerui;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={loading:false},this.handleCancelClick=function(){this.props.onCancel();}.bind(this),this.handleConfirmClick=function(){this.setState({loading:true});this.props.onConfirm();}.bind(this),this.getFormattedAmount=function(){return this.props.currencySymbol+''+this.props.amount;}.bind(this),o;}m.prototype.render=function(){'use strict';var n=l?350:300;return c('React').createElement(c('P2PDialog.react'),{behaviors:this.props.behaviors,layerHideOnBlur:false,shown:true,width:n},c('React').createElement(c('P2PDialogTitle.react'),{showCloseButton:false},h._("Confirm Payment")),c('React').createElement(c('P2PDialogBody.react'),null,c('React').createElement(c('P2PText.react'),{type:'primary'},h._("Do you want to pay {recipient name} {amount}?",[h.param('recipient name',this.props.receiverName),h.param('amount',this.getFormattedAmount())]))),c('React').createElement(c('P2PDialogFooter.react'),null,c('React').createElement(c('P2PButton.react'),{label:h._("Cancel"),onClick:this.handleCancelClick,use:'default'}),c('React').createElement(c('P2PButton.react'),{label:h._("Pay"),onClick:this.handleConfirmClick,use:'confirm'})),c('React').createElement(c('P2PLoadingMask.react'),{visible:this.state.loading}));};m.propTypes={amount:k.string,currencySymbol:k.string,onCancel:k.func,onConfirm:k.func,receiverName:k.string};m.defaultProps={amount:'',currencySymbol:'',onCancel:c('emptyFunction'),onConfirm:c('emptyFunction'),receiverName:k.string};f.exports=m;}),null);
__d('P2PGroupSendContactListItem.react',['cx','fbt','ix','Image.react','Link.react','messengerContactImageReact','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('messengerContactImageReact').comp,n=32;k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;o.prototype.$P2PGroupSendContactListItem1=function(p){if(!p)return null;return c('React').createElement('div',{className:"_1jwz"},c('React').createElement(c('Image.react'),{src:j("86852")}));};o.prototype.$P2PGroupSendContactListItem2=function(p){if(!this.props.isDisabled)return null;return c('React').createElement('div',{className:"_1jw-"},i._("Is unable to receive money at the moment"));};o.prototype.render=function(){var p=this.props,q=p.isSelected,r=p.participant;return c('React').createElement(c('Link.react'),{'aria-checked':q,className:"_1jw_",onClick:p.onClick,role:'checkbox'},c('React').createElement(m,{className:"_1jx2",isMessengerUser:r.is_messenger_user,size:n,src:r.image_src}),c('React').createElement('div',{className:"_1jx4"},c('React').createElement('div',{className:"_1jx5"},c('React').createElement('div',{className:"_1jx6"},r.name),this.$P2PGroupSendContactListItem2(r)),this.$P2PGroupSendContactListItem1(q)));};function o(){k.apply(this,arguments);}f.exports=o;}),null);
__d('P2PGroupSendDialog.react',['cx','fbt','MessengerEnvironment','Image.react','immutable','ImmutableObject','MessengerContextualDialog.react','P2PActions','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PText.react','React','ScrollableArea.react','XUIContextualDialog.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'P2PGroupSendDialog',propTypes:{amount:j.string,currency:j.string,flyoutAlignment:j.string,onToggle:j.func.isRequired,openRequestTab:j.bool,p2pEligibilities:j.object,participants:j.instanceOf(c('immutable').List),referrer:j.string,threadID:j.string.isRequired,threadFBID:j.string.isRequired},componentDidMount:function l(){if(this.props.amount){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_GROUP_SEND_TRIGGER,{raw_amount:this.props.amount,currency:this.props.currency});}else this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_GROUP_SEND);},log:function l(m,n){c('P2PLogger').log(m,babelHelpers['extends']({www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_GROUP_SEND},n));},_handleToggle:function l(m){this.props.onToggle(m);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_GROUP_SEND_CANCELLED);},_handleBlur:function l(){this._handleToggle(false);},isP2PIneligible:function l(m){var n=this.props.p2pEligibilities;return n?n[m.userID]===false:true;},renderParticipantRow:function l(m){var n=c('MessengerEnvironment').messengerui,o=n?32:40,p=this.isP2PIneligible(m),q=void 0;if(p)q=c('React').createElement(c('P2PText.react'),{className:"_4cof",type:'primary'},i._("Is unable to receive money at the moment"));return c('React').createElement('li',{className:"_4cog"+(p?' '+"_4coh":''),key:m.id,onClick:this.handleGroupThreadClicked.bind(this,m)},c('React').createElement('div',{className:"_4coi"},c('React').createElement(c('Image.react'),{className:"_4coj",height:o,src:m.big_image_src||m.image_src,width:o})),c('React').createElement('div',{className:"_4cok"},c('React').createElement(c('P2PText.react'),{className:"_4col",type:'primary'},m.name),q));},renderGroupList:function l(){return c('React').createElement(c('ScrollableArea.react'),{height:178},c('React').createElement('ul',null,this.props.participants?this.props.participants.map(this.renderParticipantRow):null));},handleGroupThreadClicked:function l(m){if(this.isP2PIneligible(m))return;this.props.onToggle(false);c('P2PActions').chatSendViewOpened({amount:this.props.amount,openRequestTab:this.props.openRequestTab,referrer:this.props.referrer,threadID:this.props.threadID,groupSendRecipientUserIDs:[m.userID],groupThreadFBID:this.props.threadFBID});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_GROUP_SEND_RECIPIENT_PICKED,{raw_amount:this.props.amount,currency:this.props.currency,object_id:m.userID});},render:function l(){var m=c('MessengerEnvironment').messengerui,n=m?c('MessengerContextualDialog.react'):c('XUIContextualDialog.react'),o=m?302:280;return c('React').createElement(n,{alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:m?'right':'left',context:this.props.context,onBlur:this._handleBlur,onToggle:this._handleToggle,shown:true,width:o,position:'above'},c('React').createElement('div',{className:"_4com"+(m?' '+"_4con":'')},c('React').createElement(c('P2PText.react'),{className:"_4coo",type:'primary',weight:'bold'},i._("Select a person")),this.renderGroupList()));}});f.exports=k;}),null);
__d('P2PGroupSendParticipantsPickerDialog.react',['cx','fbt','immutable','LeftRight.react','MessengerContextualDialog.react','MessengerDialogButton.react','MessengerEnvironment','P2PActions','P2PGroupSendContactListItem.react','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PText.react','React','ScrollableArea.react','XUIContextualDialog.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=5;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.isMessengerDotCom=c('MessengerEnvironment').messengerui;this.$P2PGroupSendParticipantsPickerDialog7=function(){this.$P2PGroupSendParticipantsPickerDialog8(false);}.bind(this);this.$P2PGroupSendParticipantsPickerDialog9=function(){var p=this.$P2PGroupSendParticipantsPickerDialog4().map(function(q){return q.fbid;});this.props.onToggle(false);if(p.length===0)return;c('P2PActions').chatSendViewOpened({amount:this.props.amount,openRequestTab:this.props.openRequestTab,referrer:this.props.referrer,threadID:this.props.threadID,groupSendRecipientUserIDs:p,groupThreadFBID:this.props.threadFBID});this.$P2PGroupSendParticipantsPickerDialog2(c('P2PPaymentLoggerEvent').UI_ACTN_GROUP_SEND_RECIPIENT_PICKED,{raw_amount:this.props.amount,currency:this.props.currency,object_ids:p});}.bind(this);this.$P2PGroupSendParticipantsPickerDialog8=function(p){this.props.onToggle(p);this.$P2PGroupSendParticipantsPickerDialog2(c('P2PPaymentLoggerEvent').UI_ACTN_GROUP_SEND_CANCELLED);}.bind(this);this.$P2PGroupSendParticipantsPickerDialog12=function(p){var q=p.fbid;return c('React').createElement(c('P2PGroupSendContactListItem.react'),{isDisabled:!this.$P2PGroupSendParticipantsPickerDialog6(q),isSelected:this.$P2PGroupSendParticipantsPickerDialog5(q),key:p.id,onClick:function(){return this.$P2PGroupSendParticipantsPickerDialog10(q);}.bind(this),participant:p});}.bind(this);var o=n.participants.sort(this.$P2PGroupSendParticipantsPickerDialog1);this.state={isParticipantSelected:c('immutable').Map(),participants:o.toArray()};}m.prototype.componentDidMount=function(){if(this.props.amount){this.$P2PGroupSendParticipantsPickerDialog2(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_GROUP_SEND_TRIGGER,{raw_amount:this.props.amount,currency:this.props.currency});}else this.$P2PGroupSendParticipantsPickerDialog2(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_GROUP_SEND);};m.prototype.$P2PGroupSendParticipantsPickerDialog3=function(){if(this.state.isMessengerDotCom)return c('MessengerContextualDialog.react');return c('XUIContextualDialog.react');};m.prototype.$P2PGroupSendParticipantsPickerDialog4=function(){return this.state.participants.filter(function(n){return this.$P2PGroupSendParticipantsPickerDialog5(n.fbid);}.bind(this));};m.prototype.$P2PGroupSendParticipantsPickerDialog6=function(n){if(!n)return false;var o=this.props.p2pEligibilities||{};return !!o[n];};m.prototype.$P2PGroupSendParticipantsPickerDialog5=function(n){if(!n)return false;return !!this.state.isParticipantSelected.get(n);};m.prototype.$P2PGroupSendParticipantsPickerDialog2=function(n,o){c('P2PLogger').log(n,babelHelpers['extends']({www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_GROUP_SEND},o));};m.prototype.$P2PGroupSendParticipantsPickerDialog10=function(n){if(!n||!this.$P2PGroupSendParticipantsPickerDialog6(n))return;var o=this.state.isParticipantSelected,p=this.$P2PGroupSendParticipantsPickerDialog5(n);this.setState({isParticipantSelected:o.set(n,!p)});};m.prototype.$P2PGroupSendParticipantsPickerDialog1=function(n,o){return n.name.localeCompare(o.name);};m.prototype.$P2PGroupSendParticipantsPickerDialog11=function(){if(this.state.participants.length<=l)return c('React').createElement('ul',{className:"_3jwq"},this.state.participants.map(this.$P2PGroupSendParticipantsPickerDialog12));return c('React').createElement(c('ScrollableArea.react'),{height:278},c('React').createElement('ul',null,this.state.participants.map(this.$P2PGroupSendParticipantsPickerDialog12)));};m.prototype.$P2PGroupSendParticipantsPickerDialog13=function(){var n=this.$P2PGroupSendParticipantsPickerDialog4();return c('React').createElement(c('LeftRight.react'),{className:"_4coo"},c('React').createElement(c('P2PText.react'),{type:'primary',weight:'bold'},i._("Select people")),c('React').createElement(c('MessengerDialogButton.react'),{className:"_3jwt",disabled:n.length===0,label:i._("Continue"),onClick:this.$P2PGroupSendParticipantsPickerDialog9,type:'primary'}));};m.prototype.render=function(){var n=this.$P2PGroupSendParticipantsPickerDialog3(),o=this.isMessengerDotCom?'right':'left',p=this.isMessengerDotCom?302:280;return c('React').createElement(n,{alignment:this.props.flyoutAlignment||o,className:"_4com"+(this.isMessengerDotCom?' '+"_4con":''),context:this.props.context,position:'above',shown:true,type:'default',width:p,onBlur:this.$P2PGroupSendParticipantsPickerDialog7,onToggle:this.$P2PGroupSendParticipantsPickerDialog8},this.$P2PGroupSendParticipantsPickerDialog13(),this.$P2PGroupSendParticipantsPickerDialog11());};f.exports=m;}),null);
__d('P2PMemoPhotoUploadPreview.react',['cx','BackgroundImage.react','MessengerEnvironment','P2PLoadingMask.react','React','XUICloseButton.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderAttachedPhotoPreviewContent=function(){var r=this.props.attachedPhoto;if(!r||!r.url)return null;var s=c('MessengerEnvironment').messengerui?286:260;return c('React').createElement(c('BackgroundImage.react'),{backgroundSize:'cover',height:120,src:r.url,width:s});}.bind(this),n;}l.prototype.render=function(){var m=this.props.attachedPhoto;if(!this.props.photoUploading&&!m)return null;return c('React').createElement('div',{className:"_y37"},this.renderAttachedPhotoPreviewContent(),c('React').createElement(c('P2PLoadingMask.react'),{visible:this.props.photoUploading}),c('React').createElement(c('XUICloseButton.react'),{className:"_y38",onClick:this.props.onRemoveButtonClick,shade:'light',size:'medium'}));};l.propTypes={attachedPhoto:k.object,photoUploading:k.bool,onRemoveButtonClick:k.func};f.exports=l;}),null);
__d('P2PMemoPhotoUploadSelector.react',['cx','fbt','FileInput','FileInputUploader','React','ReactDOM'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='/ajax/payments/p2p/memo_photo_upload/',n=1,o=29;j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.fileInput=null,this.$P2PMemoPhotoUploadSelector1=null,this.handleFileInputChange=function(){if(this.fileInput&&this.fileInput.getValue()){var v=new (c('FileInputUploader'))(this.fileInput.getInput()).setAllowCrossPageTransition(true).setURI(m);v.subscribe(['success','failure'],function(w,x){this.props.onPhotoUploadComplete(x.response);}.bind(this));v.setData({profile_id:n,source:o}).send();this.props.onPhotoUploadStart();}}.bind(this),r;}p.prototype.componentDidMount=function(){var q=c('ReactDOM').findDOMNode(this.refs.PhotoInputContainer),r=c('ReactDOM').findDOMNode(this.refs.PhotoInputControl),s=c('ReactDOM').findDOMNode(this.refs.PhotoInput);this.fileInput=new (c('FileInput'))(q,r,s);this.$P2PMemoPhotoUploadSelector1=this.fileInput.subscribe('change',this.handleFileInputChange);};p.prototype.componentWillUnmount=function(){this.$P2PMemoPhotoUploadSelector1&&this.$P2PMemoPhotoUploadSelector1.unsubscribe();};p.prototype.render=function(){var q=i._("Add photo");return c('React').createElement('div',{'aria-label':q,className:"_m"+(' '+"_3h1u")+(this.props.photoUploading||this.props.attachedPhoto?' '+"_3h1v":''),ref:'PhotoInputContainer'},c('React').createElement('i',{className:"_3h1w",ref:'PhotoInputControl'},c('React').createElement('input',{accept:'image/*',className:"_n",name:'file',ref:'PhotoInput',title:q,type:'file'})));};p.propTypes={attachedPhoto:l.object,isUploading:l.bool,onPhotoUploadComplete:l.func.isRequired,onPhotoUploadStart:l.func.isRequired};f.exports=p;}),null);
__d('P2PMemoField.react',['cx','fbt','ix','MessengerEnvironment','Image.react','P2PGKValues','P2PMemoPhotoUploadPreview.react','P2PMemoPhotoUploadSelector.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={attachedPhoto:null,defaultValue:'',disabled:false,focused:false,isRequesting:false,photoUploading:false},this.handleChangeText=function(t){this.props.onTextChange(t.target.value);}.bind(this),this.handleImageClick=function(){this.refs.input.focus();}.bind(this),this.handleFocus=function(){this.setState({focused:true});}.bind(this),this.handleBlur=function(){this.setState({focused:false});}.bind(this),this.handlePhotoUploadStart=function(){this.setState({photoUploading:true});this.props.onPhotoUploadingChange(true);}.bind(this),this.handlePhotoUploadComplete=function(t){var u=t.payload||null;this.setState({attachedPhoto:u,photoUploading:false});this.props.onPhotoChange(u?[u.fbid]:[]);this.props.onPhotoUploadingChange(false);}.bind(this),this.handlePhotoRemove=function(){this.setState({attachedPhoto:null,photoUploading:false});this.props.onPhotoChange([]);this.props.onPhotoUploadingChange(false);}.bind(this),this.getImageSrc=function(){var t=c('MessengerEnvironment').messengerui;if(this.state.focused){if(t){return j("94382");}else return j("94384");}else if(t){return j("94383");}else return j("94385");}.bind(this),this.getPlaceholder=function(){if(this.props.isRequesting)return i._("What is this request for?");return i._("What is this payment for?");}.bind(this),this.shouldRenderPhotoMemo=function(){return c('P2PGKValues').P2PWWWMemoPhotoEnabled&&!this.props.isRequesting;}.bind(this),this.renderPhotoUploadSelector=function(){if(!this.shouldRenderPhotoMemo())return null;return c('React').createElement('div',{className:"_1-j-"},c('React').createElement(c('P2PMemoPhotoUploadSelector.react'),{attachedPhoto:this.state.attachedPhoto,photoUploading:this.state.photoUploading,onPhotoUploadComplete:this.handlePhotoUploadComplete,onPhotoUploadStart:this.handlePhotoUploadStart}));}.bind(this),this.renderPhotoUploadPreview=function(){if(!this.shouldRenderPhotoMemo())return null;return c('React').createElement(c('P2PMemoPhotoUploadPreview.react'),{attachedPhoto:this.state.attachedPhoto,photoUploading:this.state.photoUploading,onRemoveButtonClick:this.handlePhotoRemove});}.bind(this),p;}n.prototype.render=function(){return c('React').createElement('div',{className:"_2z8p"},c('React').createElement('div',{className:"_1-j_"},c('React').createElement(c('Image.react'),{className:"_2z8q",height:12,onClick:this.handleImageClick,src:this.getImageSrc(),width:12}),c('React').createElement('input',{className:"_2z8r",defaultValue:this.props.defaultValue,disabled:this.props.disabled,maxLength:36,onChange:this.handleChangeText,onBlur:this.handleBlur,onFocus:this.handleFocus,placeholder:this.getPlaceholder(),ref:'input'}),this.renderPhotoUploadSelector()),this.renderPhotoUploadPreview());};n.propTypes={defaultValue:m.string,disabled:m.bool,isRequesting:m.bool,onTextChange:m.func.isRequired,onPhotoChange:m.func.isRequired,onPhotoUploadingChange:m.func.isRequired};f.exports=n;}),null);
__d('P2PMemoText.react',['cx','fbt','P2PText.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){return c('React').createElement('div',{className:"_4myt"},c('React').createElement(c('P2PText.react'),{display:'inline',type:'primary',weight:'bold'},i._("For: {Memo description}",[i.param('Memo description',c('React').createElement(c('P2PText.react'),{display:'inline',type:'secondary',weight:'normal'},this.props.memoText))])));};function m(){j.apply(this,arguments);}m.propTypes={memoText:l.string.isRequired};f.exports=m;}),null);
__d('P2PSendMoneyAmountInput.react',['cx','fbt','MessengerEnvironment','Middot.react','P2PAmountUtils','React','ReactDOM','XUIError.react','XUIGrayText.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=1,l=c('React').createClass({displayName:'P2PSendMoneyAmountInput',propTypes:{currencySymbol:j.string,disabled:j.bool,isRequesting:j.bool,onInputChange:j.func,receiversCount:j.number,value:j.string},getDefaultProps:function m(){return {currencySymbol:'$',disabled:false,isRequesting:false,onInputChange:c('emptyFunction'),receiversCount:1,value:''};},getInitialState:function m(){var n=void 0;if(c('MessengerEnvironment').messengerui){n=236;}else n=200;return {inputError:null,maxInputWidth:n,value:this.props.value,width:''};},componentDidMount:function m(){this.updateAmount(this.state.value);if(!this.props.disabled)this.initDelayedFocus();},initDelayedFocus:function m(){setTimeout(this.focus);},focus:function m(){var n=void 0,o=this.state.value,p=0;if(this.isMounted()&&this.refs.textInput){n=c('ReactDOM').findDOMNode(this.refs.textInput);n.focus();if(o){p=o.length;n.setSelectionRange(p,p);}}},handleAmountInputChange:function m(n){var o=n.target.value;this.clearInputError();this.updateAmount(o);},clearInputError:function m(){this.setState({inputError:null});},setInputError:function m(n){this.setState({inputError:n});},handleAmountInputBlur:function m(n){var o=n.target.value,p=o.split('.'),q=p[0],r=p[1];if(r){if(r.length===1)this.updateAmount(o+'0');}else if(r==='')this.updateAmount(q);},updateAmount:function m(n){var o=true,p=void 0,q=c('P2PAmountUtils').isAmountOverLegalLimit(n);n=c('P2PAmountUtils').sanitizeAmount(n);p=parseFloat(n);if(q){o=false;this.setInputError(i._("Please enter a smaller amount"));}var r=n.split('.'),s=r[0],t=r[1];if(t!==undefined){n=(s&&parseFloat(s)!==0?s:'0')+'.'+t.substr(0,2);}else if(s)if(parseFloat(s)===0){n='0';}else if(s.length>1&&s[0]==='0')n=n.substr(1,n.length);this.setValue(n);p=parseFloat(n);o=o&&!isNaN(p)&&p>0;this.props.onInputChange(n,o);},setValue:function m(n){this.setState({value:n},this.updateWidth);},updateWidth:function m(){var n=this.getMockWidth();if(n)this.setState({width:Math.min(n,this.state.maxInputWidth)});},getMockWidth:function m(){var n=c('ReactDOM').findDOMNode(this.refs.mock_input);return n.offsetWidth+k;},renderGroupRequestInformation:function m(){if(this.props.receiversCount<=1)return null;var n=Math.round(this.state.value*this.props.receiversCount*100)/100;return c('React').createElement(c('XUIGrayText.react'),{display:'block',size:'small'},i._("Per person"),c('React').createElement(c('Middot.react'),null),i._("{currency}{total} in total",[i.param('currency',this.props.currencySymbol),i.param('total',n)]));},render:function m(){var n=void 0,o=!this.state.value.length,p=void 0,q=void 0;if(o)n=c('React').createElement('div',{ref:'placeholder_input',className:"_1-sv"},'0');return c('React').createElement('div',{className:"_ipw"+(this.props.isRequesting?' '+"_1c9h":'')},c('React').createElement('label',null,q,c('React').createElement('div',{className:"_4puh"+(o?' '+"_1-sy":'')},p,n,c('React').createElement('div',{ref:'mock_input',className:"_5fbs"},this.state.value),c('React').createElement(c('XUIError.react'),{xuiError:this.state.inputError},c('React').createElement('span',{className:"_1-sz"},c('React').createElement('input',{autoFocus:true,className:"_5fbv",disabled:this.props.disabled,onBlur:this.handleAmountInputBlur,onChange:this.handleAmountInputChange,ref:'textInput',style:{width:this.state.width},value:this.state.value}))),this.renderGroupRequestInformation())));}});f.exports=l;}),null);
__d('P2PSendMoneyDialogActionHeader.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.renderPayTab=function(){if(this.props.isPayTabDisabled)return null;var m=this.props.isPaying;return c('React').createElement('div',{className:"_50cx"+(m?' '+"_50cy":''),onClick:this.props.onPayClick,role:'button',tabIndex:'0'},i._("Pay"));};l.prototype.render=function(){var m=!!this.props.isPayTabDisabled,n=this.props.isRequesting;return c('React').createElement('div',{className:"_50cr"+(m?' '+"_3b-h":'')+(this.props.isPaying?' '+"_50cv":'')+(n?' '+"_50cw":'')},this.renderPayTab(),c('React').createElement('div',{className:"_50cx"+(n?' '+"_50cy":''),onClick:this.props.onRequestClick,role:'button',tabIndex:'0'},i._("Request")),c('React').createElement('div',{className:"_50c_"}));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('PaymentSettingsStringUtils',['fbt','P2PGatingFailReason','P2PLinkConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i={getPaymentsDPOText:function j(){return h._("For your security, payments have been temporarily turned off. Please {=contact us} to learn more.",[h.param('=contact us',c('React').createElement('a',{href:c('P2PLinkConstants').disabledPaymentsSupportURI},'contact us'))]);},getGeneralP2PDisabledText:function j(){return h._("You are unable to use payments in messages at the moment. Please try again later.");},getP2PDisabledText:function j(k){switch(k){case c('P2PGatingFailReason').PAYMENT_ACCOUNT_DISABLED:return this.getPaymentsDPOText();default:return this.getGeneralP2PDisabledText();}}};f.exports=i;}),null);
__d('P2PSendMoneyDialog.react',['cx','fbt','Arbiter','CreditCardFormParam','Image.react','ImageBlock.react','immutable','Link.react','MessengerContactImage.react','MessengerContextualDialog.react','MessengerEnvironment','MessengerHorizontalScroll.react','P2PAPI','P2PAddCreditCardDialog.react','P2PButton.react','P2PBigAmount.react','P2PCreditCardStore','P2PChooseCreditCardForm.react','P2PConfirmAmountDialog.react','P2PCreditCard','P2PDialog.react','P2PDialogTitle.react','P2PEditCreditCardDialog.react','P2PGKValues','P2PLinkConstants','P2PLoadingMask.react','P2PLogger','P2PMemoField.react','P2PMemoText.react','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PSendMoneyAmountInput.react','P2PSendMoneyDialogActionHeader.react','P2PText.react','P2PVerifyCreditCardDialog.react','PaymentSettingsStringUtils','React','ReactLayeredComponentMixin_DEPRECATED','XUIContextualDialog.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('MessengerEnvironment').messengerui,l=c('P2PGKValues').P2PRequestMoneyEnabled,m=i._("Change"),n=i._("Add Debit Card"),o=100,p=c('React').createClass({displayName:'P2PSendMoneyDialog',mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{amount:j.string,currency:j.string.isRequired,currencySymbol:j.string.isRequired,groupThreadFBID:j.string,flyoutAlignment:j.string,openRequestTab:j.bool,memoText:j.string,onError:j.func.isRequired,onPaymentRequestError:j.func.isRequired,onPaymentRequestSuccess:j.func.isRequired,onSendSuccess:j.func.isRequired,onToggle:j.func.isRequired,platformData:j.object,receivers:j.instanceOf(c('immutable').List).isRequired,referrer:j.string,paymentRequestID:j.string,p2pEligibilities:j.object,useModal:j.bool},getDefaultProps:function q(){return {amount:'',openRequestTab:false,receivers:c('immutable').List(),useModal:false};},getInitialState:function q(){var r=c('P2PCreditCardStore').getAll(),s=this.props.openRequestTab||this.isGroupRequest();return {asyncRequestState:c('P2PCreditCardStore').getAsyncRequestState(),addCreditCardDialogShown:false,amount:this.props.amount,creditCardsFetchError:c('P2PCreditCardStore').failedCreditCardFetch(),creditCards:r,confirmAmountDialogShown:false,isAmountValid:!!this.props.paymentRequestID,isCreditCardsFetchComplete:c('P2PCreditCardStore').isCreditCardsFetchComplete(),isMemoPhotoUploading:false,isPaying:!s,isRequesting:s,loading:false,memoText:this.props.memoText,memoPhotoIDs:[],selectedCard:r[0],showChooseCreditCardForm:false,verifyCreditCardDialogShown:false};},creditCardStoreSub:null,_isAmountVerified:false,passwordCancelSubscribeToken:null,getDialogWidth:function q(){if(this.props.useModal)return k?380:312;return k?286:260;},getEventFlow:function q(){return this.props.paymentRequestID||this.isRequesting()?c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_REQUEST:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_SEND;},getLogObjectIDs:function q(){var r=this.props.receivers;if(r.size>1)return {object_ids:r.map(function(t){return t.userID;}).join(',')};var s=r.get(0)||{};return {object_id:s.userID};},log:function q(r,s){var t=this.getLogObjectIDs();c('P2PLogger').log(r,babelHelpers['extends']({www_event_flow:this.getEventFlow(),memo_text:this.state.memoText,request_id:this.props.paymentRequestID},this.getPlatformLoggingData(),s,this.getReferrer(),t));},componentWillUnmount:function q(){if(this.passwordCancelSubscribeToken!==null){c('Arbiter').unsubscribe(this.passwordCancelSubscribeToken);this.passwordCancelSubscribeToken=null;}if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},componentWillMount:function q(){this.creditCardStoreSub=c('P2PCreditCardStore').addListener('change',this.onCreditCardStoreChange);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_SEND);if(c('P2PGKValues').P2PDisabledReason){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_P2P_SENDER_DISABLED_SHOWN);}else if(this.isRecipientIneligible())this.log(c('P2PPaymentLoggerEvent').UI_ACTN_P2P_RECIPIENT_INELIGIBLE_SHOWN);},getPlatformLoggingData:function q(){var r=this.props.platformData&&this.props.platformData.loggingData;if(r)return {platform_logging_data:r};return null;},getReferrer:function q(){var r=this.props.referrer;if(r)return {www_event_referrer:r};return null;},onAmountInputChange:function q(r,s){this.setState({amount:r,isAmountValid:s});},onCreditCardStoreChange:function q(){var r=c('P2PCreditCardStore').getAll(),s=void 0;if(this.state.selectedCard)s=r.filter(function(t){return t.getCredentialId()===this.state.selectedCard.getCredentialId();}.bind(this))[0];if(!s)s=r[0];this.setState({asyncRequestState:c('P2PCreditCardStore').getAsyncRequestState(),creditCards:r,isCreditCardsFetchComplete:c('P2PCreditCardStore').isCreditCardsFetchComplete(),selectedCard:s,creditCardsFetchError:c('P2PCreditCardStore').failedCreditCardFetch()});},shouldShowConfirmAmountDialog:function q(){var r=this.state.amount,s=r?r.replace(/\,/g,''):'',t=parseFloat(s);return !this._isAmountVerified&&t>=o;},shouldShowVerifyCreditCardDialog:function q(){return !this.state.selectedCard.getIsVerified();},shouldShowEditCreditCardDialog:function q(){return this.state.selectedCard.isExpired();},handleSendClick:function q(){if(this.isSendButtonDisabled())return;this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_CLICKED,{raw_amount:this.state.amount,currency:this.props.currency});this._isAmountVerified=false;this.initiatePayment();},handleRequestClick:function q(){if(this.isRequestButtonDisabled())return;this.log(c('P2PPaymentLoggerEvent').UI_ACTN_REQUEST_CLICKED,{raw_amount:this.state.amount,currency:this.props.currency});this.createPaymentRequest();},initiatePayment:function q(){if(this.shouldShowConfirmAmountDialog()){this.hideAllDialogs();this.setState({confirmAmountDialogShown:true});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CONFIRM_AMOUNT,{raw_amount:this.state.amount,currency:this.props.currency});return;}else if(this.shouldShowEditCreditCardDialog()){this.hideAllDialogs();this.setState({editCreditCardDialogShown:true});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_EDIT_CARD,{raw_amount:this.state.amount,currency:this.props.currency});return;}else if(this.shouldShowVerifyCreditCardDialog()){this.hideAllDialogs();this.setState({verifyCreditCardDialogShown:true});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_VERIFY_CSC,{raw_amount:this.state.amount,currency:this.props.currency});return;}this.createTransaction();},isGroupRequest:function q(){return this.props.receivers.size>1;},isPayingForRequest:function q(){return !!this.props.paymentRequestID;},isPaying:function q(){return this.state.isPaying===true;},isRequesting:function q(){return this.state.isRequesting===true;},shouldShowLoading:function q(){return !this.state.addCreditCardDialogShown&&!this.state.confirmAmountDialogShown&&!this.state.verifyCreditCardDialogShown&&!this.state.editCreditCardDialogShown;},createTransaction:function q(){var r={},s=this.props.receivers.get(0)||{};this.setState({loading:this.shouldShowLoading()});r[c('CreditCardFormParam').CREDENTIAL_ID]=this.state.selectedCard.getCredentialId();r.amount=this.state.amount;r.receiverId=s.userID;r.memoText=this.state.memoText;r.memoPhotoIDs=this.state.memoPhotoIDs;r.paymentRequestID=this.props.paymentRequestID;if(this.props.groupThreadFBID)r.group_thread_fbid=this.props.groupThreadFBID;if(this.props.platformData)r.platform_context_id=this.props.platformData.platformContextID;this.passwordCancelSubscribeToken=c('Arbiter').subscribeOnce('PasswordReauthDialogCancelClick',this.handlePasswordReauthDialogCancelClick);c('P2PAPI').createTransaction({formData:r,error:this.setCreateTransferError,success:this.setCreateTransferSuccess});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CONFIRM_SEND,{raw_amount:this.state.amount,currency:this.props.currency});},createPaymentRequest:function q(){this.setState({loading:this.shouldShowLoading()});var r=this.props.platformData||{};c('P2PAPI').createPaymentRequest({formData:{amount:this.state.amount,memoText:this.state.memoText,group_thread_fbid:this.props.groupThreadFBID,requestees:this.props.receivers,platform_context_id:r.platformContextID},error:this.setCreatePaymentRequestError,success:this.setCreatePaymentRequestSuccess});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CONFIRM_REQUEST,{raw_amount:this.state.amount,currency:this.props.currency});},hideAllDialogs:function q(){this.setState({addCreditCardDialogShown:false,confirmAmountDialogShown:false,verifyCreditCardDialogShown:false,editCreditCardDialogShown:false});},isDialogShowing:function q(){return !!(this.state.addCreditCardDialogShown||this.state.confirmAmountDialogShown||this.state.verifyCreditCardDialogShown||this.state.editCreditCardDialogShown);},setCreateTransferError:function q(r){if(this.isMounted()){this.hideAllDialogs();this.setState({loading:false});}this.props.onError(r);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_FAIL);},setCreateTransferSuccess:function q(r){if(this.isMounted()){this.setState({loading:false});this.hideAllDialogs();}this.props.onSendSuccess(r);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_SUCCESS);},setCreatePaymentRequestError:function q(r){if(this.isMounted()){this.hideAllDialogs();this.setState({loading:false});}this.props.onPaymentRequestError(r.error);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_REQUEST_FAIL);},setCreatePaymentRequestSuccess:function q(r){if(this.isMounted()){this.setState({loading:false});this.hideAllDialogs();}this.props.onPaymentRequestSuccess();this.log(c('P2PPaymentLoggerEvent').UI_ACTN_REQUEST_SUCCESS,{request_id:r.id});},handlePasswordReauthDialogCancelClick:function q(){this.passwordCancelSubscribeToken=null;this.setState({loading:false});this.hideAllDialogs();},onAddCreditCardCancel:function q(){this.setState({addCreditCardDialogShown:false});},onAddCreditCardSuccess:function q(r){var s=c('P2PCreditCardStore').getAll(),t=s.filter(function(u){var v=u.getCredentialId();return r[c('CreditCardFormParam').CREDENTIAL_ID]===v;})[0];this.setState({selectedCard:t},function(){if(this.state.isAmountValid){this.initiatePayment();}else{this.setState({addCreditCardDialogShown:false});this.focusAmountInput();}}.bind(this));},onEditCreditCardSuccess:function q(){this.initiatePayment();},onEditCreditCardCancel:function q(){this.setState({editCreditCardDialogShown:false});},focusAmountInput:function q(){if(this.refs.send_money_amount_input)this.refs.send_money_amount_input.focus();},_handleToggle:function q(r){this.props.onToggle(r);if(!this.state.loading)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_MONEY_CANCELLED);},_handleBlur:function q(){this._handleToggle(false);},handleAddCreditCardClick:function q(){this.setState({addCreditCardDialogShown:true,showChooseCreditCardForm:false});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CHANGE_CARD);},handleBackClick:function q(){this.setState({showChooseCreditCardForm:false},function(){this.focusAmountInput();}.bind(this));},handleChooseCardNextClick:function q(){var r=this.refs.choose_credit_card_form.getSelectedCard();this.setState({selectedCard:r,showChooseCreditCardForm:false},function(){this.focusAmountInput();}.bind(this));},handleAddCardNextClick:function q(){this.setState({addCreditCardDialogShown:true});},handleChangeSelectedCardClick:function q(){var r={};if(this.state.creditCards.length===1){r.addCreditCardDialogShown=true;this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CHANGE_CARD);}else{r.showChooseCreditCardForm=true;this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_CHOOSE_CARD);}this.setState(r);},onConfirmAmountCancel:function q(){this.setState({confirmAmountDialogShown:false});},onConfirmAmountSuccess:function q(){this._isAmountVerified=true;this.initiatePayment();},onVerifyCreditCardSuccess:function q(){this.initiatePayment();},onVerifyCreditCardCancel:function q(){this.setState({verifyCreditCardDialogShown:false});},handleMemoTextChange:function q(r){this.setState({memoText:r});},handleMemoPhotoChange:function q(r){this.setState({memoPhotoIDs:r});},handleMemoPhotoUploadingChange:function q(r){this.setState({isMemoPhotoUploading:r});},isSendButtonDisabled:function q(){return !this.state.isAmountValid||!this.state.creditCards.length||this.state.loading||this.state.isMemoPhotoUploading||this.isGroupRequest();},isRequestButtonDisabled:function q(){return !this.state.isAmountValid||this.state.loading;},isAddCardNextButtonDisabled:function q(){return !this.state.isAmountValid;},renderAddDebitCardLink:function q(){return c('React').createElement(c('P2PText.react'),{className:"_42h3",type:'secondary',ref:'send_money_dialog_add_card_text'},c('React').createElement(c('Link.react'),{className:"_49nm",href:'#',onClick:this.handleAddCreditCardClick},n));},renderSelectedCard:function q(){var r=this.state.selectedCard;return c('React').createElement(c('P2PText.react'),{className:"_21x5",size:'small',type:'primary'},c('React').createElement('div',{className:"_49nn"},r.getName()),c('React').createElement('div',{className:"_21wx"},r.getCreditCardNumberFormatted()),c('React').createElement('div',{className:"_21ww"},'\u00b7'),c('React').createElement(c('Link.react'),{className:"_21wy",onClick:this.handleChangeSelectedCardClick,href:'#'},m));},renderFormButtons:function q(){var r=void 0,s=k&&this.props.useModal?c('React').createElement(c('P2PButton.react'),{label:i._("Cancel"),onClick:function(){this._handleToggle(false);}.bind(this),type:'secondary'}):null;if(this.isRequesting()){r=c('React').createElement('div',null,s,this.renderRequestButton());}else if(!this.state.creditCards.length){r=c('React').createElement('div',null,s,this.renderAddCardNextButton());}else if(this.state.showChooseCreditCardForm){r=c('React').createElement('div',null,this.renderChooseCardBackButton(),this.renderChooseCardNextButton());}else r=c('React').createElement('div',null,s,this.renderPayButton());return r;},renderChooseCardBackButton:function q(){return c('React').createElement(c('P2PButton.react'),{label:i._("Back"),onClick:this.handleBackClick,ref:'back_button',size:'medium',type:'secondary',use:'default'});},renderAddCardNextButton:function q(){return c('React').createElement(c('P2PButton.react'),{disabled:this.isAddCardNextButtonDisabled(),label:i._("Next"),onClick:this.handleAddCardNextClick,ref:'add_card_next_button',size:'medium',type:'primary',use:'default'});},renderChooseCardNextButton:function q(){return c('React').createElement(c('P2PButton.react'),{label:i._("Next"),onClick:this.handleChooseCardNextClick,ref:'choose_card_next_button',size:'medium',type:'primary',use:'confirm'});},renderPayButton:function q(){return c('React').createElement(c('P2PButton.react'),{disabled:this.isSendButtonDisabled(),label:i._("Pay"),onClick:this.handleSendClick,ref:'send_button',size:'medium',type:'primary',use:'confirm'});},renderRequestButton:function q(){return c('React').createElement(c('P2PButton.react'),{disabled:this.isRequestButtonDisabled(),label:i._("Request"),onClick:this.handleRequestClick,ref:'request_button',size:'medium',type:'primary',use:'confirm'});},renderPaymentDetails:function q(){var r=void 0;if(this.isRequesting())return null;if(this.state.creditCards.length){if(this.state.showChooseCreditCardForm){r=this.renderAddDebitCardLink();}else r=this.renderSelectedCard();}else if(this.state.creditCardsFetchError){r=c('React').createElement('div',{className:"_2abl"},c('React').createElement(c('P2PText.react'),{type:'secondary',ref:'send_money_dialog_add_card_next_text'},i._("Sorry, we couldn't fetch your details. Please check your Internet connection or refresh this page and try again.")));}else r=c('React').createElement('div',{className:"_2abl"},c('React').createElement(c('P2PText.react'),{type:'secondary',ref:'send_money_dialog_add_card_next_text'},i._("Sending money is free and secure")));return r;},isRecipientIneligible:function q(){var r=this.props.p2pEligibilities;if(!r||this.props.receivers.size===0)return false;var s=this.props.receivers.find(function(t){return !r[t.userID];});return !!s;},isDialogDisabled:function q(){return !!(c('P2PGKValues').P2PDisabledReason||this.isRecipientIneligible());},renderDisabledText:function q(){if(!this.isDialogDisabled())return null;var r=c('P2PGKValues').P2PDisabledReason;if(r)return c('PaymentSettingsStringUtils').getP2PDisabledText(r);if(this.isRecipientIneligible()){var s=this.props.receivers.get(0)||{},t=s.short_name||'';return i._("{receiverName} is unable to receive money at the moment. {Learn more about p2p link}",[i.param('receiverName',t),i.param('Learn more about p2p link',c('React').createElement(c('Link.react'),{href:c('P2PLinkConstants').receiverIneligibleHelpURI,target:'_blank'},i._("Learn more.")))]);}return c('PaymentSettingsStringUtils').getGeneralP2PDisabledText();},renderFooter:function q(){var r=void 0;if(this.isDialogDisabled()){r=c('React').createElement(c('P2PText.react'),{className:"_2pi8",type:'secondary'},this.renderDisabledText());}else if(!this.state.isCreditCardsFetchComplete){r=c('React').createElement('div',{className:"_2-vg"},c('React').createElement(c('XUISpinner.react'),{className:"_2-vh"}));}else r=[c('React').createElement('div',{className:"_21x4",key:'paymentDetails'},this.renderPaymentDetails()),c('React').createElement('div',{className:"_4zf-",key:'formButtons'},this.renderFormButtons())];return c('React').createElement('div',{className:"_5p-k"},r);},renderMemo:function q(){var r=this.isPayingForRequest(),s=this.props.memoText||this.state.memoText;if(r&&!s)return null;if(r&&s)return c('React').createElement('div',{className:"_5exl"},c('React').createElement(c('P2PMemoText.react'),{memoText:s}));return c('React').createElement('div',{className:"_5exl"},c('React').createElement(c('P2PMemoField.react'),{defaultValue:s,disabled:this.isDialogDisabled(),isRequesting:this.isRequesting(),onTextChange:this.handleMemoTextChange,onPhotoChange:this.handleMemoPhotoChange,onPhotoUploadingChange:this.handleMemoPhotoUploadingChange}));},renderSendMoneyForm:function q(){return c('React').createElement('div',null,this.renderTitle(),c('React').createElement('div',{className:"_2abm"},this.renderMainContainer()),this.renderMemo(),c('React').createElement('div',{className:"_21w-"+(this.isDialogDisabled()?' '+"_3orf":'')+(k?' '+"_4eb_":'')},this.renderFooter()));},renderMainContainer:function q(){var r=void 0,s=void 0,t=this.state.amount,u=this.isPayingForRequest();if(this.state.showChooseCreditCardForm){r=c('React').createElement('div',{className:"_xn7"},c('React').createElement(c('P2PChooseCreditCardForm.react'),{creditCards:this.state.creditCards,selectedCard:this.state.selectedCard,ref:'choose_credit_card_form'}));}else{if(!u){s=c('React').createElement(c('P2PSendMoneyAmountInput.react'),{currencySymbol:this.props.currencySymbol,disabled:this.isPayingForRequest()||this.isDialogDisabled(),isRequesting:this.isRequesting(),onInputChange:this.onAmountInputChange,receiversCount:this.props.receivers.size,ref:'send_money_amount_input',value:t});}else s=c('React').createElement(c('P2PBigAmount.react'),{amount:t,size:'large'});r=c('React').createElement('div',{className:"_2abn"+(u?' '+"_74p":'')},s);}return r;},renderActionText:function q(){if(this.isRequesting())return i._("Request to");return i._("Send to");},renderActionToggleHeader:function q(){var r=this.isPaying(),s=this.isRequesting();if(this.isPayingForRequest()||!l)return null;return c('React').createElement('div',{className:"_4uvi"},c('React').createElement(c('P2PSendMoneyDialogActionHeader.react'),{isPayTabDisabled:this.isGroupRequest(),isPaying:r,isRequesting:s,onPayClick:function(){if(this.isPaying())return;this.setState({isPaying:true,isRequesting:false},function(){this.focusAmountInput();this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_SEND);}.bind(this));}.bind(this),onRequestClick:function(){if(!this.isRequesting())this.setState({isPaying:false,isRequesting:true},function(){this.focusAmountInput();this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_REQUEST);}.bind(this));}.bind(this)}));},renderLayers:function q(){var r={},s=this.props.receivers.get(0)||{},t=s.short_name,u=void 0,v=void 0,w=void 0;if(this.props.useModal)w={LayerFadeOnShow:false};if(this.state.addCreditCardDialogShown){if(this.state.isAmountValid){v=i._("Please enter a debit card to send {Amount} to {Recipient name}. Credit cards can't be used.",[i.param('Amount',this.props.currencySymbol+this.state.amount),i.param('Recipient name',t)]);u=i._("Pay");}r.addCreditCard=c('React').createElement(c('P2PAddCreditCardDialog.react'),{behaviors:w,eventFlow:this.getEventFlow(),loggingData:this.getPlatformLoggingData(),onCancel:this.onAddCreditCardCancel,onSuccess:this.onAddCreditCardSuccess,ref:'send_money_dialog_add_credit_card_form',saveButtonText:u,showCancelButton:!!k,text:v});}else if(this.state.confirmAmountDialogShown){r.confirmAmount=c('React').createElement(c('P2PConfirmAmountDialog.react'),{amount:this.state.amount,behaviors:w,currencySymbol:this.props.currencySymbol,onCancel:this.onConfirmAmountCancel,onConfirm:this.onConfirmAmountSuccess,receiverName:t});}else if(this.state.verifyCreditCardDialogShown){r.verifyCreditCard=c('React').createElement(c('P2PVerifyCreditCardDialog.react'),{asyncRequestState:this.state.asyncRequestState,behaviors:w,creditCard:this.state.selectedCard,isSending:true,onCancel:this.onVerifyCreditCardCancel,onSuccess:this.onVerifyCreditCardSuccess});}else if(this.state.editCreditCardDialogShown)r.confirmAmount=c('React').createElement(c('P2PEditCreditCardDialog.react'),{asyncRequestState:this.state.asyncRequestState,behaviors:w,creditCard:this.state.selectedCard,onCancel:this.onEditCreditCardCancel,onSuccess:this.onEditCreditCardSuccess});return r;},renderIneligibleMask:function q(){if(!this.isDialogDisabled())return null;return c('React').createElement('div',{className:"_3org"});},renderReceiverImage:function q(r){var s=k?32:40;return c('React').createElement(c('MessengerContactImage.react'),{key:r.userID,size:s,src:r.big_image_src||r.image_src});},renderSingleRecipient:function q(){var r=k?32:40,s=this.props.receivers.get(0)||{};return c('React').createElement('div',{className:"_49no",ref:'send_money_dialog_title'},c('React').createElement(c('ImageBlock.react'),{spacing:'large'},c('React').createElement(c('Image.react'),{className:"_5p-i",height:r,src:s.big_image_src||s.image_src,width:r}),c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('P2PText.react'),{type:'secondary'},this.renderActionText()),c('React').createElement(c('P2PText.react'),{className:"_5p-j",size:'small',type:'primary',weight:'bold'},s.name))),c('React').createElement(c('Link.react'),{className:"_49np",href:c('P2PLinkConstants').helpCenterURI,target:'_blank'}));},renderTitle:function q(){if(this.props.receivers.size===1)return this.renderSingleRecipient();var r=k?32:40,s=12;return c('React').createElement('div',{className:"_49no",ref:'send_money_dialog_title'},c('React').createElement(c('MessengerHorizontalScroll.react'),{childPadding:8,childWidth:r,freeScroll:true,width:this.getDialogWidth()-s*2},this.props.receivers.map(this.renderReceiverImage)));},render:function q(){var r=void 0,s=null,t={};if(this.props.useModal&&this.isDialogShowing())return null;if(this.props.useModal){r=c('P2PDialog.react');s=c('React').createElement(c('P2PDialogTitle.react'),{className:"_30wi"},i._("Confirm payment"));t={layerHideOnBlur:false};}else{r=k?c('MessengerContextualDialog.react'):c('XUIContextualDialog.react');t={alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:k?'right':'left',context:this.props.context,position:this.props.position||'above',onBlur:this._handleBlur};}return c('React').createElement(r,babelHelpers['extends']({onToggle:this._handleToggle,shown:true,width:this.getDialogWidth()},t),c('React').createElement('div',{className:"_21x9"+(k?' '+"_1pka":'')+(l?' '+"_4uvl":'')+(this.props.useModal?' '+"_35wt":'')},s,this.renderActionToggleHeader(),this.renderSendMoneyForm(),this.renderIneligibleMask(),c('React').createElement(c('P2PLoadingMask.react'),{ref:'send_money_dialog_loader',visible:this.state.loading})));}});f.exports=p;}),null);
__d('P2PNUXNextButton.react',['fbt','P2PButton.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('P2PButton.react'),{label:h._("Next"),onClick:this.props.onNextClick,use:'confirm'});};function l(){i.apply(this,arguments);}l.propTypes={onNextClick:k.func.isRequired};f.exports=l;}),null);
__d('P2PNUXFooter.react',['cx','LeftRight.react','P2PEncryptedText.react','P2PNUXNextButton.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',{className:"_2pic"},c('React').createElement(c('P2PEncryptedText.react'),null)),c('React').createElement(c('P2PNUXNextButton.react'),{onNextClick:this.props.onNextClick}));};function l(){i.apply(this,arguments);}l.propTypes={onNextClick:k.func.isRequired};f.exports=l;}),null);
__d('P2PSendMoneyNUXListItems.react',['fbt','ix','Image.react','P2PListRow.react','P2PText.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.renderRow=function(s,t){return c('React').createElement(c('P2PListRow.react'),{offset:this.props.size},c('React').createElement(c('Image.react'),s),c('React').createElement(c('P2PText.react'),{type:'primary'},t));}.bind(this),o;}m.prototype.render=function(){var n=this.props.size;return c('React').createElement('div',null,this.renderRow(n==='small'?{height:18,src:i("94401"),width:18}:{height:36,src:i("94400"),width:36},h._("It's FREE to send and receive money.")),this.renderRow(n==='small'?{height:27,src:i("94405"),width:18}:{height:54,src:i("94404"),width:36},h._("Industry-leading security \u2013 password protection, anti-fraud team and more.")),this.renderRow(n==='small'?{height:13,src:i("94403"),width:18}:{height:26,src:i("94402"),width:36},h._("Send money from your debit card to theirs.")));};m.propTypes={offset:l.oneOf(['small','medium'])};m.defaultProps={size:'small'};f.exports=m;}),null);
__d('P2PSendMoneyNUXTitleText.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';function i(){return c('React').createElement('div',null,h._("Send money to anyone"));}f.exports=i;}),null);
__d('P2PSendMoneyNUXTitle.react',['cx','fbt','P2PSendMoneyNUXTitleText.react','P2PText.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){return c('React').createElement('div',{className:"_4fz1"},c('React').createElement(c('P2PText.react'),{size:'medium',type:'primary'},c('React').createElement(c('P2PSendMoneyNUXTitleText.react'),null)),c('React').createElement(c('P2PText.react'),{type:'secondary'},i._("Split a restaurant bill, pay rent or anything else")));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('P2PSendMoneyNUXContextualDialog.react',['cx','MessengerEnvironment','MessengerContextualDialog.react','P2PLogger','P2PNUXFooter.react','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PSendMoneyNUXListItems.react','P2PSendMoneyNUXTitle.react','React','XUIContextualDialog.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.log=function(r,s){c('P2PLogger').log(r,babelHelpers['extends']({www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_SEND},this.props.loggingData,s));}.bind(this),this.handleNextClick=function(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_MONEY_NUX_NEXT_CLICK);this.props.onNextClick();}.bind(this),this.$P2PSendMoneyNUXContextualDialog1=function(r){this.props.onToggle(r);}.bind(this),n;}l.prototype.componentDidMount=function(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_MONEY_NUX_SHOWN);};l.prototype.render=function(){var m=c('MessengerEnvironment').messengerui?c('MessengerContextualDialog.react'):c('XUIContextualDialog.react');return c('React').createElement(m,{alignment:this.props.flyoutAlignment,context:this.props.context,contextRef:this.props.contextRef,onBlur:function(){return this.$P2PSendMoneyNUXContextualDialog1(false);}.bind(this),onToggle:this.$P2PSendMoneyNUXContextualDialog1,position:this.props.position,shown:true,width:this.props.width},c('React').createElement('div',{className:"_56i7"},c('React').createElement('div',{className:"_56jc"},c('React').createElement(c('P2PSendMoneyNUXTitle.react'),null)),c('React').createElement('div',{className:"_56jd"},c('React').createElement(c('P2PSendMoneyNUXListItems.react'),null)),c('React').createElement(c('P2PNUXFooter.react'),{onNextClick:this.handleNextClick})));};l.propTypes={loggingData:k.object,onNextClick:k.func.isRequired,onToggle:k.func.isRequired,width:k.number};l.defaultProps=function(){var m=c('MessengerEnvironment').messengerui;return {flyoutAlignment:m?'right':'left',position:'above',width:m?286:260};}();f.exports=l;}),null);
__d('P2PSendMoneySuccessDialog.react',['fbt','Link.react','React','P2PLinkConstants','P2PSuccessDialog.react','P2PText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('P2PSuccessDialog.react'),{onOKClick:this.props.onClose,title:h._("Payment Sent")},c('React').createElement(c('P2PText.react'),{type:'primary'},h._("When you receive money, it will go on this card, too. You can update your card in {Link with text that goes to settings page}.",[h.param('Link with text that goes to settings page',c('React').createElement(c('Link.react'),{target:'_blank',href:c('P2PLinkConstants').settingsWWWURI},h._("Payments Settings")))])));};function l(){i.apply(this,arguments);}l.propTypes={onClose:k.func.isRequired};f.exports=l;}),null);
__d('P2PUnderManualReviewDialog.react',['fbt','P2PButton.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PText.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('P2PDialog.react'),{layerHideOnBlur:false,shown:true,width:300},c('React').createElement(c('P2PDialogTitle.react'),{showCloseButton:false},h._("Reviewing Payment Info")),c('React').createElement(c('P2PDialogBody.react'),null,c('React').createElement(c('P2PText.react'),{type:'primary'},h._("For your security, this payment is in review for up to 24 hours. When it's confirmed, it will go through."))),c('React').createElement(c('P2PDialogFooter.react'),null,c('React').createElement(c('P2PButton.react'),{label:h._("OK"),onClick:this.props.onClose,use:'confirm'})));};function l(){i.apply(this,arguments);}l.propTypes={onClose:k.func.isRequired};f.exports=l;}),null);
__d('P2PUserEligibilityContainer.react',['immutable','P2PUserEligibilityStore','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'P2PUserEligibilityContainer',propTypes:{participants:h.instanceOf(c('immutable').List)},mixins:[c('StoreAndPropBasedStateMixin')(c('P2PUserEligibilityStore'))],statics:{calculateState:function j(k){var l=k.participants,m=void 0,n=void 0;if(l){n=l.map(function(o){return o.userID;}).toArray();m=c('P2PUserEligibilityStore').getEligibilityByUserIDs(n);}return {p2pEligibilities:m};}},render:function j(){var k=c('React').Children.only(this.props.children);return c('React').cloneElement(k,{p2pEligibilities:this.state.p2pEligibilities});}});f.exports=i;}),null);
__d('P2PSendMoneyButton.react',['fbt','MessengerEnvironment','immutable','P2PAbstractSendMoneyButton.react','P2PActions','P2PErrorDialog.react','P2PGKValues','P2PGroupSendParticipantsPickerDialog.react','P2PGroupSendDialog.react','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PPasswordProtectionNUXDialog.react','P2PPasswordProtectionStatusTypes','P2PSendMoneyDialog.react','P2PUserEligibilityContainer.react','P2PSendMoneyNUXContextualDialog.react','P2PSendMoneySuccessDialog.react','P2PTransferParam','P2PTransferStore','P2PTransferRiskResult','P2PUnderManualReviewDialog.react','P2PVerificationFlowHelper','React','ReactDOM','ReactLayeredComponentMixin_DEPRECATED','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'P2PSendMoneyButton',mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{amount:i.string,button:i.object,groupSendRecipientUserIDs:i.arrayOf(i.string),groupThreadFBID:i.string,flyoutAlignment:i.string,openRequestTab:i.bool,isNewEmptyLocalThread:i.bool,isGroupChat:i.bool,onCompletion:i.func,onTrigger:i.func,participants:i.instanceOf(c('immutable').List),platformData:i.object,sendMoneyDialogShown:i.bool,threadID:i.string,threadFBID:i.string},getDefaultProps:function k(){return {amount:'',groupThreadFBID:'',openRequestTab:false,onTrigger:c('emptyFunction'),sendMoneyDialogShown:false};},getInitialState:function k(){return {sendMoneyNUXDismissed:false};},log:function k(l,m){c('P2PLogger').log(l,babelHelpers['extends']({www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_SEND},m));},canShowSendMoneyDialog:function k(){return !!(this.props.participants&&this.props.participants.size);},originalCreateTransactionResponse:null,_onButtonClick:function k(){var l=this.getRecipients();this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_MONEY_BUTTON_CLICKED,this.getLogData(l));this.canShowSendMoneyDialog()&&this.showSendMoneyDialog();},hideSendMoneyDialog:function k(){c('P2PActions').chatSendViewClosed({threadID:this.props.threadID});},showSendMoneyDialog:function k(){c('P2PActions').chatSendViewOpened({referrer:this.props.referrer,threadID:this.props.threadID});},_handleDialogToggle:function k(l){if(!l){this.hideSendMoneyDialog();}else this.showSendMoneyDialog();},handlePaymentRequestSuccess:function k(){this.hideSendMoneyDialog();this.props.onTrigger();this.props.onCompletion&&this.props.onCompletion();},handleOnSendSuccess:function k(l){this.hideSendMoneyDialog();var m=l[c('P2PTransferParam').RISK_RESULT];this.originalCreateTransactionResponse=l;if(m===c('P2PTransferRiskResult').REQUIRE_VERIFICATION){c('P2PVerificationFlowHelper').startVerificationFlow(l.id,true,this.handleVerificationCompleted);}else if(m===c('P2PTransferRiskResult').UNDER_MANUAL_REVIEW){this.showUnderManualReviewDialog();}else this.handlePostSendSteps(false);},handleVerificationCompleted:function k(l){this.handlePostSendSteps(!l);},handlePostSendSteps:function k(l){var m=this.originalCreateTransactionResponse,n=m.passwordProtection===c('P2PPasswordProtectionStatusTypes').NOT_SET;if(!l&&m.isFirstSend){this._passwordNUXPending=n;this.showSendSuccessDialog();}else if(n){this.showPasswordProtectionDialog();}else c('P2PActions').hideDialog();this.originalCreateTransactionResponse=null;this.props.onTrigger();this.props.onCompletion&&this.props.onCompletion();},handleConfirmationOKClick:function k(){if(this._passwordNUXPending){this._passwordNUXPending=false;this.showPasswordProtectionDialog();}else c('P2PActions').hideDialog();},handleSendError:function k(l){this.showErrorDialog(l);},handlePaymentRequestError:function k(l){this.showPaymentRequestErrorDialog(l);},getGroupSendDialog:function k(){if(c('P2PGKValues').P2PGroupRequestEnabled)return c('P2PGroupSendParticipantsPickerDialog.react');return c('P2PGroupSendDialog.react');},getLogData:function k(l){if(l.size>1)return {object_ids:l.map(function(n){return n.userID;}).join(',')};var m=l.get(0);return {object_id:m&&m.userID};},getMoneyButtonNode:function k(){return c('ReactDOM').findDOMNode(this.refs.p2pSendMoneyButton);},getRecipients:function k(){if(!this.props.participants)return c('immutable').List();if(!this.props.isGroupChat)return this.props.participants.slice(0,1);var l=this.props.groupSendRecipientUserIDs||[],m=l.reduce(function(n,o){n[o]=true;return n;},{});return this.props.participants.filter(function(n){return !!m[n.userID];});},setGroupSendDialog:function k(l,m){var n=this.getGroupSendDialog();l.groupSendMoneyDialog=c('React').createElement(c('P2PUserEligibilityContainer.react'),{participants:this.props.participants},c('React').createElement(n,{amount:this.props.amount,context:this.getMoneyButtonNode(),flyoutAlignment:this.props.flyoutAlignment,openRequestTab:this.props.openRequestTab,currency:m,onToggle:this._handleDialogToggle,participants:this.props.participants,referrer:this.props.referrer,threadID:this.props.threadID,threadFBID:this.props.threadFBID}));},getGroupSendRecipient:function k(){return this.props.participants&&this.props.participants.find(function(l){return l.userID===this.props.groupSendRecipientUserID;}.bind(this));},showErrorDialog:function k(l){var m=h._("Problem While Sending Money");c('P2PActions').showDialog(c('P2PErrorDialog.react'),{error:l,onOKClick:c('P2PActions').hideDialog,title:m});},showPaymentRequestErrorDialog:function k(l){var m=h._("Problem with money request");c('P2PActions').showDialog(c('P2PErrorDialog.react'),{error:l,onOKClick:c('P2PActions').hideDialog,title:m});},showPasswordProtectionDialog:function k(){c('P2PActions').showDialog(c('P2PPasswordProtectionNUXDialog.react'),{onComplete:c('P2PActions').hideDialog});},showSendSuccessDialog:function k(){c('P2PActions').showDialog(c('P2PSendMoneySuccessDialog.react'),{onClose:this.handleConfirmationOKClick});},showUnderManualReviewDialog:function k(){c('P2PActions').showDialog(c('P2PUnderManualReviewDialog.react'),{onClose:this.handlePostSendSteps.bind(this,false)});},shouldShowNUX:function k(){return !this.props.sendMoneyNUXDismissed&&!this.state.sendMoneyNUXDismissed&&c('P2PTransferStore').shouldShowSenderNUX();},renderLayers:function k(){var l={},m='USD',n='$',o=this.getRecipients();if(this.canShowSendMoneyDialog()&&this.props.sendMoneyDialogShown)if(this.shouldShowNUX()){l.nux=c('React').createElement(c('P2PSendMoneyNUXContextualDialog.react'),{context:this.getMoneyButtonNode(),loggingData:this.getLogData(o),flyoutAlignment:this.props.flyoutAlignment,onNextClick:function(){return this.setState({sendMoneyNUXDismissed:true});}.bind(this),onToggle:this._handleDialogToggle});}else if(!o.size&&!this.props.groupSendRecipientUserID&&this.props.isGroupChat&&this.props.threadFBID){this.setGroupSendDialog(l,m);}else l.sendMoneyDialog=c('React').createElement(c('P2PUserEligibilityContainer.react'),{participants:this.props.participants,ref:'send_money_dialog'},c('React').createElement(c('P2PSendMoneyDialog.react'),{amount:this.props.amount,context:this.getMoneyButtonNode(),currency:m,currencySymbol:n,groupThreadFBID:this.props.groupThreadFBID,flyoutAlignment:this.props.flyoutAlignment,openRequestTab:this.props.openRequestTab,memoText:this.props.memoText,onToggle:this._handleDialogToggle,onError:this.handleSendError,onPaymentRequestError:this.handlePaymentRequestError,onPaymentRequestSuccess:this.handlePaymentRequestSuccess,onSendSuccess:this.handleOnSendSuccess,platformData:this.props.platformData,receivers:o,ref:'send_money_dialog',referrer:this.props.referrer,paymentRequestID:this.props.paymentRequestID,useModal:this.props.useModal}));return l;},render:function k(){if(this.props.isNewEmptyLocalThread&&this.props.participants.size>1)return null;return c('React').createElement(c('P2PAbstractSendMoneyButton.react'),{button:this.props.button,className:this.props.className,isActive:this.canShowSendMoneyDialog()&&this.props.sendMoneyDialogShown,isMessenger:!!c('MessengerEnvironment').messengerui,onClick:this._onButtonClick,ref:'p2pSendMoneyButton'});}});f.exports=j;}),null);
__d('P2PSendMoneyContainer.react',['CurrentUser','immutable','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryShareAttachmentRenderLocations','MercuryThreads','P2PSendMoneyButton.react','P2PSendMoneyDialogStore','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'P2PSendMoneyContainer',propTypes:{button:h.node,className:h.string,flyoutAlignment:h.string,participantIDs:h.array,onCompletion:h.func,onTrigger:h.func,threadID:h.string},getDefaultProps:function j(){return {referrer:c('MercuryShareAttachmentRenderLocations').CHAT};},mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'),c('MercuryThreads'),c('P2PSendMoneyDialogStore'))],statics:{calculateState:function j(k){var l=k.threadID,m=null,n=k.participantIDs,o=null,p=null,q=void 0,r=void 0,s=k.referrer;if(!l)return {};q=c('P2PSendMoneyDialogStore').getStateByThreadID(l);r=q&&q.referrer;if(l){m=c('MercuryThreads').getForFBID(c('CurrentUser').getID()).getOrFetch(l);if(!n&&m&&m.participants)n=m.participants.filter(function(t){return c('CurrentUser').getID()!==c('MercuryIDs').getUserIDFromParticipantID(t);});if(n){o=c('immutable').List();o=o.withMutations(function(t){n&&n.forEach(function(u){var v=c('MercuryParticipants').getOrFetch(u),w=c('MercuryIDs').getUserIDFromParticipantID(u);v=v&&c('ImmutableObject').set(v,{userID:w});if(v)t.push(v);});});}}p=c('MercuryThreads').get().isNewEmptyLocalThread(l);return babelHelpers['extends']({},q,{participants:o,isNewEmptyLocalThread:p,isGroupChat:c('MercuryIDs').isGroupChat(l)&&!p,threadID:l,threadFBID:m&&m.thread_fbid,referrer:r||s});}},render:function j(){return c('React').createElement(c('P2PSendMoneyButton.react'),babelHelpers['extends']({},this.state,{button:this.props.button,className:this.props.className,flyoutAlignment:this.props.flyoutAlignment,onTrigger:this.props.onTrigger}));}});f.exports=i;}),null);