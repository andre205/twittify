if (self.CavalryLogger) { CavalryLogger.start_js(["7dHYD"]); }

__d("MessagesViewerSetID",[],(function a(b,c,d,e,f,g){f.exports={MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"};}),null);
__d("MessengerWebDriverTestIDs",[],(function a(b,c,d,e,f,g){f.exports={ANIMATED_IMAGE:"animated_image",ATTACHMENT_ROOT:"attachment_root",CHAT_SIDEBAR:"chat_sidebar",INFO_PANEL:"info_panel",INFO_PANEL_BUTTON:"info_panel_button",INFO_PANEL_TOGGLER_OPTION:"info_panel_toggler_option",STICKER:"sticker"};}),null);
__d('ChatSpeakingSticker.react',['React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$ChatSpeakingSticker1=function(){var q=c('ReactDOM').findDOMNode(this.refs.stickerVideo);q.play();}.bind(this),m;}k.prototype.render=function(){return c('React').createElement('div',{onClick:this.$ChatSpeakingSticker1,role:'presentation'},c('React').createElement('video',{height:this.props.videoSize.height,ref:"stickerVideo",width:this.props.videoSize.width},c('React').createElement('source',{src:this.props.videoURI})));};k.propTypes={videoURI:j.string.isRequired,videoSize:j.shape({height:j.number,width:j.number}).isRequired};f.exports=k;}),null);
__d('MessagesViewer',['AsyncRequest','DOM','MessagesViewerSetID','PhotoStore','React','ReactDOM','emptyFunction','ge'],(function a(b,c,d,e,f,g){var h={renderSpotlight:function j(k,l,m,n){var o=k.setID;if(!o)o=c('MessagesViewerSetID').MESSAGES;i(c('React').createElement(m,{actorid:k.actorid,dimensions:[k.dimensions],disablepaging:k.disablePaging,disableForward:k.disableForward,forwardDialogComponent:n,open:true,photoid:k.fbid,reverse:false,rootClassName:k.rootClassName,setid:o,snapToPhoto:k.snapToPhoto,thumbsrc:k.src}));if(!c('PhotoStore').hasBeenCreated(o)&&k.endpoint){var p=new (c('AsyncRequest'))(k.endpoint);if(l)p.setRelativeTo(l);p.send();}},renderVideo:function j(k){i(k);}};function i(j){var k=c('ge')('messages_viewer');if(!k){k=c('DOM').create('div',{id:'messages_viewer'});document.body.appendChild(k);}c('ReactDOM').render(j,k,function(){this.subscribeOnce('close',function(){c('ReactDOM').unmountComponentAtNode(k);});});}f.exports=h;}),null);
__d('MessengerAttachmentViewer',['Bootloader','MessagesViewer','React','Run','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h={renderVideo:function i(j){c('Bootloader').loadModules(["MessagingVideoViewer.react","messengerForwardAttachmentDialogReact"],function(k,l){var m=l.comp;c('MessagesViewer').renderVideo(c('React').createElement(k,babelHelpers['extends']({},j,{forwardDialogComponent:m})));},'MessengerAttachmentViewer');},bootstrapWithConfig:function i(j,k){c('Bootloader').loadModules(["SpotlightMessagesViewer","messengerForwardAttachmentDialogReact"],function(l,m){var n=m.comp;c('MessagesViewer').renderSpotlight(j,k,l,n);},'MessengerAttachmentViewer');},preload:function i(){c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","messengerForwardAttachmentDialogReact"],c('emptyFunction'),'MessengerAttachmentViewer');});}};f.exports=h;}),null);
__d('MessengerPhoto.react',['cx','fbt','Image.react','Link.react','MercuryAttachmentType','MessengerSpinner.react','MessengerWebDriverTestIDs','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=280,n=480,o=1800,p=450;function q(u,v){if(u.metadata){if(u.attach_type===c('MercuryAttachmentType').VIDEO)return v&&u.metadata.large_preview?u.metadata.large_preview:u.metadata.inbox_preview;return v?u.large_preview_url:u.preview_url;}return null;}function r(u){var v=window.screen.width>o;if(u.preview_uploading)return v&&u.large_preview_url?{height:u.large_preview_height||n,src:u.large_preview_url,width:u.large_preview_width||n,renderLargePreview:true}:{height:u.preview_height||m,src:u.preview_url,width:u.preview_width||m};var w=q(u,v);if(w){var x=v&&u.metadata.large_size?u.metadata.large_size:u.metadata.inbox_size;return babelHelpers['extends']({src:w,renderLargePreview:v},x);}if(u.preview_url)return v&&u.large_preview_url?{height:u.large_preview_height,src:u.large_preview_url,width:u.large_preview_width,renderLargePreview:true}:{height:u.preview_height,src:u.preview_url,width:u.preview_width};if(u.media)return u.media.playable&&u.media.animated_image?babelHelpers['extends']({},u.media.animated_image_size,{src:u.media.animated_image}):babelHelpers['extends']({},u.media.image_size,{src:u.media.image});return null;}function s(u,v){if(u.preview_uploading)return u.preview_url?0:m;var w=u.media?r(u):{height:u.preview_height,width:u.preview_width};return Math.min(w.height*Math.min(1,p/w.width),p);}j=babelHelpers.inherits(t,c('React').Component);k=j&&j.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=k.constructor).call.apply(u,[this].concat(x)),this.$MessengerPhoto2=function(z){z.preventDefault();var aa=this.props.attachment;if(this.props.onClick)this.props.onClick(aa);}.bind(this),v;}t.prototype.componentDidMount=function(){var u=this.props.onAttachmentLoad;u&&u();};t.prototype.render=function(){var u=this.props,v=u.attachment,w=u.isSingle,x=r(v);if(!x)return null;var y=v.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE,z=!!this.props.attachment.app_attribution,aa=this.$MessengerPhoto1(x,w&&y,(z?"_mxz":'')+(w&&!z?' '+"_52mr":'')),ba={};if(!y||!w){if(x.src)ba.backgroundImage='url('+x.src+')';if(w){var ca=s(v,this.context);if(ca)ba.minHeight=ca;}}var da=void 0;if(v.preview_uploading)da=c('React').createElement(c('MessengerSpinner.react'),null);var ea=y?c('MessengerWebDriverTestIDs').ANIMATED_IMAGE:null;return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_4tsk"+(z?' '+"_mxz":'')+(w&&!z?' '+"_52mr":'')+(v.preview_uploading&&!x.src?' '+"_3etv":'')),'data-testid':ea,onClick:this.$MessengerPhoto2,role:'presentation',style:ba},aa,da,c('React').createElement(c('Link.react'),{'aria-label':i._("Open Photo"),className:"_4tsl",href:x.src},this.props.children));};t.prototype.$MessengerPhoto1=function(u,v,w){if(this.props.attachment.preview_uploading&&!u.src)return null;if(this.props.isSingle){var x={width:'100%',maxWidth:'100%'};x.maxHeight=u.renderLargePreview?window.screen.height*.7:window.screen.height*.65;return c('React').createElement(c('Image.react'),{alt:'',className:c('joinClasses')(w,!v?"_5pf5":''),style:x,src:u.src});}return null;};t.contextTypes={width:l.number};t.propTypes={attachment:l.object.isRequired,isSingle:l.bool.isRequired,onAttachmentLoad:l.func,onClick:l.func};f.exports=t;}),null);
__d('randomShuffle',['randomInt'],(function a(b,c,d,e,f,g){function h(i){for(var j=i.length-1;j>0;j--){var k=c('randomInt').call(this,j+1);if(k!=j){var l=i[k];i[k]=i[j];i[j]=l;}}return i;}f.exports=h;}),null);
__d('MessagingFlowerCornerArrangements',['invariant','ix','Random','randomShuffle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={TOP_LEFT:'topLeft',BOTTOM_RIGHT:'bottomRight'},k={PINK:'pink',PURPLE:'purple',YELLOW:'yellow'},l={ROUND:'round',POINTY:'pointy'},m=-10;function n(r,s){this.$ElementProducer1=r;this.$ElementProducer4=s;this.$ElementProducer2=c('Random').random()<.5;this.$ElementProducer3=[];var t=[k.PINK,k.PURPLE,k.YELLOW],u=[l.ROUND,l.POINTY,c('Random').random()>=.5?l.ROUND:l.POINTY];c('randomShuffle')(t);c('randomShuffle')(u);for(var v=0;v<3;v++)this.$ElementProducer3.push(this.$ElementProducer5(t[v],u[v]));}n.prototype.$ElementProducer6=function(r){switch(r){case k.PINK:return i("86995");case k.PURPLE:return i("86997");case k.YELLOW:default:return i("86999");}};n.prototype.$ElementProducer7=function(r){switch(r){case k.PINK:return i("86996");case k.PURPLE:return i("86998");case k.YELLOW:default:return i("87000");}};n.prototype.$ElementProducer5=function(r,s){return s===l.POINTY?this.$ElementProducer6(r):this.$ElementProducer7(r);};n.prototype.$ElementProducer8=function(){return this.$ElementProducer3.pop();};n.prototype.flower=function(r){var s=c('Random').random()*360;return this.$ElementProducer9(this.$ElementProducer8(),{pivot:.5,rotationStart:s+r.rotationStartOffset,rotationEnd:s,scale:r.scale,x:r.x,y:r.y});};n.prototype.leaf=function(r){return this.$ElementProducer9(i("86994"),{pivot:1,rotationStart:0,rotationEnd:r.rotationEnd,scale:r.scale,x:r.x,y:r.y});};n.prototype.$ElementProducer9=function(r,s){var t=s.pivot*100+'%',u=s.x+m,v=s.y+m,w=-s.pivot*100,x=s.scale,y=s.rotationEnd,z=void 0,aa=void 0,ba=void 0,ca=void 0;if(this.$ElementProducer2){var da=u;u=v;v=da;y=-y;}if(this.$ElementProducer1===j.BOTTOM_RIGHT){ca=this.$ElementProducer4+u+'px';aa=this.$ElementProducer4+v+'px';w=100+w;y+=180;}else if(this.$ElementProducer1===j.TOP_LEFT){ba=this.$ElementProducer4+u+'px';z=this.$ElementProducer4+v+'px';}else h(0);var ea=[];if(w!==0)ea.push('translate('+w+'%, '+w+'%)');ea.push('scale('+x+')');if(y!==0)ea.push('rotate('+y+'deg)');return {style:{bottom:aa,left:ba,position:'absolute',right:ca,top:z,transform:ea.join(' '),transformOrigin:t+' '+t},image:r};};function o(r){return [r.leaf({x:20.5,y:38,scale:.225,rotationEnd:-80}),r.leaf({x:29,y:22.5,scale:.35,rotationEnd:35}),r.flower({x:31.5,y:22,scale:.6,rotationStartOffset:-70}),r.flower({x:21,y:35,scale:.65,rotationStartOffset:-70}),r.flower({x:21.75,y:24.75,scale:1,rotationStartOffset:50})];}function p(r){return [r.leaf({x:22.25,y:35.25,scale:.225,rotationEnd:-115}),r.leaf({x:35,y:24,scale:.35,rotationEnd:110}),r.flower({x:21.5,y:32.5,scale:.68,rotationStartOffset:-60}),r.flower({x:21.5,y:23.5,scale:.67,rotationStartOffset:-70}),r.flower({x:31,y:21,scale:.95,rotationStartOffset:50})];}function q(r,s){var t=new n(r,s);return c('Random').random()<.5?o(t):p(t);}f.exports={createFlowers:q,corners:j};}),null);
__d('MessagingFlowerBorder.react',['Image.react','MessagingFlowerCornerArrangements','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessagingFlowerBorder1=function(){return c('MessagingFlowerCornerArrangements').createFlowers(c('MessagingFlowerCornerArrangements').corners.TOP_LEFT,this.props.offset).concat(c('MessagingFlowerCornerArrangements').createFlowers(c('MessagingFlowerCornerArrangements').corners.BOTTOM_RIGHT,this.props.offset));}.bind(this),this.state={elements:this.$MessagingFlowerBorder1()},m;}k.prototype.render=function(){return c('React').createElement('div',null,this.state.elements.map(function(l,m){return c('React').createElement(c('Image.react'),{key:m,style:l.style,src:l.image});}));};k.propTypes={ChildClass:j.number};k.defaultProps={offset:0};f.exports=k;}),null);
__d('MessagingGiftWrap.react',['cx','MessengerEnvironment','React','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={unwrapped:false},this.$MessagingGiftWrap1=function(r){r.stopPropagation();this.setState({unwrapped:true});this.props.onUnwrap&&this.props.onUnwrap();}.bind(this),n;}l.prototype.render=function(){var m=c('MessengerEnvironment').messengerui;return c('React').createElement('div',{className:"_4p0m"+(this.state.unwrapped?' '+"_4p0o":'')+(m?' '+"_mxz":'')+(m?' '+"_4br2":'')+(!m?' '+"_3_om":'')+(this.props.isSticker?' '+"_52vq":''),onClick:this.$MessagingGiftWrap1,role:'presentation'},c('React').createElement('div',{className:"_4p0r"}),c('React').createElement('div',{className:"_4p0s _4p0t"}),c('React').createElement('div',{className:"_4p0s _4p0u"}));};l.propTypes={isSticker:k.bool,onUnwrap:k.func};l.defaultProps={onUnwrap:c('emptyFunction')};f.exports=l;}),null);
__d('MessengerSharedMediaReducer',['MessengerSharedMediaActions','MessengerThreadSharedMediaHelper','Set'],(function a(b,c,d,e,f,g){'use strict';var h=c('MessengerSharedMediaActions').Types;function i(r,s){switch(s.type){case h.LOAD_CURRENT:var t=r.get('sharedMedia').get(s.threadFBID);if(t){var u=t.edges.find(function(x){return x.node.legacy_attachment_id===s.photoID;});if(u)return r;}var v=r.get('isLoading').get(s.threadFBID);if(!!v&&v.curr)return r;var w=q(r,s.threadFBID,'curr',true);c('MessengerThreadSharedMediaHelper').search(s.threadFBID,s.photoID,function(x){return c('MessengerSharedMediaActions').currentLoaded(x);});return w;}return r;}function j(r,s){switch(s.type){case h.LOAD_MORE_PREVIOUS:var t=r.get('isLoading').get(s.threadFBID);if(!!t&&t.prev)return r;var u=q(r,s.threadFBID,'prev',true);if(u===null)return r;c('MessengerThreadSharedMediaHelper').loadMorePrevious(s.threadFBID,s.afterCursor,s.first,function(v){return c('MessengerSharedMediaActions').previousLoaded(v);});return u;}return r;}function k(r,s){switch(s.type){case h.LOAD_MORE_LATEST:var t=r.get('isLoading').get(s.threadFBID);if(!!t&&t.latest)return r;var u=q(r,s.threadFBID,'latest',true);if(u===null)return r;c('MessengerThreadSharedMediaHelper').loadMoreLatest(s.threadFBID,s.beforeCursor,s.last,function(v){return c('MessengerSharedMediaActions').latestLoaded(v);});return u;}return r;}function l(r,s){switch(s.type){case h.CURRENT_LOADED:var t=s.data,u=Object.keys(t)[0],v=t[u].message_shared_media,w=v.edges.length,x=q(r,u,'curr',false);if(w!==0){var y=p(r.get('sharedMedia').get(u),v,0),z=r.get('sharedMedia').set(u,y);x=x.set('sharedMedia',z);var aa=v.edges[0];c('MessengerThreadSharedMediaHelper').loadMorePrevious(u,aa.cursor,10,function(ba){return c('MessengerSharedMediaActions').previousLoaded(ba);});c('MessengerThreadSharedMediaHelper').loadMoreLatest(u,aa.cursor,10,function(ba){return c('MessengerSharedMediaActions').latestLoaded(ba);});}return x;}return r;}function m(r,s){switch(s.type){case h.PREVIOUS_LOADED:var t=s.data,u=Object.keys(t)[0],v=t[u].message_shared_media,w=q(r,u,'prev',false),x=p(r.get('sharedMedia').get(u),v,1),y=r.get('sharedMedia').set(u,x);w=w.set('sharedMedia',y);return w;}return r;}function n(r,s){switch(s.type){case h.LATEST_LOADED:var t=s.data,u=Object.keys(t)[0],v=t[u].message_shared_media,w=q(r,u,'latest',false),x=p(r.get('sharedMedia').get(u),v,-1),y=r.get('sharedMedia').set(u,x);w=w.set('sharedMedia',y);return w;}return r;}function o(r,s){switch(s.type){case h.DELETE_PHOTOS:var t=s.threadFBID,u=s.photoFBIDs,v=r.get('sharedMedia').get(t),w=new (c('Set'))(u.map(function(z){return z.toString();}));v.edges=v.edges.filter(function(z){return !w.has(z.node.legacy_attachment_id);});var x=r.get('sharedMedia').set(t,v),y=r.set('sharedMedia',x);return y;}return r;}function p(r,s,t){var u={};u.count=s.count;if(t===1&&r){var v=r.edges;u.has_previous_page=r.has_previous_page;u.has_next_page=s.page_info.has_next_page;if(s.edges.length>0){u.edges=v.concat(s.edges);}else u.edges=v;}else if(t===-1&&r){var w=r.edges;u.has_previous_page=s.page_info.has_previous_page;u.has_next_page=r.has_next_page;if(s.edges.length>0){u.edges=s.edges.concat(w);}else u.edges=w;}else{u.has_previous_page=s.page_info.has_previous_page;u.has_next_page=s.page_info.has_next_page;if(s.edges.length>0)u.edges=s.edges;}return u;}function q(r,s,t,u){var v=r.get('isLoading').get(s);if(v===undefined){v={};v[t]=u;}else v[t]=u;var w=r.set('isLoading',r.get('isLoading').set(s,v));return w;}f.exports={currentLoaded:l,deletePhotos:o,latestLoaded:n,loadCurrent:i,loadMoreLatest:k,loadMorePrevious:j,previousLoaded:m};}),null);
__d('MessengerSharedMediaState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={sharedMedia:c('immutable').Map({}),isLoading:c('immutable').Map({})};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerSharedMediaStore',['MessengerFluxReduceDispatcher','MessengerSharedMediaActions','MessengerSharedMediaReducer','MessengerSharedMediaState','FluxReduceStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=[].concat(Object.values(c('MessengerSharedMediaReducer')));h=babelHelpers.inherits(k,c('FluxReduceStore'));i=h&&h.prototype;k.prototype.getInitialState=function(){return new (c('MessengerSharedMediaState'))();};k.prototype.reduce=function(l,m){if(m.namespace!==c('MessengerSharedMediaActions').Namespace)return l;return j.reduce(function(n,o){return o(n,m);},l);};function k(){h.apply(this,arguments);}f.exports=new k(c('MessengerFluxReduceDispatcher'));}),null);
__d('messengerSharedPhotosAlbumViewPhotoReact',['bs_curry','React','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h=c('reactRe').Component[0],i=c('reactRe').Component[1],j=c('reactRe').Component[2],k=c('reactRe').Component[3],l=c('reactRe').Component[4],m=c('reactRe').Component[5],n=c('reactRe').Component[6],o=c('reactRe').Component[7],p="MessengerSharedPhotosAlbumViewPhotoReact";function q(aa,ba){var ca=aa[1];c('bs_curry')._1(ca[2],ca[1]);return 0;}function r(aa){var ba=aa[1];return c('React').createElement("a",{className:ba[0],style:{backgroundImage:"url("+(ba[3]+")")},href:"#",onClick:c('bs_curry')._1(aa[2],q)});}var s=c('reactRe').Component[8],t=c('reactRe').Component[9],u=c('reactRe').Component[10],v=[h,i,j,k,l,m,n,o,s,t,u,p,q,r],w=c('reactRe').CreateComponent([p,m,o,h,k,i,j,l,n,r]),x=w[1];function y(aa,ba,ca,da){return c('bs_curry')._1(x,[aa,ba,ca,da]);}var z=w[0];g.MessengerSharedPhotosAlbumViewPhoto=v;g.comp=z;g.wrapProps=x;g.createElement=y;}),null);
__d('messengerSharedPhotosAlbumViewVScrollReact',['cx','bs_array','bs_curry','React','reactRe','ReactDOM','Animation','bs_caml_array','bs_caml_builtin_exceptions','MessengerSharedMediaActions','messengerSharedPhotosAlbumViewPhotoReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reactRe').Component[10][7],j=i[1],k=i[2],l=i[3],m=i[5],n="MessengerSharedPhotosAlbumViewVScrollReact";function o(){return [0,0,0,0];}function p(ja){var ka=ja[2].length;if(ka<48){return c('MessengerSharedMediaActions').loadMorePrevious(ja[3],c('bs_caml_array').caml_array_get(ja[2],ja[2].length-1|0).cursor,48);}else return 0;}function q(ja){var ka=ja[1];if(ka){var la=ka[0];return +((la.scrollTop+la.clientHeight|0)>=(la.scrollHeight-20|0));}else throw c('bs_caml_builtin_exceptions').not_found;}function r(ja){var ka=ja[1];if(ka){return +(ka[0].scrollTop<=20);}else throw c('bs_caml_builtin_exceptions').not_found;}function s(ja,ka){var la=ja[4],ma=ja[1],na=ma[2].length,oa=ma[4];if(q(la)){if(na<oa&&!ma[0].prev)c('MessengerSharedMediaActions').loadMorePrevious(ma[3],c('bs_caml_array').caml_array_get(ma[2],ma[2].length-1|0).cursor,48);}else if(r(la)&&!ma[0].latest)c('MessengerSharedMediaActions').loadMoreLatest(ma[3],c('bs_caml_array').caml_array_get(ma[2],0).cursor,48);return 0;}function t(ja){var ka=ja[3];if(ka){return ka[0].clientHeight;}else throw c('bs_caml_builtin_exceptions').not_found;}function u(ja,ka){var la=ja[1];if(la){new (c('Animation'))(la[0]).to("scrollTop",ka).duration(200).go();return 0;}else return 0;}function v(ja){var ka=ja[2];if(ka){return u(ja,c('ReactDOM').findDOMNode(ka[0]).offsetTop-70|0);}else return 0;}function w(ja){var ka=ja[4],la=ja[2];p(ja[1]);var ma=ka[1];if(ma)ma[0].addEventListener("scroll",c('bs_curry')._1(la,s));if(!t(ka)){var na=function oa(pa,qa){var ra=pa[4];if(t(ra)>0){var sa=ra[0];if(sa)clearInterval(sa[0]);v(ra);}return 0;};ka[0]=[setInterval(c('bs_curry')._1(la,na),200)];}return 0;}function x(ja){var ka=ja[4],la=ka[1];if(la)la[0].removeEventListener("scroll",c('bs_curry')._1(ja[2],s));var ma=ka[0];if(ma){clearInterval(ma[0]);return 0;}else return 0;}function y(ja,ka){ja[4][1]=[ka];return 0;}function z(ja,ka){ja[4][3]=[ka];return 0;}function aa(ja,ka){ja[4][2]=[ka];return 0;}function ba(ja,ka){return c('bs_array').map(function(la){var ma=la.node,na=+(ma.legacy_attachment_id===ja[5]);return c('bs_curry')._4(c('messengerSharedPhotosAlbumViewPhotoReact').createElement("_3bly",ma.legacy_attachment_id,ja[1],ma.image1.uri),0,na!==0?[c('bs_curry')._1(ka,aa)]:0,[ma.legacy_attachment_id],0);},ja[2]);}function ca(ja){var ka=ja[3];return c('React').createElement("div",{ref:c('bs_curry')._1(ka,y),className:"_3xo8",onScroll:c('bs_curry')._1(ja[2],s)},c('React').createElement("div",{ref:c('bs_curry')._1(ka,z),className:"_3xoa"},ba(ja[1],ka)));}var da=[function(ja){return [ja.isLoading,ja.onClick,ja.sharedPhotos,ja.threadID,ja.totalCount,ja.viewedPhoto];}],ea=[j,k,l,m,n,200,48,6,20,70,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da],fa=c('reactRe').CreateComponent([n,o,m,w,l,j,k,x,da,ca]),ga=fa[1];function ha(ja,ka,la,ma,na,oa){return c('bs_curry')._1(ga,[ja,ka,la,ma,na,oa]);}var ia=fa[0];g.MessengerSharedPhotosAlbumViewVScroll=ea;g.comp=ia;g.wrapProps=ga;g.createElement=ha;}),null);
__d('MessengerSharedPhotosAlbumView.react',['cx','fbt','messengerSharedPhotosAlbumViewVScrollReact','MessengerPhotoViewCloseLink.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerSharedPhotosAlbumViewVScrollReact').comp,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerSharedPhotosAlbumView2=function(){this.props.onClick(this.props.viewedPhoto);}.bind(this),this.$MessengerSharedPhotosAlbumView1=function(){return c('React').createElement('div',{className:"_3bm0 _5l-3",ref:'header'},c('React').createElement('div',{className:"_3bm2",onClick:this.$MessengerSharedPhotosAlbumView2,role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_3bm3"}),i._("Back to Photo")),c('React').createElement('div',{className:"_3bm4"},i._("Shared photos")),c('React').createElement(c('MessengerPhotoViewCloseLink.react'),{onClick:this.props.onCloseSharedPhotos}));}.bind(this),p;}n.prototype.render=function(){return c('React').createElement('div',{className:"_3bl- _5l-3",ref:'window'},this.$MessengerSharedPhotosAlbumView1(),c('React').createElement(l,{isLoading:this.props.isLoading,onClick:this.props.onClick,sharedPhotos:this.props.sharedPhotos,threadID:this.props.threadID,totalCount:this.props.totalCount,viewedPhoto:this.props.viewedPhoto}));};n.propTypes={onClick:m.func.isRequired,onCloseSharedPhotos:m.func.isRequired,sharedPhotos:m.arrayOf(m.object).isRequired,totalCount:m.number.isRequired,viewedPhoto:m.string.isRequired,threadID:m.string.isRequired,isLoading:m.object.isRequired};f.exports=n;}),null);
__d('MessengerSharedPhotosAlbumViewContainer.react',['FluxContainer','MessengerSharedMediaStore','React','MessengerSharedPhotosAlbumView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={edges:[],count:0,isLoading:{}},m;}k.getStores=function(){return [c('MessengerSharedMediaStore')];};k.calculateState=function(l,m){var n=c('MessengerSharedMediaStore').getState(),o=n.sharedMedia;return {edges:o.get(m.threadID).edges,count:o.get(m.threadID).count,isLoading:n.isLoading.get(m.threadID)};};k.prototype.render=function(){if(this.state.edges.length===0)return null;return c('React').createElement(c('MessengerSharedPhotosAlbumView.react'),{onClick:this.props.onClick,onCloseSharedPhotos:this.props.onCloseSharedPhotos,sharedPhotos:this.state.edges,totalCount:this.state.count,viewedPhoto:this.props.viewedPhoto,threadID:this.props.threadID,isLoading:this.state.isLoading});};k.propTypes={onClick:j.func.isRequired,onCloseSharedPhotos:j.func.isRequired,viewedPhoto:j.string.isRequired,threadID:j.string};f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d('MessengerPhotoViewBottomBar.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){return c('React').createElement('div',{className:"_51an _50-m _16zz"},k.children);};f.exports=i;}),null);
__d('MessengerPhotoViewHScroll.react',['cx','Animation','MessengerSharedPhoto.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=200,m=80;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$MessengerPhotoViewHScroll1=null,p;}n.prototype.componentDidMount=function(){this.$MessengerPhotoViewHScroll2();};n.prototype.componentDidUpdate=function(){this.$MessengerPhotoViewHScroll2();};n.prototype.componentWillUnmount=function(){this.$MessengerPhotoViewHScroll1&&this.$MessengerPhotoViewHScroll1.stop();this.$MessengerPhotoViewHScroll1=null;};n.prototype.render=function(){var o=this.props.sharedPhotos,p=o.reduce(function(r,s){var t=s.node.image1===null?s.node.image:s.node.image1;if(t)r.push(c('React').createElement('div',{className:"_4dy9",key:s.node.legacy_attachment_id},c('React').createElement(c('MessengerSharedPhoto.react'),{className:"_42rl"+(this.props.photoID!==s.node.legacy_attachment_id?' '+"_q1a":''),fbid:s.node.legacy_attachment_id,onClick:this.props.onScroll,uri:t.uri})));return r;}.bind(this),[]),q=(this.props.width-m)/2;return c('React').createElement('div',{className:"_463g"},c('React').createElement('div',{className:"_463h",ref:'childContainer'},c('React').createElement('div',{className:"_463j",style:{paddingLeft:q,paddingRight:q},ref:'scrollable'},p)));};n.prototype.$MessengerPhotoViewHScroll2=function(){var o=this.refs.childContainer?this.refs.childContainer.scrollLeft:0,p=this.props.sharedPhotos.findIndex(function(r){return r.node.legacy_attachment_id===this.props.photoID;}.bind(this)),q=p*m;if(!this.$MessengerPhotoViewHScroll1)this.$MessengerPhotoViewHScroll1=new (c('Animation'))(this.refs.childContainer);this.$MessengerPhotoViewHScroll1.from('scrollLeft',o).to('scrollLeft',q).duration(l).go();};f.exports=n;}),null);
__d('MessengerPhotoViewHeader.react',['cx','fbt','MessagingForwardingButtonNUX.react','MessengerActions','MessengerPhotoInfoDialogContainer.react','React','SpotlightViewerBottomBarLink','MessengerPhotoViewCloseLink.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerPhotoViewHeader3=function(){if(this.refs.forwardNUX)this.refs.forwardNUX.close();this.props.showForwardDialog&&this.props.showForwardDialog();}.bind(this),this.$MessengerPhotoViewHeader2=function(){return c('React').createElement(c('MessengerPhotoViewCloseLink.react'),{onClick:this.props.onClose});}.bind(this),o;}m.prototype.render=function(){return c('React').createElement('div',{className:"_51an _50-m _3c1i _5l-3",role:'banner'},this.$MessengerPhotoViewHeader1(),this.$MessengerPhotoViewHeader2());};m.prototype.$MessengerPhotoViewHeader1=function(){var n=void 0,o=void 0;if(!this.props.disableForward){n=c('React').createElement(c('SpotlightViewerBottomBarLink'),{className:"_3c1o",onClick:this.$MessengerPhotoViewHeader3,ref:'forwardButton'},c('React').createElement('div',{className:"_2msr _3oo2"}),i._("Forward"));o=c('React').createElement(c('MessagingForwardingButtonNUX.react'),{contextRef:function(){return this.refs.forwardButton;}.bind(this),ref:'forwardNUX'},i._("Send this image to other people in separate messages."));}return c('React').createElement('div',{key:'buttonsContainer',ref:'buttons'},c('React').createElement(c('SpotlightViewerBottomBarLink'),{ajaxify:this.props.url,className:"_3c1o",rel:'async'},c('React').createElement('div',{className:"_3ooo _2msr"}),i._("Download")),n,o,c('React').createElement(c('SpotlightViewerBottomBarLink'),{className:"_3c1o",href:'#',onClick:this.props.openInfo,ref:'moreInfo'},c('React').createElement('div',{className:"_3c1k _2msr"}),i._("Info")));};m.propTypes={disableForward:l.bool,onClose:l.func,openInfo:l.func,photoID:l.string,showForwardDialog:l.func,url:l.object};f.exports=m;}),null);
__d('SpotlightMessengerSharedMediaViewer.react',['csx','cx','fbt','invariant','ActorURI','MessengerPhotoViewHScroll.react','Event','KeyEventController','messengerForwardAttachmentDialogReact','MessengerPhotoInfoDialogContainer.react','MessengerPhotoViewHeader.react','MessengerSharedMediaActions','MessengerVideoPlayer.react','Parent','PhotoUtils','React','SpotlightViewer','SpotlightViewerImage','SpotlightMessagesViewerPagers.react','SpotlightViewport','SubscriptionsHandler','Vector','XMessagingPhotoDownloadController','MessengerPhotoViewBottomBar.react'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('messengerForwardAttachmentDialogReact').comp,o=c('React').PropTypes,p=88,q=80,r=30,s="_4-og";l=babelHelpers.inherits(t,c('React').Component);m=l&&l.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=m.constructor).call.apply(u,[this].concat(x)),this.$SpotlightMessengerSharedMediaViewer1=undefined,this.$SpotlightMessengerSharedMediaViewer2=[],this.state={photoData:null,showForward:false,showInfo:false,stageDimensions:new (c('Vector'))()},this.$SpotlightMessengerSharedMediaViewer14=function(z){if(!this.props.sharedMedia)return;var aa=this.props.sharedMedia.findIndex(function(ca){return ca.node.legacy_attachment_id===z;});if(aa<0)return;var ba=this.props.sharedMedia[aa];this.setState({photoData:ba});this.$SpotlightMessengerSharedMediaViewer17(aa);}.bind(this),this.$SpotlightMessengerSharedMediaViewer4=function(z,event){if(this.state.photoData==null)return;var aa=this.state.photoData;if(event&&!!c('Parent').bySelector(event.target,"._3tsq"))return;if(event&&event.target instanceof HTMLElement&&event.target.className===s)this.$SpotlightMessengerSharedMediaViewer7();var ba=this.props.sharedMedia.findIndex(function(da){return da.node.legacy_attachment_id===aa.node.legacy_attachment_id;});if(ba<0||ba===this.props.sharedMedia.length-1&&!this.props.hasNextPage&&z)return;if(ba===0&&!z){c('MessengerSharedMediaActions').loadMoreLatest(this.props.threadID,this.props.sharedMedia[0].cursor,r);return;}var ca=z?this.props.sharedMedia[ba+1]:this.props.sharedMedia[ba-1];this.setState({photoData:ca});this.$SpotlightMessengerSharedMediaViewer17(ba);}.bind(this),this.$SpotlightMessengerSharedMediaViewer7=function(){if(this.props.photoID===null)return;this.setState({photoData:null});this.props.onClosePhotoView();}.bind(this),this.$SpotlightMessengerSharedMediaViewer12=function(){this.setState({showForward:true});}.bind(this),this.$SpotlightMessengerSharedMediaViewer15=function(){this.setState({showForward:false});}.bind(this),this.$SpotlightMessengerSharedMediaViewer11=function(){this.setState({showInfo:true});}.bind(this),this.$SpotlightMessengerSharedMediaViewer16=function(){this.setState({showInfo:false});}.bind(this),v;}t.prototype.componentDidMount=function(){var u=this.props.sharedMedia.find(function(v){return v.node.legacy_attachment_id===this.props.photoID;}.bind(this));this.setState({photoData:u,stageDimensions:this.$SpotlightMessengerSharedMediaViewer3()});this.$SpotlightMessengerSharedMediaViewer1=new (c('SubscriptionsHandler'))();this.$SpotlightMessengerSharedMediaViewer1.addSubscriptions(c('Event').listen(window,'resize',function(){this.setState({stageDimensions:this.$SpotlightMessengerSharedMediaViewer3()});}.bind(this)),c('KeyEventController').registerKey('LEFT',function(){this.$SpotlightMessengerSharedMediaViewer4(false);return false;}.bind(this)),c('KeyEventController').registerKey('RIGHT',function(){this.$SpotlightMessengerSharedMediaViewer4(true);return false;}.bind(this)));};t.prototype.componentWillUnmount=function(){this.$SpotlightMessengerSharedMediaViewer1&&this.$SpotlightMessengerSharedMediaViewer1.release();this.$SpotlightMessengerSharedMediaViewer1=null;this.$SpotlightMessengerSharedMediaViewer2.forEach(function(u){return u.abandon();});};t.prototype.render=function(){var u=this.$SpotlightMessengerSharedMediaViewer5(),v=this.state.stageDimensions,w=this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var x=this.props.sharedMedia.findIndex(function(z){this.state.photoData!=null||k(0);return z.node.id===this.state.photoData.node.id;}.bind(this)),y=c('React').createElement('div',null,this.$SpotlightMessengerSharedMediaViewer6(),this.props.disablepaging?null:c('React').createElement(c('SpotlightMessagesViewerPagers.react'),{disablePrevArrow:x<=0&&!this.props.hasPrevPage,disableNextArrow:!this.props.hasNextPage&&x>=this.props.sharedMedia.length-1}));return c('React').createElement('span',null,c('React').createElement(c('SpotlightViewer'),{className:"_53vs",onHide:this.$SpotlightMessengerSharedMediaViewer7,open:this.props.photoID!==null,ref:'spotlightViewer',rootClassName:this.props.rootClassName},c('React').createElement(c('SpotlightViewport'),{active:false,fadeInNOut:true,media:u,onClick:this.$SpotlightMessengerSharedMediaViewer4,ref:'viewport',showLoadingIndicator:w,stageDimensions:v,useWidth:true},y),this.$SpotlightMessengerSharedMediaViewer8()),this.$SpotlightMessengerSharedMediaViewer9(),this.$SpotlightMessengerSharedMediaViewer10());};t.prototype.$SpotlightMessengerSharedMediaViewer6=function(){if(!this.state.photoData)return null;var u=this.state.photoData.node.legacy_attachment_id,v=c('XMessagingPhotoDownloadController').getURIBuilder().setString('photo_id',u).getURI();if(this.props.actorid)v=c('ActorURI').create(v,this.props.actorid);return c('React').createElement(c('MessengerPhotoViewHeader.react'),{disableForward:this.props.disableForward,onClose:this.$SpotlightMessengerSharedMediaViewer7,openInfo:this.$SpotlightMessengerSharedMediaViewer11,photoID:this.props.photoID,ref:'photoviewheader',showForwardDialog:this.$SpotlightMessengerSharedMediaViewer12,url:v});};t.prototype.$SpotlightMessengerSharedMediaViewer13=function(u){return u?Math.ceil(u/q):r;};t.prototype.$SpotlightMessengerSharedMediaViewer8=function(){if(!this.state.photoData)return null;var u=this.state.photoData,v=c('React').createElement('button',{className:"_2n5b",onClick:function(){return this.props.openAlbum(u.node.legacy_attachment_id);}.bind(this),type:'button'},c('React').createElement('div',{className:"_3por"}));return c('React').createElement(c('MessengerPhotoViewBottomBar.react'),null,c('React').createElement(c('MessengerPhotoViewHScroll.react'),{onScroll:this.$SpotlightMessengerSharedMediaViewer14,photoID:u.node.legacy_attachment_id,sharedPhotos:this.props.sharedMedia,width:this.state.stageDimensions.x}),v);};t.prototype.$SpotlightMessengerSharedMediaViewer9=function(){if(!this.state.photoData||this.props.disableForward)return null;var u=j._("Forward in separate messages");return c('React').createElement(n,{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$SpotlightMessengerSharedMediaViewer15,shown:this.state.showForward,title:u});};t.prototype.$SpotlightMessengerSharedMediaViewer10=function(){return this.state.showInfo?c('React').createElement(c('MessengerPhotoInfoDialogContainer.react'),{closeInfo:this.$SpotlightMessengerSharedMediaViewer16,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):c('React').createElement('xhp',null);};t.prototype.$SpotlightMessengerSharedMediaViewer17=function(u){var v=this.$SpotlightMessengerSharedMediaViewer13(this.state.stageDimensions.x),w=this.props.sharedMedia;if(u<=v/2){c('MessengerSharedMediaActions').loadMoreLatest(this.props.threadID,w[0].cursor,v);if(w.length<v&&this.props.hasNextPage)c('MessengerSharedMediaActions').loadMorePrevious(this.props.threadID,w[w.length-1].cursor,v);}else if(u>=w.length-v/2&&this.props.hasNextPage)c('MessengerSharedMediaActions').loadMorePrevious(this.props.threadID,w[w.length-1].cursor,v);};t.prototype.$SpotlightMessengerSharedMediaViewer3=function(){var u=new (c('Vector'))(c('Vector').getViewportDimensions().x,c('Vector').getViewportDimensions().y-p);return u;};t.prototype.$SpotlightMessengerSharedMediaViewer5=function(){if(this.state.photoData&&this.state.photoData.node){var u=this.state.photoData.node;if(u.__typename&&u.__typename==='MessageVideo')return this.$SpotlightMessengerSharedMediaViewer18();var v=this.state.stageDimensions,w=this.$SpotlightMessengerSharedMediaViewer19(u,v);if(!w)return null;var x=t.getImageDimensionsForStage(new (c('Vector'))(w.width,w.height),v);return this.$SpotlightMessengerSharedMediaViewer20(w,x);}else return null;};t.prototype.$SpotlightMessengerSharedMediaViewer18=function(){if(this.state.photoData)return c('React').createElement(c('MessengerVideoPlayer.react'),{isVisible:true,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions});return null;};t.prototype.$SpotlightMessengerSharedMediaViewer20=function(u,v){return c('React').createElement(c('SpotlightViewerImage'),{dimensions:v,ref:'image',src:u.uri});};t.prototype.$SpotlightMessengerSharedMediaViewer19=function(u,v){var w=null,x=c('PhotoUtils').getImagesFromData(u);x=x.sort(function(z,aa){return aa.width-z.width;});if(window.devicePixelRatio&&window.devicePixelRatio>1)v=new (c('Vector'))(v.x*window.devicePixelRatio,v.y*window.devicePixelRatio);for(var y=0;y<x.length;y++)if(!w||x[y].width>=v.x||x[y].height>=v.y)w=x[y];return w;};t.propTypes={disableForward:o.bool,hasPrevPage:o.bool,hasNextPage:o.bool,onClosePhotoView:o.func,openAlbum:o.func,photoID:o.string,rootClassName:o.string,threadID:o.string,sharedMedia:o.arrayOf(o.object)};t.getImageDimensionsForStage=function(u,v){var w=u.x,x=u.y,y=v.x,z=v.y,aa=w/x,ba=y/z;if(w>=y||x>=z){if(ba<aa){w=y;x=Math.round(y/aa);}else if(ba>aa){w=Math.round(z*aa);x=z;}else{w=y;x=z;}}else if(aa<ba){w=Math.round(x*aa);}else x=Math.round(w/aa);return new (c('Vector'))(w,x);};f.exports=t;}),null);
__d('SpotlightMessengerSharedMediaViewerContainer.react',['FluxContainer','MessengerSharedMediaStore','MessengerSharedMediaActions','React','SpotlightMessengerSharedMediaViewer.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MessengerSharedMediaStore')];};j.calculateState=function(k,l){var m=c('MessengerSharedMediaStore').getState(),n=m.sharedMedia.get(l.threadID),o=m.isLoading.get(l.threadID);return {sharedMedia:n,isLoading:o};};j.prototype.componentDidMount=function(){c('MessengerSharedMediaActions').loadCurrent(this.props.threadID,this.props.photoID);};j.prototype.render=function(){if(!this.state.sharedMedia)return null;var k=this.state.sharedMedia&&this.state.sharedMedia.edges.find(function(l){return l.node.legacy_attachment_id===this.props.photoID;}.bind(this));if(!k)return null;return c('React').createElement(c('SpotlightMessengerSharedMediaViewer.react'),{disableForward:this.props.disableForward,hasPrevPage:this.state.sharedMedia&&this.state.sharedMedia.has_previous_page,hasNextPage:this.state.sharedMedia&&this.state.sharedMedia.has_next_page,onClosePhotoView:this.props.onClosePhotoView,openAlbum:this.props.openAlbum,photoID:this.props.photoID,rootClassName:this.props.rootClassName,sharedMedia:this.state.sharedMedia&&this.state.sharedMedia.edges,threadID:this.props.threadID});};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('MessengerThreadSharedPhotos.react',['cx','MessengerSharedPhotosAlbumViewContainer.react','React','SpotlightViewer','SpotlightMessengerSharedMediaViewerContainer.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={photoView:this.props.findFBID,albumView:''},this.$MessengerThreadSharedPhotos3=function(r){this.setState({albumView:r,photoView:''});}.bind(this),this.$MessengerThreadSharedPhotos4=function(){this.setState({albumView:''});}.bind(this),this.$MessengerThreadSharedPhotos5=function(r){this.setState({albumView:'',photoView:r});}.bind(this),this.$MessengerThreadSharedPhotos6=function(){this.setState({photoView:''});}.bind(this),this.$MessengerThreadSharedPhotos7=function(r){this.setState({photoView:r});}.bind(this),n;}l.prototype.componentDidUpdate=function(){!this.state.photoView&&!this.state.albumView&&this.props.onCloseSharedPhotos();};l.prototype.render=function(){var m=this.state.photoView?this.$MessengerThreadSharedPhotos1():null,n=this.state.albumView?this.$MessengerThreadSharedPhotos2():null;return c('React').createElement('div',null,n,m);};l.prototype.$MessengerThreadSharedPhotos1=function(){return c('React').createElement(c('SpotlightMessengerSharedMediaViewerContainer.react'),{disableForward:false,onClosePhotoView:this.$MessengerThreadSharedPhotos6,openAlbum:this.$MessengerThreadSharedPhotos3,photoID:this.state.photoView,rootClassName:'',threadID:this.props.threadFBID});};l.prototype.$MessengerThreadSharedPhotos2=function(){return c('React').createElement(c('SpotlightViewer'),{className:"_3ode",onHide:this.$MessengerThreadSharedPhotos4,open:true,ref:'spotlightViewer'},c('React').createElement(c('MessengerSharedPhotosAlbumViewContainer.react'),{onClick:this.$MessengerThreadSharedPhotos5,onCloseSharedPhotos:this.props.onCloseSharedPhotos,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView}));};l.propTypes={findFBID:k.string,onCloseSharedPhotos:k.func,threadFBID:k.string};f.exports=l;}),null);
__d('MessengerVideo.react',['cx','ix','Image.react','MessengerPhoto.react','MessengerVideoPlayer.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=1800;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerVideo5=function(){this.props.onClick&&this.props.onClick(this.props.attachment);}.bind(this),p;}n.prototype.render=function(){var o=this.$MessengerVideo1(this.props.attachment),p=this.$MessengerVideo2(o);return p?p:c('React').createElement(c('MessengerPhoto.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_ccq")}),c('React').createElement(c('Image.react'),{className:"_ccr",src:i("27983")}),c('React').createElement('span',{className:"_ccs"},this.$MessengerVideo3()));};n.prototype.$MessengerVideo3=function(){var o=void 0;if(this.props.attachment.metadata){o=this.props.attachment.metadata.duration;}else if(this.props.attachment.media)o=this.props.attachment.media.duration;return o?this.$MessengerVideo4(o):null;};n.prototype.$MessengerVideo2=function(o){if(!o.legacy_attachment_id)return null;return c('React').createElement(c('MessengerVideoPlayer.react'),{attachment:this.props.attachment,videoData:o,isInThread:true,isVisible:this.props.isVisible,onClick:this.$MessengerVideo5,onSelect:this.props.onSelect,className:c('joinClasses')(this.props.className,"_ccq"+(' '+"_4tsk")+(' '+"_3o67")+(this.props.isSingle?' '+"_52mr":''))});};n.prototype.$MessengerVideo1=function(o){var p=null,q=null,r=null;if(o.metadata&&o.metadata.fbid){var s=window.screen.width>m&&o.metadata.large_size&&o.metadata.large_preview;p=o.metadata.fbid;var t=s?o.metadata.large_size:o.metadata.inbox_size;q=t?{x:t.width,y:t.height}:{x:0,y:0};r=s?o.metadata.large_preview:o.metadata.inbox_preview;}return {legacy_attachment_id:p,original_dimensions:q,start_muted:true,hide_controls_on_finish:true,url:r,is_share:false};};n.prototype.$MessengerVideo4=function(o){var p=o%60;return Math.floor(o/60)+':'+(p<10?'0':'')+p;};n.propTypes={attachment:l.object.isRequired,isSingle:l.bool.isRequired,isVisible:l.bool,onClick:l.func,onSelect:l.func};f.exports=n;}),null);
__d('MessengerXMATextBlock.react',['cx','LineClamp.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=26;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerXMATextBlock1=function(){this.props.url&&window.open(this.props.url);}.bind(this),o;}m.prototype.render=function(){if(!this.props)return c('React').createElement('div',{className:"__6j"});var n=this.props.width?{maxWidth:this.props.width-l,textAlign:'left'}:{textAlign:'left'},o={textDecoration:'none'};return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"__6j _43kk"),style:n},c('React').createElement('a',{onClick:this.$MessengerXMATextBlock1,role:'button',style:o,tabIndex:'0'},this.renderTitle(),this.renderDescription(),this.renderSource()));};m.prototype.renderTitle=function(){if(!this.props.title)return null;return c('React').createElement('div',{className:"__6k"},c('React').createElement(c('LineClamp.react'),{lines:2,lineHeight:16},this.props.title));};m.prototype.renderDescription=function(){if(!this.props.description)return null;return c('React').createElement('div',{className:"__6l"},c('React').createElement(c('LineClamp.react'),{lines:2,lineHeight:15},this.props.description));};m.prototype.renderSource=function(){if(!this.props.source)return null;return c('React').createElement('div',{className:"__6m"},c('React').createElement(c('LineClamp.react'),{lines:1,lineHeight:14},this.props.source));};m.propTypes={className:k.string,description:k.string,source:k.string,title:k.string,url:k.string,width:k.number};f.exports=m;}),null);
__d('MessengerVideoXMA.react',['cx','MessengerVideoPlayer.react','MessengerXMATextBlock.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=640,m=450,n=1800;i=babelHelpers.inherits(o,c('React').PureComponent);j=i&&i.prototype;o.prototype.render=function(){var p=this.$MessengerVideoXMA1(this.props.attachment),q=this.$MessengerVideoXMA2(p);return c('React').createElement('div',{className:"_3duc"},q,this.$MessengerVideoXMA3(p&&p.original_dimensions));};o.prototype.$MessengerVideoXMA2=function(p){return p?c('React').createElement(c('MessengerVideoPlayer.react'),{attachment:this.props.attachment,videoData:p,isInThread:true,isVisible:this.props.isVisible,onSelect:this.props.onSelect,className:c('joinClasses')(this.props.className,"_ccq"+(' '+"_4tsk")+(' '+"_3o67")+(' '+"_52mr"))}):null;};o.prototype.$MessengerVideoXMA1=function(p){if(!p.media||!p.media.image_size||!p.target||!p.target.video_id)return null;var q=p.media.image_size;return {legacy_attachment_id:p.target.video_id,original_dimensions:this.$MessengerVideoXMA4(q),start_muted:true,hide_controls_on_finish:true,url:p.media.image,is_share:true};};o.prototype.$MessengerVideoXMA4=function(p){var q=Math.max(p.width,p.height),r=window.screen.width>n?l:m;if(q<=r)return {x:p.width,y:p.height};var s=r/q,t=Math.floor(p.width*s),u=Math.floor(p.height*s);return {x:t,y:u};};o.prototype.$MessengerVideoXMA3=function(p){var q=this.props.attachment;return c('React').createElement(c('MessengerXMATextBlock.react'),{className:"_2f5n _4br2 _29ew _3dug",description:q.description,source:q.source,title:q.video_title,url:q.uri,width:p&&p.x});};function o(){i.apply(this,arguments);}o.propTypes={attachment:k.object.isRequired,isVisible:k.bool,onClick:k.func,onSelect:k.func};f.exports=o;}),null);
__d('MessengerPhotosGroup.react',['cx','ActorURI','ChatSpeakingSticker.react','MercuryAttachment','MercuryAttachmentType','MercuryIDs','MessagingGiftWrap.react','MessagingFlowerBorder.react','MessengerAttachmentViewer','MessengerPhoto.react','MessengerVideo.react','MessengerVideoXMA.react','MessagesViewerSetID','React','MessengerThreadSharedPhotos.react','URI','Vector','getPageIDFromThreadID','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k='empty-spacer',l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={findID:null},this.$MessengerPhotosGroup4=function(s){this.setState({findID:s});}.bind(this),this.$MessengerPhotosGroup5=function(){this.setState({findID:null});}.bind(this),this.$MessengerPhotosGroup6=function(s){if(s.preview_uploading)return;if(s.attach_type===c('MercuryAttachmentType').VIDEO){c('MessengerAttachmentViewer').renderVideo({pageID:this.props.pageID,rootClassName:"_1j1h",videoID:s.metadata.fbid,videoSize:new (c('Vector'))(s.metadata.dimensions.width,s.metadata.dimensions.height),videoURI:s.url});}else if(s.attach_type===c('MercuryAttachmentType').PHOTO||s.attach_type===c('MercuryAttachmentType').THIRDPARTYSTICKER||s.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE){var t=this.props.attachments.length===1,u=s.url,v=null;if(!this.props.isXMA&&s.attach_type===c('MercuryAttachmentType').PHOTO&&this.props.count){var w=this.props.count,x=this.props.message,y=x&&x.thread_fbid;if(x&&!y)y=c('MercuryIDs').getThreadFBIDFromThreadID(x.thread_id);t=w===1;u=new (c('URI'))('/ajax/messaging/attachments/sharedphotos.php').setQueryData({thread_id:y,image_id:s.metadata.fbid});if(this.props.pageID)u=new (c('ActorURI').create)(u,this.props.pageID);v=c('MessagesViewerSetID').MESSAGES_VIEW_ALL_IN_THREAD;}c('MessengerAttachmentViewer').bootstrapWithConfig({actorid:this.props.pageID,dimensions:s.metadata.dimensions,disableForward:!!this.props.pageID,disablePaging:t,endpoint:u,fbid:s.metadata.fbid,rootClassName:"_1j1h",setID:v,snapToPhoto:true,src:s.preview_url});}else if(s.uri)window.open(s.uri);}.bind(this),o;}m.prototype.componentDidMount=function(){c('MessengerAttachmentViewer').preload();};m.prototype.render=function(){var n=this.props.attachments,o=this.props.message?!!c('getPageIDFromThreadID')(this.props.message.thread_id):false,p=this.$MessengerPhotosGroup1(n,o);if(this.props.isGiftWrapped)p=c('React').createElement('div',null,p);var q=this.state.findID?this.$MessengerPhotosGroup2():null;return c('React').createElement('div',babelHelpers['extends']({},this.props,{tabIndex:'0',className:this.$MessengerPhotosGroup3(n)}),q,p,this.props.isGiftWrapped?c('React').createElement(c('MessagingGiftWrap.react'),{onUnwrap:this.props.onUnwrap}):null,this.props.hasFlowerBorder?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null);};m.prototype.$MessengerPhotosGroup2=function(){var n=this.props.message,o=n&&n.thread_fbid;if(n&&!o)o=c('MercuryIDs').getThreadFBIDFromThreadID(n.thread_id);return c('React').createElement(c('MessengerThreadSharedPhotos.react'),{findFBID:String(this.state.findID.metadata.fbid),backUpClick:this.$MessengerPhotosGroup6,onCloseSharedPhotos:this.$MessengerPhotosGroup5,threadFBID:o});};m.prototype.$MessengerPhotosGroup1=function(n,o){if(n.length===1)return [this.$MessengerPhotosGroup7(n[0],o,true)];var p=3;if(n.length===2||n.length===4)p=2;var q=[];for(var r=0,s=n.length;r<s;r+=p){var t=n.slice(r,r+p),u=p-t.length;while(u>0){t.push({attach_type:k,key:'ghost'+u});u--;}q.push(c('React').createElement('div',{className:"_2n8g",key:r},t.map(function(v){return this.$MessengerPhotosGroup7(v,o);}.bind(this))));}return q;};m.prototype.$MessengerPhotosGroup7=function(n,o,p){var q=void 0;if(n.deduplication_key){q=n.deduplication_key;}else if(n.metadata){q=n.metadata.fbid;}else q=n.upload_id;var r={attachment:n,isSingle:p||false,key:q,onAttachmentLoad:this.props.onAttachmentLoad,onClick:!o&&!this.props.isPageMessage&&n.metadata&&n.metadata.fbid&&!c('MercuryAttachment').hasAttribution(n)?this.$MessengerPhotosGroup4:this.$MessengerPhotosGroup6},s=this.props.attachType||n.attach_type;switch(s){case c('MercuryAttachmentType').PHOTO:case c('MercuryAttachmentType').ANIMATED_IMAGE:case c('MercuryAttachmentType').THIRDPARTYSTICKER:return c('React').createElement(c('MessengerPhoto.react'),r);case c('MercuryAttachmentType').VIDEO:if(n.metadata&&n.metadata.render_as_sticker){return c('React').createElement(c('ChatSpeakingSticker.react'),{videoSize:n.metadata.dimensions,videoURI:n.url});}else if(this.props.isXMA)return c('React').createElement(c('MessengerVideoXMA.react'),babelHelpers['extends']({},r,{isVisible:this.props.isVisible,onSelect:this.props.onSelect}));return c('React').createElement(c('MessengerVideo.react'),babelHelpers['extends']({},r,{isVisible:this.props.isVisible,onSelect:this.props.onSelect}));case k:return c('React').createElement('div',{key:n.key,className:"_4tsk _4rf-"});default:throw new Error(n.attachType+' is not handled by MessengerPhotoGroup');}};m.prototype.$MessengerPhotosGroup3=function(n){var o=n.length===2||n.length===4;return c('joinClasses')(this.props.className,"_2n8h"+(n.length===1?' '+"_2n8i":'')+(o?' '+"_4ksk":'')+(n.length>1&&!o?' '+"_2n8k":'')+(' '+"_5fk1"));};m.prototype.$MessengerPhotosGroup8=function(n){var o=[];n.forEach(function(p){if(p.metadata&&p.metadata.fbid)o.push(p.metadata.fbid.toString());});return o;};m.propTypes={attachments:l.arrayOf(l.object).isRequired,attachType:l.string,count:l.number,hasFlowerBorder:l.bool,isGiftWrapped:l.bool,isPageMessage:l.bool,isXMA:l.bool,isVisible:l.bool,message:l.object,onAttachmentLoad:l.func,onSelect:l.func,onUnwrap:l.func,pageID:l.string};f.exports=m;}),null);