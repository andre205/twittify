if (self.CavalryLogger) { CavalryLogger.start_js(["a7hqy"]); }

__d('ServerHTML.react',['React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){'use strict';var k=this.props,l=k.blob,m=babelHelpers.objectWithoutProperties(k,['blob']);return typeof l==='string'?c('React').createElement('div',m,l):c('React').createElement('div',babelHelpers['extends']({},m,{dangerouslySetInnerHTML:l}));};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('P2PMercuryAttachmentGroupBubble.react',['cx','fbt','BackgroundImage.react','FacepileRounded.react','MessengerEnvironment','Middot.react','Link.react','P2PAcceptMoneyDialog.react','P2PActions','P2PBigAmount.react','P2PEncryptedText.react','P2PGKValues','P2PPaymentRequest','P2PPaymentRequestStatus','P2PText.react','React','ServerHTML.react','URI','XUIText.react','idx','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.onAcceptMoneyClick=function(){c('P2PActions').showDialog(c('P2PAcceptMoneyDialog.react'),{creditCards:[],onClose:this.onAcceptMoneyDialogClose,transfer:this.props.pendingTransfer});}.bind(this),n;}l.prototype.getRequestProfile=function(m){var n=m.requestee||{};return {image_src:n.picture,name:n.full_name};};l.prototype.getStatusMap=function(){var m;return this.props.individualRequests.reduce(function(n,o){switch(o.currentStatus){case c('P2PPaymentRequestStatus').EXPIRED:case c('P2PPaymentRequestStatus').DECLINED:case c('P2PPaymentRequestStatus').TRANSFER_COMPLETED:n[o.currentStatus]++;break;default:n[c('P2PPaymentRequestStatus').INITED]++;break;}return n;},(m={},m[c('P2PPaymentRequestStatus').DECLINED]=0,m[c('P2PPaymentRequestStatus').EXPIRED]=0,m[c('P2PPaymentRequestStatus').INITED]=0,m[c('P2PPaymentRequestStatus').TRANSFER_COMPLETED]=0,m));};l.prototype.hasPaid=function(m){return !!m[c('P2PPaymentRequestStatus').TRANSFER_COMPLETED];};l.prototype.isPendingPush=function(){if(!c('P2PGKValues').P2PGroupRequestAcceptMoneyEnabled)return false;return !!this.props.isSender&&!!this.props.pendingTransfer;};l.prototype.paidReuqestFilter=function(m){return m.currentStatus===c('P2PPaymentRequestStatus').TRANSFER_COMPLETED;};l.prototype.renderBigAmount=function(){return c('React').createElement('div',{className:"_3-8p _52jv"},c('React').createElement(c('P2PBigAmount.react'),{amount:this.props.amount,isPending:this.props.isPending}));};l.prototype.onAcceptMoneyDialogClose=function(){c('P2PActions').hideDialog();};l.prototype.renderBannerFooter=function(m){if(m)return c('React').createElement(c('Link.react'),{className:"_5qd8",onClick:this.onAcceptMoneyClick},c('React').createElement(c('XUIText.react'),{className:"_4o8z",display:'block',size:'large'},i._("Accept Money")));if(!this.props.bannerContent)return null;return c('React').createElement('div',{className:"_5qco"},this.props.bannerContent);};l.prototype.renderDeclinedStatus=function(m){var n=m[c('P2PPaymentRequestStatus').DECLINED];if(!n)return null;var o=this.hasPaid(m);return c('React').createElement('span',null,this.renderMiddot(o),i._("{count} declined",[i.param('count',n)]));};l.prototype.renderDescription=function(){var m,n=(m=this.props)!=null?(m=m.statusDescription)!=null?m.markup:m:m;if(!n)return null;return c('React').createElement(c('P2PText.react'),{className:"_3-8o _52jv",type:'primary'},c('React').createElement(c('ServerHTML.react'),{blob:n}));};l.prototype.renderEncryptedText=function(m){if(!m)return null;return c('React').createElement(c('P2PText.react'),{className:"_52jv",shade:'light',type:'secondary'},c('React').createElement(c('P2PEncryptedText.react'),{showPasswordProtected:true}));};l.prototype.renderExpiredStatus=function(m){var n=m[c('P2PPaymentRequestStatus').EXPIRED];if(!n)return null;var o=!!m[c('P2PPaymentRequestStatus').DECLINED],p=o||this.hasPaid(m);return c('React').createElement('span',null,this.renderMiddot(p),i._("{count} expired",[i.param('count',n)]));};l.prototype.renderMemoPhoto=function(){var m=this.props.memoPhotoUrls&&this.props.memoPhotoUrls[0];if(!c('P2PGKValues').P2PWWWMemoPhotoEligible||!m)return null;var n=192,o=100;if(this.props.isMessagesView){n=220;o=110;}else if(c('MessengerEnvironment').messengerui){n=350;o=120;}return c('React').createElement(c('BackgroundImage.react'),{className:"_rou",width:n,height:o,backgroundSize:'cover',src:m});};l.prototype.renderMiddot=function(m){if(!m)return null;return c('React').createElement(c('Middot.react'),null);};l.prototype.renderPaidPeople=function(){var m=this.props.individualRequests.filter(this.paidReuqestFilter).map(this.getRequestProfile);return c('React').createElement(c('FacepileRounded.react'),{imageSize:16,numProfilesToDisplay:3,profiles:m,showNames:true});};l.prototype.renderPaidStatus=function(m){var n=m[c('P2PPaymentRequestStatus').TRANSFER_COMPLETED];if(!n)return null;return c('React').createElement('span',null,this.renderPaidPeople(),i._("{count} paid",[i.param('count',n)]));};l.prototype.renderPendingStatus=function(m){var n=m[c('P2PPaymentRequestStatus').INITED];if(!n)return null;var o=!!m[c('P2PPaymentRequestStatus').DECLINED],p=o||this.hasPaid(m);return c('React').createElement('span',null,this.renderMiddot(p),i._("{count} pending",[i.param('count',n)]));};l.prototype.renderStatus=function(){var m=this.props.status,n=m===c('P2PPaymentRequestStatus').CANCELED;if(!this.props.isGroupPaymentRequest||n)return c('React').createElement(c('P2PText.react'),{className:"_3-97 _52jv",shade:'light',type:'secondary'},this.props.statusText);var o=this.getStatusMap();return c('React').createElement(c('P2PText.react'),{className:"_3-97 _52jv",shade:'light',type:'secondary'},this.renderPaidStatus(o),this.renderDeclinedStatus(o),this.renderPendingStatus(o),this.renderExpiredStatus(o));};l.prototype.renderViewRequest=function(m){if(m||this.props.bannerContent)return null;return c('React').createElement(c('XUIText.react'),{className:"_4o8z",display:'block',size:'large'},i._("View request"));};l.prototype.render=function(){var m=this.props.isMessagesView,n=!!c('MessengerEnvironment').messengerui,o=this.isPendingPush(),p=this.props.viewerIsThirdParty;return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_5qd2"+(this.props.isSender?' '+"_5qd3":'')+(m?' '+"_5qd4":'')+(n?' '+"_5qd5":'')+(p?' '+"_5qd6":''))},c('React').createElement(c('Link.react'),{className:"_5qd8",href:this.props.detailsURI,onClick:this.props.onClick,target:'_blank'},this.renderMemoPhoto(),this.renderBigAmount(),this.renderDescription(),this.renderStatus(),this.renderEncryptedText(o),this.renderViewRequest(o)),this.renderBannerFooter(o));};f.exports=l;}),null);
__d('P2PPaymentRequestsStore',['P2PActionConstants','Arbiter','ChannelConstants','CurrentUser','EventEmitter','immutable','ImmutableObject','P2PActions','P2PAPI','P2PChannelType','P2PDispatcher','P2PPaymentRequest','P2PPaymentRequestStatus'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').List,k=null,l=false,m=null,n=false,o=null,p=new j(),q=false,r=false;h=babelHelpers.inherits(s,c('EventEmitter'));i=h&&h.prototype;function s(){i.constructor.call(this);c('Arbiter').subscribe(c('ChannelConstants').getArbiterType(c('P2PChannelType').PAYMENT_REQUEST_STATUS_CHANGED),this.handleChannelPaymentRequestStatusChanged.bind(this));c('P2PDispatcher').register(this.onEventDispatched.bind(this));}s.prototype.onEventDispatched=function(t){var u=t.data,v=t.type;switch(v){case c('P2PActionConstants').PAYMENT_REQUEST_INITIATED:q=true;o=null;this.emit('change');break;case c('P2PActionConstants').PAYMENT_REQUEST_INITIATED_COMPLETE:q=false;this.emit('change');break;case c('P2PActionConstants').PAYMENT_REQUEST_CREATED:this.handlePaymentRequestCreated(u);this.emit('change');break;case c('P2PActionConstants').PAYMENT_REQUEST_CREATED_ERROR:o=new (c('ImmutableObject'))(u.error);this.emit('change');break;case c('P2PActionConstants').PAYMENT_REQUEST_UPDATED:this.handlePaymentRequestUpdated(u);this.emit('change');break;case c('P2PActionConstants').PAYMENT_REQUEST_DECLINE_INITIATED:n=true;m=null;this.emit('change');break;case c('P2PActionConstants').PAYMENT_REQUEST_DECLINED:n=false;m=null;this.handlePaymentRequestDeclined(u);this.emit('change');break;case c('P2PActionConstants').PAYMENT_REQUEST_DECLINE_ERROR:n=false;m=new (c('ImmutableObject'))(u.error);this.emit('change');break;case c('P2PActionConstants').PAYMENT_REQUEST_CANCEL_INITIATED:l=true;k=null;this.emit('change');break;case c('P2PActionConstants').PAYMENT_REQUEST_CANCELED:l=false;k=null;this.handlePaymentRequestCanceled(u);this.emit('change');break;case c('P2PActionConstants').PAYMENT_REQUEST_CANCEL_ERROR:l=false;k=new (c('ImmutableObject'))(u.error);this.emit('change');break;case c('P2PActionConstants').DIALOG_CLOSED:m=null;this.emit('change');break;case c('P2PActionConstants').PAYMENT_REQUESTS_FETCHED:this.handlePaymentRequestsFetched(u);this.emit('change');break;}};s.prototype.handlePaymentRequestCreated=function(t){var u=p.toArray();u.push(new (c('P2PPaymentRequest'))(t));u.sort(function(v,w){return v.creationTime-w.creationTime;});p=new j(u);};s.prototype.handlePaymentRequestUpdated=function(t){if(t.groupRequestID)this.updateIndividualRequest(t);delete t.groupRequestID;this.updateRequest(t.id,t);};s.prototype.handlePaymentRequestDeclined=function(t){this.updateRequest(t,{currentStatus:c('P2PPaymentRequestStatus').DECLINED});};s.prototype.handlePaymentRequestCanceled=function(t){this.updateRequest(t,{currentStatus:c('P2PPaymentRequestStatus').CANCELED});};s.prototype.handleChannelPaymentRequestStatusChanged=function(t,u){var v=u.obj;c('P2PActions').paymentRequestUpdated({id:v.id,currentStatus:v.current_status,groupRequestID:v.group_request_id,transfer:v.transfer});};s.prototype.handlePaymentRequestsFetched=function(t){this.$P2PPaymentRequestsStore1(t);};s.prototype.$P2PPaymentRequestsStore1=function(t){t=t.sort(function(v,w){return v.creationTime-w.creationTime;});t.forEach(function(v,w){if(!this.getPaymentRequestByID(v.id))p=p.push(new (c('P2PPaymentRequest'))(v));}.bind(this));var u=p.toArray();u.sort(function(v,w){return v.creationTime-w.creationTime;});p=new j(u);};s.prototype.isPaymentRequestInitiated=function(){return q;};s.prototype.isPaymentRequestDeclining=function(){return n;};s.prototype.isPaymentRequestCanceling=function(){return l;};s.prototype.getPaymentRequestByID=function(t){return p.find(function(u){return t===u.id;});};s.prototype.getPaymentRequestError=function(){return o;};s.prototype.getPaymentRequestDeclineError=function(){return m;};s.prototype.getPaymentRequestCancelError=function(){return k;};s.prototype.getPendingPaymentRequest=function(){if(!r){r=true;c('P2PAPI').getPendingPaymentRequests();}return p.filter(function(t){return t.requestee.id===c('CurrentUser').getID()&&t.currentStatus===c('P2PPaymentRequestStatus').INITED;}).last();};s.prototype.updateRequest=function(t,u){p.forEach(function(v,w){if(t===v.id)p=p.set(w,v.merge(v,u));});};s.prototype.updateIndividualRequest=function(t){var u=t.id,v=t.groupRequestID,w=p.findIndex(function(ca){return v===ca.id;}),x=p.get(w),y=x.individualRequests.findIndex(function(ca){return u===ca.id;}),z=x.individualRequests.slice(0),aa=z[y],ba=babelHelpers['extends']({},aa,t);z[y]=ba;x=x.set('individualRequests',z);p=p.set(w,x);};s.prototype.getPaymentRequests=function(){return p;};f.exports=new s();}),null);
__d('P2PSimpleDialog.react',['fbt','FBPaymentsErrorNotice_DEPRECATED.react','P2PButton.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PLoadingMask.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleToggle=function(r){if(!r)this.props.onCancel();}.bind(this),n;}l.prototype.render=function(){var m=void 0;if(this.props.error)m=c('React').createElement(c('FBPaymentsErrorNotice_DEPRECATED.react'),{error:this.props.error});return c('React').createElement(c('P2PDialog.react'),{behaviors:this.props.behaviors,layerHideOnBlur:false,onToggle:this.handleToggle,repositionOnUpdate:true,shown:true,width:this.props.width},c('React').createElement(c('P2PDialogTitle.react'),null,this.props.title),c('React').createElement(c('P2PDialogBody.react'),null,m,this.props.bodyText,c('React').createElement(c('P2PLoadingMask.react'),{visible:this.props.loading})),c('React').createElement(c('P2PDialogFooter.react'),null,c('React').createElement(c('P2PButton.react'),{disabled:this.props.loading,label:this.props.cancelButtonText,onClick:this.props.onCancel,size:'medium'}),c('React').createElement(c('P2PButton.react'),{disabled:this.props.loading,label:this.props.confirmButtonText,onClick:this.props.onConfirm,size:'medium',use:'confirm'})));};l.propTypes={bodyText:k.string.isRequired,cancelButtonText:k.string,confirmButtonText:k.string,error:k.object,loading:k.bool,onCancel:k.func.isRequired,onConfirm:k.func.isRequired,title:k.string.isRequired,width:k.number};l.defaultProps={cancelButtonText:h._("Cancel"),confirmButtonText:h._("Confirm"),width:300};f.exports=l;}),null);
__d('P2PPaymentRequestCancelDialogContainer.react',['fbt','P2PActions','P2PAPI','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PPaymentRequest','P2PPaymentRequestsStore','P2PSimpleDialog.react','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'P2PPaymentRequestCancelDialogContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('P2PPaymentRequestsStore'))],propTypes:{paymentRequest:i.instanceOf(c('P2PPaymentRequest')).isRequired},statics:{calculateState:function k(l){return {error:c('P2PPaymentRequestsStore').getPaymentRequestCancelError(),loading:c('P2PPaymentRequestsStore').isPaymentRequestCanceling()};}},log:function k(l,m){c('P2PLogger').log(l,{www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_REQUEST,request_id:this.props.paymentRequest.id});},componentDidMount:function k(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_CANCEL_REQUEST);},handleCancel:function k(){c('P2PActions').hideDialog();},handleConfirm:function k(){c('P2PAPI').cancelPaymentRequest({error:function(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CANCEL_REQUEST_FAIL);}.bind(this),paymentRequestID:this.props.paymentRequest.id,success:function(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CANCEL_REQUEST_SUCCESS);}.bind(this)});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CONFIRM_CANCEL_REQUEST);},renderBodyText:function k(){var l=this.props.paymentRequest.requestee.name;return h._("{Name of requestee} will be notified that the request has been cancelled.",[h.param('Name of requestee',l)]);},render:function k(){return c('React').createElement(c('P2PSimpleDialog.react'),{bodyText:this.renderBodyText(),error:this.state.error,loading:this.state.loading,cancelButtonText:h._("Back"),confirmButtonText:h._("Cancel"),onCancel:this.handleCancel,onConfirm:this.handleConfirm,title:h._("Cancel request?")});}});f.exports=j;}),null);
__d('P2PPaymentRequestDeclineDialogContainer.react',['fbt','P2PActions','P2PAPI','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PPaymentRequest','P2PPaymentRequestsStore','P2PSimpleDialog.react','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'P2PPaymentRequestDeclineDialogContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('P2PPaymentRequestsStore'))],propTypes:{paymentRequest:i.instanceOf(c('P2PPaymentRequest')).isRequired},statics:{calculateState:function k(l){return {error:c('P2PPaymentRequestsStore').getPaymentRequestDeclineError(),loading:c('P2PPaymentRequestsStore').isPaymentRequestDeclining()};}},log:function k(l,m){c('P2PLogger').log(l,{www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_REQUEST,request_id:this.props.paymentRequest.id});},componentDidMount:function k(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_DECLINE_REQUEST);},handleCancel:function k(){c('P2PActions').hideDialog();},handleConfirm:function k(){c('P2PAPI').declinePaymentRequest({error:function(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_DECLINE_REQUEST_FAIL);}.bind(this),paymentRequestID:this.props.paymentRequest.id,success:function(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_DECLINE_REQUEST_SUCCESS);}.bind(this)});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CONFIRM_DECLINE_REQUEST);},renderBodyText:function k(){var l=this.props.paymentRequest.requester.name;return h._("{Name of requester} will be notified that the request has been declined.",[h.param('Name of requester',l)]);},render:function k(){return c('React').createElement(c('P2PSimpleDialog.react'),{bodyText:this.renderBodyText(),error:this.state.error,loading:this.state.loading,cancelButtonText:h._("Back"),confirmButtonText:h._("Decline"),onCancel:this.handleCancel,onConfirm:this.handleConfirm,title:h._("Decline request?")});}});f.exports=j;}),null);
__d('P2PPaymentRequestActionHelper',['fbt','MercuryIDs','P2PActions','P2PPaymentRequest','P2PPaymentRequestCancelDialogContainer.react','P2PPaymentRequestStatus','P2PPaymentRequestDeclineDialogContainer.react'],(function a(b,c,d,e,f,g,h){'use strict';var i={initDeclinePaymentRequestFlow:function j(k){c('P2PActions').showDialog(c('P2PPaymentRequestDeclineDialogContainer.react'),{paymentRequest:k});},initPayForPaymentRequestFlow:function j(k,l){var m=[],n=k.groupThreadFBID,o=void 0;if(n){m.push(k.requester.id);o=c('MercuryIDs').getThreadIDFromThreadFBID(n);}else o=c('MercuryIDs').getThreadIDFromUserID(k.requester.id);c('P2PActions').chatSendViewOpened({amount:k.amount,memoText:k.memoText,paymentRequestID:k.id,threadID:o,useModal:true,referrer:l,groupSendRecipientUserIDs:m,groupThreadFBID:n});},initCancelPaymentRequestFlow:function j(k){c('P2PActions').showDialog(c('P2PPaymentRequestCancelDialogContainer.react'),{paymentRequest:k});},getStatusText:function j(k){var l=k.currentStatus,m=h._("Cancelled"),n=h._("Paid"),o=h._("Declined"),p=h._("Unpaid"),q=void 0;switch(l){case c('P2PPaymentRequestStatus').DECLINED:q=o;break;case c('P2PPaymentRequestStatus').CANCELED:case c('P2PPaymentRequestStatus').TRANSFER_FAILED:q=m;break;case c('P2PPaymentRequestStatus').TRANSFER_COMPLETED:q=n;break;default:q=p;break;}return q;}};f.exports=i;}),null);
__d("XP2PPaymentRequestReceiptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/payment_request\/",{id:{type:"String",required:true}});}),null);
__d('P2PPaymentRequestMercuryShareAttachment.react',['cx','fbt','CurrentUser','MercuryShareAttachmentRenderLocations','P2PButton.react','P2PPaymentRequestActionHelper','P2PMercuryAttachmentBubble.react','P2PMercuryAttachmentGroupBubble.react','P2PPaymentRequest','P2PPaymentRequestStatus','P2PText.react','React','URI','XP2PPaymentRequestReceiptController','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.handleDeclineClick=function(){c('P2PPaymentRequestActionHelper').initDeclinePaymentRequestFlow(this.props.paymentRequest);}.bind(this),this.handlePayClick=function(){c('P2PPaymentRequestActionHelper').initPayForPaymentRequestFlow(this.props.paymentRequest,'bubble');}.bind(this),this.handleClick=function(){if(this.isThirdParty()||this.isGroupPaymentRequest())this.props.viewReceipt();}.bind(this),n;}l.prototype.isSender=function(){var m,n=(m=this.props)!=null?(m=m.paymentRequest)!=null?(m=m.requester)!=null?m.id:m:m:m;return c('CurrentUser').getID()===n;};l.prototype.isReceiver=function(){var m,n=c('CurrentUser').getID(),o=this.props.paymentRequest,p=(m=o)!=null?(m=m.requestee)!=null?m.id:m:m;if(n===p)return true;var q=o.individualRequests.find(function(r){var s;return n===((s=r)!=null?(s=s.requestee)!=null?s.id:s:s);});return !!q;};l.prototype.isThirdParty=function(){return !this.isSender()&&!this.isReceiver();};l.prototype.renderBannerContent=function(){var m=this.props.paymentRequest.currentStatus,n=this.isReceiver();if(!n||m!==c('P2PPaymentRequestStatus').INITED)return null;return c('React').createElement('div',{className:"_2v-"},c('React').createElement('div',{className:"_2v_"},c('React').createElement(c('P2PButton.react'),{className:"_2w2",label:i._("Decline"),onClick:this.handleDeclineClick,size:'medium',type:'primary'})),c('React').createElement('div',{className:"_2v_"},c('React').createElement(c('P2PButton.react'),{className:"_2w2",label:i._("Pay"),onClick:this.handlePayClick,size:'medium',type:'primary',use:'confirm'})));};l.prototype.renderStatusText=function(){var m=this.props.paymentRequest;if(this.isReceiver()&&m.currentStatus===c('P2PPaymentRequestStatus').INITED)return null;return c('P2PPaymentRequestActionHelper').getStatusText(m);};l.prototype.renderTopContent=function(){if(this.isSender())return c('React').createElement(c('P2PText.react'),{type:'primary',weight:'bold'},i._("You requested"));return c('React').createElement(c('P2PText.react'),{type:'primary',weight:'bold'},i._("{Name of user} requested",[i.param('Name of user',this.props.paymentRequest.requester.name)]));};l.prototype.getDetailsURI=function(){if(this.isThirdParty()||this.isGroupPaymentRequest())return null;return c('XP2PPaymentRequestReceiptController').getURIBuilder().setString('id',this.props.paymentRequest.id).getURI();};l.prototype.getDate=function(){var m=this.props.paymentRequest,n=m.currentStatus,o=void 0;switch(n){case c('P2PPaymentRequestStatus').DECLINED:case c('P2PPaymentRequestStatus').CANCELED:case c('P2PPaymentRequestStatus').TRANSFER_FAILED:case c('P2PPaymentRequestStatus').TRANSFER_INITED:case c('P2PPaymentRequestStatus').TRANSFER_COMPLETED:o=m.updatedTime;break;default:o=m.creationTime;break;}return o;};l.prototype.getIndividualRequests=function(){var m=this.props.paymentRequest,n=m.individualRequests;if(n.length>1)return n;return [m];};l.prototype.isGroupPaymentRequest=function(){var m=this.props.paymentRequest.individualRequests||[];return !!m.length;};l.prototype.render=function(){var m=this.props,n=m.paymentRequest,o=this.isGroupPaymentRequest();if(o)return c('React').createElement(c('P2PMercuryAttachmentGroupBubble.react'),{amount:n.amount,amountWithSymbol:n.amountWithSymbol,date:this.getDate(),detailsURI:this.getDetailsURI(),bannerContent:this.renderBannerContent(),forceMemoTextShown:true,individualRequests:this.getIndividualRequests(),isGroupPaymentRequest:o,isGroupThread:!!n.groupThreadFBID,isMessagesView:false,isPaymentRequest:true,isPending:true,isSender:this.isSender(),memoText:n.memoText,pendingTransfer:this.props.pendingTransfer,requester:n.requester,status:n.currentStatus,statusDescription:n.statusDescription,statusText:this.renderStatusText(),onClick:this.handleClick});return c('React').createElement(c('P2PMercuryAttachmentBubble.react'),{amount:n.amount,date:this.getDate(),detailsURI:this.getDetailsURI(),bannerContent:this.renderBannerContent(),forceMemoTextShown:true,isGroupThread:!!n.groupThreadFBID,isMessagesView:false,isPaymentRequest:true,isPending:true,isSender:this.isSender(),memoText:n.memoText,onClick:this.handleClick,receiverName:n.requestee.full_name,statusText:this.renderStatusText(),topContent:this.renderTopContent()});};f.exports=l;}),null);
__d('P2PGroupPaymentRequestReceiptDialog.react',['fbt','P2PActions','P2PGroupSendReceiptDialog.react','P2PPaymentLoggerEventFlow','P2PPaymentRequest','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('P2PGroupSendReceiptDialog.react'),{amount:this.props.amount,bodyText:h._("You can send payment requests to friends in groups"),eventFlow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_GROUP_REQUEST,individualRequests:this.props.individualRequests,isGrayAmount:true,receiver:this.props.requestee,sender:this.props.requester,title:h._("Payment request details"),onClose:this.props.onClose||c('P2PActions').hideDialog});};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('P2PPaymentRequestMercuryShareAttachmentContainer.react',['cx','MercuryShareAttachmentReactShape','MercuryShareAttachmentRenderLocations','P2PActions','P2PGroupPaymentRequestReceiptDialog.react','P2PPaymentRequest','P2PPaymentRequestMercuryShareAttachment.react','P2PPaymentRequestsStore','P2PTransferStatus','P2PTransferStore','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'P2PPaymentRequestMercuryShareAttachmentContainer',propTypes:{attachment:c('MercuryShareAttachmentReactShape'),location:i.oneOf(c('MercuryShareAttachmentRenderLocations').getValues())},mixins:[c('StoreAndPropBasedStateMixin')(c('P2PPaymentRequestsStore'),c('P2PTransferStore'))],statics:{calculateState:function k(l){var m=l.attachment.target.id,n=c('P2PPaymentRequestsStore').getPaymentRequestByID(m);return {paymentRequest:n,pendingTransfer:j.getPendingTransfer(n)};},getPendingTransfer:function k(l){if(!l)return null;var m=l.individualRequests||[];return m.map(function(n){var o=n.transfer;if(!o)return null;var p=o.transfer_id,q=c('P2PTransferStore').getTransferByID(p);if(!q){c('P2PActions').transferAdded(o);return o;}return q;}).find(function(n){var o=n&&n.status||0;return o===c('P2PTransferStatus').PENDING_PUSH_FAIL||o===c('P2PTransferStatus').PENDING_RECIPIENT_NUX;});}},componentWillMount:function k(){var l=this.props.attachment.target||{};if(!c('P2PPaymentRequestsStore').getPaymentRequestByID(l.id))c('P2PActions').paymentRequestCreated(l);var m=l.individualRequests||[];m.forEach(function(n){var o=n.transfer;if(o&&!c('P2PTransferStore').getTransferByID(o.transfer_id))c('P2PActions').transferAdded(o);});},shouldComponentUpdate:function k(l,m){if(this.props.location!==l.location)return true;if(this.state.paymentRequest!==m.paymentRequest)return true;return !!this.state.pendingTransfer===!!m.pendingTransfer;},viewReceipt:function k(){var l=this.state.paymentRequest;c('P2PActions').showDialog(c('P2PGroupPaymentRequestReceiptDialog.react'),{amount:l.amount,individualRequests:l.individualRequests,requestee:l.requestee,requester:l.requester});},render:function k(){var l=this.state.paymentRequest;if(!l)return c('React').createElement('span',null);return c('React').createElement('div',{className:"_3fyk"},c('React').createElement(c('P2PPaymentRequestMercuryShareAttachment.react'),{location:this.props.location,viewReceipt:this.viewReceipt,paymentRequest:l,pendingTransfer:this.state.pendingTransfer}));}});f.exports=j;}),null);