if (self.CavalryLogger) { CavalryLogger.start_js(["+opYO"]); }

__d('HovercardLink',['Bootloader','URI'],(function a(b,c,d,e,f,g){var h={getBaseURI:function i(){return new (c('URI'))('/ajax/hovercard/hovercard.php');},constructEndpoint:function i(j,k){return h.constructEndpointWithGroupAndLocation(j,k,null);},constructEndpointWithLocation:function i(j,k){return h.constructEndpointWithGroupAndLocation(j,null,k);},constructEndpointWithGroupAndLocation:function i(j,k,l,m){return h.constructEndpointWithGroupLocationAndExtraParams(j,k,l,m);},constructEndpointWithGroupLocationAndExtraParams:function i(j,k,l,m){var n=arguments.length<=4||arguments[4]===undefined?null:arguments[4],o=new (c('URI'))(h.getBaseURI()).setQueryData({id:j.id}),p={};if(n!==null)for(var q in n)p[q]=n[q];if((j.weakreference||m)&&k)p.group_id=k;if(l)p.hc_location=l;o.addQueryData({extragetparams:JSON.stringify(p)});return o;}};f.exports=h;}),null);
__d('isWebGLEnabled',[],(function a(b,c,d,e,f,g){'use strict';var h=null;function i(){try{var k=document.createElement('canvas');return Boolean(window.WebGLRenderingContext)&&Boolean(k.getContext('webgl')||k.getContext('experimental-webgl'));}catch(l){return false;}}function j(){if(h===null)h=i();return h;}f.exports=j;}),null);
__d('FantaConst',[],(function a(b,c,d,e,f,g){'use strict';var h={DEFAULT_ALLOWED_RAISED_TABS:2,DEFAULT_MESSAGE_COUNT:10,cookieIDs:{PERSONAL_COOKIE_ID:'t3',PERSONAL_FOCUS_COOKIE_ID:'lm3',PERSONAL_TIME_COOKIE_ID:'utc3',WORK_COOKIE_ID:'t3w',WORK_FOCUS_COOKIE_ID:'lm3w',WORK_TIME_COOKIE_ID:'utc3w'},getCookieIDs:function i(){return [h.cookieIDs.PERSONAL_COOKIE_ID,h.cookieIDs.PERSONAL_FOCUS_COOKIE_ID,h.cookieIDs.PERSONAL_TIME_COOKIE_ID,h.cookieIDs.WORK_COOKIE_ID,h.cookieIDs.WORK_FOCUS_COOKIE_ID,h.cookieIDs.WORK_TIME_COOKIE_ID];}};f.exports=h;}),18);
__d('MercuryParticipantListRenderer',['fbt','MercuryIDs'],(function a(b,c,d,e,f,g,h){'use strict';function i(){this.$MercuryParticipantListRenderer1=false;this.$MercuryParticipantListRenderer2=false;this.$MercuryParticipantListRenderer3=false;this.$MercuryParticipantListRenderer4=0;this.$MercuryParticipantListRenderer5=null;this.$MercuryParticipantListRenderer6=function(s){if(this.$MercuryParticipantListRenderer5){var t=c('MercuryIDs').getUserIDFromParticipantID(s.id);if(this.$MercuryParticipantListRenderer5[t])return this.$MercuryParticipantListRenderer5[t];}return this.$MercuryParticipantListRenderer2?s.short_name:s.name;}.bind(this);}i.prototype.renderParticipantList=function(s){var t=s.map(this.$MercuryParticipantListRenderer6);switch(t.length){case 0:return j(this.$MercuryParticipantListRenderer1);case 1:return k(t);case 2:return this.$MercuryParticipantListRenderer3?m(t):l(t);case 3:return this.$MercuryParticipantListRenderer3?o(t):n(t);default:return this.$MercuryParticipantListRenderer3?q(t,this.$MercuryParticipantListRenderer4):p(t,this.$MercuryParticipantListRenderer4);}};i.prototype.setIsNewThread=function(s){this.$MercuryParticipantListRenderer1=s;return this;};i.prototype.setNameRenderer=function(s){this.$MercuryParticipantListRenderer6=s;return this;};i.prototype.setUseShortName=function(s){this.$MercuryParticipantListRenderer2=s;return this;};i.prototype.setNickname=function(s){this.$MercuryParticipantListRenderer5=s;return this;};i.prototype.setUseAndSeparator=function(s){this.$MercuryParticipantListRenderer3=s;return this;};i.prototype.setTotalParticipantCount=function(s){this.$MercuryParticipantListRenderer4=s;return this;};function j(s){if(s){return h._("New message");}else return h._("No Participants");}function k(s){return s[0];}function l(s){return h._("{participant1}, {participant2}",[h.param('participant1',s[0]),h.param('participant2',s[1])]);}function m(s){return h._("{participant1} and {participant2}",[h.param('participant1',s[0]),h.param('participant2',s[1])]);}function n(s){return h._("{participant1}, {participant2}, {participant3}",[h.param('participant1',s[0]),h.param('participant2',s[1]),h.param('participant3',s[2])]);}function o(s){return h._("{participant1}, {participant2}  and {participant3}",[h.param('participant1',s[0]),h.param('participant2',s[1]),h.param('participant3',s[2])]);}function p(s,t){return h._("{participant1}, {participant2}, {participant3}, {others_link}",[h.param('participant1',s[0]),h.param('participant2',s[1]),h.param('participant3',s[2]),h.param('others_link',r((t||s.length)-3))]);}function q(s,t){return h._("{participant1}, {participant2} and {others_link}",[h.param('participant1',s[0]),h.param('participant2',s[1]),h.param('others_link',r((t||s.length)-2))]);}function r(s){if(s>1){return h._({"*":"{others_count} others"},[h.param('others_count',s,[0])]);}else return h._("1 other");}f.exports=i;}),null);
__d('MercuryThreadTitle.react',['fbt','MercuryConfig','MercuryIDs','MessengerTextWithEmoticons.react','MercuryParticipantListRenderer','MercuryParticipants','React','TextWithEmoticons.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'MercuryThreadTitle',propTypes:{isNewThread:i.bool,thread:i.object.isRequired,viewer:i.string.isRequired,showUnreadCount:i.bool,useShortName:i.bool,useAndSeparator:i.bool},getDefaultProps:function k(){return {isNewThread:false,showUnreadCount:false,useShortName:false,useAndSeparator:false};},getInitialState:function k(){return {participantNames:''};},componentDidMount:function k(){this._renderParticipantsList(this.props);},componentWillReceiveProps:function k(l){this._renderParticipantsList(l);},render:function k(){return c('React').createElement('span',{className:this.props.className},this.props.thread.name?this._renderThreadTitle():this.state.participantNames,this.props.children);},getTitle:function k(){return this.state.participantNames;},_renderThreadTitle:function k(){var l=this.props.thread,m=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:l.name});if(!l.unread_count||!this.props.showUnreadCount)return m;return this._renderTitleWithUnreadCount(m,l.unread_count);},_renderParticipantsList:function k(l){if(l.thread.name)return;this.setState({participantNames:''});var m=c('MercuryIDs').getParticipantIDFromUserID(l.viewer),n=l.thread.participants||[];if(n.length>1)n=n.filter(function(o){return o!=m;});c('MercuryParticipants').getMulti(n,function(o){if(!this.isMounted())return;var p=n.map(function(v){return o[v];}),q=l.thread.custom_nickname?{}:null,r=c('MessengerTextWithEmoticons.react');if(q)for(var s in l.thread.custom_nickname)q[s]=c('React').createElement(r,{renderEmoticons:true,renderEmoji:true,text:l.thread.custom_nickname[s]});var t=new (c('MercuryParticipantListRenderer'))().setUseShortName(l.useShortName).setUseAndSeparator(l.useAndSeparator).setIsNewThread(l.isNewThread).setNickname(q).renderParticipantList(p),u=l.showUnreadCount&&l.thread.unread_count?this._renderTitleWithUnreadCount(t,l.thread.unread_count):t;this.setState({participantNames:u});}.bind(this));},_renderTitleWithUnreadCount:function k(l,m){return h._("{conversation-title} ({unread-count})",[h.param('conversation-title',l),h.param('unread-count',m)]);}});f.exports=j;}),null);
__d('Dcode',[],(function a(b,c,d,e,f,g){var h,i={},j={_:'%',A:'%2',B:'000',C:'%7d',D:'%7b%22',E:'%2c%22',F:'%22%3a',G:'%2c%22ut%22%3a1',H:'%2c%22bls%22%3a',I:'%2c%22n%22%3a%22%',J:'%22%3a%7b%22i%22%3a0%7d',K:'%2c%22pt%22%3a0%2c%22vis%22%3a',L:'%2c%22ch%22%3a%7b%22h%22%3a%22',M:'%7b%22v%22%3a2%2c%22time%22%3a1',N:'.channel%22%2c%22sub%22%3a%5b',O:'%2c%22sb%22%3a1%2c%22t%22%3a%5b',P:'%2c%22ud%22%3a100%2c%22lc%22%3a0',Q:'%5d%2c%22f%22%3anull%2c%22uct%22%3a',R:'.channel%22%2c%22sub%22%3a%5b1%5d',S:'%22%2c%22m%22%3a0%7d%2c%7b%22i%22%3a',T:'%2c%22blc%22%3a1%2c%22snd%22%3a1%2c%22ct%22%3a',U:'%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a',V:'%2c%22blc%22%3a0%2c%22snd%22%3a0%2c%22ct%22%3a',W:'%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a',X:'%2c%22ri%22%3a0%7d%2c%22state%22%3a%7b%22p%22%3a0%2c%22ut%22%3a1',Y:'%2c%22pt%22%3a0%2c%22vis%22%3a1%2c%22bls%22%3a0%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a',Z:'%2c%22sb%22%3a1%2c%22t%22%3a%5b%5d%2c%22f%22%3anull%2c%22uct%22%3a0%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a'};(function(){var l=[];for(var m in j){i[j[m]]=m;l.push(j[m]);}l.reverse();h=new RegExp(l.join("|"),'g');})();var k={encode:function l(m){return encodeURIComponent(m).replace(/([_A-Z])|%../g,function(n,o){return o?'%'+o.charCodeAt(0).toString(16):n;}).toLowerCase().replace(h,function(n){return i[n];});},decode:function l(m){return decodeURIComponent(m.replace(/[_A-Z]/g,function(n){return j[n];}));}};f.exports=k;}),null);
__d('PresenceCookieManager',['Cookie','CurrentUser','Dcode','ErrorUtils','JSLogger','PresenceInitialData','PresenceUtil','WebStorage','WorkModeConfig'],(function a(b,c,d,e,f,g){var h=c('PresenceInitialData').cookieVersion,i='presence',j={},k=null,l=null,m=c('JSLogger').create('presence_cookie');function n(y){var z=c('Cookie').get(i)||'';if(z.length===0)return null;if(z[0]!==y)return null;return z.substring(1);}function o(y,z){c('Cookie').set(i,y+z);}function p(){if(!(c('PresenceInitialData').useWebStorage||false))return null;return c('WebStorage').getSessionStorage();}function q(){var y=p(),z=y!=null?y.getItem(i):null;if(z!=null)return z.substring(1);return null;}function r(y){var z=p();if(z==null)return false;z.setItem(i,'E'+y);return true;}function s(){var y=q();if(y!=null)return y;return n('E');}function t(y){var z=y.state;if(z==null)return '';var aa=n('S')||'',ba=c('WorkModeConfig').is_work_user?'w':'f',ca=c('WorkModeConfig').is_work_user?z.t3w:z.t3,da=ca!=null?ca.length>0:false,ea=aa.indexOf(ba)!==-1;if(ea&&!da)aa=aa.replace(ba,'');if(!ea&&da)aa+=ba;return aa;}function u(y,z){var aa=r(y);if(aa){o('S',z);}else{if(y.length>1024)m.warn('big_cookie',y.length);o('E',y);}}function v(){try{var y=s();if(k!==y){k=y;l=null;if(y){y=c('Dcode').decode(y);l=JSON.parse(y);}}if(l){if(l.user&&l.user!==c('CurrentUser').getID())return null;if(l.v!==h)return null;return l;}}catch(z){m.warn('getcookie_error',z);}return null;}function w(){return parseInt(Date.now()/1000,10);}var x={register:function y(z,aa){j[z]=aa;},store:function y(){var z=v();if(z&&z.v&&h<z.v){m.debug('stale_cookie',h);return;}var aa={v:h,time:w(),user:c('CurrentUser').getID()};for(var ba in j)aa[ba]=c('ErrorUtils').applyWithGuard(j[ba],j,[z&&z[ba]],function(da){da.presence_subcookie=ba;});var ca=c('Dcode').encode(JSON.stringify(aa));if(c('PresenceUtil').hasUserCookie())u(ca,t(aa));},clear:function y(){c('Cookie').clear(i);var z=c('WebStorage').getSessionStorage();if(z!=null)z.removeItem(i);},getSubCookie:function y(z){var aa=v();if(!aa)return null;return aa[z];}};f.exports=x;}),18);
__d('PresenceState',['Arbiter','ErrorUtils','FantaConst','JSLogger','PresenceCookieManager','debounceAcrossTransitions','setIntervalAcrossTransitions','PresenceInitialData'],(function a(b,c,d,e,f,g){'use strict';var h=c('PresenceInitialData').cookiePollInterval||2000,i=c('PresenceInitialData').shouldSuppress||false,j=[],k=[],l=null,m=null,n=0,o=null,p=0,q=['sb2','tr','tw','at','wml'].concat(c('FantaConst').getCookieIDs()),r=c('JSLogger').create('presence_state');function s(){return c('PresenceCookieManager').getSubCookie('state');}function t(){n=Date.now();c('PresenceCookieManager').store();x(m);}var u=c('debounceAcrossTransitions')(t,0);function v(ca){if(ca==undefined||isNaN(ca)||ca==Number.POSITIVE_INFINITY||ca==Number.NEGATIVE_INFINITY)ca=0;return ca;}function w(ca){var da={};if(ca){q.forEach(function(ga){if(ca&&ca[ga])da[ga]=ca[ga];});if(n<ca.ut)r.error('new_cookie',{cookie_time:ca.ut,local_time:n});}da.ut=n;for(var ea=0,fa=j.length;ea<fa;ea++)c('ErrorUtils').applyWithGuard(j[ea],null,[da]);m=da;return m;}function x(ca){p++;n=v(ca&&ca.ut);if(!l)l=c('setIntervalAcrossTransitions')(aa,h);m=ca;if(o===null)o=ca;for(var da=0,ea=k.length;da<ea;da++)c('ErrorUtils').applyWithGuard(k[da],null,[ca]);p--;}function y(ca){if(ca&&ca.ut)if(n<ca.ut){return true;}else if(ca.ut<n)r.error('old_cookie',{cookie_time:ca.ut,local_time:n});return false;}function z(){var ca=s();if(y(ca))m=ca;return m;}function aa(){var ca=s();if(y(ca))x(ca);}c('PresenceCookieManager').register('state',w);c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(ca,da){da.presence_state={initial:babelHelpers['extends']({},o),state:babelHelpers['extends']({},m),update_time:n,sync_paused:p,poll_time:h};});(function(){var ca=z();if(ca){x(ca);}else{r.debug('no_cookie_initial');x(w());return;}})();var ba={doSync:function ca(da){if(p)return;if(da){t();}else u();},registerStateStorer:function ca(da){j.push(da);},registerStateLoader:function ca(da){k.push(da);},get:function ca(){return z();},getInitial:function ca(){return o;},shouldSuppress:function ca(){return i;},verifyNumber:v};f.exports=ba;}),18);