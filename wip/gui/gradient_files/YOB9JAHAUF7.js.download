if (self.CavalryLogger) { CavalryLogger.start_js(["gQouo"]); }

__d('ChatEmojiSkinTonePreferencePicker.react',['ChatEmojiPicker.react','MessengerEmojiConfig','React','SkinToneEmoji'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=128077;h=babelHelpers.inherits(l,c('React').PureComponent);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$ChatEmojiSkinTonePreferencePicker1=function(r){var s=c('SkinToneEmoji').getTone(r);this.props.onSelect&&this.props.onSelect(s);}.bind(this),n;}l.prototype.render=function(){var m=null;try{m=this.props.currentPreference?String.fromCodePoint.apply(String,c('SkinToneEmoji').applyTone([k],this.props.currentPreference)):String.fromCodePoint(k);}catch(n){m=String.fromCodePoint(k);}return c('React').createElement(c('ChatEmojiPicker.react'),{className:this.props.className,columns:this.props.columns,currentEmoji:m,emojiChoices:c('MessengerEmojiConfig').emoji_colors.map(function(n){return c('SkinToneEmoji').applyTone([k],n);}),onSelect:this.$ChatEmojiSkinTonePreferencePicker1});};l.propTypes={className:j.string,columns:j.number,currentPreference:j.number,onSelect:j.func};l.defaultProps={columns:6};f.exports=l;}),null);
__d('AbstractCheckboxInput.react',['cx','invariant','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';!this.props.children||this.props.children.length===0||i(0);var n=c('joinClasses')(this.props.className,"_kv1"),o=c('React').createElement('input',babelHelpers['extends']({},this.props,{'data-testid':undefined,className:null,ref:function(p){return this.$AbstractCheckboxInput1=p;}.bind(this),type:'checkbox'}),undefined);return c('React').createElement('label',{className:n,'data-testid':this.props['data-testid']},o,c('React').createElement('span',{'data-hover':this.props.tooltip?'tooltip':null,'data-tooltip-content':this.props.tooltip}));};m.prototype.focusInput=function(){'use strict';this.$AbstractCheckboxInput1&&this.$AbstractCheckboxInput1.focus();};m.prototype.blurInput=function(){'use strict';this.$AbstractCheckboxInput1&&this.$AbstractCheckboxInput1.blur();};function m(){'use strict';j.apply(this,arguments);}m.propTypes={'data-testid':l.string,tooltip:l.string};f.exports=m;}),null);
__d('MessengerCheckboxInput.react',['cx','AbstractCheckboxInput.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){'use strict';return c('React').createElement(c('AbstractCheckboxInput.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_55sg _4ng2")}));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerSettingsDialog.react',['cx','fbt','invariant','ChatEmojiSkinTonePreferencePicker.react','CurrentUser','EmojiActions','EmojiDispatcher','EmojiStateStore','ImageBlock.react','Link.react','MercuryIDs','MercuryParticipants','messengerDialogsRe','MessengerButton.react','MessengerCheckboxInput.react','MessengerConfig','messengerContactImageReact','MessengerDesktopNotifications','MessengerDialog.react','MessengerDialogButton.react','MessengerDialogHeader.react','MessengerDialogTitle.react','MessengerSettingsActions','MessengerSettingsStore','MessengerSpinner.react','messengerViewerCardReact','MercuryConfig','OmniMActions','OmniMHelpers','OmniMStore','PresencePrivacy','React','StoreAndPropBasedStateMixin','XUISingleSelector.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('messengerContactImageReact').comp,l=c('messengerViewerCardReact').comp,m=c('XUISingleSelector.react').Option,n=c('React').PropTypes,o=50,p=c('React').createClass({displayName:'MessengerSettingsDialog',mixins:[c('StoreAndPropBasedStateMixin')(c('EmojiStateStore'),c('MercuryParticipants'),c('MessengerSettingsStore'),c('OmniMStore'),c('PresencePrivacy'))],_privacyToken:null,propTypes:{viewer:n.string.isRequired},statics:{calculateState:function q(r){var s=c('EmojiStateStore').getState();return {emojiColorPref:s.emojiColor,isUserAvailable:c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE,viewerParticipant:c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(r.viewer)),settings:c('MessengerSettingsStore').getSettings(),mPrefs:c('OmniMStore').prefs()};}},getInitialState:function q(){return {desktopNotifsDenied:c('MessengerDesktopNotifications').isDenied(),desktopNotifsGranted:c('MessengerDesktopNotifications').isGranted()};},componentWillMount:function q(){c('EmojiDispatcher').explicitlyRegisterStores([c('EmojiStateStore')]);this._privacyToken=c('PresencePrivacy').subscribe('privacy-user-presence-changed',function(){this.setState({isUserAvailable:c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE});}.bind(this));},componentDidMount:function q(){if(this.state.emojiColorPref===undefined)c('EmojiActions').getEmojiColor();},componentWillUnmount:function q(){this._privacyToken&&this._privacyToken.unsubscribe();},render:function q(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this._handleToggle,ref:'dialog',type:'default',width:544},c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogTitle.react'),null,i._("Settings")),c('React').createElement(c('MessengerDialogButton.react'),{label:i._("Done"),onClick:this._handleDone,type:'primary'})),c('React').createElement('div',{className:"_374b"},c('React').createElement('div',{className:"_374c"},i._("Account")),c('React').createElement('div',{className:"_374d"},this._renderAccountSection())),c('React').createElement('div',{className:"_374b"},c('React').createElement('div',{className:"_374c"},i._("Sounds")),c('React').createElement('div',{className:"_374d"},c('React').createElement(c('MessengerCheckboxInput.react'),{checked:this.state.settings.sound_enabled,onChange:this._handleSoundChange}),c('React').createElement('span',{className:"_1pr_"},i._("Enabled")))),this._renderConstrainWidthSection(),this._renderNotificationsSection(),this._renderBlockingSection(),c('React').createElement('div',{className:"_374b"},c('React').createElement('div',{className:"_374c"},i._("Emoji")),c('React').createElement('div',{className:"_374d _5jb0"},this._renderEmojiColorSection())),this._renderOmniMSection());},_renderBlockingSection:function q(){if(c('CurrentUser').isWorkUser())return null;return c('React').createElement('div',{className:"_374b"},c('React').createElement('div',{className:"_374c"},i._("Blocking")),c('React').createElement('div',{className:"_374d"},c('React').createElement(c('Link.react'),{href:'https://www.facebook.com/settings?tab=blocking',target:'_blank'},i._("Manage on Facebook"))));},_renderAccountSection:function q(){if(!this.state.viewerParticipant)return c('React').createElement(c('MessengerSpinner.react'),null);return c('React').createElement(l,{className:"_3xld",isUserAvailable:this.state.isUserAvailable,onAvailabilityChange:this._handleTogglePresence,viewerData:this.state.viewerParticipant});},_renderOmniMSection:function q(){if(!c('MercuryConfig').OmniMEditConfidenceThreshold)return null;var r=this.state.mPrefs,s=c('OmniMHelpers').suggestionMode(r);return c('React').createElement('div',{className:"_374b"},c('React').createElement('div',{className:"_374c"},i._("M suggestion mode")),c('React').createElement('div',{className:"_374d"},c('React').createElement(c('XUISingleSelector.react'),{value:s,className:"_4_ff",onChange:this._handleOmniMModeChange},c('React').createElement(m,{key:3,value:3},i._("Muted")),c('React').createElement(m,{key:0,value:0},i._("Conservative")),c('React').createElement(m,{key:1,value:1},i._("Balanced")),c('React').createElement(m,{key:2,value:2},i._("Aggressive")))));},_renderNotificationsSection:function q(){if(!c('MessengerDesktopNotifications').isSupported())return null;return c('React').createElement('div',{className:"_374b"+(this.state.desktopNotifsDenied?' '+"_2bd0":'')},c('React').createElement('div',{className:"_374c"},i._("Notifications")),c('React').createElement('div',{className:"_374d"},this._renderNotificationsContent()));},_renderConstrainWidthSection:function q(){if(!c('MessengerConfig').ConstrainWidth)return null;return c('React').createElement('div',{className:"_374b"},c('React').createElement('div',{className:"_374c"},i._("Max. width")),c('React').createElement('div',{className:"_374d"},c('React').createElement(c('MessengerCheckboxInput.react'),{checked:this.state.settings.constrained_width,onChange:this._handleWidthChange}),c('React').createElement('span',{className:"_1pr_"},i._("Constrained"))));},_renderNotificationsContent:function q(){if(this.state.desktopNotifsDenied){return i._("You can allow Messenger to send you desktop notifications from your browser preferences.");}else return [c('React').createElement(c('MessengerCheckboxInput.react'),{checked:this.state.settings.desktopNotifsEnabled&&this.state.desktopNotifsGranted,key:'notifications-checkox',onChange:this._handleNotificationsChange}),c('React').createElement('span',{key:'notifications-checkbox-label',className:"_1pr_"},i._("Desktop notifications enabled"))];},_renderEmojiColorSection:function q(){if(this.state.emojiColorPref===undefined)return c('React').createElement(c('MessengerSpinner.react'),null);return c('React').createElement(c('ChatEmojiSkinTonePreferencePicker.react'),{currentPreference:this.state.emojiColorPref,onSelect:this._handleChooseEmojiColor});},_handleOmniMModeChange:function q(r){if(r.value!==null&&r.value!==undefined)c('OmniMActions').suggestionModeSet(parseInt(r.value,10));},_handleSoundChange:function q(event){event.target instanceof HTMLInputElement||j(0);c('MessengerSettingsActions').changeSettings({sound_enabled:event.target.checked});},_handleWidthChange:function q(event){event.target instanceof HTMLInputElement||j(0);c('MessengerSettingsActions').changeSettings({constrained_width:event.target.checked});},_handleNotificationsChange:function q(){c('MessengerSettingsActions').changeDesktopNotifs(!this.state.settings.desktopNotifsEnabled,this._handleDenied);},_handleChooseEmojiColor:function q(r){if(r!==this.state.emojiColorPref)c('EmojiActions').changeEmojiColor(r);},_handleDenied:function q(){this.setState({desktopNotifsDenied:true});},_handleDone:function q(event){event.preventDefault();c('messengerDialogsRe').removeDialog();},_handleToggle:function q(r){if(!r)c('messengerDialogsRe').removeDialog();},_handleTogglePresence:function q(){c('PresencePrivacy').setVisibility(this.state.isUserAvailable?c('PresencePrivacy').OFFLINE:c('PresencePrivacy').ONLINE);this.setState({isUserAvailable:!this.state.isUserAvailable});}});f.exports=p;}),null);