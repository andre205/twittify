if (self.CavalryLogger) { CavalryLogger.start_js(["Hjf6k"]); }

__d("XConsentCookieController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/cookie\/consent\/",{pv:{type:"Enum",enumType:0}});}),null);
__d('DeferredCookie',['AsyncRequest','Cookie','Env','Map','SubscriptionList','XConsentCookieController'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('Map'))(),i={shouldAddDefaultListener:true,defaultHandler:null,autoFlushCookies:false,sentConsentToServer:false,callbacks:new (c('SubscriptionList'))(),addToQueue:function j(k,l,m,n,o,p,q){if(this.autoFlushCookies){if(o){c('Cookie').setWithoutChecksIfFirstPartyContext(k,l,m,n,q);}else c('Cookie').setWithoutChecks(k,l,m,n,q);return;}if(h.has(k))return;h.set(k,{name:k,value:l,nMilliSecs:m,path:n,firstPartyOnly:o,secure:q});if(p)this.addDefaultInteractionListener();},flushAllCookies:function j(){delete c('Env').defer_cookies;h.forEach(function(l,m){if(l.firstPartyOnly){c('Cookie').setWithoutChecksIfFirstPartyContext(l.name,l.value,l.nMilliSecs,l.path,l.secure);}else c('Cookie').setWithoutChecks(l.name,l.value,l.nMilliSecs,l.path,l.secure);});this.callbacks.fireCallbacks();this.autoFlushCookies=true;h=new (c('Map'))();if(!this.sentConsentToServer){this.sentConsentToServer=true;var k=c('XConsentCookieController').getURIBuilder().setEnum('pv',this.getNoticePolicyVersion()).getURI();new (c('AsyncRequest'))().setURI(k).send();}this.removeDefaultInteractionListener();},getNoticePolicyVersion:function j(){try{var k=document.getElementById('cpn-pv-link');if(!k)return '1';return k.getAttribute('data-pv');}catch(l){return '1';}},removeDefaultInteractionListener:function j(){if(this.defaultHandler){if(window.removeEventListener){window.removeEventListener('click',this.defaultHandler,true);}else if(document.detachEvent)document.detachEvent('onclick',this.defaultHandler);this.defaultHandler=null;}},addDefaultInteractionListener:function j(){if(this.shouldAddDefaultListener){this.shouldAddDefaultListener=false;this.defaultHandler=this.baseInteractionHandler.bind(this);if(window.addEventListener){window.addEventListener('click',this.defaultHandler,true);}else if(document.attachEvent)document.attachEvent('onclick',this.defaultHandler);}},registerCallbackOnCookieFlush:function j(k){if(this.autoFlushCookies){k();}else this.callbacks.add(k);},baseInteractionHandler:function j(){this.flushAllCookies();},canEmbedThirdPartyPixel:function j(){if(c('Env').no_cookies||c('Env').defer_cookies)return false;return this.autoFlushCookies||h.size===0;}};f.exports=i;}),null);
__d("XRefererFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/common\/referer_frame.php",{v:{type:"Int"}});}),null);
__d('isOculusDotComURI',['URI'],(function a(b,c,d,e,f,g){var h=new RegExp('(^|\\.)oculus\\.com$','i'),i=['https'];function j(k){if(k.isEmpty()&&k.toString()!=='#')return false;if(!k.getDomain()&&!k.getProtocol())return false;return i.indexOf(k.getProtocol())!==-1&&h.test(k.getDomain());}f.exports=j;}),null);
__d('ControlledReferer',['Bootloader','DeferredCookie','URI','UserAgent','XRefererFrameController','isMessengerDotComURI','isOculusDotComURI','lowerFacebookDomain'],(function a(b,c,d,e,f,g){var h={useFacebookReferer:function i(j,k,l){if(!c('DeferredCookie').canEmbedThirdPartyPixel()){c('Bootloader').loadModules(["BanzaiODS"],function(p){p.bumpEntityKey('defer_cookies','block_controlled_referer_iframe');},'ControlledReferer');return;}var m=false;function n(){if(m)return;var p=j.contentWindow.location.pathname;if(p!=='/intern/common/referer_frame.php'&&p!=='/common/referer_frame.php')return;m=true;j.contentWindow.document.body.style.margin=0;k();}var o=void 0;if(c('isMessengerDotComURI')(c('URI').getRequestURI())){o=c('XRefererFrameController').getURIBuilder().getURI().toString();}else if(c('isOculusDotComURI')(c('URI').getRequestURI())){o='/common/referer_frame.php';}else if(!c('lowerFacebookDomain').isValidDocumentDomain()){o='/intern/common/referer_frame.php';}else if(c('UserAgent').isBrowser('Opera')){o=c('XRefererFrameController').getURIBuilder().getURI().toString();}else o=c('XRefererFrameController').getURIBuilder().getURI().qualify().setProtocol('https').setSubdomain('staticxx').toString();if(l)o+='?fb_source='+l;j.onload=n;j.src=o;},useFacebookRefererHtml:function i(j,k,l){h.useFacebookReferer(j,function(){j.contentWindow.document.body.innerHTML=k;},l);}};f.exports=h;}),null);
__d('ControlledRefererIFrame.react',['ControlledReferer','ControlledRefererIFrameConfig','React','ReactDOM','StaticContainer.react','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.updateFrame=function(){var k=c('ReactDOM').findDOMNode(this.refs.frame);c('ControlledReferer').useFacebookReferer(k,function(){var l=k.contentWindow.document;l.body.innerHTML='\n        <form method="GET" id="theform"></form>\n        '+c('ControlledRefererIFrameConfig').additional_markup+'\n      ';var m=new (c('URI'))(this.props.src).qualify(),n=l.getElementById('theform');n.action=m.toString();var o=m.getQueryData();for(var p in o)if(Object.prototype.hasOwnProperty.call(o,p)){var q=l.createElement('input');q.name=p;q.value=o[p];q.autocomplete='off';q.type='hidden';n.appendChild(q);}l.body.innerHTML+='\n        <iframe\n          frameborder="0"\n          width="1"\n          height="1"\n          onload="document.getElementById(\'theform\').submit()"\n        />\n      ';}.bind(this));};j.prototype.componentDidMount=function(){this.updateFrame();};j.prototype.componentDidUpdate=function(k){if(k.src!==this.props.src)this.updateFrame();};j.prototype.componentWillReceiveProps=function(k){if(k.width!==this.props.width||k.height!==this.props.height){var l=c('ReactDOM').findDOMNode(this.refs.frame);if(k.width!=null)l.width=k.width;if(k.height!=null)l.height=k.height;}};j.prototype.render=function(){var k=this.props,l=k.src,m=babelHelpers.objectWithoutProperties(k,['src']);return c('React').createElement(c('StaticContainer.react'),null,c('React').createElement('iframe',babelHelpers['extends']({},m,{ref:'frame'})));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MercuryThirdPartyMediaReactShape',['React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=h.shape({aspectRatio:h.number,height:h.number.isRequired,lockHeight:h.bool.isRequired,width:h.number.isRequired}),j=h.shape({chatImageDimensions:i.isRequired,chatMediaDimensions:i.isRequired,chatTextClasses:h.string,mediaSrc:h.string.isRequired,messengerImageDimensions:i.isRequired,messengerMediaDimensions:i.isRequired,messengerTextClasses:h.string,showMediaWithText:h.bool.isRequired});f.exports=j;}),null);
__d('SimpleObjectsPool',['invariant'],(function a(b,c,d,e,f,g,h){function i(j){'use strict';this.$SimpleObjectsPool1=j;this.$SimpleObjectsPool2=[];}i.prototype.get=function(){'use strict';if(this.$SimpleObjectsPool2.length){return this.$SimpleObjectsPool2.pop();}else{var j=this.$SimpleObjectsPool1;return new j();}};i.prototype.put=function(j){'use strict';j instanceof this.$SimpleObjectsPool1||h(0);this.$SimpleObjectsPool2.push(j);};f.exports=i;}),null);
__d('PersistentAnimationFrame',['SimpleObjectsPool','Visibility','cancelAnimationFrame','requestAnimationFrame'],(function a(b,c,d,e,f,g){var h=16,i,j={},k=true;function l(){if(!i)i=new (c('SimpleObjectsPool'))(m);return i;}function m(){'use strict';this.$PersistentAnimationFrame1=function(){this.callback();this.$PersistentAnimationFrame2();l().put(this);}.bind(this);}m.request=function(p){'use strict';if(!p)return 0;return l().get().request(p);};m.cancel=function(p){'use strict';if(p===0)return;var q=j[String(p)];if(q)q.cancel();};m.prototype.request=function(p){'use strict';k&&n();this.callback=p;this.hidden=c('Visibility').isHidden();if(this.hidden){this.intID=setTimeout(this.$PersistentAnimationFrame1,h);}else this.intID=c('requestAnimationFrame')(this.$PersistentAnimationFrame1);this.strID=String(this.intID);j[this.strID]=this;return this.intID;};m.prototype.cancel=function(){'use strict';if(this.strID){if(this.hidden){clearTimeout(this.intID);}else c('cancelAnimationFrame')(this.intID);this.$PersistentAnimationFrame2();l().put(this);}};m.prototype.$PersistentAnimationFrame2=function(){'use strict';delete j[this.strID];delete this.intID;delete this.strID;delete this.callback;delete this.hidden;};function n(){k=false;c('Visibility').addListener(c('Visibility').HIDDEN,o);c('Visibility').addListener(c('Visibility').VISIBLE,o);}function o(){Object.keys(j).forEach(function(p){var q=j[p],r=q.callback;q.cancel();r();});}f.exports=m;}),null);
__d('requestPersistentAnimationFrame',['PersistentAnimationFrame'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('PersistentAnimationFrame').request;}),null);
__d('ResizeEventHandler',['requestPersistentAnimationFrame'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.handleEvent=function(){if(this.$ResizeEventHandler1===false){this.$ResizeEventHandler1=true;c('requestPersistentAnimationFrame')(this.$ResizeEventHandler3);}}.bind(this);this.$ResizeEventHandler3=function(){this.$ResizeEventHandler1=false;this.$ResizeEventHandler2();}.bind(this);this.$ResizeEventHandler1=false;this.$ResizeEventHandler2=i;}f.exports=h;}),null);
__d('ResponsiveBlock.react',['cx','MutationObserver','React','ReactDOM','ResizeEventHandler','UserAgent','joinClasses','requestAnimationFrame'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=c('UserAgent').isBrowser('IE')&&'onresize' in document.createElement('div'),k={attributes:true,characterData:true,childList:true,subtree:true},l=c('React').createClass({displayName:'ResponsiveBlock',propTypes:{onResize:i.func.isRequired},componentDidMount:function m(){this._width=null;this._height=null;this._resizeHandler=new (c('ResizeEventHandler'))(this._didResize);this._bindResizeEvent();this._observer=new (c('MutationObserver'))(this._resizeHandler.handleEvent);this._observer.observe(c('ReactDOM').findDOMNode(this),k);},componentWillUnmount:function m(){if(this._sensorTarget){try{this._sensorTarget.onresize=null;}catch(n){}this._sensorTarget=null;}this._resizeHandler=null;if(this._observer){this._observer.disconnect();this._observer=null;}this._width=null;this._height=null;},render:function m(){var n=c('joinClasses')("_4u-c",this.props.className),o;if(j){o=c('React').createElement('div',{key:'sensor',ref:'sensorNode',className:"_4u-f"});}else o=c('React').createElement('div',{key:'sensor',className:"_4u-f"},c('React').createElement('iframe',{'aria-hidden':'true',ref:'sensorNode',className:"_1_xb",tabIndex:'-1'}));return c('React').createElement('div',babelHelpers['extends']({},this.props,{className:n}),this.props.children,o);},_bindResizeEvent:function m(){if(!this.isMounted())return;if(j){this._sensorTarget=c('ReactDOM').findDOMNode(this.refs.sensorNode);}else this._sensorTarget=c('ReactDOM').findDOMNode(this.refs.sensorNode).contentWindow;if(this._sensorTarget){this._sensorTarget.onresize=this._resizeHandler.handleEvent;this._resizeHandler.handleEvent();}else c('requestAnimationFrame')(this._bindResizeEvent);},_didResize:function m(){if(this.isMounted()){var n=c('ReactDOM').findDOMNode(this),o=n.offsetWidth,p=n.offsetHeight;if(o!==this._width||p!==this._height){this._width=o;this._height=p;this.props.onResize(o,p);}}}});f.exports=l;}),null);
__d('MercuryThirdPartyMediaAttachmentContent.react',['cx','ix','CenteredContainer.react','ControlledRefererIFrame.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','Image.react','ImageBlock.react','Link.react','MercuryFallbackShareAttachmentTextBlock.react','MercuryShareAttachmentRenderLocations','MercuryThirdPartyMediaReactShape','React','ReactDOM','ResponsiveBlock.react','URI','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m={IMAGE:'image',MEDIA:'media'};j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$MercuryThirdPartyMediaAttachmentContent1=function(){this.setState({imageDimensions:this.$MercuryThirdPartyMediaAttachmentContent5(m.IMAGE),mediaDimensions:this.$MercuryThirdPartyMediaAttachmentContent5(m.MEDIA)});}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent4=function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return "_3xn3 _5swn";var u=this.$MercuryThirdPartyMediaAttachmentContent5(this.state.showMedia?m.MEDIA:m.IMAGE),v=u.height,w=u.width,x=v>w;return "_3xn3"+(o(v,w)&&!x?' '+"_3xn5":'')+(x?' '+"_3xn6":'')+(w>=v?' '+"_3xn7":'');}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent6=function(u){var v=this.props.media;if(this.$MercuryThirdPartyMediaAttachmentContent7()){return u===m.IMAGE?v.chatImageDimensions:v.chatMediaDimensions;}else return u===m.IMAGE?v.messengerImageDimensions:v.messengerMediaDimensions;}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent5=function(u){var v=this.$MercuryThirdPartyMediaAttachmentContent6(u),w=c('ReactDOM').findDOMNode(this.refs.wrapper);if(w){var x=v.aspectRatio,y=w.offsetWidth;if(x!=null){return {aspectRatio:x,height:y*x,lockHeight:false,width:y};}else if(v.lockHeight){return {aspectRatio:null,height:v.height,lockHeight:true,width:y};}else return v;}else return v;}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent8=function(u){u.preventDefault();this.setState({showMedia:true,iframeWidth:c('ReactDOM').findDOMNode(this.refs.wrapper).offsetWidth});}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent3=function(){var u=this.state.imageDimensions,v={height:u.height,width:u.width};return c('React').createElement(c('FBOverlayContainer.react'),{className:(this.state.showMedia?"hidden_elem":'')+(' '+"clearfix"),style:v},c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement(c('Image.react'),{style:v,src:this.props.attachment.media.image})),c('React').createElement(c('FBOverlayElement.react'),null,c('React').createElement(c('CenteredContainer.react'),{vertical:true},c('React').createElement(c('Image.react'),{className:"_4crc",onClick:this.$MercuryThirdPartyMediaAttachmentContent8,src:i("27983")}))));}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent2=function(){if(!this.state.showMedia)return c('React').createElement('div',null);var u=this.state.mediaDimensions,v=new (c('URI'))(this.props.media.mediaSrc);v.addQueryData({autoplay:true});return c('React').createElement(c('ControlledRefererIFrame.react'),{allowTransparency:true,frameBorder:0,height:u.height,src:v.toString(),width:u.width,allowFullScreen:true});}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent7=function(){return this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT;}.bind(this),this.state={showMedia:false,imageDimensions:this.$MercuryThirdPartyMediaAttachmentContent5(m.IMAGE),mediaDimensions:this.$MercuryThirdPartyMediaAttachmentContent5(m.MEDIA)},q;}n.prototype.render=function(){var p=this.props.attachment,q=this.props.location,r=this.props.media,s=(c('MercuryShareAttachmentRenderLocations').CHAT===q?"_49or":'')+(c('MercuryShareAttachmentRenderLocations').MESSENGER===q?' '+"_tih":'')+(!(p&&p.media.image)?' '+"_49ou":'');if(q===c('MercuryShareAttachmentRenderLocations').CHAT){return c('React').createElement(c('ResponsiveBlock.react'),{onResize:this.$MercuryThirdPartyMediaAttachmentContent1,ref:'wrapper',className:r.chatTextClasses},this.$MercuryThirdPartyMediaAttachmentContent2(),c('React').createElement('div',{className:c('joinClasses')(s,this.state.showMedia&&!this.props.media.showMediaWithText?"hidden_elem":''),spacing:'medium'},this.$MercuryThirdPartyMediaAttachmentContent3(),c('React').createElement('div',{className:"_4cra"},c('React').createElement(c('MercuryFallbackShareAttachmentTextBlock.react'),{attachment:p,location:q}))));}else if(q===c('MercuryShareAttachmentRenderLocations').MESSENGER)return c('React').createElement(c('ResponsiveBlock.react'),{onResize:this.$MercuryThirdPartyMediaAttachmentContent1,ref:'wrapper'},c('React').createElement('div',{className:c('joinClasses')(this.props.className,this.$MercuryThirdPartyMediaAttachmentContent4())},this.$MercuryThirdPartyMediaAttachmentContent2(),c('React').createElement('div',{className:this.state.showMedia&&!this.props.media.showMediaWithText?"hidden_elem":''},this.$MercuryThirdPartyMediaAttachmentContent3(),c('React').createElement(c('Link.react'),{className:c('joinClasses')(r.messengerTextClasses,"_5rw4 _vjv"),href:this.props.media.mediaSrc,target:'_blank'},c('React').createElement(c('MercuryFallbackShareAttachmentTextBlock.react'),{attachment:p,location:q})))));};n.propTypes={attachment:l.object.isRequired,location:l.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()).isRequired,media:c('MercuryThirdPartyMediaReactShape').isRequired};function o(p,q){return p<=300&&q<=300;}f.exports=n;}),null);