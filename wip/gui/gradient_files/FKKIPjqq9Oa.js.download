if (self.CavalryLogger) { CavalryLogger.start_js(["x8ERm"]); }

__d('MercuryAudioPlayer',['Arbiter','DOM','Event','Flash'],(function a(b,c,d,e,f,g){var h=200;function i(){var r=c('DOM').create('audio'),s=false;try{if(!!r.canPlayType)if(r.canPlayType('video/mp4;').replace(/^no$/,''))s=true;}finally{return s;}}function j(){return c('Flash').isAvailable();}var k=function r(){this.interval=null;this.arbiterInstance=null;this.audio=c('DOM').create('audio');c('Event').listen(this.audio,'playing',function(){this.informAttachment('playing',this.audio.currentTime);this.interval=setInterval(function(){this.informAttachment('playing',this.audio.currentTime);}.bind(this),h);}.bind(this));c('Event').listen(this.audio,'ended',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};Object.assign(k.prototype,{setAudio:function r(s,t){this.audio.setAttribute('src',s);this.arbiterInstance=t;},informAttachment:function r(s,t){if(this.arbiterInstance)this.arbiterInstance.inform(s,t);},play:function r(){this.audio.play();this.informAttachment('played');},resume:function r(){this.audio.play();this.informAttachment('played');},pause:function r(){this.audio.pause();clearInterval(this.interval);this.informAttachment('paused');},getType:function r(){return 'html5';}});var l=function r(){this.src=null;this.arbiterInstance=null;var s=c('DOM').create('div');document.body.appendChild(s);this.swf=c('Flash').embed('/swf/cigars/SoundStreamPlayer.swf',s,null,{});this.interval=null;c('Arbiter').subscribe('soundstream/finished',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};Object.assign(l.prototype,{setAudio:function r(s,t){this.src=s;this.arbiterInstance=t;},informAttachment:function r(s,t){if(this.arbiterInstance)this.arbiterInstance.inform(s,t);},play:function r(){this.swf.playSound(this.src);this.interval=setInterval(function(){var s=this.swf.getCurrentTime();this.informAttachment('playing',s);}.bind(this),h);this.informAttachment('played');},resume:function r(){this.swf.resume();this.informAttachment('played');},pause:function r(){clearInterval(this.interval);this.swf.pause();this.informAttachment('paused');},getType:function r(){return 'flash';}});function m(){if(i()){return new k();}else if(j())return new l();return false;}var n=null,o=null,p=0;function q(r,s){this.src=r;this.arbiterInstance=s;this.audio_id=++p;n!==null||(n=m());if(!n)return false;}Object.assign(q.prototype,{getType:function r(){if(!n){return false;}else return n.getType();},play:function r(s){if(s&&o==this.audio_id){n.resume();}else{this.pause();o=this.audio_id;n.setAudio(this.src,this.arbiterInstance);n.play();}},pause:function r(){n.pause();}});f.exports=q;}),null);
__d('MercuryAttachmentAudioClip.react',['cssVar','cx','fbt','Arbiter','ArbiterMixin','MercuryAudioPlayer','CurrentUser','JSLogger','LeftRight.react','Link.react','MercuryShareAttachmentRenderLocations','React','SubscriptionsHandler','WorkModeConfig','joinClasses','messengerCustomColorUtils','shield'],(function a(b,c,d,e,f,g,h,i,j){var k=c('React').PropTypes,l='MercuryAttachmentAudioClip/play',m='progress-bar',n=c('JSLogger').create('mercury_audio_clip'),o=c('React').createClass({displayName:'AudioClip',mixins:[c('ArbiterMixin')],propTypes:{customColor:k.string,duration:k.number,isChat:k.bool,isFromViewer:k.bool,location:k.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),onAttachmentLoad:k.func,rootClassName:k.string,showHelp:k.bool,src:k.string.isRequired,width:k.number},getInitialState:function p(){this.logged=false;return {time:0,playing:false,started:false,duration:this.props.duration,audioPlayer:new (c('MercuryAudioPlayer'))(this.props.src,this)};},componentDidMount:function p(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad();this._subscriptionsHandler=new (c('SubscriptionsHandler'))();this._subscriptionsHandler.addSubscriptions(this.subscribe('playing',this.updateTime),this.subscribe('played',c('shield')(this.setState,this,{playing:true,started:true})),this.subscribe('paused',c('shield')(this.setState,this,{playing:false})),this.subscribe('finished',c('shield')(this.setState,this,{playing:false,started:false,time:this.props.duration})),c('Arbiter').subscribe(l,function(q,r){if(this.props.src!=r)this.setState({time:0});}.bind(this)));},componentWillUnmount:function p(){this._subscriptionsHandler&&this._subscriptionsHandler.release();},updateTime:function p(q,r){this.setState({time:r});},play:function p(){if(this.state.playing){this.state.audioPlayer.pause();}else{this.state.audioPlayer.play(this.state.started);c('Arbiter').inform(l,this.props.src);if(!this.logged){this.logged=true;n.log('play',{uid:c('CurrentUser').getID(),duration:this.props.duration});}}},_formatSeconds:function p(q){if(q){q=Math.round(q);var r=q%60;if(r<10)r='0'+r;var s=Math.floor(q/60);return s+':'+r;}else return null;},_renderPlayer:function p(q,r,s){var t=this.props.isFromViewer,u=this.props.isChat,v=c('WorkModeConfig').is_work_user,w=s===m,x=u&&t&&!w,y=this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER,z=v?"#373e4c":"#4080ff",aa=s||z,ba={width:q};if(x)c('messengerCustomColorUtils').customBubbleStyle(aa,ba);var ca=s&&s!==m&&!u?{color:s}:{},da={};if(w)da['aria-disabled']=true;return c('React').createElement(c('Link.react'),babelHelpers['extends']({'aria-label':j._("Voice Message"),className:"_1miz"+(' '+"_2e-1")+(!y?' '+"_3_om":'')+(t&&u?' '+"_3e5f":''),role:'button',style:ba,onClick:this.play},da),c('React').createElement('span',{className:"_1mi- _2e-2"},c('React').createElement('i',{className:"_1mi_ _2e-3"})),c('React').createElement('span',{style:ca,className:"_1mj0 _2e-4 _3oh-"},r),c('React').createElement('div',{className:"_1mj1 _2e-5"}));},render:function p(){var q=this.state.time,r=this.state.playing,s=this._formatSeconds(this.state.duration),t=this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER,u=this.props.width||170;if(t){var v=this.props.duration;if(v>10){u=240;}else if(v>5){u=200;}else if(v>2){u=160;}else u=120;}var w=null,x=Math.ceil(q*(u+2)/this.state.duration);if(t)x=Math.ceil(q*(u+24)/this.state.duration);if(this.state.audioPlayer&&this.state.audioPlayer.getType()){var y=this._renderPlayer(u,s,this.props.customColor),z=this._renderPlayer(u,s,m),aa="_1mj2"+(' '+"_2e-6")+(r&&q!==0?' '+"_1mj3":'')+(r&&q===0?' '+"_4g4x":'');w=c('React').createElement('div',{className:aa},y,c('React').createElement('div',{className:"_1mj4 _2e-7",style:{width:x}},z));}else w=c('React').createElement('div',{className:"_1mj2"},c('React').createElement('div',{className:"_1miz"},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('a',{className:"_1mj5",href:this.props.src},c('React').createElement('span',{className:"_3qi6"},c('React').createElement('i',{className:"_1mj6"})),c('React').createElement('span',{className:"_1mj7"},j._("Voice Message")),c('React').createElement('span',{className:"_1mj8"},s)),c('React').createElement('a',{href:this.props.src,className:"_1mj9"},c('React').createElement('i',{className:"_1mja"})))));return c('React').createElement('div',{className:c('joinClasses')("_1mjb"+(t?' '+"_454y":''),this.props.rootClassName)},w);}});f.exports=o;}),null);
__d('EmojiSticker.react',['cx','Image.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad();};l.prototype.render=function(){var m=this.props.emojiImage?this.props.emojiImage:c('React').createElement(c('Image.react'),{src:this.props.sourceURI});return c('React').createElement('div',{'aria-label':this.props.emoji,className:c('joinClasses')(this.props.className,"_383m"),tabIndex:'0'},m);};function l(){i.apply(this,arguments);}l.propTypes={emoji:k.string,emojiImage:k.any,onAttachmentLoad:k.func,sourceURI:k.string.isRequired};f.exports=l;}),null);
__d('MessagingFlowerBorderChecker',['MercuryConfig','MercuryMessageCustomizations','MessageBorderType','MessageCustomizationType'],(function a(b,c,d,e,f,g){'use strict';var h={shouldRenderWithFlowerBorder:function i(j){return c('MercuryConfig').WWWMessengerFlowerBorderViewer&&c('MercuryMessageCustomizations').getCustomizationValue(j,c('MessageCustomizationType').BORDER)===c('MessageBorderType').FLOWERS;}};f.exports=h;}),null);
__d('MessengerErrorAttachment.react',['cx','fbt','CurrentUser','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.render=function(){var m=this.props.attachment.error_msg||i._("This attachment could not be loaded.");return c('React').createElement('div',{className:"_1o12 _52mr"},c('React').createElement('div',{className:"_1o13"},m,this.$MessengerErrorAttachment1()));};l.prototype.$MessengerErrorAttachment1=function(){if(!this.props.attachment.error_msg&&c('CurrentUser').isEmployee()&&c('CurrentUser').hasWorkUser()&&!c('CurrentUser').isWorkUser())return c('React').createElement('div',null,i._("It was probably meant for your \u0040workplace account."));return null;};f.exports=l;}),null);
__d('MessengerFileAttachment.react',['cx','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('Link.react'),{className:"_4pcn _2uf4",target:'_blank',href:this.props.attachment.url},c('React').createElement('div',{className:"_2uf5"}),this.props.attachment.name);};function l(){i.apply(this,arguments);}l.propTypes={attachment:k.object.isRequired};f.exports=l;}),null);
__d('MessengerFromViewerUtils',['CurrentUser','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.author===c('MercuryIDs').getParticipantIDFromUserID(c('CurrentUser').getID());}f.exports={isFromViewer:h};}),null);
__d('HotLikeSound',['MercurySoundsConfig','SoundPlayer','StickerConstants'],(function a(b,c,d,e,f,g){'use strict';var h=[c('MercurySoundsConfig').hot_like_grow_mp3_url,c('MercurySoundsConfig').hot_like_grow_ogg_url],i=[c('MercurySoundsConfig').hot_like_pop_mp3_url,c('MercurySoundsConfig').hot_like_pop_ogg_url],j=[c('MercurySoundsConfig').hot_like_outgoing_small_mp3_url,c('MercurySoundsConfig').hot_like_outgoing_small_ogg_url],k=[c('MercurySoundsConfig').hot_like_outgoing_medium_mp3_url,c('MercurySoundsConfig').hot_like_outgoing_medium_ogg_url],l=[c('MercurySoundsConfig').hot_like_outgoing_large_mp3_url,c('MercurySoundsConfig').hot_like_outgoing_large_ogg_url],m=function o(){return false;},n={setCheckSoundEnabledFunc:function o(p){m=p;},start:function o(){this._play(h);},stop:function o(){c('SoundPlayer').stop(h);},pop:function o(){this.stop();this._play(i);},snap:function o(p){this.stop();if(p===c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID)this._play(j);if(p===c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID)this._play(k);if(p===c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID)this._play(l);},_play:function o(p){if(m())c('SoundPlayer').play(p);}};f.exports=n;}),null);
__d('MessengerHotLikePreview.react',['cx','Animation','EmojiLikeConstants','HotLikeSound','MessengerHotLikePreviewEvents','MessengerHotLikeSVG.react','MessengerHotLikeUtils','MessengerSupportedEmojiUtils','React','ReactDOM','StickerConstants','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerHotLikePreview5=function(){this.$MessengerHotLikePreview6=new (c('Animation'))(c('ReactDOM').findDOMNode(this));this.$MessengerHotLikePreview7(-2,2,150,1000);this.$MessengerHotLikePreview7(-4,4,100,1000);this.$MessengerHotLikePreview7(-10,10,75,1000);this.$MessengerHotLikePreview6.go();}.bind(this),this.$MessengerHotLikePreview7=function(r,s,t,u){var v=Math.floor(u/t),w=null;for(var x=0;x<v;x++){w=x%2?r:s;this.$MessengerHotLikePreview6.to('rotateZ',w).duration(t).checkpoint();}}.bind(this),this.$MessengerHotLikePreview2=function(r,s){var t=s?c('MessengerHotLikePreviewEvents').FINISH_EMOJI_ANIMATION:c('MessengerHotLikePreviewEvents').FINISH_ANIMATION;if(this.$MessengerHotLikePreview8)return;this.$MessengerHotLikePreview8=true;var u=Date.now()-this.props.since,v=null;if(this.props.customLike)v=c('MessengerHotLikeUtils').getEmojiSizeForTime(u);var w=c('MessengerHotLikeUtils').getStickerIDForTime(u);c('HotLikeSound').snap(w);var x=c('MessengerHotLikeUtils').getMetadataForHotLike(v||w);this.$MessengerHotLikePreview6.stop();var y=30,z=-10;if(w===c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID){y=0;z=0;}this.$MessengerHotLikePreview4.stop().to('width',x.width*1.2).to('height',x.height*1.2).to('rotateZ',y).duration(100).checkpoint().to('width',x.width*.9).to('height',x.height*.9).to('rotateZ',z).duration(100).checkpoint().to('width',x.width).to('height',x.height).to('rotateZ',0).duration(100).ondone(function(){c('MessengerHotLikePreviewEvents').emit(t,r,w,v);}).go();}.bind(this),this.$MessengerHotLikePreview3=function(r){c('HotLikeSound').pop();this.$MessengerHotLikePreview4.stop().to('width',0).to('height',0).duration(100).ondone(function(){c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').REMOVE,r);}).go();}.bind(this),n;}l.prototype.componentDidMount=function(){this.$MessengerHotLikePreview1=new (c('SubscriptionsHandler'))();this.$MessengerHotLikePreview1.addSubscriptions(c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,this.$MessengerHotLikePreview2),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP_EMOJI,this.$MessengerHotLikePreview2),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').POP,this.$MessengerHotLikePreview3));c('HotLikeSound').start();this.$MessengerHotLikePreview4=new (c('Animation'))(c('ReactDOM').findDOMNode(this)).to('width',80).to('height',80).duration(3000).go();this.$MessengerHotLikePreview5();};l.prototype.componentWillUnmount=function(){this.$MessengerHotLikePreview1&&this.$MessengerHotLikePreview1.release();};l.prototype.render=function(){if(this.props.customLike){var m=this.props.customLike,n=c('MessengerSupportedEmojiUtils').getNewEmojiData(m.emoji,c('EmojiLikeConstants').size.LARGE),o=n?n.url:this.props.customLike.large;if(m.uri)o=m.uri;return c('React').createElement('div',{className:"_4a9g _383m",style:{backgroundImage:'url('+o+')'}});}return c('React').createElement('div',{className:"_4a9g _576q"},c('React').createElement(c('MessengerHotLikeSVG.react'),{color:this.props.customColor}));};l.propTypes={customLike:k.object,since:k.number};f.exports=l;}),null);
__d('MessengerStickerUtils',['MercuryAttachmentType'],(function a(b,c,d,e,f,g){'use strict';function h(k){return !!(k&&k.attach_type===c('MercuryAttachmentType').STICKER);}function i(k){var l=k.attachments;return !!(k.is_like_preview||k.sticker_id||l&&l.length===1&&h(l[0]));}function j(k){return k.size===1&&i(k.first());}f.exports={isStickerMessageGroup:j,isStickerMessage:i,isStickerAttachment:h};}),null);
__d('MessengerVoiceClipAttachment.react',['cx','MercuryAttachmentAudioClip.react','MercuryShareAttachmentRenderLocations','MessagingGiftWrap.react','MessagingFlowerBorder.react','React','messengerCustomColorUtils'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.attachment,n=m.metadata.duration/1000,o=!!m.app_attribution,p={};if(this.props.customColor)p=c('messengerCustomColorUtils').customBubbleStyle(this.props.customColor,p);var q=this.props.isGiftWrapped?c('React').createElement(c('MessagingGiftWrap.react'),{onUnwrap:this.props.onUnwrap}):null,r=this.props.hasFlowerBorder?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null;return c('React').createElement('div',{className:"_hh7"+(' '+"_s1-")+(!!this.props.customColor?' '+"_5sxi":'')+(!o?' '+"_52mr":'')+(o?' '+"_mxz":'')+(' '+"_1fz8")+(o?' '+"_1-wa":'')+(' '+"_1nqp"),style:p},c('React').createElement(c('MercuryAttachmentAudioClip.react'),{customColor:this.props.customColor,src:m.url,duration:n,key:'audio:'+this.props.message.message_id,showHelp:false,width:200,location:c('MercuryShareAttachmentRenderLocations').MESSENGER,rootClassName:"_3czg"+(o?' '+"_4yjw":'')+(' '+"_2poz")+(' '+"_ui9")}),q,r);};function l(){i.apply(this,arguments);}l.propTypes={attachment:k.object.isRequired,customColor:k.string,isGiftWrapped:k.bool,message:k.object.isRequired,onUnwrap:k.func};f.exports=l;}),null);
__d("XStickerInTrayController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/stickers\/in_tray\/",{pack_id:{type:"Int",required:true}});}),null);
__d('StickersPackInTray',['Promise','AsyncRequest','RelayQL','RelayStore','XStickerInTrayController','createRelayQuery'],(function a(b,c,d,e,f,g){'use strict';var h={onIsPackInTray:function i(j,k,l){var m=c('createRelayQuery')(function(){return {children:[{children:[{calls:[{kind:'Call',metadata:{type:'StickerInterfaces'},name:'interface',value:{kind:'CallVariable',callVariableName:'stickerInterface'}},{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallValue',callValue:10000}}],children:[{children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'StickerPack'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'PacksInTrayEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'tray_packs',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'PacksInTrayConnection'}],fieldName:'sticker_store',kind:'Field',metadata:{canHaveSubselections:true},type:'StickerStore'}],fieldName:'viewer',kind:'Query',metadata:{},name:'StickersPackInTray',type:'Viewer'};}(),{stickerInterface:k}),n=c('RelayStore').readQuery(m);n=n&&n.length>0?n[0]:null;if(n&&n.sticker_store&&n.sticker_store.tray_packs&&n.sticker_store.tray_packs.edges)return new (c('Promise'))(function(p,q){return p({in_sticker_tray:n.sticker_store.tray_packs.edges.filter(function(r){return r.node.id===j;}).length>0});}).then(l);var o=c('XStickerInTrayController').getURIBuilder().setInt('pack_id',j).getURI();return new (c('Promise'))(function(p,q){return new (c('AsyncRequest'))(o).setHandler(function(r){return p(r.getPayload());}).setAllowCrossPageTransition(true).send();}).then(l);}};f.exports=h;}),null);
__d('isRetina',[],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){return (window.devicePixelRatio||1)>1;};}),null);
__d('MessengerAttachmentRenderer',['cx','EmojiSticker.react','MercuryAttachment','MercuryAttachmentType','MercuryAudioType','MercuryShareAttachment.react','MercuryShareAttachmentRenderLocations','MessagingFlowerBorder.react','MessagingFlowerBorderChecker','MessagingGiftWrap.react','MessagingGiftWrapChecker','MessengerErrorAttachment.react','MessengerFileAttachment.react','MessengerFromViewerUtils','MessengerHotLikePreview.react','MessengerHotLikeUtils','MessengerPhotosGroup.react','MessengerStickerUtils','MessengerSupportedEmojiUtils','MessengerVoiceClipAttachment.react','MessengerWebDriverTestIDs','React','Set','Sticker.react','StickerAssetType','StickerConstants','StickerInterfaces','StickerUtils','StickersActions','StickersPackInTray','StickersStoreController','StoryAttachmentStyle','XStickerAssetController','isRetina','wrapNullableForReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=700,j='sticker:',k='giftwrap:',l='share:',m="_1c_u",n=function p(q){return q===Object(q);},o={getAttachmentsInsideBubble:function p(q,r){var s=c('MercuryAttachment').get(q).filter(n).filter(function(t){return !this.attachmentShouldAppearOutsideBubble(t);}.bind(this));return this._getAttachmentComponents(s,q,r);},getAttachmentsOutsideBubble:function p(q,r,s){var t=c('MercuryAttachment').get(q).filter(n).filter(function(u){return this.attachmentShouldAppearOutsideBubble(u);}.bind(this));return this._getAttachmentComponents(t,q,r,s);},_getAttachmentComponents:function p(q,r,s,t){var u=this._getPhotosGroup(q.filter(c('MercuryAttachment').isPhotoGroupAttachment),r,s,t),v=q.filter(function(w){return !c('MercuryAttachment').isPhotoGroupAttachment(w);}).map(function(w,x){return this._getAttachmentComponent(w,r,s,t,x===0);}.bind(this));if(u)v.push(u);return v;},_getAttachmentComponent:function p(q,r,s,t,u){var v=t&&t.customColor,w=t&&t.onUnwrap,x=t&&t.isVisible,y=t&&t.onSelect,z=t&&t.messageBubble;if(c('MessengerStickerUtils').isStickerAttachment(q))return this._getStickerComponent(q,r,v,w);if(this.isEmojiLikeAttachment(q))return this._getEmojiLikeAttachment(q,r,w);if(this.isVoiceClip(q))return this._getVoiceClip(q,r,v,w);if(this.isFileAttchment(q))return this._getFileComponent(q,r);if(this.isP2P(q)||this.isShareAttachment(q))return this._getShareAttachment(q,r,s,x,y,u?z:null);if(this.isErrorAttachment(q))return this._getErrorAttachment(q,r);return null;},_getStickerComponent:function p(q,r,s,t){if(r.is_like_preview)return this._maybeGiftWrapSticker(c('React').createElement(c('MessengerHotLikePreview.react'),{customColor:s,customLike:r.customLike,key:'hlp:'+r.like_preview_since,since:r.like_preview_since}),r,t);var u=q.metadata;if(!u){u=c('MessengerHotLikeUtils').getMetadataForHotLike(r.sticker_id);if(!u){u={};var v=c('StickerUtils').getScaledDimensions(c('StickerConstants').THREAD_SIZE,c('StickerConstants').THREAD_SIZE,c('StickerConstants').THREAD_SIZE),w=v.height,x=v.width;u.height=w;u.width=x;}u.stickerID=r.sticker_id;}var y=c('XStickerAssetController').getURIBuilder().setInt('sticker_id',u.stickerID),z=null,aa=null;if(c('isRetina')()){z=u.paddedSpriteURI2x;aa=u.spriteURI2x;}else{z=u.paddedSpriteURI;aa=u.spriteURI;}var ba=u.stickerID.toString(),ca=c('React').createElement(c('Sticker.react'),{className:"_2poz"+(' '+"_ui9")+(c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(r)&&!!c('MessengerHotLikeUtils').getMetadataForHotLike(ba)?' '+"_4ue_":''),animationTrigger:'hover',customColor:s,frameCount:u.frameCount||1,frameRate:u.frameRate||c('StickerConstants').DEFAULT_FRAME_RATE,framesPerCol:u.framesPerCol||1,framesPerRow:u.framesPerRow||1,key:j+r.message_id,onStickerClick:function da(ea,fa){c('StickersPackInTray').onIsPackInTray(ea,c('StickerInterfaces').MESSAGES,function(ga){if(ga.in_sticker_tray){c('StickersActions').selectTrayPack(ea);c('StickersActions').showStickerFlyout(r.thread_id);}else c('StickersStoreController').showStore(ea);});},packID:u.packID&&u.packID.toString(),paddedSpriteURI:z,sourceHeight:u.height,sourceURI:y.setEnum('image_type',c('StickerAssetType').IMAGE).getURI().toString(),sourceWidth:u.width,spriteURI:aa,stickerID:ba,testID:c('MessengerWebDriverTestIDs').STICKER});return this._maybeGiftWrapSticker(ca,r,t);},_getEmojiLikeAttachment:function p(q,r,s){var t=c('MessengerSupportedEmojiUtils').transferSize(q.size),u=c('MessengerSupportedEmojiUtils').getNewEmojiData(r.body,t),v=u?u.emoji:undefined;if(!u)return this._getErrorAttachment(q,r);var w=c('React').createElement(c('EmojiSticker.react'),{className:"_2poz _ui9",key:j+r.message_id,emoji:r.body,emojiImage:v,sourceURI:''});return this._maybeGiftWrapSticker(w,r,s);},_getShareAttachment:function p(q,r,s,t,u,v){var w=null;if(r&&r.platform_xmd)w=JSON.parse(r.platform_xmd);return c('React').createElement(c('MercuryShareAttachment.react'),{attachment:q.share,isSponsored:r.is_sponsored,isVisible:!!t,key:l+r.message_id,location:c('MercuryShareAttachmentRenderLocations').MESSENGER,maxWidth:i,messageBubble:v,messageID:r.message_id,mnMessageType:w&&w.template_type,onComponentLoaded:s,onSelect:u,pageID:r.author,threadID:r.thread_id});},_getVoiceClip:function p(q,r,s,t){s=c('MessengerFromViewerUtils').isFromViewer(r)?s||undefined:undefined;return c('React').createElement(c('MessengerVoiceClipAttachment.react'),{attachment:q,customColor:s,isGiftWrapped:c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(r),hasFlowerBorder:c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(r),key:'audio:'+r.message_id,message:r,onUnwrap:function(u){function v(){return u.apply(this,arguments);}v.toString=function(){return u.toString();};return v;}(function(){t&&t();})});},_getErrorAttachment:function p(q,r){return c('React').createElement(c('MessengerErrorAttachment.react'),{attachment:q,key:'error:'+r.message_id});},_getPhotosGroup:function p(q,r,s,t){if(!q.length)return null;var u=t&&t.onUnwrap,v=t&&t.isVisible,w=t&&t.onSelect,x=t&&t.isPageMessage,y=t&&t.pageID,z=c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(r),aa=c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(r)&&this._rendersWithoutAttribution(q);return c('React').createElement(c('MessengerPhotosGroup.react'),{attachments:q,className:"_2poz _52mr _ui9",count:q.length,hasFlowerBorder:z,isGiftWrapped:aa,isPageMessage:x,isVisible:!!v,key:'photos:'+r.message_id,message:r,onSelect:w,onUnwrap:function(ba){function ca(){return ba.apply(this,arguments);}ca.toString=function(){return ba.toString();};return ca;}(function(){u&&u();}),pageID:y});},getVideoElem:function p(q,r){var s=r.getMessageElement(q);if(!s)return null;var t=s.getElementsByClassName(m);return t&&t.length?t[0]:s;},_rendersWithoutAttribution:function p(q){return q.length!=1||!c('MercuryAttachment').hasAttribution(q[0]);},_getFileComponent:function p(q,r){return c('React').createElement(c('MessengerFileAttachment.react'),{attachment:q,className:"_2poz",key:'file:'+q.url});},attachmentShouldAppearOutsideBubble:function p(q){return c('MessengerStickerUtils').isStickerAttachment(q)||c('MercuryAttachment').isPhotoGroupAttachment(q)||this.isShareAttachment(q)||this.isP2P(q)||this.isVoiceClip(q)||this.isErrorAttachment(q)||this.isEmojiLikeAttachment(q);},isPhotosGroupAttachment:function p(q){var r=q.props.attachments;return !!r&&r.length>1&&r.some(function(s){return !!s&&c('MercuryAttachment').isPhotoGroupAttachment(s);});},isRenderedShareAttachment:function p(q){return !!(q.key&&q.key.startsWith(l));},isFileAttchment:function p(q){return q.attach_type===c('MercuryAttachmentType').FILE;},isShareAttachment:function p(q){return !!(this._isStoryBased(q)&&!this.isP2P(q)&&(q.share.style_list.indexOf(c('StoryAttachmentStyle').SHARE)>-1||q.share.style_list.indexOf(c('StoryAttachmentStyle').FALLBACK)>-1));},isSharedVideoAttachment:function p(q){var r=q.attach_type===c('MercuryAttachmentType').SHARE&&q.share&&q.share.subattachments&&q.share.subattachments[0];return !!(r&&r.target&&r.target.video_id);},isP2P:function p(q){return !!(this._isStoryBased(q)&&q.share.style_list.indexOf(c('StoryAttachmentStyle').ORION)>-1);},_isStoryBased:function p(q){return !!(q.attach_type===c('MercuryAttachmentType').SHARE&&q.share&&q.share.style_list);},isEmojiLikeAttachment:function p(q){return q.attach_type===c('MercuryAttachmentType').EMOJI_LIKE;},isVoiceClip:function p(q){return !!q.metadata&&(q.metadata.type===c('MercuryAudioType').AudioClip||q.metadata.type===c('MercuryAudioType').VoiceMessageWithTranscript);},isVoiceClipAttachment:function p(q){var r=c('MercuryAttachment').get(q).filter(n).filter(function(s){return this.isVoiceClip(s);}.bind(this));return !!r.length;},isP2PAttachment:function p(q){var r=c('MercuryAttachment').get(q).filter(function(s){return n(s)&&this.isP2P(s);}.bind(this));return !!r.length;},isSingleVideoAttachment:function p(q){var r=c('MercuryAttachment').get(q).filter(n).filter(function(s){return c('MercuryAttachment').isVideoAttachment(s);});return r.length===1;},isSharedVideoAttachmentMessage:function p(q){var r=c('MercuryAttachment').get(q).filter(n).filter(function(s){return this.isSharedVideoAttachment(s)||this.isGenieSharedVideoAttachment(s);}.bind(this));return r.length===1;},isGenieSharedVideoAttachment:function p(q){return !!(q.attach_type===c('MercuryAttachmentType').SHARE&&q.share&&q.share.style_list.indexOf(c('StoryAttachmentStyle').GENIE_MESSAGE)>-1&&q.share.target&&q.share.target.attachment&&this.isSharedVideoAttachment(q.share.target.attachment));},isErrorAttachment:function p(q){return q.attach_type===c('MercuryAttachmentType').ERROR;},_maybeGiftWrapComponentForMessage:function p(q,r,s){var t=c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(r),u=c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(r);if(!t&&!u)return q;return c('React').createElement('div',{key:k+r.message_id},q,t?c('React').createElement(c('MessagingGiftWrap.react'),{onUnwrap:c('wrapNullableForReact')(s)}):null,u?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null);},_maybeGiftWrapSticker:function p(q,r,s){var t=c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(r),u=c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(r);if(!t&&!u)return q;return c('React').createElement('div',{key:k+r.message_id},q,t?c('React').createElement(c('MessagingGiftWrap.react'),{isSticker:true,onUnwrap:c('wrapNullableForReact')(s)}):null,u?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null);}};f.exports=o;}),null);
__d('shouldNotRenderSegoe',['MessengerConfig','UserAgent'],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp('[\u0530-\u05f4\u10a0-\u10ff]'),i=c('UserAgent').isBrowser('Chrome')&&c('UserAgent').isPlatform('Windows 10');f.exports=function j(k){return !c('MessengerConfig').SegoeUIDisabled&&i&&h.test(k);};}),null);
__d('MessengerBubble.react',['cx','EmojiOnlyMessage.react','immutable','ImmutableObject','MercuryIDs','MercuryMessageBody.react','MessengerActions','MessengerDecorator','MessengerSupportedEmojiUtils','React','joinClasses','shouldNotRenderSegoe'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={emojis:undefined},n;}l.prototype.componentDidMount=function(){if(!this.props.emojis){var m=this.props.body||'',n=c('MessengerSupportedEmojiUtils').getEmojiOnlyContents(m);if(n&&n.length)this.setState({emojis:n});}};l.prototype.render=function(){var m=false,n=null;if(this.state.emojis){n=c('React').createElement(c('EmojiOnlyMessage.react'),{contents:this.state.emojis});}else{m=true;n=c('React').createElement(c('MercuryMessageBody.react'),{body:this.props.body,className:"_3oh-"+(c('shouldNotRenderSegoe')(this.props.body||'')?' '+"_2por":'')+(' '+"_58nk"),threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,ranges:this.props.ranges,metaRanges:this.props.metaRanges,threadID:this.props.threadID,customLike:this.props.customLike,onContactSelect:this.$MessengerBubble1});}var o=[],p=[],q=this.props.message,r=!!this.props.isFromViewer;if(q){c('MessengerDecorator').getInsideDecorators().concat(c('MessengerDecorator').getAfterDecorators()).forEach(function(u){if(u.check(q)){o.push(u.render(q,r,this.props));p.push(u.getAdditionalClassNames());}}.bind(this));c('MessengerDecorator').getBeforeDecorators().forEach(function(u){if(u.check(q))p.push(u.getAdditionalClassNames());});}var s=p.join(' '),t=this.props.body?c('React').createElement('div',{className:"_aok"},n,this.props.attachments):null;return c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(s,this.props.className,"_hh7"+(' '+"_s1-")+(!this.props.notBubblish?' '+"_52mr":'')+(this.props.isP2PAttachment?' '+"_4z55":'')+(!!this.state.emojis?' '+"_2f5r":'')+(!!this.state.emojis?' '+"_581a":'')+(this.props.isFromViewer&&!this.state.emojis?' '+"_43by":'')+(m?' '+"_3oh-":''))}),t,!t?n:null,!t?this.props.attachments:null,o);};l.prototype.$MessengerBubble1=function(m,n){n&&n.preventDefault();var o=c('MercuryIDs').getThreadIDFromUserID(m.id);o&&c('MessengerActions').selectThread(o);};l.propTypes={attachments:k.instanceOf(c('immutable').List),body:k.string,customColor:k.string,customLike:k.object,isFromViewer:k.bool,message:k.instanceOf(c('ImmutableObject')),metaRanges:k.array,notBubblish:k.bool,onUnwrap:k.func,ranges:k.array,threadID:k.string,threadCustomColor:k.string};f.exports=l;}),null);
__d('MessengerCodePasteUtils',['cx','BanzaiODS','MessengerBubble.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=/`{3,}/;function j(l){return !!(l&&l.search(i)!==-1&&l.split('\n').length>1);}function k(l,m,n,o){var p=l.split(i),q=[];for(var r=0;r<p.length;r+=2){var s=p[r].trim();if(s&&s.length>0)q.push(c('React').createElement(c('MessengerBubble.react'),{key:r,body:s,customColor:o||undefined,className:"clearfix _3058 _ui9",ranges:m,threadID:n}));if(r+1<p.length&&p[r+1]){var t=p[r+1].split('\n'),u=t[0].replace(/[^a-zA-Z]+/g,''),v=t.slice(1).join('\n');c('BanzaiODS').bumpEntityKey('messenger_code_paste','render_bubble');q.push(c('React').createElement('div',{key:r+1,className:"_3058 _wu0 _52mr"},c('React').createElement('div',{ref:'syntaxTarget'+r,className:'language-'+u},v)));}}return q;}f.exports={containsCodeBlock:j,getCodeAndMessageBubbles:k};}),null);
__d('MercuryAttachmentAttribution.react',['cx','fbt','Image.react','ImmutableObject','Link.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=this.$MercuryAttachmentAttribution1();if(!n)return null;return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_29ew")},c('React').createElement(c('Image.react'),{src:n.icon_url,className:"_29ex"}),c('React').createElement('span',{className:"_29ey"},n.name),this.$MercuryAttachmentAttribution2());};m.prototype.$MercuryAttachmentAttribution1=function(){return this.props.attachment&&this.props.attachment.app_attribution;};m.prototype.$MercuryAttachmentAttribution2=function(){var n=this.$MercuryAttachmentAttribution1();if(!n||!n.metadata)return null;var o="_439n",p=void 0;try{p=JSON.parse(n.metadata);}catch(q){return null;}if(p.spotify_link)return c('React').createElement(c('Link.react'),{className:o,href:p.spotify_link,target:'_blank'},i._("Open"));return null;};function m(){j.apply(this,arguments);}m.propTypes={attachment:l.instanceOf(c('ImmutableObject'))};f.exports=m;}),null);
__d('MessengerAttachmentAttribution.react',['cx','ImmutableObject','MercuryAttachmentAttribution.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('MercuryAttachmentAttribution.react'),{attachment:this.props.attachment,className:"_2f5n _4br2"});};function l(){i.apply(this,arguments);}l.propTypes={attachment:k.instanceOf(c('ImmutableObject'))};f.exports=l;}),null);
__d('MessengerBubbleBlock.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('div',{className:"_52mr _4h13 _3058"},this.props.children);};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerCodeBubble.react',['Bootloader','immutable','MessengerCodePasteUtils','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.prototype.componentDidMount=function(){c('Bootloader').loadModules(["Prism.Complete"],function(l){for(var m in this.refs){var n=c('ReactDOM').findDOMNode(this.refs[m]);l.highlightElement(n);}}.bind(this),'MessengerCodeBubble.react');};k.prototype.render=function(){var l=c('MessengerCodePasteUtils').getCodeAndMessageBubbles(this.props.body,this.props.ranges,this.props.threadID,this.props.customColor);return c('React').createElement('div',{className:this.props.className},l);};function k(){h.apply(this,arguments);}k.propTypes={attachments:j.instanceOf(c('immutable').List),body:j.string.isRequired,customColor:j.string,ranges:j.array.isRequired,threadID:j.string.isRequired};f.exports=k;}),null);
__d('MessengerMessageActionsWrapper.react',['ImmutableObject','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'MessengerMessageActionsWrapper',propTypes:{message:h.instanceOf(c('ImmutableObject')).isRequired,onShowMenu:h.func.isRequired},render:function j(){return c('React').createElement('div',babelHelpers['extends']({onMouseEnter:this._handleShowMenu,onMouseLeave:this._handleHideMenu},this.props),this.props.children);},_handleShowMenu:function j(){this.props.onShowMenu(this.props.message.message_id,true);},_handleHideMenu:function j(){this.props.onShowMenu(this.props.message.message_id,false);}});f.exports=i;}),null);
__d('MessengerMessageSeenHeads.react',['cssVar','cx','fbt','Image.react','immutable','ImmutableObject','MercuryAttachment','MercuryMessageInfo','MercuryTimestamp','MessengerConfig','React','getViewportDimensions','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=c('MessengerConfig').MaxSeenHeadCount||8;k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;o.prototype.render=function(){var q=this.props,r=q.message,s=q.nextTimestamp,t=q.participants,u=q.readReceipts;if(c('MercuryMessageInfo').isSending(r)||u.isEmpty()||c('MercuryMessageInfo').hasError(r))return null;var v=c('immutable').Seq(u).filter(function(da,ea){return da.watermark>=r.timestamp&&da.watermark<s;}).sort(function(da,ea){return da.action-ea.action;});if(v.isEmpty())return null;var w=this.props.isFromViewer?n:p(),x=v.count()>w+1,y=x?v.slice(0,w):v,z=y.map(function(da,ea){var fa=t.get(ea);if(!fa)return null;var ga=da?j._("Seen by {full name} at {seen time}",[j.param('full name',fa.name),j.param('seen time',c('MercuryTimestamp').getPreciseTimestamp(da.action))]):j._("Seen by {full name}",[j.param('full name',fa.name)]);return c('React').createElement(c('Image.react'),{alt:ga,className:"_jf2",key:ea,src:fa.image_src,title:ga});}).toArray(),aa=z.length;if(!aa)return null;var ba=x?v.slice(w).count():0;if(ba>0){var ca=v.slice(w).map(function(da,ea){var fa=t.get(ea);return fa?fa.name:null;}).filter(function(da){return !!da;}).join('\n')+' ';z.unshift(c('React').createElement('span',{className:"_jf3",key:'overflow',title:ca},'+'+ba));}return c('React').createElement('span',{className:c('joinClasses')(this.props.className,"_jf4"+(aa+ba===1?' '+"_jf5":'')+(c('MercuryAttachment').isSinglePhotoGroupAttachment(r)?' '+"_ba3":''))},z);};function o(){k.apply(this,arguments);}o.propTypes={isFromViewer:m.bool,message:m.instanceOf(c('ImmutableObject')).isRequired,nextTimestamp:m.number.isRequired,participants:m.instanceOf(c('immutable').Map).isRequired,readReceipts:m.instanceOf(c('immutable').OrderedMap).isRequired};function p(){var q=c('getViewportDimensions')().width;if(q<parseInt("920px".replace('px',''),10))return Math.min(n,8);if(q<parseInt("1211px".replace('px',''),10))return Math.min(n,3);return n;}f.exports=o;}),null);
__d('messengerRTLClasses',['cx','isRTL'],(function a(b,c,d,e,f,g,h){'use strict';function i(j,k){var l=c('isRTL')(j||'');return k?l?"_4pv0":'':(!l?"direction_ltr":'')+(l?' '+"direction_rtl":'')+(!l?' '+"text_align_ltr":'')+(l?' '+"text_align_rtl":'')+(l?' '+"_4pv0":'');}f.exports=i;}),null);
__d('MessengerMessage.react',['cssVar','cx','fbt','EmojiLikeUtils','MercuryDisplayTimeFilterMessageRenderer','FluxContainer','immutable','ImmutableObject','MercuryAttachment','MercuryConfig','MercuryMessageDeliveryState','MercuryMessageError.react','MercuryMessageInfo','MercuryTimestamp','MessengerAttachmentAttribution.react','MessengerAttachmentRenderer','MessengerBubble.react','MessengerBubbleBlock.react','MessengerCodeBubble.react','MessengerCodePasteUtils','MessengerConfig','MessengerDecorator','MessengerInnerDecorators.react','MessengerMessageActionsWrapper.react','MessengerMessageSeenHeads.react','messengerURIUtilsRe','MessengerVideoAutoplayStore','MNCommerceMessageType','React','TooltipData','emptyFunction','getViewportDimensions','joinClasses','messengerRTLClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;function n(q){switch(q){case c('MercuryMessageDeliveryState').SENDING:return j._("Sending");case c('MercuryMessageDeliveryState').SENT:return j._("Sent");case c('MercuryMessageDeliveryState').DELIVERED:return j._("Delivered");case c('MercuryMessageDeliveryState').ERROR:return j._("Error");}return null;}k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.state={isVisible:false,shown:{}},this.$MessengerMessage10=function(v){v.stopPropagation();this.props.onSelect(this.props.message.message_id);}.bind(this),this.$MessengerMessage3=function(v,w){var x;this.setState({shown:babelHelpers['extends']({},this.state.shown,(x={},x[v]=w,x))});}.bind(this),this.$MessengerMessage8=function(){this.props.onSelect(this.props.message.message_id);}.bind(this),r;}o.getStores=function(){return [c('MessengerVideoAutoplayStore')];};o.calculateState=function(q,r){return {isVisible:c('MessengerVideoAutoplayStore').isVisible(r.message.thread_id,r.message.message_id)};};o.prototype.shouldComponentUpdate=function(q,r){return q.isActive!==this.props.isActive||q.isFromViewer!==this.props.isFromViewer||q.message!==this.props.message||q.nextTimestamp!==this.props.nextTimestamp||q.showDeliveryState!==this.props.showDeliveryState||q.deliveryTimestamp!==this.props.deliveryTimestamp||!c('immutable').is(q.readReceipts,this.props.readReceipts)||!c('immutable').is(q.participants,this.props.participants)||q.customColor!==this.props.customColor||r.isVisible!==this.state.isVisible;};o.prototype.render=function(){var q=this.props,r=q.isActive,s=q.isFromViewer,t=q.isPageMessage,u=q.message,v=j._("{time}",[j.param('time',c('MercuryTimestamp').getPreciseTimestamp(u.timestamp))]),w=c('MessengerConfig').SentTimestampEnabled?c('TooltipData').propsFor(v,p(s)):null,x=[],y=[],z=this.props.message,aa=s||false;if(z&&!this.props.hideBeforeDecorator){c('MessengerDecorator').getBeforeDecorators().forEach(function(da){if(da.check(z))x.push(da.render(z,aa));});c('MessengerDecorator').getInnerDecorators().forEach(function(da){if(da.check(z))y.push(da.getAdditionalClassNames());});}var ba=this.$MessengerMessage1(w),ca=this.$MessengerMessage2(w,c('MercuryConfig').WWWMessengerAttachmentMessageGK?ba:null);return c('React').createElement(c('MessengerMessageActionsWrapper.react'),{className:c('joinClasses').apply(undefined,["clearfix"+(' '+"_o46")+(' '+"_3erg")+(r?' '+"_-5k":'')+(s?' '+"_3i_m":'')+(s?' '+"_nd_":'')+(!s?' '+"_29_7":'')+(u.isSelected?' '+"_3xsz":''),c('messengerRTLClasses')(u.body)].concat(y)),message:u,onShowMenu:this.$MessengerMessage3},x,c('MercuryConfig').WWWMessengerAttachmentMessageGK&&ca?null:ba,ca||t?null:c('React').createElement(c('MessengerInnerDecorators.react'),{message:z,isFromViewer:s,hovered:this.state.shown[z.message_id],messageProps:this.props}),ca,this.$MessengerMessage4(z,aa),this.$MessengerMessage5(),this.$MessengerMessage6(),c('React').createElement(c('MessengerMessageSeenHeads.react'),{className:"_4jzq",isFromViewer:s,message:u,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts}));};o.prototype.$MessengerMessage4=function(q,r){var s,t=this;if(q&&!this.props.hideAfterExternalDecorator){var s=function(){var u=[],v=[];c('MessengerDecorator').getAfterExternalDecorators().forEach(function(x){if(q&&x.check(q)){u.push(x.render(q,r,this.props));v.push(x.getAdditionalClassNames());}},t);var w=v.join(' ');if(u.length===0)return {v:null};return {v:c('React').createElement('span',{className:c('joinClasses')(w,"_31gm"+(!r?' '+"isFromOther":''))},u)};}();if(typeof s==="object")return s.v;}return null;};o.prototype.$MessengerMessage7=function(q){return q.every(function(r){return !r||!c('MessengerAttachmentRenderer').isRenderedShareAttachment(r);});};o.prototype.$MessengerMessage2=function(q,r){if(this.props.message.is_filtered_content)return null;if(this.props.message.commerce_message_type===c('MNCommerceMessageType').RIDE_INTENT)return null;var s=c('MessengerAttachmentRenderer').getAttachmentsOutsideBubble(this.props.message,this.props.onAttachmentLoad,{customColor:this.props.customColor,isPageMessage:this.props.isPageMessage,isVisible:this.state.isVisible,messageBubble:r,onSelect:this.$MessengerMessage8,onUnwrap:null,pageID:this.props.pageID});if(!s||!s.length)return null;var t=[],u=[],v=this.props.message,w=this.props.isFromViewer||false;if(v)c('MessengerDecorator').getAfterDecorators().forEach(function(ba){if(ba.check(v,w)){t.push(ba.render(v,w,this.props));u.push(ba.getAdditionalClassNames());}}.bind(this));if(q){var x=s.some(function(ba){return !!ba&&c('MessengerAttachmentRenderer').isPhotosGroupAttachment(ba);});s=this.$MessengerMessage7(s)?c('React').createElement('div',babelHelpers['extends']({},q,{className:c('joinClasses').apply(undefined,["_3zvs"+(x?' '+"_2-x3":'')].concat(u))}),s,t):s.map(function(ba){return ba&&c('React').cloneElement(ba,q);});}var y=c('MessengerAttachmentRenderer').isSharedVideoAttachmentMessage(this.props.message),z=c('React').createElement('div',{key:'renderedAttachments',className:"_3058"+(' '+"_15gf")+(y?' '+"_3duc":'')},s,this.props.isPageMessage?null:c('React').createElement(c('MessengerInnerDecorators.react'),{message:this.props.message,isFromViewer:this.props.isFromViewer||false,hovered:this.state.shown[this.props.message.message_id],messageProps:this.props}));if(this.props.message.attachments.length===1&&c('MercuryAttachment').hasAttribution(this.props.message.attachments[0])){var aa=[z,c('React').createElement(c('MessengerAttachmentAttribution.react'),{attachment:new (c('ImmutableObject'))(this.props.message.attachments[0]),key:'attribution'})];return c('React').createElement(c('MessengerBubbleBlock.react'),null,aa);}return z;};o.prototype.$MessengerMessage9=function(){return c('MessengerAttachmentRenderer').isP2PAttachment(this.props.message);};o.prototype.$MessengerMessage1=function(q){var r=this.props.message,s=c('immutable').List(c('MessengerAttachmentRenderer').getAttachmentsInsideBubble(r,this.props.onAttachmentLoad)),t=r.ranges;if(c('MercuryConfig').Mentions&&r.profile_ranges&&r.profile_ranges.length)t=(t||[]).concat(r.profile_ranges.map(function(v){return babelHelpers['extends']({},v,{url:c('messengerURIUtilsRe').getURIForUserID(v.id)});}));if(c('MessengerCodePasteUtils').containsCodeBlock(r.body))return c('React').createElement(c('MessengerCodeBubble.react'),{attachments:s,body:r.body,customColor:this.props.isFromViewer?this.props.customColor:'',className:(this.props.isFromViewer?"_3uhm":'')+(!this.props.isFromViewer?' '+"_3uhn":''),ranges:t||[],threadID:r.thread_id||''});if(r.is_filtered_content)return c('React').createElement('div',{className:"_3058 _wiu _52mr uiBoxYellow clearfix"},c('MercuryDisplayTimeFilterMessageRenderer').renderFilteredContent(r));var u=r.body&&!c('EmojiLikeUtils').isEmojiLike(r);if(u||!s.isEmpty())return c('React').createElement(c('MessengerBubble.react'),babelHelpers['extends']({attachments:s,body:r.body,className:"_3058"+(' '+"_ui9"),customColor:this.props.isFromViewer?this.props.customColor:'',customLike:r.customLike,isFromViewer:this.props.isFromViewer,isP2PAttachment:this.$MessengerMessage9(),ranges:t,message:r,metaRanges:r.meta_ranges,threadCustomColor:this.props.threadCustomColor||"#0084ff",threadID:r.thread_id,participants:this.props.participants},q||{}));return null;};o.prototype.$MessengerMessage6=function(){if(!this.props.isFromViewer||!this.props.showDeliveryState||this.props.message.is_like_preview)return null;var q=c('MercuryMessageInfo').getDeliveryState(this.props.message,this.props.deliveryTimestamp);if(q===c('MercuryMessageDeliveryState').UNKNOWN)return null;var r={};if(this.props.customColor&&(q===c('MercuryMessageDeliveryState').SENT||q===c('MercuryMessageDeliveryState').SENDING||q===c('MercuryMessageDeliveryState').DELIVERED))r.color=this.props.customColor;return c('React').createElement('span',{className:"_2her"+(q===c('MercuryMessageDeliveryState').SENDING?' '+"_4jzp":'')+(q===c('MercuryMessageDeliveryState').SENT?' '+"_3zzf":'')+(q===c('MercuryMessageDeliveryState').DELIVERED?' '+"_9ah":'')+(q===c('MercuryMessageDeliveryState').ERROR?' '+"_5ei9":''),onClick:this.$MessengerMessage10,role:'checkbox',style:r,title:n(q)},c('React').createElement('i',{className:"_57e_"}));};o.prototype.$MessengerMessage5=function(){var q=this.props.message;if(!c('MercuryMessageInfo').hasError(q))return null;return c('React').createElement(c('MercuryMessageError.react'),{className:"_3058 _2ygi",message:q,authorFBID:this.props.authorFBID});};o.propTypes={customColor:m.string,deliveryTimestamp:m.number.isRequired,hideAfterExternalDecorator:m.bool,hideBeforeDecorator:m.bool,isActive:m.bool,isFromViewer:m.bool,isPageMessage:m.bool,message:m.instanceOf(c('ImmutableObject')).isRequired,nextTimestamp:m.number.isRequired,onAttachmentLoad:m.func.isRequired,onDeselect:m.func.isRequired,onSelect:m.func.isRequired,participants:m.instanceOf(c('immutable').Map).isRequired,readReceipts:m.instanceOf(c('immutable').OrderedMap).isRequired,showDeliveryState:m.bool,authorFBID:m.string,threadCustomColor:m.string,pageID:m.string};o.defaultProps={onAttachmentLoad:c('emptyFunction'),threadCustomColor:"#0084ff"};function p(q){if(c('getViewportDimensions')().width<=parseInt("700px".replace('px',''),10))return 'above';return q?'right':'left';}f.exports=c('FluxContainer').create(o,{withProps:true});}),null);
__d('MessengerReactionsGroups.react',['cx','fbt','MessengerReactionsUtil','MessengerTextWithEmoticons.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props,o=n.reactions,p=n.selectedGroup,q=n.onGroupSelected,r={all:0},s=[],t=Object.values(o);t.forEach(function(w){if(typeof w==='string'){if(!r[w]){r[w]=1;s.push(w);}else r[w]++;r.all++;}});var u=false,v=s.sort(c('MessengerReactionsUtil').sortFunction).map(function(w){var x=p===w;u=u||x;return c('React').createElement('li',{className:x?"selected":'',key:w,onClick:q.bind(this,w),role:'button',tabIndex:'0'},c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:w}),c('React').createElement('span',{className:"_359u"},r[w]));}.bind(this));return c('React').createElement('ol',{className:"_koh _2pit"},c('React').createElement('li',{className:!u?"selected":'',key:'allReactions',onClick:q.bind(this,null),role:'button',tabIndex:'0'},c('React').createElement('span',{className:"_359u"},i._({"*":"All {total reactions}"},[i.param('total reactions',r.all,[0])]))),v);};function m(){j.apply(this,arguments);}m.propTypes={onGroupSelected:l.func.isRequired,reactions:l.object.isRequired,selectedGroup:l.string.isRequired};f.exports=m;}),null);
__d('MessengerReactionsList.react',['cx','Image.react','MercuryIDs','MercuryParticipants','MessengerProfileImageWrapper.react','MessengerTextWithEmoticons.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=40;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){var n=this.props,o=n.participants,p=n.reactions,q=Object.keys(p).map(function(r){var s=c('MercuryIDs').getParticipantIDFromUserID(r),t=void 0;if(o)t=o.get(s);var u=null;if(!t)t=c('MercuryParticipants').getNow(s);if(t)u=c('React').createElement(c('Image.react'),{alt:'',src:t.image_src,height:l,width:l});var v=t&&t.name,w=p[r];return c('React').createElement('div',{className:"_3s-3 _2pin",key:'profile-reaction-'+r},c('React').createElement(c('MessengerProfileImageWrapper.react'),{size:l,showBadge:false},u,c('React').createElement('div',{className:"_3s-4"},c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:w}))),c('React').createElement('div',{className:"_3s-8 _3-9b _3-8w"},v));});return c('React').createElement('div',{className:"_5jpi _2pit"},q);};function m(){i.apply(this,arguments);}m.propTypes={participants:k.object,reactions:k.object.isRequired};f.exports=m;}),null);
__d('MessengerReactionsOverview.react',['cx','immutable','ImmutableObject','MessengerMessage.react','MessengerReactionsGroups.react','MessengerReactionsList.react','MessengerWebViewReactionsTypedLogger','React','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l='ALL';i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={selectedGroup:l},this.$MessengerReactionsOverview1=function(s){var t=this.props.message,u=t.reactions,v=void 0;if(!s){v=Object.values(u).length;}else v=Object.values(u).filter(function(w){return w===s;}).length;new (c('MessengerWebViewReactionsTypedLogger'))().setEvent('select_group').setMid(t.message_id).setSenderID(t.author).setEmojiGroup(s||l).setEmojiGroupCount(v).log();if(!s){this.setState({selectedGroup:l});}else this.setState({selectedGroup:s});}.bind(this),o;}m.prototype.render=function(){var n=this.props,o=n.isFromViewer,p=n.participants,q=n.message,r=q.reactions,s=this.state.selectedGroup;if(!r)return null;var t=void 0;if(s===l){t=r;}else{var u=Object.keys(r);t=u.reduce(function(v,w){if(r[w]===s)v[w]=s;return v;},{});}return c('React').createElement('div',null,c('React').createElement('div',{className:"_jfl _2ph_"},c('React').createElement(c('MessengerMessage.react'),{customColor:'',deliveryTimestamp:0,hideAfterExternalDecorator:true,hideBeforeDecorator:true,isActive:false,isFromViewer:o,isPageMessage:false,key:q.message_id,message:q,messageActionsWrapper:c('emptyFunction'),nextTimestamp:0,onAttachmentLoad:c('emptyFunction'),onDeselect:c('emptyFunction'),onSelect:c('emptyFunction'),participants:p,readReceipts:c('immutable').OrderedMap(),ref:q.message_id,showDeliveryState:false})),c('React').createElement(c('MessengerReactionsGroups.react'),{onGroupSelected:this.$MessengerReactionsOverview1,reactions:r,selectedGroup:s}),c('React').createElement(c('MessengerReactionsList.react'),{participants:p,reactions:t}));};m.propTypes={isFromViewer:k.bool.isRequired,message:k.object.isRequired,participants:k.object.isRequired};f.exports=m;}),null);
__d('messengerReactionsOverviewReact',['reactRe','bs_js_boolean','MessengerReactionsOverview.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l={isFromViewer:c('bs_js_boolean').to_js_boolean(i),message:j,participants:k},m=c('MessengerReactionsOverview.react');return function(n,o,p,q){return c('reactRe').wrapPropsShamelessly(m,l,n,o,p,q);};}g.createElement=h;}),null);
__d('messengerReactionsDialogReact',['fbt','bs_curry','React','reactRe','messengerDialogsRe','messengerDialogReact','messengerReactionsOverviewReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reactRe').Component[9],j=i[0],k=i[1],l=i[2],m=i[3],n=i[4],o=i[5],p=i[6],q="MessengerReactionsDialogReact";function r(aa){if(aa){return 0;}else return c('messengerDialogsRe').removeDialog(0);}function s(){return c('messengerDialogsRe').removeDialog(0);}function t(aa){var ba=aa[1];return c('bs_curry').app(c('messengerDialogReact').Dialog[0],[0,r,0,0,0,["default"],[544],[c('bs_curry')._6(c('messengerDialogReact').Header[0],0,0,[c('bs_curry')._5(c('messengerDialogReact').Title[0],0,[h._("Reactions"),0],0,0,0),[c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[h._("Done")],0,0,[s],[0],0,0,0,0,0,0]),0]],0,0,0),[c('React').createElement("div",undefined,c('messengerReactionsOverviewReact').createElement(ba[0],ba[1],ba[2])(0,0,0,0)),0]],0,0,0]);}var u=[function(aa){return [+aa.isFromViewer,aa.message,aa.participants];}],v=[j,k,l,m,n,o,p,q,r,s,t,u],w=c('reactRe').CreateComponent([q,o,p,j,m,k,l,n,u,t]),x=w[1];function y(aa,ba,ca){return c('bs_curry')._1(x,[aa,ba,ca]);}var z=w[0];g.MessengerReactionsDialogReact=v;g.comp=z;g.wrapProps=x;g.createElement=y;}),null);