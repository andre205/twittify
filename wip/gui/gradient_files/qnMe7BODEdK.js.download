if (self.CavalryLogger) { CavalryLogger.start_js(["nqNAy"]); }

__d('MNCommerceReportConversationDialog.react',['cx','fbt','AsyncRequest','Link.react','MercuryIDs','MercuryParticipants','MessengerDialog.react','MessengerDialogBody.react','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','messengerDialogsRe','MessengerPlatformAbuseReportType','MNCommerceDialogStateActions','MNCommercePromotionBlockDataManager','MNCommercePromotionManageBlockDialogContainer.react','React','XMNReportPageConversationActionController','XUIRadioList.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUIRadioList.react').Item,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={error:false,pageName:'',reportType:c('MessengerPlatformAbuseReportType').SPAM},this.$MNCommerceReportConversationDialog9=function(){this.$MNCommerceReportConversationDialog1();var t=function v(w,x){return c('MNCommercePromotionBlockDataManager').block(w,x);},u=this.props.pageID;c('MNCommerceDialogStateActions').showDialog(c('MNCommercePromotionManageBlockDialogContainer.react'),{pageID:u,onConfirmButtonClick:t});}.bind(this),this.$MNCommerceReportConversationDialog7=function(t){this.setState({reportType:t});}.bind(this),this.$MNCommerceReportConversationDialog1=function(){if(this.props.onToggle){this.props.onToggle();}else c('messengerDialogsRe').removeDialog();}.bind(this),this.$MNCommerceReportConversationDialog6=function(){var t=c('XMNReportPageConversationActionController').getURIBuilder().setFBID('page_id',this.props.pageID).setString('report_type',this.state.reportType).getURI();new (c('AsyncRequest'))().setURI(t).setHandler(function(){this.$MNCommerceReportConversationDialog1();}.bind(this)).setErrorHandler(function(){this.setState({error:true});}.bind(this)).send();}.bind(this),p;}n.prototype.componentWillMount=function(){var o=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(this.props.pageID));this.setState({pageName:o?o.short_name:''});};n.prototype.render=function(){if(this.props.showDialog===false)return null;return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MNCommerceReportConversationDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,i._("Report")),this.$MNCommerceReportConversationDialog2(),this.$MNCommerceReportConversationDialog3());};n.prototype.$MNCommerceReportConversationDialog2=function(){var o=c('React').createElement('div',{className:"_5zjy"},i._("Help us understand what's happening:")),p=this.$MNCommerceReportConversationDialog4(),q=c('React').createElement('div',{className:"_5zjz"},i._("Reporting this conversation will also turn off all messages from {page name}.",[i.param('page name',this.state.pageName)])),r=this.$MNCommerceReportConversationDialog5();return this.state.error?c('React').createElement(c('MessengerDialogBody.react'),{className:"_5zj-"},i._("Sorry, something went wrong.")):c('React').createElement(c('MessengerDialogBody.react'),{className:"_5zj_"},o,p,q,r);};n.prototype.$MNCommerceReportConversationDialog3=function(){var o=i._("Report"),p=i._("Cancel"),q=i._("OK");if(this.state.error)return c('React').createElement(c('MessengerDialogFooter.react'),{className:"_5zk0"},c('React').createElement(c('MessengerDialogButton.react'),{label:q,onClick:this.$MNCommerceReportConversationDialog1,type:'primary',use:'default'}));return c('React').createElement(c('MessengerDialogFooter.react'),{className:"_5zk0"},c('React').createElement(c('MessengerDialogButton.react'),{label:p,type:'secondary',onClick:this.$MNCommerceReportConversationDialog1,use:'default'}),c('React').createElement(c('MessengerDialogButton.react'),{label:o,onClick:this.$MNCommerceReportConversationDialog6,type:'primary',use:'default'}));};n.prototype.$MNCommerceReportConversationDialog4=function(){return c('React').createElement(c('XUIRadioList.react'),{selectedValue:this.state.reportType,onValueChange:this.$MNCommerceReportConversationDialog7},c('React').createElement(l,{value:c('MessengerPlatformAbuseReportType').SPAM},i._("It's spam")),c('React').createElement(l,{value:c('MessengerPlatformAbuseReportType').INAPPROPRIATE},i._("It's inappropriate")),c('React').createElement(l,{value:c('MessengerPlatformAbuseReportType').OTHER_ABUSE},i._("Other")));};n.prototype.$MNCommerceReportConversationDialog5=function(){return c('React').createElement('div',{className:"_5zk1"},i._("To stop receiving messages without reporting {page name}, you can manage your messages instead.",[i.param('page name',this.state.pageName)]),this.$MNCommerceReportConversationDialog8());};n.prototype.$MNCommerceReportConversationDialog8=function(){return c('React').createElement(c('Link.react'),{className:"_5zk2",onClick:this.$MNCommerceReportConversationDialog9},i._("Manage"));};n.propTypes={pageID:m.string.isRequired,showDialog:m.bool,onToggle:m.func};f.exports=n;}),null);