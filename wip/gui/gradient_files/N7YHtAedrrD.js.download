if (self.CavalryLogger) { CavalryLogger.start_js(["upGxT"]); }

__d("SidebarType",[],(function a(b,c,d,e,f,g){f.exports={SIDEBAR:"sidebar",BUDDYLIST:"buddylist",BUDDYLIST_NUB:"buddylist_nub"};}),null);
__d("WorkUserAvailabilityStatusType",[],(function a(b,c,d,e,f,g){f.exports={NONE:"None",AVAILABLE:"Available",SPORADIC:"Sporadic",TENTATIVE:"Tentative",BUSY:"Busy",DO_NOT_DISTURB:"Do Not Disturb",FOCUS:"Focus"};}),null);
__d('ChatSidebarActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({INIT:null,LOADED:null,SET_ENABLED:null,SHOW:null});}),18);
__d("ChatSidebarHideReason",[],(function a(b,c,d,e,f,g){var h={VIEWPORT_INCAPABLE:0,LOW_FRIEND_COUNT:1,NOT_ENABLED:2};f.exports=h;}),null);
__d('ChatSidebarStore',['ChatDispatcher','ChatOptionsInitialData','ChatSidebarActionTypes','FluxStore','SidebarType','performanceAbsoluteNow'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('ChatDispatcher'));this.$ChatSidebarStore2={initialized:false,initTime:c('performanceAbsoluteNow')(),loaded:false,enabled:!!c('ChatOptionsInitialData').sidebar_mode,visible:null};this.$ChatSidebarStore1={};}j.prototype.__onDispatch=function(k){var l=k.type;this.$ChatSidebarStore1=babelHelpers['extends']({},this.$ChatSidebarStore2);switch(l){case c('ChatSidebarActionTypes').INIT:if(!this.$ChatSidebarStore1.initialized)this.$ChatSidebarStore2.initTime=c('performanceAbsoluteNow')();this.$ChatSidebarStore2.initialized=true;break;case c('ChatSidebarActionTypes').LOADED:this.$ChatSidebarStore2.loaded=true;break;case c('ChatSidebarActionTypes').SHOW:this.$ChatSidebarStore2.visible=k.sidebarType;break;case c('ChatSidebarActionTypes').SET_ENABLED:this.$ChatSidebarStore2.enabled=k.enabled;this.$ChatSidebarStore2.visible=k.sidebarType;break;}for(var m in this.$ChatSidebarStore2)if(Object.prototype.hasOwnProperty.call(this.$ChatSidebarStore2,m))if(this.$ChatSidebarStore2[m]!==this.$ChatSidebarStore1[m]){this.__emitChange();break;}};j.prototype.getPrevState=function(){return this.$ChatSidebarStore1;};j.prototype.getState=function(){return this.$ChatSidebarStore2;};j.prototype.isInitialized=function(){return this.$ChatSidebarStore2.initialized;};j.prototype.isLoaded=function(){return this.$ChatSidebarStore2.loaded;};j.prototype.isEnabled=function(){return this.$ChatSidebarStore2.enabled;};j.prototype.getInitTime=function(){return this.$ChatSidebarStore2.initTime;};j.prototype.getVisibleType=function(){return this.$ChatSidebarStore2.visible;};f.exports=new j();}),18);
__d('ChatProfileStore',['ChatSidebarPreloadStore'],(function a(b,c,d,e,f,g){'use strict';var h={},i={init:function j(){c('ChatSidebarPreloadStore').onLoaded(function(k){var l=k.profiles,m=k.nearby;return l.filter(function(n){return !m||m.indexOf(n.id)===-1;}).forEach(function(n){var o=new Date(),p=n.birthdate&&o.getDate()===n.birthdate.day&&o.getMonth()+1===n.birthdate.month,q=n.profile_picture&&n.profile_picture.uri?n.profile_picture.uri:null;h[n.id]={id:n.id,is_birthday:p,thumbSrc:q,name:n.name,is_messenger_only:!!n.is_messenger_only};});});},get:function j(k){return h[k];}};f.exports=i;}),18);
__d('OrderedFriendsList',['AvailableListConstants','ChatProfileStore','ChatSidebarPreloadStore','MercuryIDs','PresenceStatus','SearchableEntry','ShortProfiles','WorkModeConfig','createArrayFromMixed','isValidUniqueID'],(function a(b,c,d,e,f,g){'use strict';var h=null,i={},j=[],k={};function l(r){r=String(r);return c('MercuryIDs').isValid(r)?r:c('MercuryIDs').getParticipantIDFromUserID(r);}function m(r,s){var t=c('createArrayFromMixed')(r);s(t.filter(function(u){var v=c('ShortProfiles').getNow(u);return !v||p(v)||v.is_nonfriend_messenger_contact;}));}function n(r){h=[];var s=0;r.forEach(function(t){var u=t.slice(0,-2),v=t.slice(-1);if(c('PresenceStatus').get(u)==v){h[s]=u;i[u]=s++;}});}function o(r){var s=0;r.forEach(function(t){var u=t.slice(0,-2),v=t.slice(-1);if(v==c('AvailableListConstants').ACTIVE){j[s]=u;k[u]=s++;}});}function p(r){return r.type==='friend'||c('WorkModeConfig').is_work_user&&r.type==='fb4c';}var q={contains:function r(s){return s in i;},getList:function r(s){if(h&&h.length){m(h,s);return;}c('ChatSidebarPreloadStore').onLoaded(function(t){var u=t.buddies;n(u);m(h,s);});},getSearchableEntries:function r(s,t){q.getList(function(u){c('ChatSidebarPreloadStore').onLoaded(function(v){var w=v.groups;c('ShortProfiles').getMulti(u.slice(0,s),function(x){var y=[];for(var z in x)y.push(q.normalizeProfileEntry(x[z],z));var aa=w.map(q.normalizeThreadEntry);t(y.concat(aa).filter(function(ba){return !!ba;}).sort(function(ba,ca){return ba.getOrder()-ca.getOrder();}));});});});},normalizeProfileEntry:function r(s,t){var u=s.searchTokens||[],v=s.name,w=null;return new (c('SearchableEntry'))({uniqueID:s.id||t,keywordString:u.join(' '),order:q.getRank(s.id||t),photo:s.thumbSrc,title:v,subtitle:w,type:s.type,uri:s.uri,auxiliaryData:{isMessengerUser:s.is_messenger_user}});},normalizeThreadEntry:function r(s,t){var u=s.mercury_thread,v=s.participants_to_render.map(function(aa){return babelHelpers['extends']({},aa,{id:l(aa.id)});});u.participants=u.participants.map(l);var w=s.text,x=null;if(!w)w=u.name;var y=v.map(function(aa){return aa.name;}).join(', ');if(!w){w=y;}else x=y;var z=s.uid;if(!w||!c('isValidUniqueID')(z))return null;return new (c('SearchableEntry'))({uniqueID:z,order:t,photo:u.image_src,title:w,subtitle:x,type:'thread',auxiliaryData:{participantsToRender:v,thread:u}});},getRank:function r(s){if(s in i)return i[s];return h?h.length:0;},getActiveList:function r(s){if(j.length>0){s(j);return;}q.getList(function(t){return s(t);});},getActiveRank:function r(s){return s in k?k[s]:q.getRank(s);}};(function(){c('ChatSidebarPreloadStore').onLoaded(function(r){var s=r.buddies,t=r.shortProfiles;c('ShortProfiles').setMulti(t);o(s);n(s);});c('ChatProfileStore').init();})();f.exports=q;}),18);
__d('ChatSidebarVisibility',['ChatConfig','ChatSidebarHideReason','ChatSidebarStore','OrderedFriendsList','SidebarType','getViewportDimensions'],(function a(b,c,d,e,f,g){'use strict';var h=c('ChatConfig').get('sidebar.min_friends'),i=c('ChatConfig').get('sidebar.minimum_width'),j={getViewport:function k(){return c('getViewportDimensions').withoutScrollbars();},shouldShowSidebar:function k(l,m){j.shouldShowSidebarIgnoreEnabled(l,function(n,o){var p=c('ChatSidebarStore').isEnabled();m(n&&p,p?o:o.concat([c('ChatSidebarHideReason').NOT_ENABLED]));});},shouldShowSidebarIgnoreEnabled:function k(l,m){c('OrderedFriendsList').getActiveList(function(n){var o=l||j.getViewport(),p=o.width>i,q=n.length<h,r=true,s=[];if(!p){r=false;s.push(c('ChatSidebarHideReason').VIEWPORT_INCAPABLE);}if(q){r=false;s.push(c('ChatSidebarHideReason').LOW_FRIEND_COUNT);}m(r,s);});},isSidebarVisible:function k(){return c('ChatSidebarStore').getVisibleType()===c('SidebarType').SIDEBAR;},isBuddyListVisible:function k(){return c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST;}};f.exports=j;}),18);
__d('ChatSidebarActions',['ChatDispatcher','ChatSidebarActionTypes','ChatSidebarVisibility','SidebarType'],(function a(b,c,d,e,f,g){'use strict';var h={init:function i(){c('ChatDispatcher').dispatch({type:c('ChatSidebarActionTypes').INIT});},loaded:function i(){c('ChatDispatcher').dispatch({type:c('ChatSidebarActionTypes').LOADED});},disable:function i(){c('ChatDispatcher').dispatch({type:c('ChatSidebarActionTypes').SET_ENABLED,enabled:false,sidebarType:c('SidebarType').BUDDYLIST});},enable:function i(j){c('ChatDispatcher').dispatch({type:c('ChatSidebarActionTypes').SET_ENABLED,enabled:true,sidebarType:j});},show:function i(j){c('ChatDispatcher').dispatch({type:c('ChatSidebarActionTypes').SHOW,sidebarType:j});}};f.exports=h;}),18);
__d('ChatOptions',['Arbiter','ChannelConstants','ChatSidebarActions','ChatSidebarVisibility','FBRTCCallBlockingStore','JSLogger','PresenceUtil','SidebarType','ChatOptionsInitialData'],(function a(b,c,d,e,f,g){var h=c('JSLogger').create('chat_options'),i={};(function(){var k=c('ChatOptionsInitialData');for(var l in k){var m=k[l];if(l==='call_blocked_until'){c('FBRTCCallBlockingStore').init(m);}else i[l]=!!m;}})();var j=Object.assign(new (c('Arbiter'))(),{getSetting:function k(l){return i[l];},setSetting:function k(l,m,n){if(l==='sidebar_mode'){c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled(null,function(o,p){if(m){c('ChatSidebarActions').enable(o?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);}else c('ChatSidebarActions').disable();});return;}if(this.getSetting(l)==m)return;if(n){n='from_'+n;h.log(n,{name:l,new_value:m,old_value:this.getSetting(l)});}i[l]=!!m;c('Arbiter').inform('chat/option-changed',{name:l,value:m});}});c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('setting'),function(k,l){var m=l.obj;if(m.window_id===c('PresenceUtil').getSessionID())return;j.setSetting(m.setting,!!m.value,'channel');});c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(k,l){l.chat_options=i;});f.exports=j;}),18);
__d('DockTabsViewportFantaTabUtils',[],(function a(b,c,d,e,f,g){'use strict';var h=269;function i(){return h+1;}function j(m){return Math.floor(m/h);}function k(m){if(!m)return null;var n=m.fantaTabModelStateGetter;return n?n():null;}function l(m){return m?m.size:0;}f.exports={getTabCountToFitWidth:j,getMinRequiredWidthForFirstFantaTab:i,getFantaTabModelFromCallbacks:k,getNumFantaTabsFromModel:l};}),null);
__d('DockTabsViewportPinnedConversationTabUtils',[],(function a(b,c,d,e,f,g){'use strict';var h=496+9+2,i=210+9+2,j=52;function k(){return h;}function l(){return i;}function m(){return j;}function n(r){return r.getIsRaised()?k():l();}function o(){return k()+j;}function p(r){var s=r||{},t=s.pinnedConvoTabStateGetter;return t?t():null;}function q(r){return r?r.getTotalTabCount():0;}f.exports={getRaisedPinnedConvoTabWidth:k,getLoweredPinnedConvoTabWidth:l,getPinnedConvoSelectorWidth:m,getPinnedConvoTabWidth:n,getMinRequiredWidthForFirstConvoTab:o,getPinnedConvoTabsStateFromCallbacks:p,getNumPinnedConvoTabsFromModel:q};}),null);
__d('DockTabsViewportCalculator',['csx','Arbiter','DataStore','Dock','DockTabsViewportFantaTabUtils','DockTabsViewportPinnedConversationTabUtils','DOM','Event','FullScreen','PinnedConversationNubsConfig','SubscriptionsHandler','Vector','ViewportBounds','ge','getViewportDimensions','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i=50,j=35,k=j,l='dock-tab-viewport-inst',m=c('DockTabsViewportFantaTabUtils').getMinRequiredWidthForFirstFantaTab,n=c('DockTabsViewportFantaTabUtils').getFantaTabModelFromCallbacks,o=c('DockTabsViewportFantaTabUtils').getNumFantaTabsFromModel,p=c('DockTabsViewportPinnedConversationTabUtils').getMinRequiredWidthForFirstConvoTab,q=c('DockTabsViewportPinnedConversationTabUtils').getNumPinnedConvoTabsFromModel,r=c('DockTabsViewportPinnedConversationTabUtils').getPinnedConvoTabsStateFromCallbacks;function s(u){return u?c('Vector').getElementDimensions(u).x:0;}function t(u){this.$DockTabsViewportCalculatorImpl1=u;this.$DockTabsViewportCalculatorImpl3=0;this.$DockTabsViewportCalculatorImpl4=0;this.$DockTabsViewportCalculatorImpl5=null;this.$DockTabsViewportCalculatorImpl6=null;this.$DockTabsViewportCalculatorImpl7=false;this.$DockTabsViewportCalculatorImpl8=false;this.$DockTabsViewportCalculatorImpl9=false;this.$DockTabsViewportCalculatorImpl2=new (c('SubscriptionsHandler'))();this.$DockTabsViewportCalculatorImpl10();this.$DockTabsViewportCalculatorImpl11();}t.prototype.$DockTabsViewportCalculatorImpl10=function(){var u=this.$DockTabsViewportCalculatorImpl12.bind(this);this.$DockTabsViewportCalculatorImpl2.addSubscriptions(c('Event').listen(window,'resize',u),c('Dock').subscribe('resize',u),c('Arbiter').subscribeOnce('sidebar/initialized',u,c('Arbiter').SUBSCRIBE_NEW),c('FullScreen').subscribe('changed',function(){if(c('FullScreen').isFullScreen()){this.$DockTabsViewportCalculatorImpl7=true;this.$DockTabsViewportCalculatorImpl8=false;}else{this.$DockTabsViewportCalculatorImpl7=false;if(this.$DockTabsViewportCalculatorImpl8){c('setImmediate')(function(){u();});this.$DockTabsViewportCalculatorImpl8=false;}}}.bind(this)));};t.prototype.registerFantaTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl5=u;};t.prototype.registerPinnedConvoTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl6=u;};t.prototype.forceRecalculateFBDockWidth=function(){this.$DockTabsViewportCalculatorImpl11();this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:false,pinnedConvoUpdateData:null});};t.prototype.forceRecalculateChatTabs=function(){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:null});};t.prototype.forceRecalculatePinnedConvoTabs=function(u){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:u});};t.prototype.$DockTabsViewportCalculatorImpl12=function(){if(c('FullScreen').isFullScreen()||this.$DockTabsViewportCalculatorImpl7){this.$DockTabsViewportCalculatorImpl8=true;return;}this.forceRecalculateFBDockWidth();};t.prototype.$DockTabsViewportCalculatorImpl13=function(u){var v=u.forceRecalculateChatTabs,w=u.pinnedConvoUpdateData,x=this.$DockTabsViewportCalculatorImpl14(),y=x.chatTabAvailableWidth,z=x.pinnedConvoTabAvailableWidth;this.$DockTabsViewportCalculatorImpl15(y,!!v);this.$DockTabsViewportCalculatorImpl16(z,w);};t.prototype.$DockTabsViewportCalculatorImpl16=function(u,v){var w=this.$DockTabsViewportCalculatorImpl6||{},x=w.onAvailableWidthChanged;x&&x(u,v);};t.prototype.$DockTabsViewportCalculatorImpl15=function(u,v){var w=this.$DockTabsViewportCalculatorImpl5||{},x=w.onAvailableWidthChanged;x&&x(u);};t.prototype.$DockTabsViewportCalculatorImpl17=function(){var u=n(this.$DockTabsViewportCalculatorImpl5);return o(u);};t.prototype.$DockTabsViewportCalculatorImpl18=function(){return m();};t.prototype.$DockTabsViewportCalculatorImpl14=function(){var u=this.$DockTabsViewportCalculatorImpl3,v={chatTabAvailableWidth:u,pinnedConvoTabAvailableWidth:0},w={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:u},x=this.$DockTabsViewportCalculatorImpl17(),y=r(this.$DockTabsViewportCalculatorImpl6),z=q(y);if(!y||z===0){return v;}else if(x===0)return w;var aa=this.$DockTabsViewportCalculatorImpl18();if(u<=aa)return v;var ba=p(),ca=u-aa,da=0;if(ca<ba){if(c('PinnedConversationNubsConfig').chatTabTypingPriority&&y&&(y.anyTabHasText()||y.anyTabHasFocus())){return w;}else return v;}else da=ba;var ea=da,fa=Math.max(aa,u-da);return {chatTabAvailableWidth:fa,pinnedConvoTabAvailableWidth:ea};};t.prototype.$DockTabsViewportCalculatorImpl11=function(){this.$DockTabsViewportCalculatorImpl3=this.$DockTabsViewportCalculatorImpl19();this.$DockTabsViewportCalculatorImpl20('DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY');};t.prototype.$DockTabsViewportCalculatorImpl21=function(){var u=this.$DockTabsViewportCalculatorImpl1;if(!u)return {buddyListNubWidth:0,employeeNubsWidth:0};var v=s(u),w=s(c('DOM').find(u,"._56ox")),x=s(c('DOM').scry(u,"._56oy")[0]),y=s(c('DOM').scry(u,"._ph1")[0]),z=Math.max(v-w-x-y,0);return {buddyListNubWidth:w,employeeNubsWidth:z};};t.prototype.$DockTabsViewportCalculatorImpl19=function(){var u=c('getViewportDimensions').withoutScrollbars().width;u-=c('ViewportBounds').getLeft()+c('ViewportBounds').getRight();u-=i;var v=this.$DockTabsViewportCalculatorImpl21(),w=v.buddyListNubWidth,x=v.employeeNubsWidth;u-=w;this.$DockTabsViewportCalculatorImpl4=Math.max(this.$DockTabsViewportCalculatorImpl4,x);u-=this.$DockTabsViewportCalculatorImpl4;u-=k;return Math.max(u,0);};t.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$DockTabsViewportCalculatorImpl9=true;};t.prototype.$DockTabsViewportCalculatorImpl20=function(u){if(this.$DockTabsViewportCalculatorImpl9)c('Arbiter').inform(u);};t.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().chatTabAvailableWidth;};t.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().pinnedConvoTabAvailableWidth;};t.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl3;};f.exports={getInstance:function u(v){var w=c('ge')('pagelet_dock');if(!w||!c('DOM').contains(w,v))return null;var x=c('DataStore').get(w,l);if(x instanceof t)return x;var y=c('DOM').scry(w,'.fbDockWrapperRight .fbDock')[0];x=new t(y);c('DataStore').set(w,l,x);return x;}};}),null);
__d('ChatActivity',['Arbiter','Event','JSLogger','MercuryConfig','PresenceState','UserActivity'],(function a(b,c,d,e,f,g){var h=c('MercuryConfig').activity_limit||60000,i=c('MercuryConfig').idle_limit||1800000,j=c('MercuryConfig').idle_poll_interval||300000,k=c('JSLogger').create('chat_activity'),l=Date.now(),m=true;function n(){var r=Date.now();return !!(m&&r-l<h);}var o=Object.assign(new (c('Arbiter'))(),{isActive:n});function p(){var r=l;l=Date.now();if(l-r>i){k.debug('idle_to_active',r);c('PresenceState').doSync();}o.inform('activity');}c('Event').listen(window,'focus',function(){m=true;p();});c('Event').listen(window,'blur',function(){m=false;});c('UserActivity').subscribe(function(){p();});function q(r){var s=r&&r.at&&c('PresenceState').verifyNumber(r.at);if(typeof s!=='number')s=null;return s||0;}setInterval(function(){var r=Date.now(),s=q(c('PresenceState').get()),t=Math.max(l,s);if(r-t>i){k.debug('idle',{cookie:s,local:l});o.inform('idle',r-t);}},j);c('PresenceState').registerStateStorer(function(r){var s=q(r);if(s<l)r.at=l;return r;});c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(r,s){s.chat_activity={activity_limit:h,idle_limit:i,idle_poll_interval:j,last_active_time:l};});f.exports=o;}),null);
__d('MercuryTimestampTracker',['MercuryActionType','MercuryDispatcher','MercuryPayloadSource','MercurySingletonProvider'],(function a(b,c,d,e,f,g){'use strict';h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};function h(j){this.$MercuryTimestampTracker1=j;this.$MercuryTimestampTracker3=0;this.$MercuryTimestampTracker2=c('MercuryDispatcher').getForFBID(this.$MercuryTimestampTracker1);this.$MercuryTimestampTracker2.subscribe('update-messages',this.$MercuryTimestampTracker4.bind(this));}h.prototype.$MercuryTimestampTracker4=function(j,k){if(!k.actions||!k.actions.length)return;if(k.payload_source===c('MercuryPayloadSource').CLIENT_SEND_MESSAGE||k.payload_source===c('MercuryPayloadSource').UNKNOWN)return;for(var l=0;l<k.actions.length;l++){var m=k.actions[l],n=m.action_type;if(n==c('MercuryActionType').USER_GENERATED_MESSAGE&&m.thread_id&&m.timestamp>this.$MercuryTimestampTracker3)this.$MercuryTimestampTracker3=m.timestamp;}};h.prototype.getLastUserMessageTimestamp=function(){return this.$MercuryTimestampTracker3;};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('ChatTitleBarBlinker',['ChatActivity','DocumentTitle','JSLogger','MercuryThreadInformer','MercuryNotificationRenderer','PresenceState','MercuryTimestampTracker'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryThreadInformer').get(),i=c('MercuryTimestampTracker').get(),j=c('JSLogger').create('chat_title'),k=null,l=0,m=false;function n(){if(k){k.stop();k=null;return true;}return false;}function o(u){var v=u||i.getLastUserMessageTimestamp();if(l<=v){l=v;if(n()||m)c('PresenceState').doSync();}}var p={blink:function u(v,w){if(!k&&l<w)c('MercuryNotificationRenderer').renderDocumentTitle(v,function(x){if(!k)k=c('DocumentTitle').blink(x);});},stopBlinking:function u(){o();},blinkingElsewhere:function u(){m=true;}};function q(u){var v=c('PresenceState').verifyNumber(u.sb2);if(!v||v<=l)return null;return v;}function r(u){var v=u&&q(u);if(v){l=v;j.debug('load',l);n();m=false;}}function s(u){var v=q(u);if(!v){j.debug('store',l);u.sb2=l;m=false;}return u;}c('PresenceState').registerStateStorer(s);c('PresenceState').registerStateLoader(r);h.subscribe('thread-read-changed',function(u,v){var w=i.getLastUserMessageTimestamp(),x=0;for(var y in v)if(v[y].mark_as_read&&v[y].timestamp>=w&&v[y].timestamp>x)x=v[y].timestamp;x&&o(x);});c('ChatActivity').subscribe('activity',function(){return o();});var t=c('PresenceState').getInitial();if(t)l=q(t)||0;f.exports=p;}),null);
__d('MercuryBrowserAlerts',['ArbiterMixin','ChatActivity','ChatConfig','ChatOptions','ChatTitleBarBlinker','Event','Map','MercuryBlockedParticipants','MercuryConfig','MercuryIDs','MercuryThreadInfo','MercuryThreads','MercuryViewer','MessagingTag','Sound','UserActivity'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryBlockedParticipants').get(),i=c('MercuryThreads').get(),j=3,k=600000,l=new (c('Map'))(),m=0;function n(){return !c('UserActivity').isOnTab()&&!c('UserActivity').hasBeenInactive();}function o(){l=new (c('Map'))();}function p(r){if(c('ChatOptions').getSetting('sound')&&!n())c('Sound').play([c('ChatConfig').get('sound.notif_ogg_url'),c('ChatConfig').get('sound.notif_mp3_url')],r,false);}var q=Object.assign({init:function r(){c('Event').listen(window,'focus',function(){o();clearInterval(m);});c('Event').listen(window,'blur',function(){m=setInterval(o,k);});},messageReceived:function r(s){if(s.author&&c('MercuryViewer').isViewer(s.author)||!s.is_unread||s.folder!=c('MessagingTag').INBOX&&s.folder!=c('MessagingTag').ARCHIVED)return;var t=s.thread_id,u=c('ChatActivity').isActive();if(u){var v=false;q.inform('before-alert',{threadID:t,cancelAlert:function w(){v=true;}});}i.getThreadMeta(t,function(w){var x=c('MercuryThreadInfo').isMuted(w),y=c('MercuryIDs').getUserIDFromParticipantID(c('MercuryViewer').getID());if(x)if(!c('MercuryThreadInfo').areMentionsMuted(w)){if(!s.profile_ranges||!s.profile_ranges.some||!s.profile_ranges.some(function(ba){return ba.id===y;}))return;}else return;if(h.isPresentInGroupThread(w))return;var z=s.timestamp;if(u){!v&&p(z);}else{c('ChatTitleBarBlinker').blink(t,z);var aa=l.get(t)||0;if(aa<j){l.set(t,aa+1);p(z);}}c('ChatTitleBarBlinker').blinkingElsewhere();});}},c('ArbiterMixin'));f.exports=q;}),null);
__d('ChatEmployeeAwayWarning',['MercuryIDs','MercuryParticipants','MercuryViewer'],(function a(b,c,d,e,f,g){var h={updateEmployeeAwayWarning:function i(j,k,l){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(m){var n=m.employee;if(n)c('MercuryParticipants').getMulti(j.participants,function(o){var p=false,q=c('MercuryIDs').getUserIDFromThreadID(j.thread_id);if(!q)return;var r='fbid:'+q;for(var s in o)if(r==o[s].id&&o[s].is_employee_away)p=true;if(p){k();}else l();});});}};f.exports=h;}),null);
__d('ChatTimezoneWarning',['MercuryParticipants','MercuryViewer','MessengerBotIDs'],(function a(b,c,d,e,f,g){'use strict';var h=1,i={updateUserTimezoneWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=n.employee,p=n.timezone,q=0;if(k.timezone_warning_dismiss_count!==undefined){var r=k.timezone_warning_dismiss_count;for(var s=Object.entries(r),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var v;if(t){if(u>=s.length)break;v=s[u++];}else{u=s.next();if(u.done)break;v=u.value;}var w=v,x=w[0],y=w[1];if(x===n.fbid)q=Number(y);}}else return;if(o&&p&&q<h)c('MercuryParticipants').getMulti(k.participants,function(z){var aa={},ba=true;for(var ca in z){ba=ba&&z[ca].employee;var da=!!c('MessengerBotIDs')[z[ca].fbid];if(z[ca].timezone!==undefined&&z[ca].timezone!==null&&p!==z[ca].timezone&&!da){var ea=z[ca].fbid;aa[ea]=z[ca];}}if(Object.keys(aa).length>0&&ba){aa.self=n;l(aa);}else m();});});}};f.exports=i;}),null);
__d('ChatUserFocusWarning',['MercuryParticipants','MercuryViewer','emptyFunction','ifRequired'],(function a(b,c,d,e,f,g){'use strict';var h=void 0,i=void 0,j=function m(n){if(!h)c('ifRequired')('ChatUserFocusLogging',function(o){return h=o;},c('emptyFunction'));if(h&&h.registerThreadID)h.registerThreadID(n);},k=function m(n,o,p){if(!i)c('ifRequired')('ChatSubscribeToFocusModeChanges',function(q){i=q;},c('emptyFunction'));if(i&&i.subscribe)i.subscribe(n,o,p);},l={updateUserFocusWarning:function m(n,o,p){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(q){var r=q.employee;if(r)c('MercuryParticipants').getMulti(n.participants,function(s){var t=false;for(var u in s){if(q.id!==s[u].id&&s[u].is_user_focusing)t=true;if(s[u].employee&&q.fbid)k(q.fbid,n.thread_id,s[u]);}if(t){j(n.thread_id);var v=n&&n.bypass_focus_mode_until&&n.bypass_focus_mode_until>Date.now()/1000;o(v);}else p();});});}};f.exports=l;}),null);
__d('WorkDualityDismissWarning',[],(function a(b,c,d,e,f,g){'use strict';var h={},i={};f.exports={isWarningAcknowledged:function j(k){if(h[k])return true;return false;},acknowledgeWarning:function j(k){h[k]=true;},isThreadHijacked:function j(k){if(i[k])return true;return false;},setHijackedThread:function j(k){i[k]=true;}};}),null);
__d('ChatUserPersonalUserWarning',['MercuryIDs','MercuryParticipants','MercuryViewer','MercuryEmployeeDualityPreferences','WorkDualityDismissWarning'],(function a(b,c,d,e,f,g){var h=1,i={updateEmployeePersonalUserWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=this._getFriendID(k,n);if(!o){m();return;}c('MercuryParticipants').getMulti(k.participants,function(p){var q=this._getParticipant(k,Object.values(p),o);if(q){l(n,q);}else m();}.bind(this));}.bind(this));},getEmployeePersonalUserWarning:function j(k){var l=c('MercuryParticipants').getNow(c('MercuryViewer').getID()),m=this._getFriendID(k,l),n=k.participants.map(function(p){return c('MercuryParticipants').getNow(p);}),o=this._getParticipant(k,n,m);return {myself:l,participant:o};},_getParticipant:function j(k,l,m){var n=null;l.forEach(function(o){if(o.personal_id&&m===o.personal_id&&o.work_id&&o.employee&&!c('WorkDualityDismissWarning').isWarningAcknowledged(k.thread_id))n=o;});return n;},_getFriendID:function j(k,l){var m=l.employee,n=null;if(l.personal_id)n='fbid:'+l.personal_id;var o=n===l.id,p=0;if(k.work_user_warning_dismiss_count!==undefined){var q=k.work_user_warning_dismiss_count;for(var r=Object.entries(q),s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var u;if(s){if(t>=r.length)break;u=r[t++];}else{t=r.next();if(t.done)break;u=t.value;}var v=u,w=v[0],x=v[1];if(w===l.fbid)p=Number(x);}}else return null;var y=c('MercuryIDs').getUserIDFromThreadID(k.thread_id);if(!m||!o||!y||k.participants.length>2||!c('MercuryEmployeeDualityPreferences').duality_warning_gk_check||p>=h)return null;return y;}};f.exports=i;}),null);
__d('ChatUserWorkUserWarning',['MercuryIDs','MercuryParticipants','MercuryViewer','MercuryEmployeeDualityPreferences','WorkDualityDismissWarning'],(function a(b,c,d,e,f,g){var h=1,i={updateEmployeeWorkUserWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=this._getFriendID(k,n);if(!o){m();return;}c('MercuryParticipants').getMulti(k.participants,function(p){var q=this._getParticipant(k,Object.values(p),o);if(q){l(n,q);}else m();}.bind(this));}.bind(this));},getEmployeeWorkUserWarning:function j(k){var l=c('MercuryParticipants').getNow(c('MercuryViewer').getID()),m=this._getFriendID(k,l),n=k.participants.map(function(p){return c('MercuryParticipants').getNow(p);}),o=this._getParticipant(k,n,m);return {myself:l,participant:o};},_getParticipant:function j(k,l,m){var n=null;l.forEach(function(o){if(o.work_id&&m===o.work_id.toString()&&o.personal_id&&c('WorkDualityDismissWarning').isThreadHijacked(k.thread_id)&&o.employee&&!o.is_friend)n=o;});return n;},_getFriendID:function j(k,l){var m=l.employee,n=null;if(l.personal_id)n='fbid:'+l.personal_id;var o=n===l.id,p=0;if(k.work_user_warning_dismiss_count!==undefined){var q=k.work_user_warning_dismiss_count;for(var r=Object.entries(q),s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var u;if(s){if(t>=r.length)break;u=r[t++];}else{t=r.next();if(t.done)break;u=t.value;}var v=u,w=v[0],x=v[1];if(w===l.fbid)p=Number(x);}}else return null;var y=c('MercuryIDs').getUserIDFromThreadID(k.thread_id);if(!m||!o||!y||k.participants.length>2||!c('MercuryEmployeeDualityPreferences').duality_warning_gk_check||p>=h)return null;return y;}};f.exports=i;}),null);
__d('FantaGetMessageActions',['FantaDispatcher','MercuryCanonicalGroupThreadManager','MercuryIDs','MercuryTypeaheadConstants','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({ADD_PARTICIPANTS:null,CLEAR_PARTICIPANTS:null,CLEAR_PREVIEW:null,FETCH_MORE_MESSAGES:null,ON_BOOTLOAD_TYPEAHEAD:null,ON_GET_THREAD_PREVIEW_RESPONSE:null,ON_GET_THREAD_RESPONSE:null,ON_MESSAGE_STORE_RESPONSE:null,ON_PAGE_NULL_RESPONSE:null,ON_PRIVACY_STATE_CHANGE:null,ON_SHOW_CONTEXT_BANNER_TIMER:null,REFRESH_THREAD:null,THREADS_UPDATED:null}),i={Types:h,addParticipants:function j(k,l){var m,n=l.length===1&&l[0].getInfo().render_type===c('MercuryTypeaheadConstants').THREAD_TYPE,o=void 0;if(n){var p=l[0].getInfo().mercury_thread;if(p)o=c('MercuryIDs').getThreadIDFromThreadFBID(p.thread_fbid);}else if(l.length===1){var q=l[0].info&&l[0].info.uid;if(q)o=c('MercuryIDs').getThreadIDFromUserID(q);}else if(l.length===0){c('FantaDispatcher').dispatch({type:h.CLEAR_PARTICIPANTS,tabID:k});return;}else (function(){var r=c('MercuryCanonicalGroupThreadManager').get(),s=l.map(function(u){return u.info.uid;});c('FantaDispatcher').dispatch({type:h.CLEAR_PREVIEW,tabID:k,tokens:l});var t=r.getCanonicalGroupThreadIDForParticipants(Array.from(s),function(u){r.unsubscribe(t);if(u)c('FantaDispatcher').dispatch({type:h.ADD_PARTICIPANTS,previewTabID:u,tabID:k,tokens:l});});})();if(o)c('FantaDispatcher').dispatch({type:h.ADD_PARTICIPANTS,previewTabID:o,tabID:k,tokens:l});},onBootloadTypeahead:function j(k,l){c('FantaDispatcher').dispatch({type:h.ON_BOOTLOAD_TYPEAHEAD,tabID:k,thread:l});},fetchMoreMessages:function j(k){c('FantaDispatcher').dispatch({type:h.FETCH_MORE_MESSAGES,threadID:k});},refreshThread:function j(k){c('FantaDispatcher').dispatch({type:h.REFRESH_THREAD,threadID:k});},onGetThreadResponse:function j(k){c('FantaDispatcher').dispatch({type:h.ON_GET_THREAD_RESPONSE,thread:k});},onGetThreadPreviewResponse:function j(k,l){c('FantaDispatcher').dispatch({type:h.ON_GET_THREAD_PREVIEW_RESPONSE,tabID:k,thread:l});},onShowContextBannerTimer:function j(k){c('FantaDispatcher').dispatch({type:h.ON_SHOW_CONTEXT_BANNER_TIMER,threadID:k});},onMessageStoreResponse:function j(k,l){c('FantaDispatcher').dispatch({type:h.ON_MESSAGE_STORE_RESPONSE,messages:k,tabID:l});},threadsUpdated:function j(k){c('FantaDispatcher').dispatch({type:h.THREADS_UPDATED,threads:k});},onPrivacyStateChange:function j(k,l){c('FantaDispatcher').dispatch({type:h.ON_PRIVACY_STATE_CHANGE,threadID:k,privacyState:l});},onPageNullResponse:function j(k,l,m){c('FantaDispatcher').dispatch({type:h.ON_PAGE_NULL_RESPONSE,threadID:k,nullPageTitle:l,nullPageID:m});}};f.exports=i;}),null);
__d('FantaTypeFileUploaderFile',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={file:{},id:'',startTime:0,type:null,uploadedID:null};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaTypeFileUploader',['FantaTypeFileUploaderFile','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={ANIMATED_IMAGE:'animated_image',AUDIO:'audio',FILE:'file',GENERIC_ATTACHMENT:'generic_attachment',IMAGE:'image',VIDEO:'video'},k={uploadedFiles:c('immutable').Map(),uploadingFiles:c('immutable').Map()};h=babelHelpers.inherits(l,c('immutable').Record(k));i=h&&h.prototype;l.prototype.getTypeIDs=function(m){return this.uploadedFiles.reduce(function(n,o){if(o.type===m&&o.uploadedID)n=n.concat(o.uploadedID);return n;},[]);};function l(){h.apply(this,arguments);}l.fileTypes=j;f.exports=l;}),null);
__d('FantaTypeSharePreview',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={isLoading:false,params:null,type:null,uri:null};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaTypeTabContents',['ChatPrivacyActionController','FantaGetMessageActions','FantaTypeFileUploader','FantaTypeSharePreview','immutable','MercuryConfig','MercuryIDs','MercuryMessageStore','emptyFunction','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={composerText:'',fileUploader:new (c('FantaTypeFileUploader'))(),hasFetchedAll:false,id:'',isScrolledToBottom:true,messages:c('immutable').List(),messageStore:null,nullPageID:null,nullPageTitle:null,openSheet:null,pageIndicator:null,pageIndicatorDescription:null,privacyController:null,sharePreview:new (c('FantaTypeSharePreview'))(),showContextBanner:false,showUnseenMessages:c('emptyFunction'),signatureID:null,thread:null,threadPreviewID:null,threadPreviewRecipients:null,timezoneInfo:null,typeahead:null};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(l){var m=void 0;if(c('MercuryConfig').FantaTabView){var n=c('MercuryIDs').getUserIDFromThreadID(l.id);if(n)m=new (c('ChatPrivacyActionController'))(n,function(o){c('setImmediate')(function(){c('FantaGetMessageActions').onPrivacyStateChange(l.id,o);});});}i.constructor.call(this,babelHelpers['extends']({privacyController:m},l));}f.exports=k;}),null);
__d('FantaTypeMercuryState',['FantaTypeTabContents','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={blurCallbacks:c('immutable').Map({}),focusCallbacks:c('immutable').Map({}),tabContents:c('immutable').Map({})};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaTypeTab',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={focusCounter:0,id:'',isMinimized:false,openCounter:0,focusOnMountDEPRECATED:false};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaTypeTabGroup',['FantaConst','FantaTypeTab','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={allowedRaisedTabs:c('FantaConst').DEFAULT_ALLOWED_RAISED_TABS,focusedTabID:null,tabs:c('immutable').Map({}),updatedTime:0};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;k.prototype.getRaisedandUnraisedTabs=function(){var l=function q(r){return r.openCounter;},m=function q(r){return r.focusCounter*-1;},n=this.tabs.sortBy(m),o=n.slice(this.allowedRaisedTabs),p=n.take(this.allowedRaisedTabs).sortBy(l);return {raisedTabs:p,unraisedTabs:o};};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaTypeAppState',['FantaTypeMercuryState','FantaTypeTabGroup','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={tabGroup:new (c('FantaTypeTabGroup'))(),mercury:new (c('FantaTypeMercuryState'))()};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaReducersCookie',['FantaMessageActions','FantaTabActions','FantaTypeAppState'],(function a(b,c,d,e,f,g){'use strict';var h=c('FantaMessageActions').Types,i=c('FantaTabActions').Types;function j(m,n){switch(n.type){case h.RECEIVED_NEW_MESSAGE:case i.BLUR_TAB:case i.CLOSE_ALL_TABS:case i.CLOSE_AND_TAB_NEXT:case i.CLOSE_TAB:case i.FOCUS_TAB:case i.MINIMIZE_ALL_TABS:case i.MINIMIZE_TAB:case i.OPEN_TAB:case i.REPLACE_TAB:case i.UNMINIMIZE_TAB:return l(m);}return m;}function k(m,n){switch(n.type){case i.LOAD_FROM_DATA:return m.mergeIn(['tabGroup'],{updatedTime:n.tabData.updatedTime});}return m;}function l(m){return m.mergeIn(['tabGroup'],{updatedTime:Date.now()});}f.exports={updateCookie:j,loadFromData:k};}),null);
__d('FantaReducersDockCalculator',['Arbiter','FantaTabActions','FantaMessageActions','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h=c('FantaTabActions').Types,i=c('FantaMessageActions').Types,j=null;function k(n){j=n;c('setImmediate')(function(){c('Arbiter').inform('FantaReducersDockCalculator/shouldRecalculate');});}function l(n){if(!j||n.size!==j.size){k(n);}else{var o=false;n.forEach(function(p){var q=j&&j.get(p.id);if(!q||p.isMinimized!==q.isMinimized)o=true;});if(o)k(n);}}function m(n,o){var p=n.tabGroup.tabs;switch(o.type){case h.CLOSE_ALL_TABS:case h.CLOSE_AND_TAB_NEXT:case h.CLOSE_TAB:case h.MINIMIZE_ALL_TABS:case h.MINIMIZE_TAB:case h.OPEN_TAB:case h.UNMINIMIZE_TAB:k(p);break;case h.LOAD_FROM_DATA:case i.RECEIVED_NEW_MESSAGE:l(p);break;}return n;}f.exports={recalculateDock:m};}),null);
__d('FantaAvailableStatus',['AvailableListConstants','ChatVisibility','MercuryIDs','PresenceStatus','ShortProfiles'],(function a(b,c,d,e,f,g){'use strict';f.exports={isAvailable:function h(i,j){var k=void 0,l=this.getStatus(i,j),m=c('MercuryIDs').getUserIDFromThreadID(j);if(m)k=c('ShortProfiles').getNow(m);return l===c('AvailableListConstants').ACTIVE&&(k===undefined||k===null||!k.is_messenger_only);},getStatus:function h(i,j){var k=c('AvailableListConstants').OFFLINE,l=c('MercuryIDs').getUserIDFromThreadID(j);if(l){k=c('PresenceStatus').get(l);}else if(i){var m=i.participants.map(function(n){return c('MercuryIDs').getUserIDFromParticipantID(n);});k=c('PresenceStatus').getGroup(m);}if(!c('ChatVisibility').isOnline())k=c('AvailableListConstants').OFFLINE;return k;}};}),null);
__d('FantaTabSheetActions',['FantaDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CLOSE_ADD_FRIENDS_SHEET:null,CLOSE_ADD_MORE_FRIENDS_SHEET:null,CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:null,CLOSE_EMPLOYEE_WORK_USER_SHEET:null,CLOSE_NAME_CONVERSATION_TAB_SHEET:null,CLOSE_PAGE_INDICATOR_SHEET:null,CLOSE_READ_ONLY_PERMANENT_SHEET:null,CLOSE_READ_ONLY_SHEET:null,CLOSE_USER_FOCUS_AND_BYPASS_SHEET:null,CLOSE_USER_TIMEZONE_SHEET:null,ON_BOOTLOAD_EVENT_REMINDER:null,ON_IS_PAGE_TAB:null,OPEN_ADD_MORE_FRIENDS_SHEET:null,OPEN_APPOINTMENT_SHEET:null,OPEN_BYPASS_FOCUS_SHEET:null,OPEN_EMPLOYEE_AWAY_SHEET:null,OPEN_EMPLOYEE_PERSONAL_USER_SHEET:null,OPEN_EMPLOYEE_WORK_USER_SHEET:null,OPEN_NAME_CONVERSATION_TAB_SHEET:null,OPEN_PAGE_INDICATOR_SHEET:null,OPEN_READ_ONLY_PERMANENT_SHEET:null,OPEN_READ_ONLY_SHEET:null,OPEN_USER_FOCUS_SHEET:null,OPEN_USER_TIMEZONE_SHEET:null}),i={Types:h,openUserFocusSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_USER_FOCUS_SHEET,tabID:k});},openBypassFocusSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_BYPASS_FOCUS_SHEET,tabID:k});},closeUserFocusAndBypassSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_USER_FOCUS_AND_BYPASS_SHEET,tabID:k});},openUserTimezoneSheet:function j(k,l){c('FantaDispatcher').dispatch({type:h.OPEN_USER_TIMEZONE_SHEET,tabID:k,timezoneInfo:l});},closeUserTimezoneSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_USER_TIMEZONE_SHEET,tabID:k});},openAddMoreFriendsSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_ADD_MORE_FRIENDS_SHEET,tabID:k});},closeAddMoreFriendsSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_ADD_MORE_FRIENDS_SHEET,tabID:k});},closeAddFriendsSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_ADD_FRIENDS_SHEET,tabID:k});},openNameConversationSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_NAME_CONVERSATION_TAB_SHEET,tabID:k});},closeNameConversationSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_NAME_CONVERSATION_TAB_SHEET,tabID:k});},openReadOnlySheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_READ_ONLY_SHEET,tabID:k});},closeReadOnlySheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_READ_ONLY_SHEET,tabID:k});},openReadOnlyPermanentSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_READ_ONLY_PERMANENT_SHEET,tabID:k});},closeReadOnlyPermanentSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_READ_ONLY_PERMANENT_SHEET,tabID:k});},openEmployeeAwaySheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_EMPLOYEE_AWAY_SHEET,tabID:k});},openEmployeePersonalUserSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_EMPLOYEE_PERSONAL_USER_SHEET,tabID:k});},closeEmployeePersonalUserSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET,tabID:k});},openEmployeeWorkUserSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_EMPLOYEE_WORK_USER_SHEET,tabID:k});},closeEmployeeWorkUserSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_EMPLOYEE_WORK_USER_SHEET,tabID:k});},openPageIndicatorSheet:function j(k,l){c('FantaDispatcher').dispatch({type:h.OPEN_PAGE_INDICATOR_SHEET,description:l,tabID:k});},closePageIndicatorSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_PAGE_INDICATOR_SHEET,tabID:k});},onIsPageTab:function j(k,l){c('FantaDispatcher').dispatch({type:h.ON_IS_PAGE_TAB,pageIndicator:l,tabID:k});},onBootloadEventReminder:function j(k){c('FantaDispatcher').dispatch({type:h.ON_BOOTLOAD_EVENT_REMINDER,tabID:k});},openAppointmentBannerSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_APPOINTMENT_SHEET,tabID:k});}};f.exports=i;}),null);
__d('WorkFocusMode',['WorkModeConfig','WorkUserAvailabilityStatusType','emptyFunction','ifRequired'],(function a(b,c,d,e,f,g){'use strict';var h={},i={status:'AVAILABLE',end_date:0};if(c('WorkModeConfig').availability){i.status=c('WorkModeConfig').availability.status;i.end_date=c('WorkModeConfig').availability.end_date;}f.exports={updateAvailability:function j(k,l){k=Object.keys(c('WorkUserAvailabilityStatusType')).find(function(m){return c('WorkUserAvailabilityStatusType')[m]===k;});i.status=k;i.end_date=l;},currentViewerInFocusMode:function j(k){if(!c('WorkModeConfig').focus_messaging_enabled)return false;if(k){if(h[k])return false;var l=null;c('ifRequired')('MercuryThreads',function(n){l=n.get().getThreadMetaNow(k);},c('emptyFunction'));if(l&&l.bypass_focus_mode_until&&l.bypass_focus_mode_until>Date.now()/1000)return false;}var m=c('WorkUserAvailabilityStatusType')[i.status];if(m===c('WorkUserAvailabilityStatusType').FOCUS&&i.end_date*1000>Date.now())return true;return false;},addBypassFocusModeForThread:function j(k){h[k]=true;},removeBypassFocusModeForThread:function j(k){h[k]=false;}};}),null);
__d('FantaReducersMercury',['Arbiter','AvailableList','AvailableListConstants','Bootloader','FantaAvailableStatus','FantaGetMessageActions','FantaMessageActions','FantaTabActions','FantaTabSheetActions','FantaTypeAppState','FantaTypeTabContents','JSLogger','MercuryConfig','MercuryIDs','MercuryThreadIDMap','WorkFocusMode','getPageIDFromThreadID','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryThreadIDMap').get(),i=c('JSLogger').create('FantaReducersMercury'),j=c('FantaMessageActions').Types,k=c('FantaTabActions').Types,l=c('FantaGetMessageActions').Types;function m(){return Math.floor(Math.random()*2147483648).toString(16);}function n(ka,la){switch(la.type){case k.OPEN_TAB:var ma=la.tabID;if(c('MercuryConfig').FantaTabView){c('ifRequired')('FantaTabsReactApp',function(oa){if(!c('MercuryIDs').isValidThreadID(ma)){ka=ka.deleteIn(['tabGroup','tabs',ma]);w(ma);}else{ga(ka,ma);ha(ma);}},function(){return ka=o(ka,la.tabID);});}else c('ifRequired')('FantaTabsApp',function(oa){if(!c('MercuryIDs').isValidThreadID(ma)){ka=ka.deleteIn(['tabGroup','tabs',ma]);w(ma);}else{ga(ka,ma);ha(ma);}},function(){return ka=o(ka,la.tabID);});ka=r(ka,ma);var na=m();ka=ka.mergeIn(['mercury','tabContents',ma],{signatureID:na});ka=q(ka,ma);c('Arbiter').inform('jewel/hide');return ka;}return ka;}function o(ka,la){c('ifRequired')('FantaTabsSlimApp',function(ma){if(!c('MercuryIDs').isValidThreadID(la)){ka=ka.deleteIn(['tabGroup','tabs',la]);w(la);}else{ga(ka,la);ha(la);}},function(){ga(ka,la);ha(la);});return ka;}function p(ka,la){switch(la.type){case j.RECEIVED_NEW_MESSAGE:ka=r(ka,la.tabID);}return ka;}function q(ka,la){var ma=ka.mercury.get('focusCallbacks'),na=ka.tabGroup.tabs.get(la);if(ma&&!!ma.get(la)&&!na.focusOnMountDEPRECATED)ka=z(ka,la);return ka;}function r(ka,la){var ma,na=ka.mercury.tabContents.get(la);if(!na){if(c('MercuryConfig').FantaTabView)(function(){var oa=c('getPageIDFromThreadID')(la);if(oa)c('Bootloader').loadModules(["PagesMercuryChatTabIndicatorHandler"],function(pa){var qa=c('AvailableListConstants').OFFLINE,ra=new pa(oa,qa,function(sa){c('setImmediate')(function(){c('FantaTabSheetActions').openPageIndicatorSheet(la,sa);});},function(){return c('FantaTabSheetActions').closePageIndicatorSheet(la);});c('setImmediate')(function(){c('FantaTabSheetActions').onIsPageTab(la,ra);});ra.checkResponsiveness();},'FantaReducersMercury');})();return ka.setIn(['mercury','tabContents',la],new (c('FantaTypeTabContents'))({id:la}));}return ka;}function s(ka,la){switch(la.type){case k.REPLACE_TAB:ka=v(ka,la.newTabID);ka=r(ka,la.newTabID);return ka;}return ka;}function t(ka,la){switch(la.type){case l.ADD_PARTICIPANTS:var ma=la.tabID,na=la.previewTabID;if(!ka.mercury.tabContents.get(ma))return ka;ka=ka.mergeIn(['mercury','tabContents',ma],{threadPreviewID:na});return ka;}return ka;}function u(ka,la){switch(la.type){case l.CLEAR_PARTICIPANTS:var ma=la.tabID;ka=ka.setIn(['mercury','tabContents',ma],new (c('FantaTypeTabContents'))({id:ma}));}return ka;}function v(ka,la){c('ifRequired')('FantaTabsApp',function(ma){if(!c('MercuryIDs').isValidThreadID(la)){ka=ka.deleteIn(['tabGroup','tabs',la]);w(la);}},function(){c('ifRequired')('FantaTabsSlimApp',function(ma){if(!c('MercuryIDs').isValidThreadID(la)){ka=ka.deleteIn(['tabGroup','tabs',la]);w(la);}});});return ka;}function w(ka){h.getClientIDFromServerID(ka,function(la){return c('setImmediate')(function(){if(c('MercuryIDs').isValidThreadID(la)){c('FantaTabActions').openTab(la);}else i.error('invalid id',ka);});});}function x(ka,la){switch(la.type){case k.MERCURY_REGISTER_TAB_FOCUS_DEPRECATED:ka=aa(ka,la);ka=ba(ka,la);var ma=ka.tabGroup.tabs.get(la.tabID);if(ma&&ma.focusOnMountDEPRECATED)return z(ka,la.tabID);}return ka;}function y(ka,la){switch(la.type){case k.FOCUS_TAB:ga(ka,la.tabID);var ma=ka.tabGroup.tabs.get(la.tabID);if(ma&&!ma.focusOnMountDEPRECATED)return z(ka,la.tabID);}return ka;}function z(ka,la){var ma=ka.mercury.get('focusCallbacks'),na=ka.mercury.get('blurCallbacks'),oa=ma.get(la);for(var pa=na.values(),qa=Array.isArray(pa),ra=0,pa=qa?pa:pa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var sa;if(qa){if(ra>=pa.length)break;sa=pa[ra++];}else{ra=pa.next();if(ra.done)break;sa=ra.value;}var ta=sa;ta();}if(oa)oa();ka=ka.mergeIn(['tabGroup','tabs',la],{focusOnMountDEPRECATED:false});return ka;}function aa(ka,la){var ma=la.tabID,na=la.focusCallback;return ka.setIn(['mercury','focusCallbacks',ma],na);}function ba(ka,la){var ma=la.tabID,na=la.blurCallback;return ka.setIn(['mercury','blurCallbacks',ma],na);}function ca(ka,la){switch(la.type){case k.CLOSE_TAB:var ma=la.tabID;c('ifRequired')('MessengerVideoAutoplayActions',function(na){na.deleteThread(ma);});c('WorkFocusMode')&&c('WorkFocusMode').removeBypassFocusModeForThread(ma);return ka.deleteIn(['mercury','focusCallbacks',ma]).deleteIn(['mercury','blurCallbacks',ma]);}return ka;}function da(ka,la){switch(la.type){case k.CLOSE_ALL_TABS:var ma=ka.mercury.get('focusCallbacks'),na=ka.mercury.get('blurCallbacks');c('ifRequired')('MessengerVideoAutoplayActions',function(oa){oa.deleteAllThreads();});return ka.setIn(['mercury','focusCallbacks'],ma.clear()).setIn(['mercury','blurCallbacks'],na.clear());}return ka;}function ea(ka,la){switch(la.type){case k.FOCUS_NEXT_TAB:case k.FOCUS_PREVIOUS_TAB:case k.CLOSE_AND_TAB_NEXT:var ma=ka.tabGroup.focusedTabID;if(ma){z(ka,ma);ga(ka,ma);}}return ka;}function fa(ka,la){switch(la.type){case k.CLOSE_AND_TAB_NEXT:var ma=la.tabID;c('WorkFocusMode')&&c('WorkFocusMode').removeBypassFocusModeForThread(ma);}return ka;}function ga(ka,la){var ma=c('MercuryIDs').getUserIDFromThreadID(la);if(ma)c('AvailableList').updateForID(ma);var na=ka.mercury.tabContents.get(la);if(na){var oa=na.thread,pa=na.pageIndicator;if(pa)pa.notifyPageOnlineStatusChanged(c('FantaAvailableStatus').getStatus(oa,la));}}function ha(ka){if(!c('MercuryIDs').isValidThreadID(ka))return;c('Bootloader').loadModules(["GroupChatMessageBlockAlert","MercuryBlockedParticipants","MercuryThreadActions","MercuryThreads"],function(la,ma,na,oa){var pa=na.get(),qa=oa.get(),ra=ma.get();qa.getThreadMeta(ka,function(sa){if(ra.isPresentInGroupThread(sa))la.show(ra.inGroupThread(sa),function(){c('FantaTabActions').focusTab(ka);},function(){c('FantaTabActions').closeTab(ka);pa.leaveGroup(ka);});});},'FantaReducersMercury');}function ia(ka,la){switch(la.type){case k.UNMINIMIZE_TAB:ga(ka,la.tabID);}return ka;}function ja(ka,la){switch(la.type){case k.LOAD_FROM_DATA:for(var ma=ka.tabGroup.tabs.keys(),na=Array.isArray(ma),oa=0,ma=na?ma:ma[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var pa;if(na){if(oa>=ma.length)break;pa=ma[oa++];}else{oa=ma.next();if(oa.done)break;pa=oa.value;}var qa=pa;ka=r(ka,qa);}}return ka;}f.exports={addParticipants:t,clearParticipants:u,closeAllTabs:da,closeAndTabNext:fa,closeTab:ca,focusTab:y,focusTabEvents:ea,loadFromData:ja,openTab:n,receivedNewMessage:p,registerTabFocusDeprecated:x,replaceTab:s,unminimizeTab:ia};}),null);
__d('FantaReducersMessages',['FantaGetMessageActions','FantaMessageActions','FantaTabActions','FantaTypeAppState','MercuryBrowserAlerts'],(function a(b,c,d,e,f,g){'use strict';var h=c('FantaMessageActions').Types,i=c('FantaTabActions').Types,j=c('FantaGetMessageActions').Types;function k(r,s){switch(s.type){case h.RECEIVED_NEW_MESSAGE:var t=s.message;c('MercuryBrowserAlerts').messageReceived(t);return r;}return r;}function l(r,s){switch(s.type){case h.COMPOSER_TEXT_UPDATE:var t=s.message,u=s.threadID;if(!r.mercury.tabContents.get(u))return r;return r.mergeIn(['mercury','tabContents',u],{composerText:t});}return r;}function m(r,s){switch(s.type){case i.CLOSE_TAB:if(!r.mercury.tabContents.get(s.tabID))return r;return r.mergeIn(['mercury','tabContents',s.tabID],{composerText:''});}return r;}function n(r,s){switch(s.type){case i.CLOSE_ALL_TABS:var t=r.mercury.tabContents;t.forEach(function(u){var v=u.id;r=r.setIn(['mercury','tabContents',v],u.set('composerText',''));});return r;}return r;}function o(r,s){switch(s.type){case i.SCROLL_BOTTOM_CHANGED:var t=s.tabID,u=s.isScrolledToBottom,v=s.showUnseenMessages;if(!r.mercury.tabContents.get(t))return r;r=r.mergeIn(['mercury','tabContents',t],{isScrolledToBottom:u,showUnseenMessages:v});}return r;}function p(r,s){switch(s.type){case i.SHOW_UNSEEN_MESSAGES:var t=s.tabID,u=r.mercury.tabContents.get(t);if(u)u.showUnseenMessages();}return r;}function q(r,s){switch(s.type){case j.ON_GET_THREAD_RESPONSE:var t=s.thread,u=t.thread_id,v=r.mercury.tabContents.get(u);if(!v)return r;r=r.mergeIn(['mercury','tabContents',u],{thread:t});break;}return r;}f.exports={closeAllTabs:n,closeTab:m,composerTextUpdate:l,onGetThreadResponse:q,receivedNewMessage:k,scrollBottomChanged:o,showUnseenMessages:p};}),null);
__d('FantaReducersTabSheets',['AsyncRequest','Bootloader','ChatEmployeeAwayWarning','ChatPrivacyActionController','ChatTimezoneWarning','ChatUserFocusWarning','ChatUserPersonalUserWarning','ChatUserWorkUserWarning','CurrentUser','FantaGetMessageActions','FantaMessageActions','FantaTabActions','FantaTabSheetActions','FantaTypeAppState','FBID','ImmutableObject','MercuryBlockedParticipants','MercuryConfig','MercuryDataSourceWrapper','MercuryIDs','MercuryParticipants','MercurySheetPolicy','MercuryThreadInfo','MercuryThreads','MercuryTypeaheadConstants','MercuryViewer','XNativeComponentFlowBookingRequestCountController','emptyFunction','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryBlockedParticipants').get(),i=c('MercuryThreads').get(),j=c('FantaTabActions').Types,k=c('FantaGetMessageActions').Types,l=c('FantaMessageActions').Types,m=c('FantaTabSheetActions').Types;function n(ub,vb){switch(vb.type){case j.CLOSE_TAB:case j.CLOSE_AND_TAB_NEXT:var wb=vb.tabID;if(!ub.mercury.tabContents.get(wb))return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{typeahead:null});return o(ub,wb);}return ub;}function o(ub,vb,wb){var xb=ub.mercury.tabContents.get(vb);if(!xb)return ub;if(wb&&xb.openSheet!==wb)return ub;ub=ub.mergeIn(['mercury','tabContents',vb],{openSheet:null});if(xb.thread)ub=mb(ub,vb,xb.thread);return ub;}function p(ub,vb){switch(vb.type){case j.CLOSE_ALL_TABS:for(var wb=ub.mercury.tabContents.keys(),xb=Array.isArray(wb),yb=0,wb=xb?wb:wb[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var zb;if(xb){if(yb>=wb.length)break;zb=wb[yb++];}else{yb=wb.next();if(yb.done)break;zb=yb.value;}var ac=zb;ub=ub.mergeIn(['mercury','tabContents',ac],{typeahead:null});ub=o(ub,ac);}}return ub;}function q(ub,vb){switch(vb.type){case k.ON_GET_THREAD_RESPONSE:case k.ON_GET_THREAD_PREVIEW_RESPONSE:var wb=vb.thread,xb=vb.tabID||wb.thread_id;ub=r(ub,wb,xb);}return ub;}function r(ub,vb,wb){var xb=c('MercuryViewer').getID(),yb=vb.participants.filter(function(zb){return zb!==xb;});if(yb.length<1&&!i.isNewEmptyLocalThread(wb)){ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatNoRecipientsTabSheet);}else ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatNoRecipientsTabSheet);if(vb.participants.length===0){ub=x(ub,wb,vb);ub=z(ub,wb,c('MercurySheetPolicy').sheets.FantaAddFriendsSheet);}else ub=mb(ub,wb,vb);return ub;}function s(ub,vb){switch(vb.type){case k.THREADS_UPDATED:vb.threads.forEach(function(wb){ub=r(ub,new (c('ImmutableObject'))(wb),wb.thread_id);});}return ub;}function t(ub,vb){switch(vb.type){case j.OPEN_TAB:case j.REPLACE_TAB:var wb=vb.tabID,xb=ub.mercury.tabContents.get(wb).thread;if(xb)ub=mb(ub,wb,xb);}return ub;}function u(ub,vb,wb){if(c('MercuryThreadInfo').isMuted(wb)){return z(ub,vb,c('MercurySheetPolicy').sheets.ChatThreadIsMutedTabSheet);}else return o(ub,vb,c('MercurySheetPolicy').sheets.ChatThreadIsMutedTabSheet);}function v(ub,vb,wb){if(h.isMessageBlocked(wb)){return z(ub,vb,c('MercurySheetPolicy').sheets.ChatThreadIsMessageBlockedSheet);}else return o(ub,vb,c('MercurySheetPolicy').sheets.ChatThreadIsMessageBlockedSheet);}function w(ub,vb){switch(vb.type){case k.ON_BOOTLOAD_TYPEAHEAD:var wb=vb.thread,xb=wb.thread_id;ub=x(ub,xb,wb);}return ub;}function x(ub,vb,wb){if(ub.mercury.tabContents.get(vb).typeahead)return ub;c('ifRequired')('ChatTabTypeaheadRenderer',function(xb){c('ifRequired')('ContextualTypeaheadView',function(yb){c('ifRequired')('MercuryTypeahead',function(zb){if(!ub.mercury.tabContents.get(vb))return;var ac=!!(wb&&wb.participants&&wb.participants.length===0),bc=ac?c('MercuryDataSourceWrapper').chat_typeahead_source:c('MercuryDataSourceWrapper').chat_add_people_source;bc.setShowThreads(ac);var cc=new zb(bc,yb);cc.setViewOption('renderer',xb);cc.setExcludedParticipantsFromThreadMeta(wb);ub=ub.mergeIn(['mercury','tabContents',vb],{typeahead:cc});},function(){return y(vb,wb);});},function(){return y(vb,wb);});},function(){return y(vb,wb);});return ub;}function y(ub,vb){c('Bootloader').loadModules(["ChatTabTypeaheadRenderer","ContextualTypeaheadView","MercuryTypeahead"],function(wb,xb,yb){c('FantaGetMessageActions').onBootloadTypeahead(ub,vb);},'FantaReducersTabSheets');}function z(ub,vb,wb){var xb=ub.mercury.tabContents.get(vb),yb=ub.tabGroup.tabs.get(vb);if(!yb||!xb)return ub;var zb=xb.openSheet;if(zb&&!c('MercurySheetPolicy').canReplaceOpenSheet(zb,wb))return ub;ub=ub.mergeIn(['mercury','tabContents',vb],{openSheet:wb});return ub;}function aa(ub,vb){switch(vb.type){case k.ADD_PARTICIPANTS:var wb=vb.tokens,xb=vb.tabID,yb=wb.length===1&&wb[0].getInfo().render_type===c('MercuryTypeaheadConstants').THREAD_TYPE;if(!yb)return z(ub,xb,c('MercurySheetPolicy').sheets.FantaAddFriendsSheet);}return ub;}function ba(ub,vb){return ub;}function ca(ub,vb){switch(vb.type){case m.OPEN_APPOINTMENT_SHEET:var wb=vb.tabID;return z(ub,wb,c('MercurySheetPolicy').sheets.ChatAppointmentBanner);}return ub;}function da(ub,vb){switch(vb.type){case m.OPEN_USER_FOCUS_SHEET:var wb=vb.tabID;return z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserFocusSheet);}return ub;}function ea(ub,vb){switch(vb.type){case m.CLOSE_USER_FOCUS_AND_BYPASS_SHEET:var wb=vb.tabID;ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserFocusSheet);ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserFocusBypassSheet);}return ub;}function fa(ub,vb,wb){c('ChatUserFocusWarning').updateUserFocusWarning(wb,function(xb){xb?c('setImmediate')(function(){c('FantaTabSheetActions').openBypassFocusSheet(vb);}):c('setImmediate')(function(){c('FantaTabSheetActions').openUserFocusSheet(vb);});},function(){c('setImmediate')(function(){c('FantaTabSheetActions').closeUserFocusAndBypassSheet(vb);});});return ub;}function ga(ub,vb){switch(vb.type){case m.OPEN_BYPASS_FOCUS_SHEET:var wb=vb.tabID;return z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserFocusBypassSheet);}return ub;}function ha(ub,vb){switch(vb.type){case m.OPEN_USER_TIMEZONE_SHEET:var wb=vb.tabID,xb=vb.timezoneInfo;if(!ub.mercury.tabContents.get(wb))return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{timezoneInfo:xb});return z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserTimezoneSheet);}return ub;}function ia(ub,vb){switch(vb.type){case m.CLOSE_USER_TIMEZONE_SHEET:var wb=vb.tabID;if(!ub.mercury.tabContents.get(wb))return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{timezoneInfo:null});ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserTimezoneSheet);}return ub;}function ja(ub,vb,wb){c('ChatTimezoneWarning').updateUserTimezoneWarning(wb,function(xb){c('setImmediate')(function(){c('FantaTabSheetActions').openUserTimezoneSheet(vb,xb);});},function(){c('setImmediate')(function(){c('FantaTabSheetActions').closeUserTimezoneSheet(vb);});});return ub;}function ka(ub,vb,wb){c('ChatEmployeeAwayWarning').updateEmployeeAwayWarning(wb,function(){return c('setImmediate')(function(){c('FantaTabSheetActions').openEmployeeAwaySheet(vb);});},c('emptyFunction'));return ub;}function la(ub,vb){switch(vb.type){case m.OPEN_EMPLOYEE_AWAY_SHEET:var wb=vb.tabID;ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatEmployeeAwaySheet);}return ub;}function ma(ub,vb,wb){c('ChatUserPersonalUserWarning').updateEmployeePersonalUserWarning(wb,function(xb,yb){c('setImmediate')(function(){c('FantaTabSheetActions').openEmployeePersonalUserSheet(vb);});},c('emptyFunction'));return ub;}function na(ub,vb){switch(vb.type){case m.OPEN_EMPLOYEE_PERSONAL_USER_SHEET:var wb=vb.tabID;ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserIsPersonalUserSheet);}return ub;}function oa(ub,vb){switch(vb.type){case m.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:var wb=vb.tabID;ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserIsPersonalUserSheet);}return ub;}function pa(ub,vb){switch(vb.type){case m.OPEN_EMPLOYEE_WORK_USER_SHEET:var wb=vb.tabID;ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserIsWorkUserSheet);}return ub;}function qa(ub,vb){switch(vb.type){case m.CLOSE_EMPLOYEE_WORK_USER_SHEET:var wb=vb.tabID;ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserIsWorkUserSheet);}return ub;}function ra(ub,vb,wb){c('ChatUserWorkUserWarning').updateEmployeeWorkUserWarning(wb,function(xb,yb){c('setImmediate')(function(){c('FantaTabSheetActions').openEmployeeWorkUserSheet(vb);});},c('emptyFunction'));return ub;}function sa(ub,vb){switch(vb.type){case m.OPEN_NAME_CONVERSATION_TAB_SHEET:return z(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatNameConversationTabSheet);}return ub;}function ta(ub,vb){switch(vb.type){case m.CLOSE_NAME_CONVERSATION_TAB_SHEET:return o(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatNameConversationTabSheet);}return ub;}function ua(ub,vb){return ub;}function va(ub,vb){switch(vb.type){case m.OPEN_READ_ONLY_PERMANENT_SHEET:return z(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatReadOnlyPermanentTabSheet);}return ub;}function wa(ub,vb){switch(vb.type){case m.CLOSE_READ_ONLY_PERMANENT_SHEET:return o(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatReadOnlyPermanentTabSheet);}return ub;}function xa(ub,vb){switch(vb.type){case m.OPEN_READ_ONLY_SHEET:return z(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatReadOnlyTabSheet);}return ub;}function ya(ub,vb){switch(vb.type){case m.CLOSE_READ_ONLY_SHEET:return o(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatReadOnlyTabSheet);}return ub;}function za(ub,vb){return ub;}function ab(ub,vb){return ub;}function bb(ub,vb){return ub;}function cb(ub,vb){switch(vb.type){case m.CLOSE_ADD_FRIENDS_SHEET:var wb=vb.tabID;if(!ub.mercury.tabContents.get(wb))return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{typeahead:null});return o(ub,wb,c('MercurySheetPolicy').sheets.FantaAddFriendsSheet);}return ub;}function db(ub,vb){switch(vb.type){case m.OPEN_ADD_MORE_FRIENDS_SHEET:var wb=vb.tabID,xb=ub.mercury.tabContents.get(wb).thread;if(xb){ub=x(ub,wb,xb);return z(ub,vb.tabID,c('MercurySheetPolicy').sheets.FantaAddMoreFriendsSheet);}}return ub;}function eb(ub,vb){switch(vb.type){case m.CLOSE_ADD_MORE_FRIENDS_SHEET:var wb=vb.tabID;if(!ub.mercury.tabContents.get(wb))return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{typeahead:null});return o(ub,wb,c('MercurySheetPolicy').sheets.FantaAddMoreFriendsSheet);}return ub;}function fb(ub,vb){switch(vb.type){case l.SEND_GROUP_MESSAGE:var wb=vb.tabID||vb.threadID;return o(ub,wb,c('MercurySheetPolicy').sheets.FantaAddMoreFriendsSheet);}return ub;}function gb(ub,vb){switch(vb.type){case l.RECEIVED_NEW_MESSAGE:var wb=vb.tabID,xb=ub.mercury.tabContents.get(wb);if(xb&&!xb.isScrolledToBottom){ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatNewMessagesTabSheet);}else ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatNewMessagesTabSheet);}return ub;}function hb(ub,vb){switch(vb.type){case j.SCROLL_BOTTOM_CHANGED:var wb=vb.tabID,xb=vb.isScrolledToBottom;if(xb)ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatNewMessagesTabSheet);var yb=ub.mercury.tabContents.get(wb);if(yb&&yb.thread)ub=ob(ub,wb,yb.thread);}return ub;}function ib(ub,vb){switch(vb.type){case k.ON_PRIVACY_STATE_CHANGE:var wb=vb.threadID,xb=vb.privacyState;switch(xb){case c('ChatPrivacyActionController').OFFLINE:ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserBlockedTabSheet);ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatOfflineTabSheet);break;case c('ChatPrivacyActionController').NORMAL:ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserBlockedTabSheet);ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatOfflineTabSheet);break;case c('ChatPrivacyActionController').BLOCKED:ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatOfflineTabSheet);var yb=c('MercuryIDs').getUserIDFromThreadID(wb);if(yb){var zb=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(yb));zb&&zb.is_friend?(ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserBlockedTabSheet)):(ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserBlockedTabSheet));}break;}}return ub;}function jb(ub,vb){switch(vb.type){case m.OPEN_PAGE_INDICATOR_SHEET:var wb=vb.tabID,xb=vb.description;if(xb&&ub.mercury.tabContents.get(wb)){ub=ub.mergeIn(['mercury','tabContents',wb],{pageIndicatorDescription:xb});return z(ub,wb,c('MercurySheetPolicy').sheets.ChatPageResponsivenessIndicator);}}return ub;}function kb(ub,vb){switch(vb.type){case m.CLOSE_PAGE_INDICATOR_SHEET:var wb=vb.tabID;ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatPageResponsivenessIndicator);}return ub;}function lb(ub,vb){switch(vb.type){case m.ON_IS_PAGE_TAB:var wb=vb.tabID,xb=vb.pageIndicator,yb=ub.mercury.tabContents.get(wb);if(!yb)return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{pageIndicator:xb});}return ub;}function mb(ub,vb,wb){ub=fa(ub,vb,wb);ub=ja(ub,vb,wb);ub=v(ub,vb,wb);ub=u(ub,vb,wb);ub=ka(ub,vb,wb);ub=ma(ub,vb,wb);ub=ra(ub,vb,wb);ub=pb(ub,vb,wb);ub=sb(ub,vb,wb);ub=ob(ub,vb,wb);ub=nb(ub,vb,wb);ub=tb(ub,vb,wb);return ub;}function nb(ub,vb,wb){var xb=wb.rtc_call_data,yb=wb.thread_fbid,zb=xb&&xb.call_state!=='NO_ONGOING_CALL'&&yb;if(zb){ub=z(ub,vb,c('MercurySheetPolicy').sheets.ChatJoinCallSheet);}else ub=o(ub,vb,c('MercurySheetPolicy').sheets.ChatJoinCallSheet);return ub;}function ob(ub,vb,wb){var xb=wb.has_montage&&c('MercuryConfig').MontageThreadViewer,yb=ub.mercury.tabContents.get(vb),zb=!!(yb&&yb.isScrolledToBottom);if(zb&&xb){ub=z(ub,vb,c('MercurySheetPolicy').sheets.ChatMontageSheet);}else ub=o(ub,vb,c('MercurySheetPolicy').sheets.ChatMontageSheet);return ub;}function pb(ub,vb,wb){c('ifRequired')('EventReminderActions',function(xb){var event=wb.lightweight_event;if(event){xb.updateEventReminder(vb,event);ub=z(ub,vb,c('MercurySheetPolicy').sheets.ChatEventReminderTabSheet);}else c('ifRequired')('EventReminderStateStore',function(yb){var zb=yb.getEvent(vb);if(zb&&zb.exists)xb.deleteEventReminder(vb);ub=o(ub,vb,c('MercurySheetPolicy').sheets.ChatEventReminderTabSheet);},function(){return qb(vb);});},function(){return qb(vb);});return ub;}function qb(ub){c('Bootloader').loadModules(["EventReminderActions","EventReminderStateStore"],function(vb,wb){c('setImmediate')(function(){c('FantaTabSheetActions').onBootloadEventReminder(ub);});},'FantaReducersTabSheets');}function rb(ub,vb){switch(vb.type){case m.ON_BOOTLOAD_EVENT_REMINDER:var wb=vb.tabID,xb=ub.mercury.tabContents.get(wb);if(!xb)return ub;var yb=xb.thread;if(yb)ub=pb(ub,wb,yb);}return ub;}function sb(ub,vb,wb){var xb=wb.other_user_fbid;if(xb&&!c('FBID').isUser(xb)&&c('MercuryConfig').ShowAppointmentBanner){var yb=c('XNativeComponentFlowBookingRequestCountController').getURIBuilder().setFBID('page_id',xb).setFBID('user_id',c('CurrentUser').getID()).getURI();new (c('AsyncRequest'))().setURI(yb).setHandler(function(zb){var ac=zb&&zb.getPayload();if(ac&&ac.confirmed+ac.pending>0)c('FantaTabSheetActions').openAppointmentBannerSheet(vb);}).send();}else ub=o(ub,vb,c('MercurySheetPolicy').sheets.ChatAppointmentBanner);return ub;}function tb(ub,vb,wb){var xb=wb.associated_object;if(xb)ub=z(ub,vb,c('MercurySheetPolicy').sheets.ChatRoomAssociatedObjectSheet);return ub;}f.exports={addParticipants:aa,closeAddFriends:cb,closeAddMoreFriends:eb,closeAllTabs:p,closeEmployeePersonalUserSheet:oa,closeEmployeeWorkUserSheet:qa,closeFocusUserSheet:ea,closeNameConversationSheet:ta,closePageIndicatorSheet:kb,closePermanentReadOnlySheet:wa,closeReadOnlySheet:ya,closeTab:n,closeUserTimezoneSheet:ia,onBootloadEventReminder:rb,onBootloadTypeahead:w,onGetThreadResponse:q,onIsPageTab:lb,onPrivacyStateChange:ib,openAddFriendsSheet:ba,openAddMoreFriends:db,openAppointmentBannerSheet:ca,openBypassFocusSheet:ga,openEmployeeAwaySheet:la,openEmployeePersonalUserSheet:na,openEmployeeWorkUserSheet:pa,openFocusUserSheet:da,openNameConversationSheet:sa,openNewMessagesSheet:ua,openPageIndicatorSheet:jb,openPermanentReadOnlySheet:va,openReadOnlySheet:xa,openTab:t,openUploadWarningTabSheet:za,openUserFocusSheet:ab,openUserIsPersonalUserSheet:bb,openUserTimezoneSheet:ha,receivedNewMessage:gb,scrollBottomChanged:hb,sendGroupMessage:fb,threadsUpdated:s};}),null);
__d("isWebMessengerURI",[],(function a(b,c,d,e,f,g){function h(i){return /^(\/messages)/.test(i.getPath());}f.exports=h;}),null);
__d('FantaReducersTabs',['FantaConst','FantaMessageActions','FantaTabActions','FantaTypeAppState','FantaTypeTab','FantaTypeTabGroup','PinnedConversationNubsConfig','URI','isWebMessengerURI'],(function a(b,c,d,e,f,g){'use strict';var h=c('FantaMessageActions').Types,i=c('FantaTabActions').Types,j='tab_',k=1,l=1,m=1;function n(ja,ka){switch(ka.type){case i.OPEN_TAB:return u(ja,ka.tabID||j+m++,true);}return ja;}function o(ja,ka){switch(ka.type){case i.REPLACE_TAB:var la=ka.tabID,ma=ka.newTabID,na=ja.tabGroup,oa=na.tabs,pa=oa.get(la);if(pa){var qa=pa.id===ja.tabGroup.focusedTabID;ja=ja.setIn(['tabGroup','tabs',ma],pa.merge({id:ma,focusOnMountDEPRECATED:qa})).deleteIn(['tabGroup','tabs',la]);return u(ja,ma,qa,true);}return u(ja,ma);}return ja;}function p(ja,ka){switch(ka.type){case i.MINIMIZE_TAB:return v(ja,ka.tabID,true);}return ja;}function q(ja,ka){switch(ka.type){case i.UNMINIMIZE_TAB:ja=ja.mergeIn(['tabGroup','tabs',ka.tabID],{focusOnMountDEPRECATED:true});return v(ja,ka.tabID,false);}return ja;}function r(ja,ka){switch(ka.type){case i.FOCUS_TAB:var la=ka.tabID;return ba(ja,la);}return ja;}function s(ja,ka){switch(ka.type){case i.BLUR_TAB:return ca(ja,ka.tabID);}return ja;}function t(ja,ka){switch(ka.type){case h.RECEIVED_NEW_MESSAGE:var la=ka.tabID,ma=ja.tabGroup.tabs.get(la);if(!ma){var na=ja.tabGroup.focusedTabID;ja=u(ja,la,false);var oa=c('URI').getNextURI();if(c('isWebMessengerURI')(oa)){return ja=v(ja,la,true);}else if(na)return ba(ja,na);}}return ja;}function u(ja,ka,la,ma){var na=ja.tabGroup,oa=na.tabs,pa=oa.get(ka),qa=!!na.getRaisedandUnraisedTabs().raisedTabs.get(ka);if(!pa){pa=new (c('FantaTypeTab'))({id:ka,focusCounter:k,openCounter:l++,focusOnMountDEPRECATED:la});ja=ja.setIn(['tabGroup','tabs',ka],pa);}else if(pa.isMinimized&&la)ja=v(ja,ka,false);var ra=la&&ma||la&&!qa;ja=ja.mergeIn(['tabGroup','tabs',ka],{focusOnMountDEPRECATED:ra});if(la)return ba(ja,ka);return ja;}function v(ja,ka,la){var ma=ja.tabGroup,na=ma.tabs.get(ka);if(na)ja=ja.mergeIn(['tabGroup','tabs',ka],{isMinimized:la});return ja;}function w(ja,ka){switch(ka.type){case i.MINIMIZE_ALL_TABS:for(var la=ja.tabGroup.tabs.keys(),ma=Array.isArray(la),na=0,la=ma?la:la[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var oa;if(ma){if(na>=la.length)break;oa=la[na++];}else{na=la.next();if(na.done)break;oa=na.value;}var pa=oa;ja=v(ja,pa,true);}return ja;}return ja;}function x(ja,ka){switch(ka.type){case i.CLOSE_TAB:var la=ka.tabID;return y(ja,la);}return ja;}function y(ja,ka){ja=ca(ja,ka);return ja.deleteIn(['tabGroup','tabs',ka]);}function z(ja,ka){switch(ka.type){case i.CLOSE_ALL_TABS:ja=ca(ja,ja.tabGroup.focusedTabID);return ja.setIn(['tabGroup','tabs'],ja.tabGroup.tabs.clear());}return ja;}function aa(ja,ka){switch(ka.type){case i.CLOSE_AND_TAB_NEXT:ja=y(ja,ka.tabID);return ha(ja);}return ja;}function ba(ja,ka){var la=arguments.length<=2||arguments[2]===undefined?false:arguments[2],ma=ja.tabGroup,na=ma.tabs.get(ka);if(na)ja=ja.mergeIn(['tabGroup','tabs',ka],{focusCounter:k++});var oa=la?null:ka;ja=ja.mergeIn(['tabGroup'],{focusedTabID:oa});return ja;}function ca(ja,ka){if(ja.tabGroup.focusedTabID===ka)return ja.mergeIn(['tabGroup'],{focusedTabID:null});return ja;}function da(ja,ka){switch(ka.type){case i.SET_ALLOWED_RAISED_TABS:return ea(ja,ka.allowedRaisedTabs);}return ja;}function ea(ja){var ka=arguments.length<=1||arguments[1]===undefined?c('FantaConst').DEFAULT_ALLOWED_RAISED_TABS:arguments[1];if(ka===ja.tabGroup.allowedRaisedTabs)return ja;if(!c('PinnedConversationNubsConfig').chatTabTypingPriority)ka=Math.max(1,ka);return ja.mergeIn(['tabGroup'],{allowedRaisedTabs:ka});}function fa(ja,ka){switch(ka.type){case i.LOAD_FROM_DATA:var la=ja.tabGroup,ma=ka.tabData;if(la.updatedTime>=ma.updatedTime||ma.updatedTime===undefined)return ja;ja=ea(ja.set('tabGroup',new (c('FantaTypeTabGroup'))()),la.allowedRaisedTabs);ma.tabs.sort(function(na,oa){return na.openCounter-oa.openCounter;}).forEach(function(na){ja=u(ja,na.id,false);if(na.isMinimized)ja=v(ja,na.id,na.isMinimized);});ma.tabs.sort(function(na,oa){return na.focusCounter-oa.focusCounter;}).forEach(function(na){ja=ba(ja,na.id,true);});ja=ma.focusedTabID?ba(ja,ma.focusedTabID,true):ca(ja);}return ja;}function ga(ja,ka){switch(ka.type){case i.FOCUS_NEXT_TAB:return ha(ja,ka.event);}return ja;}function ha(ja,event){var ka=ja.tabGroup.focusedTabID,la=ja.tabGroup.getRaisedandUnraisedTabs(),ma=la.raisedTabs,na=ma.count();if(na===0){return ja;}else if(ma.count()===1)return ba(ja,ma.first().id);if(event)event.preventDefault();var oa=ma.skipUntil(function(pa){return pa.id===ka;}).rest();if(oa.count()===0){return ba(ja,ma.first().id);}else return ba(ja,oa.first().id);}function ia(ja,ka){switch(ka.type){case i.FOCUS_PREVIOUS_TAB:var la=ja.tabGroup.focusedTabID,ma=ja.tabGroup.getRaisedandUnraisedTabs(),na=ma.raisedTabs;if(na.count()<2)return ja;var event=ka.event;if(event)event.preventDefault();var oa=na.reverse().skipUntil(function(pa){return pa.id===la;}).rest();if(oa.count()===0){return ba(ja,na.last().id);}else return ba(ja,oa.first().id);}return ja;}f.exports={blurTab:s,closeAllTabs:z,closeAndTabNext:aa,closeTab:x,focusNextTab:ga,focusPreviousTab:ia,focusTab:r,loadFromData:fa,minimizAllTabs:w,minimizeTab:p,openTab:n,receivedNewMessage:t,replaceTab:o,setAllowedRaisedTabs:da,unminimizeTab:q};}),null);
__d('FantaAppStore',['FantaDispatcher','FantaReducersCookie','FantaReducersDockCalculator','FantaReducersMercury','FantaReducersMessages','FantaReducersTabs','FantaReducersTabSheets','FantaTypeAppState','FluxReduceStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=[].concat(Object.values(c('FantaReducersTabs')),Object.values(c('FantaReducersMercury')),Object.values(c('FantaReducersMessages')),Object.values(c('FantaReducersTabSheets')),Object.values(c('FantaReducersDockCalculator')),Object.values(c('FantaReducersCookie')));h=babelHelpers.inherits(k,c('FluxReduceStore'));i=h&&h.prototype;k.prototype.getInitialState=function(){return new (c('FantaTypeAppState'))();};k.prototype.ignoreReducer=function(l){var m=Object.values(l);j=j.filter(function(n){return !m.find(function(o){return o===n;});});};k.prototype.addReducers=function(l){this.ignoreReducer(l);j=j.concat(Object.values(l));};k.prototype.reduce=function(l,m){return j.reduce(function(n,o){return o(n,m);},l);};function k(){h.apply(this,arguments);}f.exports=new k(c('FantaDispatcher'));}),null);
__d('FantaCookieUtil',['FantaConst','MercuryIDs','MercuryThreads','WorkModeConfig'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryThreads').get(),i={convertCookieData:function j(k,l){var m={tabs:[],focusedTabID:null,updatedTime:0},n=[],o=this._getCookieKeys();k=k||{};if(k[o.tabs])n=k[o.tabs];n.forEach(function(u){m.tabs.push({id:u.i,isMinimized:!u.r,openCounter:u.o,focusCounter:u.f});});if(l)for(var p=l.tabs.values(),q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var s;if(q){if(r>=p.length)break;s=p[r++];}else{r=p.next();if(r.done)break;s=r.value;}var t=s;if(h.isEmptyLocalThread(t.id))m.tabs.push({id:t.id,isMinimized:t.isMinimized,openCounter:t.openCounter,focusCounter:t.focusCounter});}m.focusedTabID=k[o.focusedTabID];m.updatedTime=k[o.updatedTime];return m;},createCookieData:function j(k,l){var m=[],n=this._getCookieKeys();for(var o=k.tabs.values(),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r;if(!c('MercuryIDs').isLocalThread(s.id))m.push({i:s.id,r:s.isMinimized?undefined:1,o:s.openCounter,f:s.focusCounter});}l[n.tabs]=m;l[n.focusedTabID]=k.focusedTabID;l[n.updatedTime]=k.updatedTime;return l;},_getCookieKeys:function j(){var k=c('WorkModeConfig').is_work_user;return {tabs:k?c('FantaConst').cookieIDs.WORK_COOKIE_ID:c('FantaConst').cookieIDs.PERSONAL_COOKIE_ID,focusedTabID:k?c('FantaConst').cookieIDs.WORK_FOCUS_COOKIE_ID:c('FantaConst').cookieIDs.PERSONAL_FOCUS_COOKIE_ID,updatedTime:k?c('FantaConst').cookieIDs.WORK_TIME_COOKIE_ID:c('FantaConst').cookieIDs.PERSONAL_TIME_COOKIE_ID};}};f.exports=i;}),null);
__d('FantaMercuryTabBody.react',['Bootloader','FantaTabActions','FantaTypeTab','FantaTypeTabContents','React','ReactDOM','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.componentDidMount=function(){var k=this.props,l=k.isLastTab,m=k.tab,n=k.tabContent,o='',p=n&&n.signatureID,q=c('ReactDOM').findDOMNode(this.refs.root),r=m.id,s=m.focusOnMountDEPRECATED;c('Bootloader').loadModules(["ChatTabView"],function(t){this.$FantaMercuryTabBody1=new t(r,o,p,q,null,l);this.$FantaMercuryTabBody1.setVisibleState(true,!m.isMinimized);c('setImmediate')(function(){c('FantaTabActions').registerTabFocusDeprecated(r,function(){return this.$FantaMercuryTabBody1.focusTab();}.bind(this),function(){return this.$FantaMercuryTabBody1.blurTab();}.bind(this),s);}.bind(this));}.bind(this),'FantaMercuryTabBody.react');};j.prototype.componentWillReceiveProps=function(k){var l=k.isLastTab;if(this.$FantaMercuryTabBody1)this.$FantaMercuryTabBody1.updateIsLastTab(l);};j.prototype.render=function(){return c('React').createElement('div',{ref:'root'});};j.prototype.componentWillUnmount=function(){if(this.$FantaMercuryTabBody1)this.$FantaMercuryTabBody1.destroy();};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FantaMercuryTabOverflowBootloader.react',['BootloadOnRender.react','FantaTypeTab','immutable','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{items:this.props.items}),loader:c('JSResource')('FantaMercuryTabOverflow.react').__setRef('FantaMercuryTabOverflowBootloader.react'),placeholder:c('React').createElement('div',null)});};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FantaTab.react',['cx','FantaTypeTab','FantaTypeTabContents','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.MainComponent,n=l.MinimizedComponent,o=l.isFocused,p=l.isLastTab,q=l.isLastTabOfType,r=l.tab,s=l.tabContent,t=r.isMinimized?n:m,u=r.id+(r.isMinimized?'-minimized':'-maximized');return c('React').createElement('div',{className:"_5qi9"+(' '+"_5qib")+(this.props.isFocused?' '+"_5qic":'')+(r.isMinimized?' '+"_3001":'')},c('React').createElement(t,{key:u,tab:r,tabContent:s,isFocused:o,isLastTab:p,isLastTabOfType:q}));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FantaTabGroup.react',['cx','FantaTab.react','FantaTypeTab','FantaTypeTabContents','FantaTypeTabGroup','immutable','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').OrderedMap,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.shouldComponentUpdate=function(n){return !this.props.tabGroup.equals(n.tabGroup)||!!(!this.props.tabContents&&n.tabContents)||!!(this.props.tabContents&&n.tabContents&&!this.props.tabContents.equals(n.tabContents));};m.prototype.render=function(){var n=this.props,o=n.isLastOfTypeChecker,p=n.MainComponent,q=n.MinimizedComponent,r=n.OverflowComponent,s=n.tabContents,t=n.tabGroup,u=t.focusedTabID,v=t.getRaisedandUnraisedTabs(),w=v.raisedTabs,x=v.unraisedTabs,y=void 0;if(o)y=w.findLastKey(function(aa){return o(aa)&&aa.id;});var z=t.allowedRaisedTabs===0?null:this.$FantaTabGroup1(x,r);return c('React').createElement('div',{className:"_59v1"},z,w.map(function(aa){return c('React').createElement(c('FantaTab.react'),{key:aa.id,tab:aa,isFocused:aa.id===u,isLastTab:aa===w.last(),isLastTabOfType:aa.id===y,MainComponent:p,MinimizedComponent:q,tabContent:s&&s.get(aa.id)});}).toArray());};m.prototype.$FantaTabGroup1=function(n,o){if(!n.isEmpty())return c('React').createElement('div',{className:"_1kws"},c('React').createElement(o,{items:n}));return null;};function m(){i.apply(this,arguments);}m.propTypes={MainComponent:l.func.isRequired,MinimizedComponent:l.func.isRequired,OverflowComponent:l.func.isRequired,tabContents:l.object,tabGroup:l.object.isRequired};f.exports=m;}),null);
__d('FantaMercuryTabs.react',['FantaAppStore','FantaCookieUtil','FantaMercuryTabBody.react','FantaMercuryTabOverflowBootloader.react','FantaTabActions','FantaTabGroup.react','FantaTypeTabContents','FantaTypeTabGroup','FluxContainer','PresenceState','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){return [c('FantaAppStore')];};j.calculateState=function(){return {tabContents:c('FantaAppStore').getState().mercury.tabContents,tabGroup:c('FantaAppStore').getState().tabGroup};};j.prototype.componentWillMount=function(){if(this.props.loadDataOnMount)c('FantaTabActions').loadFromData(c('FantaCookieUtil').convertCookieData(c('PresenceState').get()));};j.prototype.render=function(){return c('React').createElement(c('FantaTabGroup.react'),{MainComponent:c('FantaMercuryTabBody.react'),MinimizedComponent:c('FantaMercuryTabBody.react'),OverflowComponent:c('FantaMercuryTabOverflowBootloader.react'),tabContents:this.state.tabContents,tabGroup:this.state.tabGroup});};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j);}),null);
__d('FantaTabViewportManager',['Arbiter','DockTabsViewportCalculator','DockTabsViewportFantaTabUtils','FantaTabActions','immutable','ifRequired','isWebMessengerURI'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('DockTabsViewportCalculator').getInstance(i);if(!j)return;j.registerFantaTabCallbacks({fantaTabModelStateGetter:function k(){var l=c('immutable').Map({});c('ifRequired')('FantaAppStore',function(m){l=m.getState().tabGroup.tabs;});return l;},onAvailableWidthChanged:function k(l){c('FantaTabActions').setAllowedRaisedTabs(c('DockTabsViewportFantaTabUtils').getTabCountToFitWidth(l));}});c('Arbiter').subscribe('FantaReducersDockCalculator/shouldRecalculate',function(){j.forceRecalculateChatTabs();});j.forceRecalculateFBDockWidth();c('Arbiter').subscribe('page_transition',function(k,l){if(c('isWebMessengerURI')(l.uri))c('FantaTabActions').minimizeAllTabs();});}f.exports={init:h};}),null);