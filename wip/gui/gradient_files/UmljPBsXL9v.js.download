if (self.CavalryLogger) { CavalryLogger.start_js(["uDX+s"]); }

__d("AdPageMessageTypeEnum",[],(function a(b,c,d,e,f,g){f.exports={AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble"};}),null);
__d("ComposedBlockType",[],(function a(b,c,d,e,f,g){f.exports={UNSTYLED:0,PARAGRAPH:1,UNORDERED_LIST_ITEM:2,ORDERED_LIST_ITEM:3,BLOCKQUOTE:4,HEADER_ONE:5,HEADER_TWO:6,CODE:7,MEDIA:8,PULLQUOTE:9,HEADER_THREE:10,HEADER_FOUR:11,HEADER_FIVE:12,HEADER_SIX:13};}),null);
__d("ComposedEntityMutability",[],(function a(b,c,d,e,f,g){f.exports={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2};}),null);
__d("ComposedEntityMutabilityToName",[],(function a(b,c,d,e,f,g){f.exports={"0":"MUTABLE","1":"IMMUTABLE","2":"SEGMENTED"};}),null);
__d("ComposedEntityType",[],(function a(b,c,d,e,f,g){f.exports={MENTION:0,LINK:1,IMAGE:2,VIDEO:3,EMOTICON:4,TOKEN:5,HASHTAG:6,IMPLICIT_LINK:7,EMBED:8,EMOJI:9};}),null);
__d("ComposedEntityTypeToName",[],(function a(b,c,d,e,f,g){f.exports={"0":"MENTION","1":"LINK","2":"IMAGE","3":"VIDEO","4":"EMOTICON","5":"TOKEN","6":"HASHTAG","7":"IMPLICIT_LINK","8":"EMBED","9":"EMOJI"};}),null);
__d("ComposedInlineStyle",[],(function a(b,c,d,e,f,g){f.exports={NONE:0,BOLD:1,ITALIC:2,UNDERLINE:4,CODE:8,STRIKETHROUGH:16,SUBSCRIPT:32,SUPERSCRIPT:64};}),null);
__d("IrisProtocolMessageLifetime",[],(function a(b,c,d,e,f,g){f.exports={TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:30000,TTL_1MINUTE:60000,TTL_3MINUTES:180000,TTL_5MINUTES:300000,TTL_10MINUTES:600000,TTL_15MINUTES:900000,TTL_30MINUTES:1800000,TTL_1HOUR:3600000,TTL_2HOURS:7200000,TTL_4HOURS:14400000,TTL_8HOURS:28800000,TTL_12HOURS:43200000,TTL_24HOURS:86400000};}),null);
__d("MercuryGenericConstants",[],(function a(b,c,d,e,f,g){f.exports={MAX_THREAD_NAME_LENGTH:250};}),null);
__d("MercurySyncTopicType",[],(function a(b,c,d,e,f,g){f.exports={DELTA:"delta",DELTAFLOW:"deltaflow",DELTAFLOWREJECT:"deltaflowreject"};}),null);
__d("MessagingEvent",[],(function a(b,c,d,e,f,g){f.exports={DELETE:"delete",DELETE_MESSAGES:"delete_messages",DELIVER:"deliver",ERROR:"error",READ:"read",REPORT_SPAM:"report_spam",REPORT_SPAM_MESSAGES:"report_spam_messages",UNMARK_SPAM:"unmark_spam",SUBSCRIBE:"subscribe",CHANGE_MUTE_SETTINGS:"change_mute_settings",TAG:"tag",UNREAD:"unread",UNSUBSCRIBE:"unsubscribe",DELIVER_LOG:"deliver_log",MARK_ALL_READ:"mark_all_read",MARK_ALL_SEEN:"mark_all_seen",MORE_THREADS:"more_threads",READ_ALL:"read_all",READ_RECEIPT:"read_receipt",DELIVERY_RECEIPT:"delivery_receipt",SENT_PUSH:"sent_push",DELIVER_FAST_PAST:"deliver_fast_path",MESSENGER_STATUS:"messenger_status",UPDATE_PINNED_THREADS:"update_pinned_threads",CHANGE_PAGE_THREAD_FLAG:"change_page_thread_flag",CREATE_PAGE_ADMIN_NOTE:"create_page_admin_note",NO_OP:"no_op"};}),null);
__d("MessagingThreadAction",[],(function a(b,c,d,e,f,g){f.exports={ACTION_INVALID:"ACTION_INVALID",ACTION_ARCHIVED:"ACTION_ARCHIVED",ACTION_UNARCHIVED:"ACTION_UNARCHIVED"};}),null);
__d("MessagingThreadCustomizationSource",[],(function a(b,c,d,e,f,g){f.exports={ADMIN_MSG_CHANGE_LINK:"admin_msg",THREAD_INLINE:"thread_inline",JOURNEY_PROMPT:"journey_prompt",JOURNEY_PROMPT_WRITE_IN:"journey_prompt_write_in",PROMO_LINK:"promo_link",SETTINGS:"thread_settings",USER_INFO_ACTION_SHEET:"user_info_action_sheet",ROOM_CREATION:"room_creation"};}),null);
__d("MessengerApprovalQueueTypes",[],(function a(b,c,d,e,f,g){f.exports={REQUESTED:"REQUESTED",REMOVED:"REMOVED"};}),null);
__d("MessengerDotComPromotionActionURL",[],(function a(b,c,d,e,f,g){f.exports={turn_on_notification:"TurnOnNotification",messengerdotcom_cell_cutover_qp:"messengerdotcomCellCutoverQp"};}),null);
__d("MessengerInbox2UnitType",[],(function a(b,c,d,e,f,g){f.exports={ACTIVE_NOW:"1702060250031255",ALL_CONTACTS:"181516655603694",ALL_REMAINING_THREADS:"1553637598292592",ALOHA:"1974967399397786",ANNOUNCEMENT:"1554751858153522",BIRTHDAYS:"444523712420688",BMR:"236766086711892",BOTSYMM:"219309241797996",BYMM:"977757422301634",CAMERA_ROLL:"1667645653518937",CONVERSATION_REQUESTS:"849346485182969",CUSTOMIZED_GROUPS:"1777531309203296",CYMK:"1773727359523460",DIRECT_M:"1632976573662274",DISCOVERY_BOTS_NEW_FEATURED:"1640700309573030",DISCOVERY_BOTS_POPULAR:"365118027194374",DISCOVERY_BOTS_RECOMMENDED:"186942998461173",DISCOVERY_DIRECTORY_CATEGORY:"1230639353658259",DISCOVERY_DIRECTORY_IMAGE_BANNER:"848698428605960",DISCOVERY_LOCAL_BUSINESS:"588498821344036",DISCOVERY_NONE_LOCAL_BUSINESS:"278295162605800",FEATURED_STICKER_PACKS:"112107225855321",FRIEND_STORIES:"1565724067055200",GAMES_RECOMMENDATION:"527207557478641",GET_STARTED_SUGGESTED_CONTACTS:"144141402662646",GROUPS:"268379460187635",MESSAGE_REQUEST_THREADS:"1032277756851915",MESSENGER_ADS:"1257891170941846",MONTAGE_COMPOSER:"548653741981572",MULTIACCOUNT:"140931109675274",MOST_RECENT_THREADS:"1674434246165228",PHOTO_REMINDERS:"1161184033900246",PYMM:"947827448626337",INVITE:"113246789103775",RECENTLY_ADDED_FRIENDS:"1576460689312390",RECENTLY_CLICKED_LINKS:"1570987926559251",RECENT_SMS_THREADS:"1138747646163867",RECENTLY_WATCHED_VIDEOS:"1743612819204904",ROOM_SUGGESTIONS:"178585572548976",ROOMS:"1100090256693067",RTC_RECOMMENDATION:"1077149622346030",SUBSCRIPTION_CONTENTS:"1599726440337302",SUBSCRIPTION_CONTENTS_MORE:"193497917768814",SUBSCRIPTION_NUX:"1032732696802753",STALE_MESSAGES:"512235432291290",TRENDING_GIFS:"972340172846515",UNREAD_MESSAGES:"860636320720716",VIDEOS_ABOUT:"558474001020112",REMINDERS:"1836450139923369",COMBINED_DIRECT_M:"225422574547147",BIRTHDAYS_DIRECT_M:"1606134436356580",MESSENGER_EVENTS_DIRECT_M:"978540982268714",MY_FB_EVENTS_DIRECT_M:"1832813540335901"};}),null);
__d("MessengerRedirectSource",[],(function a(b,c,d,e,f,g){f.exports={FB:"fb"};}),null);
__d("MNCommerceErrors",[],(function a(b,c,d,e,f,g){f.exports={ALREADY_UNLINKED:1893001};}),null);
__d("MNCommerceReplyTypes",[],(function a(b,c,d,e,f,g){f.exports={COMMERCE_LINK:2,COMMERCE_UNLINK:3};}),null);
__d("P2PPaymentLogMessageSubtype",[],(function a(b,c,d,e,f,g){f.exports={SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired"};}),null);
__d("PagesMessagingEventType",[],(function a(b,c,d,e,f,g){f.exports={FLAG:1,CREATE_ADMIN_NOTE:2,PRIORITY_UPDATE:3};}),null);
__d('NotificationSeenState',['NotificationConstants','NotificationUpdates','createObjectFrom'],(function a(b,c,d,e,f,g){var h=1,i=2,j=0,k=h,l=3,m=c('NotificationConstants').PayloadSourceType.INITIAL_LOAD,n={UNSEEN_AND_UNREAD:j,SEEN_BUT_UNREAD:k,SEEN_AND_READ:l},o={};function p(s){var t=[],u=[];Object.keys(s).forEach(function(v){var w=s[v],x=o[v];o[v]=w;if(x===undefined){t.push(v);u.push(v);return;}var y=x^w;if(y&h)t.push(v);if(y&i)u.push(v);});t.length&&c('NotificationUpdates').didUpdateSeenState(t);u.length&&c('NotificationUpdates').didUpdateReadState(u);}c('NotificationUpdates').subscribe('update-notifications',function(s,t){var u=t.nodes;if(!u||!u.length)return;var v=t.payloadsource,w=c('NotificationConstants').PayloadSourceType,x=v==w.ENDPOINT,y={};u.forEach(function(z){var aa=z.alert_id;if(!x||o[aa]===undefined)if(z.seen_state)y[aa]=n[z.seen_state];});p(y);});c('NotificationUpdates').subscribe('update-seen',function(s,t){if(!t.seenState)return;var u=[],v={};Object.keys(t.seenState).forEach(function(x){if(!t.seenState||!t.seenState[x]){u.push(x);return;}var y=o[x];if(y!==undefined)v[x]=y|h;});var w=babelHelpers['extends']({},c('createObjectFrom')(u,j),v);p(w);});c('NotificationUpdates').subscribe('update-read',function(s,t){if(!t.readState)return;var u=[],v={};Object.keys(t.readState).forEach(function(x){if(t.readState&&t.readState[x]){u.push(x);return;}var y=o[x];if(y!==undefined){v[x]=y&~i;}else if(t.payloadsource==m)v[x]=k;});var w=babelHelpers['extends']({},c('createObjectFrom')(u,l),v);p(w);});function q(s){var t=o[s];return t;}var r={isRead:function s(t){return q(t)===l;},isSeen:function s(t){return q(t)!==j;},getUnseenCount:function s(){return r.getUnseenIDs().length;},getUnseenIDs:function s(){return Object.keys(o).filter(function(t){return o[t]===j;});},getUnreadCount:function s(){return r.getUnreadIDs().length;},getUnreadIDs:function s(){return Object.keys(o).filter(function(t){return o[t]!==l;});}};f.exports=r;}),6);
__d('MentionResultsPropTypes',['React','SearchableEntry','SelectionState'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i={viewID:h.string.isRequired,selection:h.instanceOf(c('SelectionState')).isRequired,contextComponent:h.object.isRequired,mentionableEntries:h.array.isRequired,highlightedMentionable:h.instanceOf(c('SearchableEntry')),onMentionSelect:h.func.isRequired,onMentionHighlight:h.func.isRequired,onMentionRenderHighlight:h.func.isRequired};f.exports=i;}),null);
__d('MentionsLayer.react',['Bootloader','Locale','MentionResultsPropTypes','React','areEqual'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=false,j=c('Locale').isRTL(),k,l,m,n,o=5,p=c('React').createClass({displayName:'MentionsLayer',propTypes:babelHelpers['extends']({},c('MentionResultsPropTypes'),{typeaheadView:h.func.isRequired,typeaheadViewProps:h.object,autoflip:h.bool,position:h.oneOf(['above','below'])}),getInitialState:function r(){return {bootloaded:i};},componentDidMount:function r(){if(!this.state.bootloaded)q(function(){this.isMounted()&&this.setState({bootloaded:true});}.bind(this));},_onMentionSelect:function r(s,t){t.preventDefault();this.props.onMentionSelect(s,t);},shouldComponentUpdate:function r(s,t){return this.state.bootloaded!==t.bootloaded||!c('areEqual')(this.props.mentionableEntries,s.mentionableEntries)||this.props.highlightedMentionable!==s.highlightedMentionable||this.props.characterOffset!==s.characterOffset;},render:function r(){if(!this.state.bootloaded)return null;var s=this.props.mentionableEntries,t=this.props.selection,u=t.isCollapsed()&&t.getHasFocus()&&s&&s.length,v=null,w=this.props.typeaheadViewProps,x=false;if(w&&w.positionAtContext){x=true;}else if(u)v=n(this.props.characterOffset,j);var y={};if(this.props.autoflip){y.ContextualLayerAutoFlip=l;y.ContextualLayerUpdateOnScroll=m;}var z=this.props.typeaheadView;return c('React').createElement(k,{shown:u,context:this.props.contextComponent,contextBounds:v,containerWidthMatchContext:x,offsetY:o,position:this.props.position||'below',behaviors:y,shouldSetARIAProperties:false},c('React').createElement('div',{'data-testid':'mentions-contextual-layer'},c('React').createElement(z,{id:this.props.viewID,viewProps:this.props.typeaheadViewProps,highlightedEntry:this.props.highlightedMentionable,entries:s||[],onSelect:this._onMentionSelect,onHighlight:this.props.onMentionHighlight,onRenderHighlight:this.props.onMentionRenderHighlight})));}});function q(r){c('Bootloader').loadModules(["ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","getMentionableRect"],function(s,t,u,v){k=s;l=t;m=u;n=v;i=true;r();},'MentionsLayer.react');}f.exports=p;}),null);
__d('HelpLink.react',['React','joinClasses','TooltipLink.react'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){'use strict';return c('React').createElement(c('TooltipLink.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,'uiHelpLink mls')}),undefined);};function j(){'use strict';h.apply(this,arguments);}j.defaultProps={href:'#'};f.exports=j;}),null);
__d('UFICreatorInfo.react',['cx','fbt','HelpLink.react','Image.react','React','URI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.getCreatorLink=function(){switch(this.props.creatorType){case 'application':case 'gray_account':case 'indirect_admin':return c('React').createElement('a',{className:'uiLinkSubtle','data-hover':'tooltip','data-tooltip-content':this.getTooltipText()},this.props.creatorName);case 'business_admin':return c('React').createElement('a',{className:'uiLinkSubtle',href:this.props.profileURI},this.props.creatorName);case 'direct_admin':return this.getProfileLinkWithHovercard();case 'former_admin':return c('React').createElement('span',{className:'uiLinkSubtle'},c('React').createElement(c('Image.react'),{src:'/images/privacy/cant-see.png',width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard());default:return c('React').createElement('span',{className:'uiLinkSubtle'},this.props.creatorName);}}.bind(this),this.getTooltipText=function(){switch(this.props.creatorType){case 'application':return this.getApplicationText();case 'gray_account':return this.getGrayAccountText();case 'indirect_admin':return this.getIndirectAdminText();}}.bind(this),this.getProfileLinkWithHovercard=function(){if(!this.props.profileURI)return c('React').createElement('span',null,this.props.creatorName);var s=new (c('URI'))('/ajax/hovercard/user.php').setQueryData({id:this.props.creatorID}).addQueryData({type:'page_admin',extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return c('React').createElement('a',{className:'uiLinkSubtle','data-hovercard':s,href:this.props.profileURI},this.props.creatorName);}.bind(this),this.getApplicationText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'edited_comment':return i._("This was edited by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'sent_message':return i._("This was sent by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'page_admin_note':return i._("This was noted by someone using {application}.",[i.param('application',this.props.creatorName)]);}}.bind(this),this.getIndirectAdminText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'edited_comment':return i._("This was edited by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'sent_message':return i._("This was sent by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'page_admin_note':return i._("This was noted by someone from {page}.",[i.param('page',this.props.creatorName)]);}}.bind(this),this.getGrayAccountText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone who doesn't have a personal Facebook account.");case 'edited_comment':return i._("This was edited by someone who doesn't have a personal Facebook account.");case 'sent_message':return i._("This was sent by someone who doesn't have a personal Facebook account.");case 'page_admin_note':return i._("This was noted by someone who doesn't have a personal Facebook account.");}}.bind(this),this.getHelpText=function(){switch(this.props.labelType){case 'commented':return i._("Only people who manage this Page can see who posted a comment");case 'edited_comment':return i._("Only people who manage this Page can see who edited a comment");case 'sent_message':return i._("Only people who manage this Page can see who sent a message");case 'page_admin_note':return i._("Only people who manage this Page can see who created a note");}}.bind(this),o;}m.prototype.render=function(){var n=void 0,o=this.getCreatorLink();switch(this.props.labelType){case 'commented':n=i._("Commented on by {creator}",[i.param('creator',o)]);break;case 'edited_comment':n=i._("Edited by {creator}",[i.param('creator',o)]);break;case 'sent_message':n=i._("Sent by {creator}",[i.param('creator',o)]);break;case 'page_admin_note':n=i._("Noted by {creator}",[i.param('creator',o)]);break;default:return;}return c('React').createElement('span',null,n,c('React').createElement(c('HelpLink.react'),{tooltip:this.getHelpText()}));};m.propTypes={creatorID:l.string.isRequired,creatorType:l.string.isRequired,creatorName:l.string.isRequired,labelType:l.string.isRequired,pageID:l.string.isRequired,profileURI:l.string};f.exports=m;}),null);
__d('PagesMessengerCreatorInfo.react',['cx','React','UFICreatorInfo.react','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('XUIGrayText.react'),{className:"_ajk"+(this.props.isNote?' '+"_45l2":''),display:'inline',shade:'light',size:'small'},c('React').createElement(c('UFICreatorInfo.react'),{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI}));};function l(){i.apply(this,arguments);}l.propTypes={creator_info:k.shape({creatorID:k.string.isRequired,creatorName:k.string.isRequired,creatorType:k.string.isRequired,labelType:k.string.isRequired,pageID:k.string.isRequired,profileURI:k.string}).isRequired};f.exports=l;}),null);
__d('LinkReactUnsafeHrefTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:LinkReactUnsafeHrefLoggerConfig',this.$LinkReactUnsafeHrefTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:LinkReactUnsafeHrefLoggerConfig',this.$LinkReactUnsafeHrefTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$LinkReactUnsafeHrefTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$LinkReactUnsafeHrefTypedLogger1=babelHelpers['extends']({},this.$LinkReactUnsafeHrefTypedLogger1,j);return this;};h.prototype.setDocumentLocation=function(j){this.$LinkReactUnsafeHrefTypedLogger1.document_location=j;return this;};h.prototype.setHref=function(j){this.$LinkReactUnsafeHrefTypedLogger1.href=j;return this;};var i={document_location:true,href:true};f.exports=h;}),null);
__d('isSecureInstagramDotComURI',['arrayContains'],(function a(b,c,d,e,f,g){var h=new RegExp('(^|\\.)instagram\\.com$','i'),i=['https'];function j(k){return c('arrayContains')(i,k.getProtocol())&&h.test(k.getDomain());}f.exports=j;}),null);
__d('isWitDotAiURI',[],(function a(b,c,d,e,f,g){var h=new RegExp('(^|\\.)wit\\.ai$','i'),i=['https'];function j(k){if(k.isEmpty()&&k.toString()!=='#')return false;if(!k.getDomain()&&!k.getProtocol())return true;return i.indexOf(k.getProtocol())!==-1&&h.test(k.getDomain());}f.exports=j;}),null);
__d('LinkHrefChecker',['ErrorUtils','LinkReactUnsafeHrefTypedLogger','URI','ex','isSecureInstagramDotComURI','isFacebookURI','isMessengerDotComURI','isWitDotAiURI'],(function a(b,c,d,e,f,g){function h(n){return n.startsWith('#')||n.startsWith('/')&&!n.startsWith('//');}function i(n){return n.startsWith('mailto:');}function j(n,o){if(h(n)||i(n))return true;var p=l(n),q=p?p.getProtocol():'';return q===o||q===''||q==='http'||q==='https';}function k(n){if(h(n))return true;var o=l(n);return o==null||c('isFacebookURI')(o)||c('isMessengerDotComURI')(o)||c('isSecureInstagramDotComURI')(o)||c('isWitDotAiURI')(o);}function l(n){try{return new (c('URI'))(n);}catch(o){return null;}}var m={logIfInvalidProtocol:function n(o,p){if(!j(o,p))new (c('LinkReactUnsafeHrefTypedLogger'))().setHref(o).setDocumentLocation(document.location.toString()).log();}};f.exports=m;}),null);
__d('MercurySyncHolesTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MercurySyncHolesLoggerConfig',this.$MercurySyncHolesTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MercurySyncHolesLoggerConfig',this.$MercurySyncHolesTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MercurySyncHolesTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MercurySyncHolesTypedLogger1=babelHelpers['extends']({},this.$MercurySyncHolesTypedLogger1,j);return this;};h.prototype.setDifference=function(j){this.$MercurySyncHolesTypedLogger1.difference=j;return this;};h.prototype.setSeqID=function(j){this.$MercurySyncHolesTypedLogger1.seq_id=j;return this;};h.prototype.setTopicType=function(j){this.$MercurySyncHolesTypedLogger1.topic_type=j;return this;};h.prototype.setVC=function(j){this.$MercurySyncHolesTypedLogger1.vc=j;return this;};var i={difference:true,seq_id:true,topic_type:true,vc:true};f.exports=h;}),null);
__d('MessengerContentSearchDataTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerContentSearchDataLoggerConfig',this.$MessengerContentSearchDataTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerContentSearchDataLoggerConfig',this.$MessengerContentSearchDataTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerContentSearchDataTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerContentSearchDataTypedLogger1=babelHelpers['extends']({},this.$MessengerContentSearchDataTypedLogger1,j);return this;};h.prototype.setAppID=function(j){this.$MessengerContentSearchDataTypedLogger1.appid=j;return this;};h.prototype.setClienttime=function(j){this.$MessengerContentSearchDataTypedLogger1.clienttime=j;return this;};h.prototype.setCountry=function(j){this.$MessengerContentSearchDataTypedLogger1.country=j;return this;};h.prototype.setMessageID=function(j){this.$MessengerContentSearchDataTypedLogger1.message_id=j;return this;};h.prototype.setMessageTimestamp=function(j){this.$MessengerContentSearchDataTypedLogger1.message_timestamp=j;return this;};h.prototype.setNumResults=function(j){this.$MessengerContentSearchDataTypedLogger1.num_results=j;return this;};h.prototype.setReadableTimestamp=function(j){this.$MessengerContentSearchDataTypedLogger1.readable_timestamp=j;return this;};h.prototype.setResultIndex=function(j){this.$MessengerContentSearchDataTypedLogger1.result_index=j;return this;};h.prototype.setSearchOutcome=function(j){this.$MessengerContentSearchDataTypedLogger1.search_outcome=j;return this;};h.prototype.setSearchTerm=function(j){this.$MessengerContentSearchDataTypedLogger1.search_term=j;return this;};h.prototype.setSearchType=function(j){this.$MessengerContentSearchDataTypedLogger1.search_type=j;return this;};h.prototype.setThreadFbid=function(j){this.$MessengerContentSearchDataTypedLogger1.thread_fbid=j;return this;};h.prototype.setVC=function(j){this.$MessengerContentSearchDataTypedLogger1.vc=j;return this;};var i={appid:true,clienttime:true,country:true,message_id:true,message_timestamp:true,num_results:true,readable_timestamp:true,result_index:true,search_outcome:true,search_term:true,search_type:true,thread_fbid:true,vc:true};f.exports=h;}),null);
__d('ChatPageComposerNullState.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function k(l){return c('React').createElement('div',{className:"_2xh0"},c('React').createElement('div',{className:"_2xh4 _59w_"},c('React').createElement(c('Link.react'),{className:"_2xh6"+(' '+"_2xh7")+(l.disabled?' '+"_5vsu":''),onClick:l.onClick},i._("{name}",[i.param('name',l.title)]))));};f.exports=j;}),null);
__d('MessengerLogo.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){var k=j.color,l=j.size;return c('React').createElement('div',{style:{width:l,height:l}},c('React').createElement('svg',{viewBox:'0 0 16 16',version:'1.1',xmlns:'http://www.w3.org/2000/svg'},c('React').createElement('g',{transform:'scale(0.02)',fill:'none'},c('React').createElement('path',{fill:k,fillRule:'evenodd',d:'M399.494079,0.00274415094 C178.859771,0.00274415094 0.000304955527,167.227237 0.000304955527,373.508113 C0.000304955527,490.856138 57.8859466,595.562774 148.414028,664.036455 L148.414028,806.983343 L284.747446,731.373854 C321.092046,741.545506 359.609962,747.013481 399.494079,747.013481 C620.128386,747.013481 798.987853,579.788988 798.987853,373.508113 C798.987853,167.227237 620.128386,0.00274415094 399.494079,0.00274415094 M441.568386,500.879189L338.245388 393.558495 139.264956 503.581669 357.419975 272.117619 460.742973 379.437297 659.722389 269.414122z'}))));};f.exports=h;}),null);
__d('MontageDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationDispatcher'));i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=new j({strict:false});}),null);
__d('MontageActions',['MontageDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({REQUEST_UPDATE:null,HAS_UPDATED:null}),i={Types:h,requestUpdate:function j(k){c('MontageDispatcher').dispatch({type:h.REQUEST_UPDATE,threadFBID:k});},hasUpdated:function j(k){c('MontageDispatcher').dispatch({type:h.HAS_UPDATED,threadFBID:k});}};f.exports=i;}),null);
__d('MontageShouldUpdateReducer',['MontageActions'],(function a(b,c,d,e,f,g){'use strict';var h=c('MontageActions').Types;function i(k,l){var m;switch(l.type){case h.REQUEST_UPDATE:var n=babelHelpers['extends']({},k.needsUpdating,(m={},m[l.threadFBID]=true,m));return babelHelpers['extends']({},k,{needsUpdating:n});}return k;}function j(k,l){switch(l.type){case h.HAS_UPDATED:var m=k.needsUpdating,n=m[l.threadFBID],o=babelHelpers.objectWithoutProperties(m,[l.threadFBID]);return babelHelpers['extends']({},k,{needsUpdating:o});}return k;}f.exports={requestUpdate:i,hasUpdated:j};}),null);
__d('MontageState',[],(function a(b,c,d,e,f,g){'use strict';var h={needsUpdating:{}};f.exports=h;}),null);
__d('MontageStore',['MontageDispatcher','MontageShouldUpdateReducer','MontageState','FluxReduceStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=[].concat(Object.values(c('MontageShouldUpdateReducer')));h=babelHelpers.inherits(k,c('FluxReduceStore'));i=h&&h.prototype;k.prototype.getInitialState=function(){return c('MontageState');};k.prototype.reduce=function(l,m){return j.reduce(function(n,o){return o(n,m);},l);};function k(){h.apply(this,arguments);}f.exports=new k(c('MontageDispatcher'));}),null);
__d('MessengerMarkReadMutation',['RelayMutation','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayMutation'));i=h&&h.prototype;j.prototype.getMutation=function(){return function(){return {calls:[{kind:'Call',metadata:{},name:'message_thread_update_read_state',value:{kind:'CallVariable',callVariableName:'input'}}],children:[{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],kind:'Mutation',metadata:{inputType:'MessageThreadUpdateReadStateData!'},name:'MessengerMarkReadMutation',responseType:'MessageThreadUpdateReadStateResponsePayload'};}();};j.prototype.getVariables=function(){return {actor_id:this.props.actorID,thread_id:this.props.threadID,update_type:'mark_read'};};j.prototype.getFatQuery=function(){return function(){return {children:[{children:[{fieldName:'unread_count',kind:'Field',metadata:{},type:'Int'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'thread',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'MessageThread'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerMarkReadMutationRelayQL',type:'MessageThreadUpdateReadStateResponsePayload'};}();};j.prototype.getConfigs=function(){return [{type:'FIELDS_CHANGE',fieldIDs:{thread:this.props.threadID}}];};j.prototype.getOptimisticResponse=function(){return {thread:{id:this.props.threadID,unread_count:0}};};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MontageViewerSingleThread.react',['MontageSpotlightViewer.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MontageViewerSingleThread1=function(q){var r=this.props.montageThread.messages.count,s=this.props.relay.variables.count;if(s<r){var t=Math.min(s+q,r);this.props.relay.setVariables({count:t});}}.bind(this),m;}k.prototype.render=function(){return this.props.open?c('React').createElement(c('MontageSpotlightViewer.react'),{entryPoint:'reply_context',initialUnreadCount:this.props.unreadCount,loadMore:this.$MontageViewerSingleThread1,onHide:this.props.onHide,messages:this.props.montageThread.messages}):null;};k.propTypes={open:j.bool.isRequired,onHide:j.func.isRequired,montageThread:j.object.isRequired,relay:j.object.isRequired,unreadCount:j.number.isRequired};f.exports=c('Relay').createContainer(k,{initialVariables:{count:100},fragments:{montageThread:function l(){return function(m){return {children:[{calls:[{kind:'Call',metadata:{type:'Int'},name:'last',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[c('RelayQL').__frag(m)]),fieldName:'messages',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'MessagesOfThreadConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageViewerSingleThread_react_MontageThreadRelayQL',type:'MessageThread'};}(c('MontageSpotlightViewer.react').getFragment('messages'));}}});}),null);
__d('MontageThreadView.react',['cssVar','cx','fbt','CurrentUser','MessengerEnvironment','MessengerLogo.react','MessengerMarkReadMutation','MontageThumbnail.react','MontageViewerSingleThread.react','React','Relay','RelayQL','Timestamp.react','convertMIGColorToFIGColor','idx'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={showMontage:false},this.$MontageThreadView1=function(){this.setState({showMontage:true});}.bind(this),this.$MontageThreadView2=function(){this.setState({showMontage:false});this.props.relay.commitUpdate(new (c('MessengerMarkReadMutation'))({threadID:this.props.threadMessages.montage_thread.id,actorID:c('CurrentUser').getID()}));}.bind(this),p;}n.prototype.componentDidMount=function(){if(this.props.threadMessages)this.props.onResize&&this.props.onResize();var o=this.getMontageThreadID();if(o)this.props.setThreadID&&this.props.setThreadID(o);};n.prototype.componentDidUpdate=function(o){if(o.threadMessages!==this.props.threadMessages)this.props.onResize&&this.props.onResize();};n.prototype.render=function(){var o=this.getFirstMontageMessage();if(!o)return null;var p=this.getCustomColor(),q=this.getUnread();return c('React').createElement('a',{className:"_5no5",href:'#',onClick:this.$MontageThreadView1,role:'button'},c('React').createElement(c('MontageThumbnail.react'),{customColor:p,message:o,unread:q}),c('React').createElement('div',{className:"_1sui"},this.renderHeader(q,p),c('React').createElement('span',{className:"_1suk"},c('React').createElement(c('Timestamp.react'),{minimize:true,time:this.getTimestamp()}))),this.renderLogo(),this.renderModal());};n.prototype.renderModal=function(){return this.state.showMontage?c('React').createElement(c('MontageViewerSingleThread.react'),{onHide:this.$MontageThreadView2,open:this.state.showMontage,montageThread:this.props.threadMessages.montage_thread,unreadCount:this.props.threadMessages.montage_thread.unread_count}):null;};n.prototype.renderLogo=function(){return c('MessengerEnvironment').messengerui?null:c('React').createElement(c('MessengerLogo.react'),{color:"rgba(0, 0, 0, .3)",size:'17px'});};n.prototype.renderHeader=function(o,p){return o?c('React').createElement('h1',{className:"_1suj",style:{color:p}},j._("Watch {person_with_montage}'s day",[j.param('person_with_montage',this.getAuthorName())])):null;};n.prototype.getAuthorName=function(){var o;return (o=this.props)!=null?(o=o.threadMessages)!=null?(o=o.montage_thread)!=null?(o=o.montage_author)!=null?o.short_name:o:o:o:o;};n.prototype.getFirstMontageMessage=function(){var o;return (o=this.props)!=null?(o=o.threadMessages)!=null?(o=o.montage_thread)!=null?(o=o.messages)!=null?(o=o.edges)!=null?(o=o[0])!=null?o.node:o:o:o:o:o:o;};n.prototype.getTimestamp=function(){var o=this.getFirstMontageMessage();return o&&o.timestamp;};n.prototype.getCustomColor=function(){var o,p=(o=this.props)!=null?(o=o.threadMessages)!=null?(o=o.customization_info)!=null?o.outgoing_bubble_color:o:o:o,q=void 0;if(!p){q="#0084ff";}else q='#'+p.substring(2);return c('convertMIGColorToFIGColor')(q);};n.prototype.getUnread=function(){var o;return !!((o=this.props)!=null?(o=o.threadMessages)!=null?(o=o.montage_thread)!=null?o.unread_count:o:o:o);};n.prototype.getMontageThreadID=function(){var o;return (o=this.props)!=null?(o=o.threadMessages)!=null?(o=o.montage_thread)!=null?(o=o.thread_key)!=null?o.thread_fbid:o:o:o:o;};n.propTypes={onResize:m.func,threadMessages:m.object.isRequired};f.exports=c('Relay').createContainer(n,{fragments:{threadMessages:function o(p){return function(q,r){return {children:[{children:[{fieldName:'outgoing_bubble_color',kind:'Field',metadata:{},type:'Color'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'customization_info',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'MessageThreadCustomization'},{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'thread_fbid',kind:'Field',metadata:{},type:'String'}],fieldName:'thread_key',kind:'Field',metadata:{canHaveSubselections:true},type:'MessageThreadKey'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'last',value:{kind:'CallValue',callValue:1}}],children:[{children:[{children:[].concat.apply([],[{fieldName:'timestamp',kind:'Field',metadata:{},type:'Time'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(r),{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isRequisite:true},type:'Message'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessagesOfThreadEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'messages',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'MessagesOfThreadConnection'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'short_name',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'User',type:'User'}],fieldName:'montage_author',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'},{fieldName:'unread_count',kind:'Field',metadata:{},type:'Int'},c('RelayQL').__frag(q)]),fieldName:'montage_thread',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'MessageThread'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MontageThreadView_react_ThreadMessagesRelayQL',type:'MessageThread'};}(c('MontageViewerSingleThread.react').getFragment('montageThread'),c('MontageThumbnail.react').getFragment('message'));}}});}),null);
__d('MontageThreadViewContainer.react',['FluxContainer','MercuryIDs','MontageActions','MontageStore','MontageThreadView.react','MontageThreadViewRoute','React','Relay'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('Relay').RootContainer,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').PureComponent);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.threadIDToMontageThreadID={},this.$MontageThreadViewContainer1=function(r){var s=c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID);if(!s)return null;return c('React').createElement(c('MontageThreadView.react'),babelHelpers['extends']({},r,{onResize:this.props.onResize,setThreadID:this.$MontageThreadViewContainer4}));}.bind(this),this.$MontageThreadViewContainer3=function(r){if(r&&r.stale)return;var s=c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID),t=this.threadIDToMontageThreadID[s];if(this.state.needsUpdating[s])c('MontageActions').hasUpdated(s);if(this.state.needsUpdating[s])c('MontageActions').hasUpdated(t);}.bind(this),this.$MontageThreadViewContainer4=function(r){var s=c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID);this.threadIDToMontageThreadID[s]=r;}.bind(this),n;}l.getStores=function(){return [c('MontageStore')];};l.calculateState=function(){return {needsUpdating:c('MontageStore').getState().needsUpdating};};l.prototype.render=function(){var m=this.props.threadID,n=c('MercuryIDs').getThreadFBIDFromThreadID(m);if(!n)return null;return c('React').createElement(j,{Component:c('MontageThreadView.react'),route:new (c('MontageThreadViewRoute'))({threadFBID:n}),renderFetched:this.$MontageThreadViewContainer1,forceFetch:this.$MontageThreadViewContainer2(n),onReadyStateChange:this.$MontageThreadViewContainer3});};l.prototype.$MontageThreadViewContainer2=function(m){return !!(this.state.needsUpdating[m]||this.state.needsUpdating[this.threadIDToMontageThreadID[m]]);};l.propTypes={onResize:k.func,threadID:k.string.isRequired};f.exports=c('FluxContainer').create(l);}),null);
__d("XMessengerDotComNUXLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/logging\/promotion\/",{promotion_id:{type:"Int",required:true},instance_log_data:{type:"StringToStringMap",defaultValue:{}}});}),null);
__d("XQuickPromotionSimpleLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/qp\/action\/log\/",{qp_id:{type:"Int",required:true},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}});}),null);
__d('MessengerNotificationBanner.react',['cx','ix','AsyncRequest','Image.react','MessengerButton.react','MessengerDesktopNotifications','MessengerDotComPromotionActionURL','MessengerSettingsActions','messengerSignalsRe','React','XMessengerDotComNUXLoggingController','XQuickPromotionSimpleLoggingController','goURI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=i("86832"),n=i("86833");j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={bannerClosed:false},this.$MessengerNotificationBanner1=function(){return c('MessengerDesktopNotifications').isGranted()||c('MessengerDesktopNotifications').isDenied()||this.state.bannerClosed;}.bind(this),this.$MessengerNotificationBanner3=function(){return c('React').createElement(c('MessengerButton.react'),{className:"_2cim",label:this.props.primaryActionTitle,onClick:this.$MessengerNotificationBanner4,type:'primary'});}.bind(this),this.$MessengerNotificationBanner4=function(){this.$MessengerNotificationBanner5();if(this.props.promotionID){new (c('AsyncRequest'))().setURI(c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',this.props.promotionID).setEnum('qp_action','primary').setStringToStringMap('qp_instance_log_data',this.props.instanceLogData).getURI()).send();if(this.props.primaryActionURI===c('MessengerDotComPromotionActionURL').turn_on_notification){c('MessengerSettingsActions').changeDesktopNotifs(true);}else window.open(this.props.primaryActionURI);}else if(this.props.primaryActionURI)c('goURI')(this.props.primaryActionURI,true);}.bind(this),this.$MessengerNotificationBanner2=function(){this.$MessengerNotificationBanner5();if(this.props.promotionID)new (c('AsyncRequest'))().setURI(c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',this.props.promotionID).setEnum('qp_action','dismiss').setStringToStringMap('qp_instance_log_data',this.props.instanceLogData).getURI()).send();}.bind(this),this.$MessengerNotificationBanner5=function(){this.setState({bannerClosed:true},function(){c('messengerSignalsRe').resize();});}.bind(this),q;}o.prototype.componentWillReceiveProps=function(p){if(!p.promotionID)this.setState({bannerClosed:false});};o.prototype.componentDidMount=function(){if(this.$MessengerNotificationBanner1()||!this.props.promotionID)return;new (c('AsyncRequest'))().setURI(c('XMessengerDotComNUXLoggingController').getURIBuilder().setInt('promotion_id',this.props.promotionID).setStringToStringMap('instance_log_data',this.props.instanceLogData).getURI()).send();};o.prototype.componentDidUpdate=function(){window.dispatchEvent(new Event('resize'));};o.prototype.render=function(){if(this.$MessengerNotificationBanner1())return null;return c('React').createElement('div',{className:"_2cij"},c('React').createElement(c('Image.react'),{className:"_2cik",onClick:this.$MessengerNotificationBanner2,src:m}),c('React').createElement(c('Image.react'),{className:"_2cil",src:n}),this.props.promotionContent,this.$MessengerNotificationBanner3());};o.propTypes={promotionID:l.number,promotionContent:l.string,primaryActionTitle:l.string,primaryActionURI:l.string,instanceLogData:l.object};f.exports=o;}),null);
__d('MessengerRefreshPrompt',['fbt','Visibility','setIntervalAcrossTransitions'],(function a(b,c,d,e,f,g,h){var i=1000*60*60,j=1000*60*60*24*3,k=function l(m){var n=Date.now();c('setIntervalAcrossTransitions')(function(){if(Date.now()-n>j)c('Visibility').once(c('Visibility').VISIBLE,function(){m({promotionID:null,promotionContent:h._("A new version of Messenger is available."),primaryActionTitle:h._("Refresh"),instanceLogData:{},primaryActionURI:window.location.href});n=Date.now();});},i);};f.exports=k;}),null);
__d('MessengerBanner.react',['MessengerConfig','MessengerNotificationBanner.react','MessengerRefreshPrompt','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={promotionData:this.props.initialPromotionData},m;}k.prototype.componentDidMount=function(){if(c('MessengerConfig').ShowReloadPrompt)c('MessengerRefreshPrompt')(function(l){return this.setState({promotionData:l});}.bind(this));};k.prototype.render=function(){var l=this.state.promotionData;if(l&&l.primaryActionURI)return c('React').createElement(c('MessengerNotificationBanner.react'),{promotionID:l.promotionID,promotionContent:l.promotionContent,primaryActionTitle:l.primaryActionTitle,primaryActionURI:l.primaryActionURI,instanceLogData:l.instanceLogData});return null;};k.propTypes={initialPromotionData:j.object,isFirstRedirect:j.bool};f.exports=k;}),null);
__d('MessengerConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={NEW_THREAD_KEY:'new'};f.exports=h;}),null);
__d('createCharacterList',['CharacterMetadata','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List;function i(j,k){var l=j.map(function(m,n){var o=k[n];return c('CharacterMetadata').create({style:m,entity:o});});return h(l);}f.exports=i;}),null);
__d('decodeEntityRanges',['UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h=c('UnicodeUtils').substr;function i(j,k){var l=Array(j.length).fill(null);if(k)k.forEach(function(m){var n=h(j,0,m.offset).length,o=n+h(j,m.offset,m.length).length;for(var p=n;p<o;p++)l[p]=m.key;});return l;}f.exports=i;}),null);
__d('decodeInlineStyleRanges',['UnicodeUtils','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').OrderedSet,i=c('UnicodeUtils').substr,j=h();function k(l,m){var n=Array(l.length).fill(j);if(m)m.forEach(function(o){var p=i(l,0,o.offset).length,q=p+i(l,o.offset,o.length).length;while(p<q){n[p]=n[p].add(o.style);p++;}});return n;}f.exports=k;}),null);
__d('convertFromRawToDraftState',['ContentBlock','ContentState','DraftEntity','createCharacterList','decodeEntityRanges','decodeInlineStyleRanges','generateRandomKey','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Map;function i(j){var k=j.blocks,l=j.entityMap,m={};Object.keys(l).forEach(function(o){var p=l[o],q=p.type,r=p.mutability,s=p.data,t=c('DraftEntity').__create(q,r,s||{});m[o]=t;});var n=k.map(function(o){var p=o.key,q=o.type,r=o.text,s=o.depth,t=o.inlineStyleRanges,u=o.entityRanges,v=o.data;p=p||c('generateRandomKey')();q=q||'unstyled';s=s||0;t=t||[];u=u||[];v=h(v);var w=c('decodeInlineStyleRanges')(r,t),x=u.filter(function(aa){return Object.prototype.hasOwnProperty.call(m,aa.key);}).map(function(aa){return babelHelpers['extends']({},aa,{key:m[aa.key]});}),y=c('decodeEntityRanges')(r,x),z=c('createCharacterList')(w,y);return new (c('ContentBlock'))({key:p,type:q,text:r,depth:s,characterList:z,data:v});});return c('ContentState').createFromBlockArray(n);}f.exports=i;}),null);
__d('decodeBlocks',['ComposedBlockType','ComposedInlineStyle','convertFromRawToDraftState','mapObject'],(function a(b,c,d,e,f,g){'use strict';function h(k,l){var m=k.map(function(o){var p=o.type,q=o.inlineStyleRanges,r=babelHelpers.objectWithoutProperties(o,['type','inlineStyleRanges']);return babelHelpers['extends']({type:i[p]||'unstyled',inlineStyleRanges:(q||[]).map(function(s){return babelHelpers['extends']({},s,{style:j[s.style]});})},r);}),n=c('mapObject')(l,function(o){return {type:o.getType(),mutability:o.getMutability(),data:o.getData()};});return c('convertFromRawToDraftState')({blocks:m,entityMap:n});}var i={};i[c('ComposedBlockType').UNSTYLED]='unstyled';i[c('ComposedBlockType').PARAGRAPH]='paragraph';i[c('ComposedBlockType').BLOCKQUOTE]='blockquote';i[c('ComposedBlockType').ORDERED_LIST_ITEM]='ordered-list-item';i[c('ComposedBlockType').UNORDERED_LIST_ITEM]='unordered-list-item';i[c('ComposedBlockType').CODE]='code-block';i[c('ComposedBlockType').HEADER_ONE]='header-one';i[c('ComposedBlockType').HEADER_TWO]='header-two';i[c('ComposedBlockType').MEDIA]='atomic';i[c('ComposedBlockType').PULLQUOTE]='pullquote';var j={};j[c('ComposedInlineStyle').BOLD]='BOLD';j[c('ComposedInlineStyle').CODE]='CODE';j[c('ComposedInlineStyle').ITALIC]='ITALIC';j[c('ComposedInlineStyle').STRIKETHROUGH]='STRIKETHROUGH';j[c('ComposedInlineStyle').UNDERLINE]='UNDERLINE';f.exports=h;}),null);
__d('DraftStringKey',[],(function a(b,c,d,e,f,g){'use strict';var h={stringify:function i(j){return '_'+String(j);},unstringify:function i(j){return j.slice(1);}};f.exports=h;}),null);
__d('encodeEntityRanges',['DraftStringKey','UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h=c('UnicodeUtils').strlen;function i(j,k){var l=[];j.findEntityRanges(function(m){return !!m.getEntity();},function(m,n){var o=j.getText(),p=j.getEntityAt(m);l.push({offset:h(o.slice(0,m)),length:h(o.slice(m,n)),key:Number(k[c('DraftStringKey').stringify(p)])});});return l;}f.exports=i;}),null);
__d('encodeInlineStyleRanges',['UnicodeUtils','findRangesImmutable'],(function a(b,c,d,e,f,g){'use strict';var h=function m(n,o){return n===o;},i=function m(n){return !!n;},j=[];function k(m,n,o){var p=[],q=n.map(function(r){return r.has(o);}).toList();c('findRangesImmutable')(q,h,i,function(r,s){var t=m.getText();p.push({offset:c('UnicodeUtils').strlen(t.slice(0,r)),length:c('UnicodeUtils').strlen(t.slice(r,s)),style:o});});return p;}function l(m){var n=m.getCharacterList().map(function(p){return p.getStyle();}).toList(),o=n.flatten().toSet().map(function(p){return k(m,n,p);});return Array.prototype.concat.apply(j,o.toJS());}f.exports=l;}),null);
__d('convertFromDraftStateToRaw',['DraftStringKey','encodeEntityRanges','encodeInlineStyleRanges'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=0,k={},l=[];i.getBlockMap().forEach(function(o,p){o.findEntityRanges(function(q){return q.getEntity()!==null;},function(q){var r=c('DraftStringKey').stringify(o.getEntityAt(q));if(!Object.prototype.hasOwnProperty.call(k,r))k[r]=''+j++;});l.push({key:p,text:o.getText(),type:o.getType(),depth:o.getDepth(),inlineStyleRanges:c('encodeInlineStyleRanges')(o),entityRanges:c('encodeEntityRanges')(o,k),data:o.getData().toObject()});});var m=Object.keys(k),n={};m.forEach(function(o,p){var q=i.getEntity(c('DraftStringKey').unstringify(o));n[p]={type:q.getType(),mutability:q.getMutability(),data:q.getData()};});return {entityMap:n,blocks:l};}f.exports=h;}),null);
__d('encodeBlocks',['ComposedBlockType','ComposedEntityType','ComposedInlineStyle','convertFromDraftStateToRaw','mapObject','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(k){var l=c('convertFromDraftStateToRaw')(k),m=l.blocks,n=l.entityMap,o=m.map(function(q){var r=q.key,s=q.type,t=q.text,u=q.depth,v=q.inlineStyleRanges,w=q.entityRanges;return {key:c('nullthrows')(r),type:i[s],text:t,depth:c('nullthrows')(u),inlineStyleRanges:c('nullthrows')(v).map(function(x){return babelHelpers['extends']({},x,{style:j[x.style]});}),entityRanges:c('nullthrows')(w)};}),p=c('mapObject')(n,function(q){var r=q.data,s=null,t=undefined;if(typeof r==='object'){s=r.id;t=babelHelpers.objectWithoutProperties(r,['id']);if(Object.keys(t).length===0){t=undefined;}else t=c('mapObject')(t,function(u){return u==null?'':String(u);});}return {id:s||null,type:c('ComposedEntityType')[q.type],data:t};});return {blocks:o,entityMap:p};}var i={unstyled:c('ComposedBlockType').UNSTYLED,paragraph:c('ComposedBlockType').PARAGRAPH,blockquote:c('ComposedBlockType').BLOCKQUOTE,'ordered-list-item':c('ComposedBlockType').ORDERED_LIST_ITEM,'unordered-list-item':c('ComposedBlockType').UNORDERED_LIST_ITEM,'code-block':c('ComposedBlockType').CODE,'header-one':c('ComposedBlockType').HEADER_ONE,'header-two':c('ComposedBlockType').HEADER_TWO,atomic:c('ComposedBlockType').MEDIA,pullquote:c('ComposedBlockType').PULLQUOTE,'header-three':c('ComposedBlockType').HEADER_TWO,'header-four':c('ComposedBlockType').HEADER_TWO,'header-five':c('ComposedBlockType').HEADER_TWO,'header-six':c('ComposedBlockType').HEADER_TWO},j={BOLD:c('ComposedInlineStyle').BOLD,CODE:c('ComposedInlineStyle').CODE,ITALIC:c('ComposedInlineStyle').ITALIC,STRIKETHROUGH:c('ComposedInlineStyle').STRIKETHROUGH,UNDERLINE:c('ComposedInlineStyle').UNDERLINE};f.exports=h;}),null);
__d('MessengerEditorStateManager',['CacheStorage','ComposedEntityMutability','ComposedEntityMutabilityToName','ComposedEntityTypeToName','DraftEntityInstance','EditorState','MessengerConstants','SelectionState','decodeBlocks','encodeBlocks','mapObject'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('CacheStorage'))('localstorage'),i=c('ComposedEntityMutability').IMMUTABLE,j=void 0,k={get:function l(m){if(!m)return this._getEmptyEditorState();if(m===c('MessengerConstants').NEW_THREAD_KEY)return j||this._getEmptyEditorState();var n=h.get(m,false);if(!n)return this._getEmptyEditorState();var o=n.encodedBlocks,p=c('mapObject')(o.entityMap,function(s,t){return new (c('DraftEntityInstance'))({type:c('ComposedEntityTypeToName')[s.type],mutability:c('ComposedEntityMutabilityToName')[i],data:s.data});}),q=c('decodeBlocks')(o.blocks,p),r=c('EditorState').createWithContent(q);return c('EditorState').acceptSelection(r,new (c('SelectionState'))(n.selection));},set:function l(m,n){if(m===c('MessengerConstants').NEW_THREAD_KEY){j=n;return;}var o=c('encodeBlocks')(n.getCurrentContent()),p=n.getSelection().toJS();h.set(m,{encodedBlocks:o,selection:p});},_getEmptyEditorState:function l(){var m=c('EditorState').createEmpty();return c('EditorState').forceSelection(m,m.getSelection());}};f.exports=k;}),null);
__d('MercuryDeliveryReceipts',['ArbiterMixin','Map','MercuryDispatcher','MercurySingletonProvider','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(l){'use strict';i.constructor.call(this);this.$MercuryDeliveryReceipts2=l;this.$MercuryDeliveryReceipts3=new (c('Map'))();this.$MercuryDeliveryReceipts1=c('MercuryDispatcher').getForFBID(this.$MercuryDeliveryReceipts2);this.$MercuryDeliveryReceipts1.subscribe('update-delivery',function(m,n){if(n.delivery_receipts)for(var o in n.delivery_receipts){var p=n.delivery_receipts[o],q=this.$MercuryDeliveryReceipts3.get(o)||0;if(p>q){this.$MercuryDeliveryReceipts3.set(o,p);this.informDeliveryStatusChanged(o);}}}.bind(this));}j.getForFBID=function(l){'use strict';return k.getForFBID(l);};j.get=function(){'use strict';return k.get();};j.prototype.informDeliveryStatusChanged=function(l){'use strict';var m=new (c('Map'))();m.set(l,true);this.inform('change',m);};j.prototype.getDeliveryTime=function(l){'use strict';return this.$MercuryDeliveryReceipts3.get(l)||0;};var k=new (c('MercurySingletonProvider'))(j);f.exports=j;}),null);
__d('MercuryDeliveryState',['MercuryConfig','MercuryIDs','MercuryServerRequests','MercurySingletonProvider','MercuryThreadIDMap','MercuryThreadInformer','PresencePrivacy','UserActivity','debounceAcrossTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryConfig').delivery_timeout||120000;i.getForFBID=function(k){return j.getForFBID(k);};i.get=function(){return j.get();};function i(k){this.$MercuryDeliveryState1=k;this.$MercuryDeliveryState2=c('MercuryServerRequests').getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState3=c('MercuryThreadInformer').getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState4=c('MercuryThreadIDMap').getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState5=[];this.$MercuryDeliveryState6={};this.$MercuryDeliveryState3.subscribe('messages-received',this.$MercuryDeliveryState7.bind(this));c('UserActivity').subscribe(c('debounceAcrossTransitions')(this.$MercuryDeliveryState8,300,this));}i.prototype.$MercuryDeliveryState7=function(k,l){for(var m in l){var n=l[m];n.forEach(function(o){if(this.$MercuryDeliveryState9(o)){this.$MercuryDeliveryState5.push(o);this.$MercuryDeliveryState4.getServerIDFromClientID(m,function(p){if(!this.$MercuryDeliveryState6[p])this.$MercuryDeliveryState6[p]=[];this.$MercuryDeliveryState6[p].push(o.message_id);}.bind(this));}}.bind(this));}if(c('UserActivity').isActive(h))this.$MercuryDeliveryState8();};i.prototype.$MercuryDeliveryState8=function(){if(this.$MercuryDeliveryState5.length===0&&Object.keys(this.$MercuryDeliveryState6).length===0)return;var k=this.$MercuryDeliveryState5.map(function(l){return l.message_id;});if(k)this.$MercuryDeliveryState2.sendDeliveryReceipts(k,this.$MercuryDeliveryState6);this.$MercuryDeliveryState6={};this.$MercuryDeliveryState5=[];};i.prototype.$MercuryDeliveryState9=function(k){var l=k.author?c('MercuryIDs').getUserIDFromParticipantID(k.author):null;if(l===this.$MercuryDeliveryState1)return false;if(!k.is_unread)return false;if(!c('PresencePrivacy').allows(l))return false;return true;};var j=new (c('MercurySingletonProvider'))(i);f.exports=i;}),null);
__d('MercuryDelayedDispatcher',['MercuryDispatcher','MercuryServerPayloadPreprocessor','MercuryServerRequests','MercurySingletonProvider','MercuryThreadIDMap'],(function a(b,c,d,e,f,g){'use strict';function h(j){this.$MercuryDelayedDispatcher1=j;this.$MercuryDelayedDispatcher2=[];this.$MercuryDelayedDispatcher3=c('MercuryThreadIDMap').getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4=c('MercuryDispatcher').getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher5=c('MercuryServerRequests').getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher6=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4.subscribe('model-update-completed',function(k,l){return this.$MercuryDelayedDispatcher7();}.bind(this));}h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};h.prototype.handleUpdateWaitForThread=function(j,k){var l=this.$MercuryDelayedDispatcher3.getClientIDFromServerIDNow(k);if(l){this.$MercuryDelayedDispatcher8(j);return;}this.$MercuryDelayedDispatcher3.getClientIDFromServerID(k,function(){return this.$MercuryDelayedDispatcher2.push({thread_fbid:k,payload:j});}.bind(this));this.$MercuryDelayedDispatcher5.ensureThreadIsFetched(k);};h.prototype.$MercuryDelayedDispatcher7=function(){if(this.$MercuryDelayedDispatcher2&&this.$MercuryDelayedDispatcher2.length){var j=this.$MercuryDelayedDispatcher2.shift(),k=j.thread_fbid,l=j.payload;this.handleUpdateWaitForThread(l,k);}};h.prototype.$MercuryDelayedDispatcher8=function(j){if(j.from_client){this.$MercuryDelayedDispatcher4.handleUpdate(j);}else this.$MercuryDelayedDispatcher6.handleUpdate(j);};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('MercuryProfileRanges',['idx'],(function a(b,c,d,e,f,g){'use strict';function h(i){if(!i.id&&i.i)return {id:i.i,offset:i.o,length:i.l};return i;}f.exports={extractFromDelta:function i(j){var k,l=(k=j)!=null?(k=k.data)!=null?k.prng:k:k;if(!l)return undefined;var m=[];try{m=JSON.parse(l);if(m.length>0)return m.map(h);}catch(n){}return m;}};}),null);
__d('MercurySyncNewMessageTransformer',['IrisProtocolMessageLifetime','MercuryActionType','MercuryIDs','MercuryMessageCustomizations','MercuryProfileRanges','MercuryTimestamp','MessagingTag'],(function a(b,c,d,e,f,g){'use strict';var h=function j(k){var l={};try{l=JSON.parse(k);}catch(m){}return l;};function i(j,k){var l=parseInt(k.messageMetadata.timestamp,10),m=c('MercuryTimestamp').getFormatedTimestamp(l),n=k.messageMetadata.skipBumpThread,o=j!==k.messageMetadata.actorFbId,p=[];if(k.attachments)p=k.attachments.map(function(r){return r.mercury;});var q=k.messageMetadata.tags?k.messageMetadata.tags[0]:undefined;return {message_id:k.messageMetadata.messageId,threading_id:null,offline_threading_id:k.messageMetadata.offlineThreadingId,author:c('MercuryIDs').getParticipantIDFromUserID(k.messageMetadata.actorFbId),author_email:k.messageMetadata.actorFbId+'@facebook.com',ephemeral_ttl_mode:k.ttl?c('IrisProtocolMessageLifetime')[k.ttl]:0,timestamp:l,is_unread:o,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,source:q,tags:k.messageMetadata.tags,is_spoof_warning:false,folder:c('MessagingTag').INBOX,thread_fbid:k.messageMetadata.threadKey.threadFbId,other_user_fbid:k.messageMetadata.threadKey.otherUserFbId,body:k.body!==undefined?k.body:'',html_body:null,subject:null,has_attachment:p.length>0,attachments:p,ranges:undefined,thread_id:null,action_type:c('MercuryActionType').USER_GENERATED_MESSAGE,is_from_iris:true,is_sponsored:!!(k.data&&k.data.is_sponsored&&k.data.is_sponsored==='true'),commerce_message_type:k.data?k.data.commerce_message_type:null,customizations:k.data&&k.data.customization?c('MercuryMessageCustomizations').parseCustomizations(k.data.customization):null,platform_xmd:k.data&&k.data.platform_xmd?k.data.platform_xmd:null,profile_ranges:c('MercuryProfileRanges').extractFromDelta(k),message_source:k.data&&k.data.message_source_data?h(k.data.message_source_data).message_source:null,skip_bump_thread:n,montage_reply_data:k.data&&k.data.montage_reply_data?h(k.data.montage_reply_data):null,meta_ranges:k.data&&k.data.meta_ranges?h(k.data.meta_ranges):null};}f.exports={transform:i};}),null);
__d('MercurySyncAdminTextMessageTransformer',['MercuryActionType','MercuryLogMessageType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=c('MercurySyncNewMessageTransformer').transform(i,j);k.action_type=c('MercuryActionType').LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={message_type:j.type,untypedData:j.untypedData};k.log_message_type=c('MercuryLogMessageType').GENERIC_ADMIN_TEXT;return k;}f.exports={transform:h};}),null);
__d('MercurySyncClientPayloadTransformer',['MercuryActionType'],(function a(b,c,d,e,f,g){'use strict';function h(k){var l=k.payload;l=JSON.parse(String.fromCharCode.apply(null,l));var m=l&&l.deltas,n=m[0];if(n.deltaMessageReaction){return i(n.deltaMessageReaction);}else return j(n);}function i(k){var l=k.messageId,m=k.offlineThreadingId,n=k.reaction,o=k.senderId,p=k.userId,q=k.threadKey.threadFbId||k.threadKey.otherUserFbId;return {action_type:c('MercuryActionType').REACTION_UPDATE,messageId:l,offlineThreadingId:m,reaction:n?decodeURIComponent(window.escape(n)):undefined,senderId:o,thread_fbid:q,userId:p};}function j(k){var l=k&&k.deltaPaymentPinProtectionStatusData,m=l&&l.threadKey&&l.threadKey.otherUserFbId,n=l&&l.isPinProtected;if(!m)return null;var o=m.toString();return {action_type:c('MercuryActionType').IS_PIN_PROTECTED,thread_fbid:o,is_pin_protected:n};}f.exports={transform:h};}),null);
__d('MercurySyncDeliveryReceiptTransformer',[],(function a(b,c,d,e,f,g){'use strict';function h(i){return {delivery_receipts:[{other_user_fbid:i.threadKey.otherUserFbId?i.threadKey.otherUserFbId:'',thread_fbid:i.threadKey.threadFbId?i.threadKey.threadFbId:'',time:parseInt(i.deliveredWatermarkTimestampMs,10)}]};}f.exports={transform:h};}),null);
__d('MercurySyncMarkReadTransformer',['MercuryActionType','MercuryGlobalActionType','MessagingTag'],(function a(b,c,d,e,f,g){'use strict';function h(i){if(i.folders&&i.folders.length>0)return i.folders.map(function(j){return {action_type:c('MercuryGlobalActionType').MARK_ALL_READ,action_id:null,folder:c('MessagingTag').IRIS_MAPPING[j],timestamp:parseInt(i.watermarkTimestamp,10)};});return i.threadKeys.map(function(j){return {action_type:c('MercuryActionType').CHANGE_READ_STATUS,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId,mark_as_read:true,timestamp:parseInt(i.watermarkTimestamp,10),folder:c('MessagingTag').INBOX};});}f.exports={transform:h};}),null);
__d('MercurySyncMarkUnreadTransformer',['MercuryActionType','MessagingTag'],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.threadKeys.map(function(j){return {action_type:c('MercuryActionType').CHANGE_READ_STATUS,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId,mark_as_read:false,timestamp:parseInt(i.watermarkTimestamp,10),folder:c('MessagingTag').INBOX};});}f.exports={transform:h};}),null);
__d('MercurySyncMessageDeleteTransformer',['MercuryActionType'],(function a(b,c,d,e,f,g){'use strict';function h(i){return {action_type:c('MercuryActionType').DELETE_MESSAGES,message_ids:i.messageIds,other_user_fbid:i.threadKey.otherUserFbId,thread_fbid:i.threadKey.threadFbId};}f.exports={transform:h};}),null);
__d('MercurySyncPagesManagerEventTransformer',['MercuryActionType','PagesMessagingEventType'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=JSON.parse(i.jsonBlob),k=j&&j.type;if(!k)return undefined;switch(k){case c('PagesMessagingEventType').FLAG:var l=!!(j&&j.flagData&&j.flagData.state),m={action_type:c('MercuryActionType').CHANGE_FLAG,mark_as_flag:l,other_user_fbid:i.threadKey.otherUserFbId,thread_fbid:i.threadKey.threadFbId};return m;default:return undefined;}}f.exports={transform:h};}),null);
__d('MercurySyncParticipantLeftGroupThreadTransformer',['MercuryActionType','MercuryIDs','MercuryLogMessageType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=c('MercurySyncNewMessageTransformer').transform(i,j);k.action_type=c('MercuryActionType').LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={removed_participants:[c('MercuryIDs').getParticipantIDFromUserID(j.leftParticipantFbId)]};k.log_message_type=c('MercuryLogMessageType').UNSUBSCRIBE;return k;}f.exports={transform:h};}),null);
__d('MercurySyncParticipantsAddedToGroupThreadTransformer',['MercuryActionType','MercuryIDs','MercuryLogMessageType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=c('MercurySyncNewMessageTransformer').transform(i,j);k.action_type=c('MercuryActionType').LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={added_participants:j.addedParticipants.map(function(l){return c('MercuryIDs').getParticipantIDFromUserID(l.userFbId);})};k.log_message_type=c('MercuryLogMessageType').SUBSCRIBE;return k;}f.exports={transform:h};}),null);
__d('MercurySyncRTCEventLogTransformer',['MercuryActionType','MercuryIDs','MercuryLogMessageType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=c('MercurySyncNewMessageTransformer').transform(i,j),l=j.messageMetadata.actorFbId,m=l===i?j.messageMetadata.threadKey.otherUserFbId:i;k.action_type=c('MercuryActionType').LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={answered:j.duration>0,callee:c('MercuryIDs').getParticipantIDFromUserID(m),caller:c('MercuryIDs').getParticipantIDFromUserID(l)};k.log_message_type=c('MercuryLogMessageType').VIDEO_CALL;return k;}f.exports={transform:h};}),null);
__d('MercurySyncReadReceiptTransformer',[],(function a(b,c,d,e,f,g){'use strict';function h(i){var j={watermark:parseInt(i.watermarkTimestampMs,10),action:parseInt(i.actionTimestampMs,10)},k=i.threadKey.otherUserFbId||i.actorFbId,l=i.threadKey.otherUserFbId||i.threadKey.threadFbId,m={roger:{}};m.roger[l]={};m.roger[l][k]=j;return m;}f.exports={transform:h};}),null);
__d('MercurySyncReplaceMessageTransformer',['MercuryActionType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){j=Object.assign({},j.newMessage,j);return Object.assign(c('MercurySyncNewMessageTransformer').transform(i,j),{action_type:c('MercuryActionType').REPLACE_MESSAGE,replaced_message_id:j.replacedMessageId});}f.exports={transform:h};}),null);
__d('MercurySyncRtcCallDataTransformer',['MercuryActionType'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.messageMetadata.threadKey&&i.messageMetadata.threadKey.threadFbId?i.messageMetadata.threadKey.threadFbId.toString():undefined,k=i.initiator&&i.initiator.userFbId?i.initiator.userFbId.toString():undefined;return {action_type:c('MercuryActionType').UPDATE_RTC_CALL_DATA,thread_fbid:j,call_state:i.callState,server_info_data:i.serverInfoData,initiator_fbid:k};}f.exports={transform:h};}),null);
__d('MercurySyncThreadActionTransformer',['MercuryActionType','MessagingThreadAction'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j={action_type:c('MercuryActionType').CHANGE_ARCHIVED_STATUS,thread_fbid:i.threadKey.threadFbId,other_user_fbid:i.threadKey.otherUserFbId,archived:i.action===c('MessagingThreadAction').ACTION_ARCHIVED};return j;}f.exports={transform:h};}),null);
__d('MercurySyncThreadAdminsAddToGroupTransformer',['MercuryActionType','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';function h(i){return {action_type:c('MercuryActionType').ADD_GROUP_ADMINS,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,added_admin_ids:i.addedAdmins.map(function(j){return c('MercuryIDs').getParticipantIDFromUserID(j.userFbId);})};}f.exports={transform:h};}),null);
__d('MercurySyncThreadAdminsRemovedFromGroupTransformer',['MercuryActionType','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';function h(i){return {action_type:c('MercuryActionType').REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,removed_admin_ids:i.removedAdminFbIds.map(function(j){return c('MercuryIDs').getParticipantIDFromUserID(j);})};}f.exports={transform:h};}),null);
__d('MercurySyncThreadApprovalModeTransformer',['MercuryActionType','MessengerApprovalModeTypes'],(function a(b,c,d,e,f,g){'use strict';function h(i){return {action_type:c('MercuryActionType').APPROVAL_MODE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,approval_mode:c('MessengerApprovalModeTypes')[i.mode]};}f.exports={transform:h};}),null);
__d('MercurySyncThreadApprovalQueueTransformer',['MercuryActionType','MercuryIDs','MessengerApprovalQueueTypes'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('MercuryIDs').getParticipantIDFromUserID(i.recipientFbId);return {action_type:c('MercuryActionType').APPROVAL_QUEUE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,removed_id:i.action===c('MessengerApprovalQueueTypes').REMOVED?j:null,added_id:i.action===c('MessengerApprovalQueueTypes').REQUESTED?j:null};}f.exports={transform:h};}),null);
__d('MercurySyncThreadDeleteTransformer',['MercuryActionType'],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.threadKeys.map(function(j){return {action_type:c('MercuryActionType').DELETE_THREAD,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId};});}f.exports={transform:h};}),null);
__d('MercurySyncThreadJoinableModeTransformer',['MercuryActionType','MessengerJoinableModeType'],(function a(b,c,d,e,f,g){'use strict';function h(i){return {action_type:c('MercuryActionType').JOINABLE_MODE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,joinable_mode:{mode:c('MessengerJoinableModeType')[i.mode],link:i.link}};}f.exports={transform:h};}),null);
__d('MercurySyncThreadMuteSettingsTransformer',['MercuryActionType'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j={action_type:c('MercuryActionType').CHANGE_MUTE_SETTINGS,thread_fbid:i.threadKey.threadFbId,other_user_fbid:i.threadKey.otherUserFbId,mute_until:parseInt(i.expireTime,10)};return j;}f.exports={transform:h};}),null);
__d('MercurySyncThreadNameTransformer',['MercuryActionType','MercuryLogMessageType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=c('MercurySyncNewMessageTransformer').transform(i,j);k.action_type=c('MercuryActionType').LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={name:j.name};k.log_message_type=c('MercuryLogMessageType').THREAD_NAME;return k;}f.exports={transform:h};}),null);
__d('MercurySyncDispatcher',['MercuryDelayedDispatcher','MercuryGlobalActionType','MercuryPayloadSource','MercuryServerPayloadPreprocessor','MercurySyncThreadAdminsAddToGroupTransformer','MercurySyncThreadAdminsRemovedFromGroupTransformer','MercurySyncAdminTextMessageTransformer','MercurySyncClientPayloadTransformer','MercurySyncDeliveryReceiptTransformer','MercurySyncMarkFolderSeenTransformer','MercurySyncMarkReadTransformer','MercurySyncMarkUnreadTransformer','MercurySyncMessageDeleteTransformer','MercurySyncNewMessageTransformer','MercurySyncReadReceiptTransformer','MercurySyncPagesManagerEventTransformer','MercurySyncParticipantLeftGroupThreadTransformer','MercurySyncParticipantsAddedToGroupThreadTransformer','MercurySyncRTCEventLogTransformer','MercurySyncThreadDeleteTransformer','MercurySyncThreadMuteSettingsTransformer','MercurySyncThreadNameTransformer','MercurySyncThreadActionTransformer','MercurySyncReplaceMessageTransformer','MercurySyncThreadJoinableModeTransformer','MercurySyncThreadApprovalModeTransformer','MercurySyncThreadApprovalQueueTransformer','MercurySyncRtcCallDataTransformer','MercurySyncDeltaTypes','MercurySingletonProvider','MontageActions'],(function a(b,c,d,e,f,g){'use strict';var h='FOLDER_MONTAGE';i.getForFBID=function(k){return j.getForFBID(k);};i.get=function(){return j.get();};function i(k){this.$MercurySyncDispatcher1=k;this.$MercurySyncDispatcher2=c('MercuryDelayedDispatcher').getForFBID(this.$MercurySyncDispatcher1);this.$MercurySyncDispatcher3=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercurySyncDispatcher1);}i.prototype.process=function(k){var l=void 0,m=void 0;switch(k['class']){case c('MercurySyncDeltaTypes').NewMessage:l=c('MercurySyncNewMessageTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ReplaceMessage:l=c('MercurySyncReplaceMessageTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').DeliveryReceipt:l=c('MercurySyncDeliveryReceiptTransformer').transform(k);this.$MercurySyncDispatcher3.handleUpdate(l);break;case c('MercurySyncDeltaTypes').MarkRead:l=c('MercurySyncMarkReadTransformer').transform(k);var n=[],o=[];l.forEach(function(p){if(p.action_type===c('MercuryGlobalActionType').MARK_ALL_READ){n.push(p);}else o.push(p);});n.length&&this.$MercurySyncDispatcher5(n);o.length&&this.$MercurySyncDispatcher6(o);break;case c('MercurySyncDeltaTypes').MarkUnread:l=c('MercurySyncMarkUnreadTransformer').transform(k);this.$MercurySyncDispatcher6(l);break;case c('MercurySyncDeltaTypes').ParticipantLeftGroupThread:l=c('MercurySyncParticipantLeftGroupThreadTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ParticipantsAddedToGroupThread:l=c('MercurySyncParticipantsAddedToGroupThreadTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').RTCEventLog:l=c('MercurySyncRTCEventLogTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ThreadName:l=c('MercurySyncThreadNameTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ReadReceipt:l=c('MercurySyncReadReceiptTransformer').transform(k);this.$MercurySyncDispatcher3.handleUpdate(l);break;case c('MercurySyncDeltaTypes').AdminTextMessage:l=c('MercurySyncAdminTextMessageTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').MessageDelete:m=k.threadKey.threadFbId;if(m&&k.folder&&k.folder===h){c('MontageActions').requestUpdate(m);}else{l=c('MercurySyncMessageDeleteTransformer').transform(k);this.$MercurySyncDispatcher4(l);}break;case c('MercurySyncDeltaTypes').ThreadAction:l=c('MercurySyncThreadActionTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ThreadDelete:l=c('MercurySyncThreadDeleteTransformer').transform(k);this.$MercurySyncDispatcher6(l);break;case c('MercurySyncDeltaTypes').AdminAddedToGroupThread:l=c('MercurySyncThreadAdminsAddToGroupTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').AdminRemovedFromGroupThread:l=c('MercurySyncThreadAdminsRemovedFromGroupTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ThreadMuteSettings:l=c('MercurySyncThreadMuteSettingsTransformer').transform(k);this.$MercurySyncDispatcher6([l]);break;case c('MercurySyncDeltaTypes').PagesManagerEvent:l=c('MercurySyncPagesManagerEventTransformer').transform(k);if(!l)return;this.$MercurySyncDispatcher6([l]);break;case c('MercurySyncDeltaTypes').JoinableMode:l=c('MercurySyncThreadJoinableModeTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ApprovalMode:l=c('MercurySyncThreadApprovalModeTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ApprovalQueue:l=c('MercurySyncThreadApprovalQueueTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ClientPayload:l=c('MercurySyncClientPayloadTransformer').transform(k);if(!l)return;this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').GenieMessage:l=c('MercurySyncNewMessageTransformer').transform(this.$MercurySyncDispatcher1,k.deltaNewMessage);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').MontageMessage:m=k.newMessage.messageMetadata.actorFbId;if(m)c('MontageActions').requestUpdate(m);break;case c('MercurySyncDeltaTypes').RtcCallData:l=c('MercurySyncRtcCallDataTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').MarkFolderSeen:l=c('MercurySyncMarkFolderSeenTransformer').transform(k);this.$MercurySyncDispatcher5(l);break;default:break;}};i.prototype.$MercurySyncDispatcher4=function(k){var l=k.other_user_fbid||k.thread_fbid;this.$MercurySyncDispatcher2.handleUpdateWaitForThread({actions:[k],payload_source:c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE},l);};i.prototype.$MercurySyncDispatcher5=function(k){this.$MercurySyncDispatcher3.handleUpdate({global_actions:k,payload_source:c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE});};i.prototype.$MercurySyncDispatcher6=function(k){this.$MercurySyncDispatcher3.handleUpdate({actions:k,payload_source:c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE});};var j=new (c('MercurySingletonProvider'))(i);f.exports=i;}),null);
__d('MercurySyncDataFetcherImpl',['Promise','AsyncRequest','MessagingConfig','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=c('MessagingConfig').syncFetchRequestTimeoutMs;function i(k){return new (c('Promise'))(function(l,m){j(k,l,m,0);});}function j(k,l,m,n){if(n>c('MessagingConfig').syncFetchRetries){m();return;}var o=n===0?0:c('MessagingConfig').syncFetchInitialTimeoutMs*Math.pow(c('MessagingConfig').syncFetchTimeoutMultiplier,n);c('setTimeoutAcrossTransitions')(function(){var p=false,q=function r(){if(p)return;p=true;j(k,l,m,n+1);};new (c('AsyncRequest'))().setURI(k).setHandler(function(r){p=true;l(r);}).setErrorHandler(q).setTimeoutHandler(h,q).setAllowCrossPageTransition(true).send();},o);}f.exports={fetch:i};}),null);
__d('MercurySyncDataFetcher',['Promise','LogHistory','MessagingConfig','MercurySyncDataFetcherImpl','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=c('LogHistory').getInstance('mercury_sync_data_fetcher');function i(){var l=0;for(var m=0;m<c('MessagingConfig').syncFetchRetries;m++){var n=m===0?0:c('MessagingConfig').syncFetchInitialTimeoutMs*Math.pow(c('MessagingConfig').syncFetchTimeoutMultiplier,m);l+=n+c('MessagingConfig').syncFetchRequestTimeoutMs;}return l;}var j=i();function k(l){return new (c('Promise'))(function(m,n){var o=function q(){h.error('fetch_timeout',JSON.stringify({timeout:j,uri:l.toString()}));n();},p=c('setTimeoutAcrossTransitions')(o,j);c('MercurySyncDataFetcherImpl').fetch(l).done(function(){clearTimeout(p);m.apply(undefined,arguments);},o);});}f.exports={fetch:k,getMaxTimeoutMs:i};}),null);
__d("XMercuryFetchMessageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/fetch_message\/",{other_user_or_thread_fbid:{type:"Int",required:true},mid:{type:"String",required:true}});}),null);
__d("XMercuryInvalidateGlobalStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/invalidate_global_state\/",{cachius_min_seq_id:{type:"Int"}});}),null);
__d("XMercuryInvalidateThreadStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/invalidate_thread_state\/",{other_user_or_thread_fbid:{type:"Int",required:true},num_messages:{type:"Int",required:true}});}),null);
__d('MercurySyncDFFDataFetcher',['Promise','ActorURI','AsyncRequest','MercuryConfig','MercuryMessages','MercuryThreads','MercuryThreadIDMap','MercurySingletonProvider','MercurySyncDataFetcher','XMercuryFetchMessageController','XMercuryInvalidateGlobalStateController','XMercuryInvalidateThreadStateController'],(function a(b,c,d,e,f,g){'use strict';function h(j){this.$MercurySyncDFFDataFetcher1=j;this.__messages=c('MercuryMessages').getForFBID(this.$MercurySyncDFFDataFetcher1);this.__threads=c('MercuryThreads').getForFBID(this.$MercurySyncDFFDataFetcher1);this.__threadIDMap=c('MercuryThreadIDMap').getForFBID(this.$MercurySyncDFFDataFetcher1);}h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};h.prototype.fetchInvalidateGlobalState=function(j){var k=c('XMercuryInvalidateGlobalStateController').getURIBuilder();if(c('MercuryConfig').MessengerCachiusUseClientSeqIDWWW)k.setInt('cachius_min_seq_id',j);var l=k.getURI(),m=c('ActorURI').create(l,this.$MercurySyncDFFDataFetcher1);return c('MercurySyncDataFetcher').fetch(m);};h.prototype.fetchInvalidateThreadState=function(j,k){var l=11,m=3,n=j||k,o=this.__threadIDMap.getClientIDFromServerIDNow(n);if(!o)return c('Promise').resolve({getPayload:function s(){return {};}});var p=m+this.__messages.getCurrentlyLoadedMessages(o).length,q=c('XMercuryInvalidateThreadStateController').getURIBuilder().setInt('other_user_or_thread_fbid',n).setInt('num_messages',Math.max(p,l)).getURI(),r=c('ActorURI').create(q,this.$MercurySyncDFFDataFetcher1);return c('MercurySyncDataFetcher').fetch(r);};h.prototype.fetchInvalidateMessage=function(j,k,l){var m=c('XMercuryFetchMessageController').getURIBuilder().setInt('other_user_or_thread_fbid',j||k).setString('mid',l).getURI(),n=c('ActorURI').create(m,this.$MercurySyncDFFDataFetcher1);return c('MercurySyncDataFetcher').fetch(n);};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('MercurySyncForcedFetchHandler',['Promise','MercurySingletonProvider','MercurySyncDFFDataFetcher','MercuryMessages','MercuryThreadIDMap'],(function a(b,c,d,e,f,g){'use strict';function h(k){return {getPayload:function l(){return {sequence_id:k};}};}i.getForFBID=function(k){return j.getForFBID(k);};i.get=function(){return j.get();};function i(k){this.$MercurySyncForcedFetchHandler1=k;this.$MercurySyncForcedFetchHandler2=c('MercuryMessages').getForFBID(this.$MercurySyncForcedFetchHandler1);this.$MercurySyncForcedFetchHandler3=c('MercuryThreadIDMap').getForFBID(this.$MercurySyncForcedFetchHandler1);this.$MercurySyncForcedFetchHandler4=c('MercurySyncDFFDataFetcher').getForFBID(this.$MercurySyncForcedFetchHandler1);}i.prototype.processMessageDFF=function(k,l,m,n){if(n){var o=l.otherUserFbId!==undefined?l.otherUserFbId.toString():l.threadFbId.toString(),p=this.$MercurySyncForcedFetchHandler3.getClientIDFromServerIDNow(o);if(p===undefined)return c('Promise').resolve(h(k));var q=this.$MercurySyncForcedFetchHandler2.getMessagesFromIDs([m]);if(q.length===0)return c('Promise').resolve(h(k));}return this.$MercurySyncForcedFetchHandler4.fetchInvalidateMessage(l.otherUserFbId,l.threadFbId,m);};i.prototype.processThreadDFF=function(k,l,m){if(m){var n=l.otherUserFbId!==undefined?l.otherUserFbId.toString():l.threadFbId.toString(),o=this.$MercurySyncForcedFetchHandler3.getClientIDFromServerIDNow(n);if(o===undefined)return c('Promise').resolve(h(k));}return this.$MercurySyncForcedFetchHandler4.fetchInvalidateThreadState(l.otherUserFbId,l.threadFbId);};i.prototype.processGlobalDFF=function(k){return this.$MercurySyncForcedFetchHandler4.fetchInvalidateGlobalState(k);};var j=new (c('MercurySingletonProvider'))(i);f.exports=i;}),null);
__d('MercurySyncDeltaHandler',['invariant','Arbiter','ChannelConstants','LogHistory','MercuryConfig','MessagingConfig','MercuryDelayedDispatcher','MercuryPayloadSource','MercurySyncConstants','MercurySyncDeltaHolder','MercurySyncDeltaTypes','MercurySyncDispatcher','MercurySyncForcedFetchHandler','MercurySyncHolesTypedLogger','MercuryServerPayloadPreprocessor','MercurySyncTopicType','MercurySingletonProvider'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('LogHistory').getInstance('mercury_sync_delta_handler'),j=c('MessagingConfig').syncFetchRetries||0;k.getForFBID=function(m){return l.getForFBID(m);};k.get=function(){return l.get();};function k(m){this.$MercurySyncDeltaHandler1=m;this.$MercurySyncDeltaHandler2=c('MercurySyncDispatcher').getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler3=c('MercurySyncForcedFetchHandler').getForFBID(this.$MercurySyncDeltaHandler1);this.__payloadPreprocessor=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercurySyncDeltaHandler1);this.__delayedDispatcher=c('MercuryDelayedDispatcher').getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler4=c('MercurySyncDeltaHolder').getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler6=[];this.$MercurySyncDeltaHandler11=0;i.debug('constructor',JSON.stringify({fbid:this.$MercurySyncDeltaHandler1}));c('Arbiter').subscribe('MercurySyncDeltaHandler/initSeqID',function(n,o){i.debug('initSeqID',JSON.stringify(o));var p=o&&o.seqID,q=o&&o.fbid;if(!q)return;if(q!==this.$MercurySyncDeltaHandler1)return;if(p){this.$MercurySyncDeltaHandler4.updateLastSeqID(p);}else this.$MercurySyncDeltaHandler4.updateLastSeqID(0);this.$MercurySyncDeltaHandler13();this.$MercurySyncDeltaHandler7=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('deltaflow'),function(r,s){if(!this.$MercurySyncDeltaHandler12)this.$MercurySyncDeltaHandler13();}.bind(this));}.bind(this));}k.prototype.$MercurySyncDeltaHandler13=function(){i.debug('setUpSubscriptionsToRealTimeUpdates',JSON.stringify({fbid:this.$MercurySyncDeltaHandler1}));this.$MercurySyncDeltaHandler9=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('delta'),function(m,n){var o=n&&n.obj&&n.obj.queue;if(o)if(o.toString()!==this.$MercurySyncDeltaHandler1)return;var p=n&&n.obj&&n.obj.delta,q=n&&n.obj&&n.obj.iseq;if(!p||!q)return;this.$MercurySyncDeltaHandler14(q,c('MercurySyncTopicType').DELTA);this.$MercurySyncDeltaHandler15(q,p);this.$MercurySyncDeltaHandler4.push(q,p);this.$MercurySyncDeltaHandler16();}.bind(this));this.$MercurySyncDeltaHandler10=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('deltaflowreject'),function(m,n){var o=n&&n.obj&&n.obj.queue;if(o)if(o.toString()!==this.$MercurySyncDeltaHandler1)return;this.$MercurySyncDeltaHandler17();}.bind(this));this.$MercurySyncDeltaHandler8=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType(c('ChannelConstants').FAKE_DFF),function(m,n){var o=n&&n.obj&&n.obj.queue;if(o&&o.toString()!==this.$MercurySyncDeltaHandler1)return;var p=n&&n.obj&&n.obj.delta;if(!p)return;this.$MercurySyncDeltaHandler6.push(p);this.$MercurySyncDeltaHandler16();}.bind(this));this.$MercurySyncDeltaHandler12=true;};k.prototype.$MercurySyncDeltaHandler16=function(){if(this.$MercurySyncDeltaHandler5)return;if(this.$MercurySyncDeltaHandler6.length>0){var m=this.$MercurySyncDeltaHandler6.shift();this.$MercurySyncDeltaHandler18(this.$MercurySyncDeltaHandler4.getLastSeqID(),m);this.$MercurySyncDeltaHandler16();}var n=this.$MercurySyncDeltaHandler4.peek();if(!n)return;var o=n-this.$MercurySyncDeltaHandler4.getLastSeqID();if(o===1){var p=this.$MercurySyncDeltaHandler4.pop();if(!p)return;var q=p.seqID,r=p.delta;this.$MercurySyncDeltaHandler18(q,r);this.$MercurySyncDeltaHandler16();}else if(o>1){this.$MercurySyncDeltaHandler19();}else{this.$MercurySyncDeltaHandler4.pop();this.$MercurySyncDeltaHandler16();}};k.prototype.$MercurySyncDeltaHandler18=function(m,n){this.$MercurySyncDeltaHandler4.updateLastSeqID(m);if(n['class']===c('MercurySyncDeltaTypes').ForcedFetch){i.debug('DFF',JSON.stringify(n));if(n.threadKey!==undefined&&n.messageId===undefined){this.$MercurySyncDeltaHandler20(m,n);}else if(n.threadKey!==undefined&&n.messageId!==undefined){this.$MercurySyncDeltaHandler21(m,n);}else this.$MercurySyncDeltaHandler22(m);}else this.$MercurySyncDeltaHandler2.process(n);};k.prototype.$MercurySyncDeltaHandler19=function(){i.warn('hole',JSON.stringify({$MercurySyncDeltaHandler23:this.$MercurySyncDeltaHandler4.getLastSeqID(),nextSeqID:this.$MercurySyncDeltaHandler4.peek()}));var m=this.$MercurySyncDeltaHandler4.peek();!!m||h(0);var n=m-1;this.$MercurySyncDeltaHandler22(n);};k.prototype.$MercurySyncDeltaHandler24=function(m,n,o,p){!this.$MercurySyncDeltaHandler5||h(0);this.$MercurySyncDeltaHandler5=true;i.debug('_scheduleDataFetch:start',JSON.stringify({seqID:m}));n().done(function(q){i.debug('_scheduleDataFetch:success',JSON.stringify({seqID:m}));o(m,q);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler16();}.bind(this),function(){i.error('_scheduleDataFetch:failure',JSON.stringify({seqID:m}));p(m);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler16();}.bind(this));};k.prototype.$MercurySyncDeltaHandler22=function(m){this.$MercurySyncDeltaHandler24(undefined,function(){return this.$MercurySyncDeltaHandler3.processGlobalDFF(m);}.bind(this),function(n,o){var p=o.getPayload();this.__payloadPreprocessor.handleUpdate(p);if(p.sequence_id){i.debug('_initiateGlobalDFF:success',JSON.stringify({seqID:p.sequence_id}));this.$MercurySyncDeltaHandler4.updateLastSeqID(p.sequence_id);}this.$MercurySyncDeltaHandler11=0;c('Arbiter').inform(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RECOVER);}.bind(this),function(){i.error('_initiateGlobalDFF:failure','');if(this.$MercurySyncDeltaHandler11>=j){this.$MercurySyncDeltaHandler17();this.$MercurySyncDeltaHandler4.updateLastSeqID(m);}else{this.$MercurySyncDeltaHandler11++;c('Arbiter').inform(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RETRY);i.debug('_initiateGlobalDFF:retry','');this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler22(m);}}.bind(this));};k.prototype.$MercurySyncDeltaHandler20=function(m,n){this.$MercurySyncDeltaHandler24(m,function(){return this.$MercurySyncDeltaHandler3.processThreadDFF(m,n.threadKey,n.isLazy);}.bind(this),function(o,p){this.__payloadPreprocessor.handleUpdate(p.getPayload());this.$MercurySyncDeltaHandler4.updateLastSeqID(o);}.bind(this),function(){i.error('_initiateThreadDFF:failure',JSON.stringify(n));var o=babelHelpers['extends']({},n);delete o.threadKey;this.$MercurySyncDeltaHandler4.updateLastSeqID(m-1);this.$MercurySyncDeltaHandler4.push(m,o);}.bind(this));};k.prototype.$MercurySyncDeltaHandler21=function(m,n){this.$MercurySyncDeltaHandler24(m,function(){return this.$MercurySyncDeltaHandler3.processMessageDFF(m,n.threadKey,n.messageId,n.isLazy);}.bind(this),function(o,p){var q=p.getPayload(),r=q.other_user_fbid?q.other_user_fbid:q.thread_fbid,s=[babelHelpers['extends']({},q)],t=c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:s,payload_source:t},r);this.$MercurySyncDeltaHandler4.updateLastSeqID(o);}.bind(this),function(){i.error('_initiateMessageDFF:failure',JSON.stringify(n));var o=babelHelpers['extends']({},n);delete o.messageId;this.$MercurySyncDeltaHandler4.updateLastSeqID(m-1);this.$MercurySyncDeltaHandler4.push(m,o);}.bind(this));};k.prototype.$MercurySyncDeltaHandler14=function(m,n){var o=m-this.$MercurySyncDeltaHandler4.getLastSeqID();if(o!==1&&o!==0){if(!c('MercuryConfig').WWWSyncHolesLogging)return;new (c('MercurySyncHolesTypedLogger'))().setSeqID(m).setDifference(o).setTopicType(n).log();}};k.prototype.$MercurySyncDeltaHandler15=function(m,n){switch(n['class']){case c('MercurySyncDeltaTypes').NewMessage:i.debug('message_delta',JSON.stringify({seqID:m,threadKey:n.messageMetadata.threadKey,messageId:n.messageMetadata.messageId}));break;case c('MercurySyncDeltaTypes').ReadReceipt:i.debug('read_receipt_delta',JSON.stringify({seqID:m,threadKey:n.threadKey,actionTimestampMs:n.actionTimestampMs,watermarkTimestampMs:n.watermarkTimestampMs}));break;case c('MercurySyncDeltaTypes').DeliveryReceipt:i.debug('delivery_receipt_delta',JSON.stringify({seqID:m,deliveredWatermarkTimestampMs:n.deliveredWatermarkTimestampMs,messageIds:n.messageIds}));break;}};k.prototype.$MercurySyncDeltaHandler17=function(){this.$MercurySyncDeltaHandler12=false;c('Arbiter').unsubscribe(this.$MercurySyncDeltaHandler9);c('Arbiter').unsubscribe(this.$MercurySyncDeltaHandler8);c('Arbiter').unsubscribe(this.$MercurySyncDeltaHandler10);c('Arbiter').inform(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE);};var l=new (c('MercurySingletonProvider'))(k);f.exports=k;}),null);
__d('MercurySyncEnvironment',['Arbiter','ChannelInitialData','CurrentUser','MercurySyncDeltaHandler'],(function a(b,c,d,e,f,g){'use strict';function h(){if(!c('ChannelInitialData').channelConfig)return;c('MercurySyncDeltaHandler').get();c('Arbiter').inform('MercurySyncDeltaHandler/initSeqID',{fbid:c('CurrentUser').getAccountID(),seqID:c('ChannelInitialData').channelConfig.sequenceId});}f.exports={setUp:h};}),null);
__d('MercuryUnreadState',['invariant','MercuryFolders','LogHistory','KeyedCallbackManager','MercuryActionType','MercuryDispatcher','MercuryGlobalActionType','MercurySingletonProvider','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','arrayContains','createObjectFrom'],(function a(b,c,d,e,f,g,h){'use strict';var i=(c('MercuryFolders').getSupportedFolders()||[]).filter(function(p){return p!==c('MessagingTag').ACTION_ARCHIVED;}),j='unread_thread_hash',k='unseen_thread_list',l=c('MercuryThreadlistConstants').MAX_UNREAD_COUNT,m=c('LogHistory').getInstance('mercury_unread_state');n.getForFBID=function(p){return o.getForFBID(p);};n.get=function(){return o.get();};function n(p){this.$MercuryUnreadState1=p;this.$MercuryUnreadState2=c('MercuryServerRequests').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState3=c('MercuryThreadIDMap').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState4=c('MercuryThreadInformer').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState5=c('MercuryThreads').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState6=c('MercuryDispatcher').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState7={};this.$MercuryUnreadState8={};this.$MercuryUnreadState9={};this.$MercuryUnreadState10={};this.$MercuryUnreadState11={};i.forEach(function(q){this.$MercuryUnreadState9[q]=0;this.$MercuryUnreadState10[q]=false;this.$MercuryUnreadState11[q]=new (c('KeyedCallbackManager'))();}.bind(this));this.$MercuryUnreadState6.subscribe('update-unread',this.$MercuryUnreadState12.bind(this));this.$MercuryUnreadState6.subscribe('update-thread-ids',function(q,r){this.$MercuryUnreadState13(r);}.bind(this));}n.prototype.getUnreadCount=function(p){if(this.exceedsMaxCount(p)){m.error('unguarded_unread_count_fetch','{}');return 0;}return this.$MercuryUnreadState14(p);};n.prototype.exceedsMaxCount=function(p){return this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>l;};n.prototype.markFolderAsRead=function(p){if(this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>0)this.$MercuryUnreadState2.markFolderAsRead(p);};n.prototype.getIsThreadUnread=function(p,q){var r=q||c('MessagingTag').INBOX,s=this.$MercuryUnreadState15(r);return !!(s&&s[p]);};n.prototype.$MercuryUnreadState16=function(p,q){this.$MercuryUnreadState11[p].setResource(j,q);this.$MercuryUnreadState11[p].setResource(k,Object.keys(q));};n.prototype.$MercuryUnreadState17=function(p,q){var r=this.$MercuryUnreadState11[p].executeOrEnqueue(j,q),s=this.$MercuryUnreadState11[p].getUnavailableResources(r);if(s.length)this.$MercuryUnreadState2.fetchUnreadThreadIDs(p);};n.prototype.$MercuryUnreadState15=function(p){return this.$MercuryUnreadState11[p].getResource(j);};n.prototype.$MercuryUnreadState14=function(p){var q=this.$MercuryUnreadState11[p].getResource(k);if(q){return q.length;}else return this.$MercuryUnreadState9[p];};n.prototype.$MercuryUnreadState12=function(p,q){var r=void 0;(q.unread_thread_fbids||[]).forEach(function(s){r=s.folder;if(!this.$MercuryUnreadState18(r))return;var t=s.thread_fbids||[];t=t.concat(s.other_user_fbids||[]);var u=this.$MercuryUnreadState19(t);this.$MercuryUnreadState16(r,c('createObjectFrom')(u,true));if(u.length>l)this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState4.updatedUnreadState();}.bind(this));(q.message_counts||[]).forEach(function(s){if(s.unread_count===undefined)return;r=s.folder;if(s.unread_count>l){this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState();}else{this.$MercuryUnreadState9[r]=s.unread_count;if(this.$MercuryUnreadState9[r]===0)this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState();}}.bind(this));(q.global_actions||[]).forEach(function(s){if(s.action_type===c('MercuryGlobalActionType').MARK_ALL_READ)this.$MercuryUnreadState20(s.folder,s.timestamp);}.bind(this));(q.actions||[]).forEach(function(s){var t=c('MercuryActionType'),u=s.other_user_fbid?s.other_user_fbid:s.thread_fbid,v=s.thread_id?s.thread_id:u;if(s.action_type==t.DELETE_THREAD){i.forEach(function(x){this.$MercuryUnreadState21(x,v);}.bind(this));}else if(s.action_type==t.CHANGE_ARCHIVED_STATUS||s.action_type==t.CHANGE_FOLDER){var w=this.$MercuryUnreadState5.getThreadMetaNow(s.thread_id);!!w||h(0);r=c('MercuryFolders').getFromMeta(w);if(this.$MercuryUnreadState18(r)&&w.unread_count>0)this.$MercuryUnreadState22(r,v);i.forEach(function(x){if(x!=r)this.$MercuryUnreadState21(x,v);}.bind(this));}else{r=this.$MercuryUnreadState23(s);if(!this.$MercuryUnreadState18(r))return;if(s.action_type==t.CHANGE_READ_STATUS){if(s.mark_as_read){this.$MercuryUnreadState21(r,v,s.timestamp);}else this.$MercuryUnreadState22(r,v,s.timestamp);}else if(s.action_type==t.USER_GENERATED_MESSAGE||s.action_type==t.LOG_MESSAGE)if(s.is_unread)this.$MercuryUnreadState22(r,v,s.timestamp);}}.bind(this));};n.prototype.$MercuryUnreadState22=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){var t=this.$MercuryUnreadState7[p]||0,u=this.$MercuryUnreadState8[q]||0,v=r||Number.POSITIVE_INFINITY;if(v>=t&&v>=u&&!s[q]){s[q]=r||0;this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState();}}.bind(this));};n.prototype.$MercuryUnreadState21=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){if(r){var t=this.$MercuryUnreadState8[q];if(!t||t<r)this.$MercuryUnreadState8[q]=r;}var u=s[q];if(r&&typeof u=='number'&&r<u)return;if(q in s){delete s[q];this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState();}}.bind(this));};n.prototype.$MercuryUnreadState20=function(p,q){this.$MercuryUnreadState10[p]=false;this.$MercuryUnreadState16(p,{});this.$MercuryUnreadState7[p]=Math.max(this.$MercuryUnreadState7[p]||0,q||0);this.$MercuryUnreadState4.updatedUnreadState();};n.prototype.$MercuryUnreadState19=function(p){return p.map(this.$MercuryUnreadState3.convertThreadIDIfAvailable,this.$MercuryUnreadState3);};n.prototype.$MercuryUnreadState13=function(p){i.forEach(function(q){var r=this.$MercuryUnreadState15(q);if(!r)return;for(var s in p){var t=p[s];if(r[s]){r[t]=r[s];delete r[s];}}this.$MercuryUnreadState16(q,r);}.bind(this));};n.prototype.$MercuryUnreadState23=function(p){var q=p.thread_id?this.$MercuryUnreadState5.getThreadMetaNow(p.thread_id):null;return q?c('MercuryFolders').getFromMeta(q):p.folder?p.folder:'';};n.prototype.$MercuryUnreadState18=function(p){return c('arrayContains')(i,p);};var o=new (c('MercurySingletonProvider'))(n);f.exports=n;}),null);
__d('MessengerComposerActions',['MessengerDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null}),i={Types:h,addToken:function j(k){c('MessengerDispatcher').dispatch({type:h.ADD_TOKEN,entry:k});},moveDraftToNextThread:function j(k){c('MessengerDispatcher').dispatch({type:h.MOVE_DRAFT,threadID:k});},removeToken:function j(k){c('MessengerDispatcher').dispatch({type:h.REMOVE_TOKEN,entry:k});},focusComposer:function j(){c('MessengerDispatcher').dispatch({type:h.FOCUS_COMPOSER});},focusTypeahead:function j(){c('MessengerDispatcher').dispatch({type:h.FOCUS_TYPEAHEAD});},exitComposeState:function j(){c('MessengerDispatcher').dispatch({type:h.EXIT_COMPOSE_STATE});}};f.exports=i;}),null);
__d('MessengerComposerState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Record({step:null,recipients:c('immutable').List()});f.exports=h;}),null);
__d('MessengerComposerSteps',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});f.exports=h;}),null);
__d('MessengerComposerStore',['EditorState','immutable','MessengerActions','MessengerComposerActions','MessengerComposerState','MessengerComposerSteps','MessengerConstants','MessengerDispatcher','MessengerEditorStateManager','MessengerStateStore','MessengerStore','MessengerView'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('MessengerComposerState'))({step:c('MessengerComposerSteps').NULL,recipients:c('immutable').List()});h=babelHelpers.inherits(k,c('MessengerStore'));i=h&&h.prototype;function k(){i.constructor.call(this);this.$MessengerComposerStore1=j;}k.prototype.getState=function(){return this.$MessengerComposerStore1;};k.prototype.__onDispatch=function(l){c('MessengerDispatcher').waitFor([c('MessengerStateStore').getDispatchToken()]);var m=c('MessengerStateStore').getState().detailView,n=this.$MessengerComposerStore1.recipients,o=this.$MessengerComposerStore1.step,p=null,q=null;switch(l.type){case c('MessengerComposerActions').Types.ADD_TOKEN:if(n.some(function(v){return v.getUniqueID()===l.entry.getUniqueID();}))break;p=n.push(l.entry);break;case c('MessengerComposerActions').Types.REMOVE_TOKEN:var r=l.entry.getUniqueID(),s=n.findIndex(function(v){return v.getUniqueID()===r;});if(s!==-1)p=n['delete'](s);break;case c('MessengerComposerActions').Types.FOCUS_COMPOSER:if(o===c('MessengerComposerSteps').SELECT_RECIPIENTS)q=c('MessengerComposerSteps').COMPOSE;break;case c('MessengerComposerActions').Types.FOCUS_TYPEAHEAD:if(o===c('MessengerComposerSteps').COMPOSE)q=c('MessengerComposerSteps').SELECT_RECIPIENTS;break;case c('MessengerActions').Types.REPLACE_STATE:var t=c('MessengerStateStore').getPrevState().detailView;if(t!==c('MessengerView').DETAIL.COMPOSE&&m===c('MessengerView').DETAIL.COMPOSE)q=c('MessengerComposerSteps').SELECT_RECIPIENTS;break;case c('MessengerComposerActions').Types.MOVE_DRAFT:c('MessengerEditorStateManager').set(l.threadID,c('MessengerEditorStateManager').get(c('MessengerConstants').NEW_THREAD_KEY));break;case c('MessengerComposerActions').Types.EXIT_COMPOSE_STATE:var u=c('EditorState').createEmpty();setTimeout(function(){c('MessengerEditorStateManager').set(c('MessengerConstants').NEW_THREAD_KEY,c('EditorState').forceSelection(u,u.getSelection()));},0);q=c('MessengerComposerSteps').NULL;p=c('immutable').List();break;}if(p||q){this.$MessengerComposerStore1=new (c('MessengerComposerState'))({step:q||o,recipients:p||n});this.emitChange();}};f.exports=new k();}),null);
__d('MessengerMDotMeReferralStore',['MessengerActions','MessengerStore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MessengerStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null};}j.prototype.getState=function(){'use strict';return this.$MessengerMDotMeReferralStore1;};j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('MessengerActions').Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=k.refCode;this.$MessengerMDotMeReferralStore1.refThreadID=k.refThreadID;this.emitChange();}};f.exports=new j();}),null);
__d('FBRTCCallSummaryUploader',['Banzai','FBRTCCallSummary','FBRTCCallSummaryStore'],(function a(b,c,d,e,f,g){var h={init:function i(){var j=c('FBRTCCallSummaryStore').getInstance();c('Banzai').subscribe(c('Banzai').SEND,function(){c('FBRTCCallSummary').logSavedSummaries(j);});}};f.exports=h;}),null);
__d('MessengerRTCMessageHandler',['Bootloader','FBRTCCallSummaryUploader','FBRTCMessageListener','FBRTCSupport'],(function a(b,c,d,e,f,g){'use strict';var h=null,i=null,j={init:function m(){if(c('FBRTCSupport').isReceiveWebrtcSupported()){c('FBRTCCallSummaryUploader').init();c('FBRTCMessageListener').init(false);c('FBRTCMessageListener').once('messageReceived',function(n){k();});c('FBRTCMessageListener').once('multiwayMessageReceived',function(n){l(n);});}}};function k(){if(!h)c('Bootloader').loadModules(["FBRTCIncomingCallController","MessengerRTCIncomingDialogController","MessengerRTCMissedCallDialogController","MessengerRTCUnsupportedBrowserDialogController"],function(m,n,o,p){h=new m(n,p,o);c('FBRTCMessageListener').setMessageHandler(h.onMessageReceived,h);},'MessengerRTCMessageHandler');}function l(m){if(!i)c('Bootloader').loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(n,o){i=new n(o);c('FBRTCMessageListener').setMultiwayMessageHandler(i.onMessageReceived,i);i.onMessageReceived(m);},'MessengerRTCMessageHandler');}f.exports=j;}),null);
__d('MercurySearchContextResults',['KeyedCallbackManager','MercuryAPIArgsSource','MercuryIDs','MercuryThreadlistConstants','MercuryThreadIDMap','RangedCallbackManager','MercuryServerDispatcher','MercuryServerPayloadPreprocessor','WebMessengerConstants'],(function a(b,c,d,e,f,g){var h=c('MercuryThreadIDMap').get(),i=c('MercuryServerPayloadPreprocessor').get(),j=new (c('KeyedCallbackManager'))(),k=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_COUNT,l=c('WebMessengerConstants').MORE_SEARCH_CONTEXT_COUNT,m={getSearchContext:function q(r,s,t){if(r){var u=j.executeOrEnqueue(r,function(z){var aa=o(z,r);t(aa);}),v=j.getUnavailableResources(u);if(v.length){var w={message_id:r,limit:k+1},x=h.getServerIDFromClientIDNow(s),y=c('MercuryIDs').tokenize(s);if(y.type=='user'){w.other_user_fbid=x;}else w.thread_fbid=x;p(w);}return u;}},getMoreSearchContext:function q(r,s,t,u){if(r){var v=j.getResource(r);if(v){var w=t==c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP?v.up_message_ids:v.down_message_ids,x=w.getCurrentArraySize()+l,y=w.executeOrEnqueue(0,x,function(){var da=o(v,r);u(da);}),z=w.getUnavailableResources(y);if(z.length){var aa={message_id:r,limit:x,direction:t},ba=h.getServerIDFromClientIDNow(s),ca=c('MercuryIDs').tokenize(s);if(ca.type=='user'){aa.other_user_fbid=ba;}else aa.thread_fbid=ba;p(aa);}return y;}}},handleUpdate:function q(r){if(r.mercury_payload)i.handleUpdate(r.mercury_payload);var s=r.search_context||{};for(var t in s){var u=s[t],v=u.other_user_fbid||u.thread_fbid,w=h.getClientIDFromServerIDNow(v),x=!j.getResource(t),y=x?{thread_id:w,up_message_ids:new (c('RangedCallbackManager'))(),down_message_ids:new (c('RangedCallbackManager'))()}:j.getResource(t),z=x?k+1:l;if(u.up_message_ids&&(y.up_message_ids.getCurrentArraySize()===0||u.up_message_ids.length>=y.up_message_ids.getCurrentArraySize()))n(y.up_message_ids,u.up_message_ids,z);if(u.down_message_ids&&(y.down_message_ids.getCurrentArraySize()===0||u.down_message_ids.length>=y.down_message_ids.getCurrentArraySize()))n(y.down_message_ids,u.down_message_ids,z);if(x)j.setResource(t,y);}},unsubscribe:function q(r,s,t){if(s){var u=j.getResource(s);if(u){if(t==c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP){u.up_message_ids.unsubscribe(r);}else u.down_message_ids.unsubscribe(r);}else j.unsubscribe(r);}}};function n(q,r,s){var t=q.getCurrentArraySize(),u=r.length<t+s;if(r.length){q.removeAllResources();q.addResourcesWithoutSorting(r,0);}if(u)q.setReachedEndOfArray();}function o(q,r){var s=q.up_message_ids.hasReachedEndOfArray(),t=q.up_message_ids.getAllResources();if(!s)t.shift();var u=q.down_message_ids.hasReachedEndOfArray(),v=q.down_message_ids.getAllResources();if(!u)v.pop();return {thread_id:q.thread_id,message_id:r,up_message_ids:t,up_exhausted:s,down_message_ids:v,down_exhausted:u};}function p(q){q.client=c('MercuryAPIArgsSource').WEBMESSENGER;c('MercuryServerDispatcher').trySend('/ajax/mercury/search_context.php',q);}c('MercuryServerDispatcher').registerEndpoints({'/ajax/mercury/search_context.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,handler:m.handleUpdate}});f.exports=m;}),null);
__d('MercurySearchSnippetResults',['MessengerEnvironment','MercuryAPIArgsSource','MercuryIDs','MercurySingletonMixin','MercuryThreadlistConstants','MercuryThreadIDMap','RangedCallbackManager','MercuryServerDispatcher','MercuryServerPayloadPreprocessor'],(function a(b,c,d,e,f,g){var h=c('MessengerEnvironment').messengerui?c('MercuryAPIArgsSource').MESSENGER:c('MercuryAPIArgsSource').WEBMESSENGER,i={},j={},k=null,l=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_COUNT,m=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_LIMIT,n=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_MORE;function o(x){'use strict';this.$MercurySearchSnippetResults1=x;this.$MercurySearchSnippetResults2=c('MercuryServerPayloadPreprocessor').getForFBID(x);c('MercuryServerDispatcher').registerEndpoints({'/ajax/mercury/search_snippets.php':{request_user_id:x,mode:c('MercuryServerDispatcher').IMMEDIATE,handler:function(y){this.handleUpdate(y);}.bind(this)}});this.$MercurySearchSnippetResults3=c('MercuryThreadIDMap').getForFBID(x);}o.prototype.getFBID=function(){'use strict';return this.$MercurySearchSnippetResults1;};o.prototype.getThreadIDMap=function(){'use strict';return this.$MercurySearchSnippetResults3;};o.prototype.getAllThreadSearchResults=function(x,y){'use strict';if(x)p(this.$MercurySearchSnippetResults1,x,m,0,y);};o.prototype.getAllThreadSearchMoreResults=function(x,y){'use strict';if(x){var z=i[x];if(z){var aa=z.getCurrentArraySize();p(this.$MercurySearchSnippetResults1,x,n,aa,y);}}};o.prototype.getSingleThreadSearchResults=function(x,y,z){'use strict';if(!x||!y)return;q.call(this,x,y,l,0,z);};o.prototype.getSingleThreadSearchMoreResults=function(x,y,z){'use strict';if(!x||!y)return;if(!j[y])return;var aa=j[y][x];if(aa){var ba=aa.num_total_snippets,ca=aa.snippets_cbm.getCurrentArraySize(),da=ba-ca;if(da>0){var ea=da>n?n:da;q.call(this,x,y,ea,ca,z);}}};o.prototype.countSnippetsMatchingQueryInThread=function(x,y){'use strict';var z=j[y][x];if(z)return z.num_total_snippets;};o.prototype.findIndexOfSnippet=function(x,y,z,aa){'use strict';var ba=v(x,y),ca=ba.getAllResources();for(var da=0;da<ca.length;da++)if(z===ca[da].message_id)return da;};o.prototype.findSnippetAtIndex=function(x,y,z,aa){'use strict';s(x,y,z);t.call(this,x,y,z,aa);};o.prototype.handleUpdate=function(x){'use strict';if(x.mercury_payload)this.$MercurySearchSnippetResults2.handleUpdate(x.mercury_payload);var y=x.search_snippets||{};Object.keys(y).filter(function(oa){return !!y[oa];}).forEach(function(oa){Object.keys(y[oa]).forEach(function(pa){if(!y[oa][pa].snippets)return;y[oa][pa].snippets.forEach(function(qa){qa.matched_keywords=r(qa.matched_keywords);});});});var z=x.offset,aa=[];for(var ba in y){var ca=y[ba];for(var da in ca){var ea=ca[da],fa=x.other_user_fbid||x.thread_fbid,ga=this.$MercurySearchSnippetResults3.getClientIDFromServerIDNow(da),ha=ea.snippets,ia=v(ba,ga),ja=ia.getCurrentArraySize();if(!fa){aa.push(ga);if(ja)continue;}else if(z!=ja)continue;var ka=j[ga][ba];ka.num_total_snippets=ea.num_total_snippets;var la=ha?ha.length:0;if(la>0)ia.addResourcesWithoutSorting(ha,ja);if(!fa||x.limit>la)if(ia.getCurrentArraySize()==ka.num_total_snippets)ia.setReachedEndOfArray();}if(!fa){var ma=u(ba),na=ma.getCurrentArraySize();if(z==na){ma.addResourcesWithoutSorting(aa,na);if(x.limit>aa.length)ma.setReachedEndOfArray();}}}};function p(x,y,z,aa,ba){if(k)if(!k.thread_id){var ca=u(k.query);ca.unsubscribe(k.subscriber_id);k=null;}var ca=u(y),da=aa+z,ea=ca.executeOrEnqueue(0,da,function(ha){var ia={};for(var ja=0;ja<ha.length;ja++){var ka=ha[ja],la=j[ka][y];ia[ka]={num_total_snippets:la.num_total_snippets,snippets:la.snippets_cbm.getAllResources()};}var ma=ca.hasReachedEndOfArray();ba(ia,ma);}),fa=ca.getUnavailableResources(ea);if(fa.length){k={query:y,thread_id:null,subscriber_id:ea};var ga={query:y,offset:aa,limit:z+1,snippetLimit:l};ga.identifier='thread_fbid';w(ga,x);}}function q(x,y,z,aa,ba){if(k)if(k.thread_id){var ca=v(k.query,k.thread_id);ca.unsubscribe(k.subscriber_id);k=null;}var ca=v(x,y),da=aa+z,ea=ca.executeOrEnqueue(0,da,function(){var ka=ca.getAllResources(),la=j[y][x].num_total_snippets;ba(ka,la);}),fa=ca.getUnavailableResources(ea);if(fa.length){k={query:x,thread_id:y,subscriber_id:ea};var ga={query:x,snippetOffset:aa,snippetLimit:z},ha=this.getThreadIDMap().getServerIDFromClientIDNow(y),ia=c('MercuryIDs').tokenize(y),ja=ia.type;if(ja=='user'){ga.other_user_fbid=ha;}else ga.thread_fbid=ha;ga.identifier='thread_fbid';w(ga,this.getFBID());}}function r(x){if(x instanceof Array){var y={};for(var z=0;z<x.length;z++)y[z.toString()]=x[z];return y;}else return x;}function s(x,y,z){}function t(x,y,z,aa){var ba=j[y][x],ca=ba.snippets_cbm.getAllResources(),da=ba.num_total_snippets,ea=ca.length;if(z<ea){aa(ca[z].message_id);return;}var fa=da-ea,ga=fa>n?n:fa;q.call(this,x,y,ga,ea,function(ha,ia){t.call(this,x,y,z,aa);});}function u(x){if(!i[x])i[x]=new (c('RangedCallbackManager'))();return i[x];}function v(x,y){if(!j[y])j[y]={};var z=j[y][x];if(!z){z={num_total_snippets:-1,snippets_cbm:new (c('RangedCallbackManager'))()};j[y][x]=z;}return z.snippets_cbm;}function w(x,y){x.client=h;c('MercuryServerDispatcher').trySend('/ajax/mercury/search_snippets.php',x,null,y);}Object.assign(o,c('MercurySingletonMixin'));f.exports=o;}),null);
__d('MessengerThreadSearchStore',['cx','immutable','ImmutableObject','MercuryIDs','MercuryMessages','MercurySearchContextResults','MercurySearchSnippetResults','MercuryThreads','MessengerContentSearchDataTypedLogger','MessengerDispatcher','MessengerStateStore','MessengerStore','MessengerActions','MessengerThreadSearchActions','MessengerView'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').List,l=c('immutable').Record,m=l({downExhausted:null,loading:false,messages:null,query:null,results:k(),selectedIndex:0,threadID:null,totalCount:0,upExhausted:null,threads:null,threadsExhausted:null,mid:null});i=babelHelpers.inherits(n,c('MessengerStore'));j=i&&i.prototype;function n(){j.constructor.call(this);this.$MessengerThreadSearchStore3=new m();}n.prototype.getForFBID=function(o){this.$MessengerThreadSearchStore4=new (c('MercurySearchSnippetResults'))(o);this.$MessengerThreadSearchStore1=c('MercuryMessages').getForFBID(o);this.$MessengerThreadSearchStore2=c('MercuryThreads').getForFBID(o);};n.prototype.getState=function(){return this.$MessengerThreadSearchStore3;};n.prototype.__onDispatch=function(o){if(!this.$MessengerThreadSearchStore4)return;c('MessengerDispatcher').waitFor([c('MessengerStateStore').getDispatchToken()]);var p=c('MessengerStateStore').getState(),q=p.activeThreadID,r=p.masterView,s=p.mid,t=p.query,u=r===c('MessengerView').MASTER.SEARCH;switch(o.type){case c('MessengerActions').Types.REPLACE_STATE:if(s!=this.$MessengerThreadSearchStore3.mid&&q!=this.$MessengerThreadSearchStore3.activeThreadID){if(s&&q){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threadID:q,mid:s});c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(y){return this.setMessages(y);}.bind(this));}else this.$MessengerThreadSearchStore3=new m();return;}else if(this.$MessengerThreadSearchStore3.query!==t||this.$MessengerThreadSearchStore3.threadID!==q){if(t&&!s){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getSingleThreadSearchResults(t,q,function(){for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return this.accumulateSearchResultsAndEmitChange.apply(this,[t,q,0].concat(z));}.bind(this));}else{if(this.$MessengerThreadSearchStore3.query&&this.$MessengerThreadSearchStore3.results.size===0)this.logCurrentResult(null,'no_results_found','single_thread_search');var v=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);if(v!==undefined)this.logCurrentResult(v.toObject(),'search_ended','single_thread_search');this.$MessengerThreadSearchStore6();}if(u){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getAllThreadSearchResults(t,function(y,z){return this.setAllThreadResults(y,z);}.bind(this));}else this.$MessengerThreadSearchStore7();this.emitChange();}break;case c('MessengerThreadSearchActions').Types.CHANGE_RESULT_INDEX:var w=Math.max(Math.min(this.$MessengerThreadSearchStore3.totalCount-1,this.$MessengerThreadSearchStore3.selectedIndex+o.delta),0);if(w===this.$MessengerThreadSearchStore3.selectedIndex)break;if(w>=this.$MessengerThreadSearchStore3.results.size){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getSingleThreadSearchMoreResults(t,q,function(){for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return this.accumulateSearchResultsAndEmitChange.apply(this,[t,q,w].concat(z));}.bind(this));}else{this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({loading:true,selectedIndex:w});c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(y){return this.setMessages(y);}.bind(this));}this.emitChange();var x=this.$MessengerThreadSearchStore3.results.get(w).toObject();this.logCurrentResult(x,'result_loaded','single_thread_search');break;case c('MessengerThreadSearchActions').Types.GET_MORE_CONTEXT:this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);c('MercurySearchContextResults').getMoreSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,o.direction,function(y){return this.setMessages(y);}.bind(this));this.emitChange();break;case c('MessengerThreadSearchActions').Types.GET_MORE_THREADS:this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getAllThreadSearchMoreResults(t,function(y,z){return this.setAllThreadResults(y,z);}.bind(this));this.emitChange();break;}};n.prototype.logCurrentResult=function(o,p,q){var r=new (c('MessengerContentSearchDataTypedLogger'))().setSearchTerm(this.$MessengerThreadSearchStore3.query).setThreadFbid(c('MercuryIDs').getThreadFBIDFromThreadID(this.$MessengerThreadSearchStore3.threadID)).setNumResults(this.$MessengerThreadSearchStore3.results.size).setSearchOutcome(p).setSearchType(q);if(o!==undefined&&o!==null)r.setMessageID(o.message_id).setMessageTimestamp(o.timestamp).setResultIndex(this.$MessengerThreadSearchStore3.selectedIndex+1);r.log();};n.prototype.setAllThreadResults=function(o,p){var q=Object.keys(o),r=q.map(function(s){var t=this.$MessengerThreadSearchStore2.getThreadMetaNow(s);if(!t)return;var u=o[t.thread_id];if(!u)return;return new (c('ImmutableObject'))(babelHelpers['extends']({},t,{snippetCount:u.num_total_snippets}));}.bind(this)).filter(function(s){return s;});this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threads:r,threadsExhausted:p,loading:false});this.emitChange();};n.prototype.$MessengerThreadSearchStore7=function(){this.$MessengerThreadSearchStore8(['threads','threadsExhausted','loading']);};n.prototype.accumulateSearchResultsAndEmitChange=function(o,p,q,r,s){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({query:o,threadID:p,selectedIndex:q,results:r,totalCount:s});if(this.$MessengerThreadSearchStore3.results.size){c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(u){return this.setMessages(u);}.bind(this));var t=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);this.logCurrentResult(t.toObject(),'search_started','single_thread_search');}else this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({messages:null});this.emitChange();};n.prototype.$MessengerThreadSearchStore6=function(){this.$MessengerThreadSearchStore8(['query','threadID','selectedIndex','results','totalCount','downExhausted','loading','messages','upExhausted']);};n.prototype.$MessengerThreadSearchStore8=function(o){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.withMutations(function(p){o.forEach(function(q){return p.remove(q);});});};n.prototype.setMessages=function(o){var p=this.$MessengerThreadSearchStore1.getMessagesFromIDs([].concat(o.up_message_ids,o.message_id,o.down_message_ids)).map(function(q){var r,s=this;if(q&&q.message_id===o.message_id)if(!this.$MessengerThreadSearchStore3.results.isEmpty()){var r=function(){var t=s.$MessengerThreadSearchStore3.results.get(s.$MessengerThreadSearchStore3.selectedIndex).toJS(),u=t.matched_keywords,v=q.body.indexOf(t.body),w=Object.keys(t.matched_keywords).map(function(x){return {offset:v+Number(x),length:u[x].length,entity:{url:''},className:"__in"};});return {v:new (c('ImmutableObject'))(babelHelpers['extends']({},q,{ranges:q.ranges?q.ranges.concat(w):w}))};}();if(typeof r==="object")return r.v;}else return new (c('ImmutableObject'))(babelHelpers['extends']({},q,{isSelected:true}));return q;}.bind(this));this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({downExhausted:o.down_exhausted,loading:false,messages:p,upExhausted:o.up_exhausted});this.emitChange();};n.prototype.$MessengerThreadSearchStore5=function(){return this.$MessengerThreadSearchStore3.mid||this.$MessengerThreadSearchStore3.results.getIn([this.$MessengerThreadSearchStore3.selectedIndex,'message_id']);};f.exports=new n();}),null);
__d('MessengerURIListener',['MessengerActions','MessengerURISerializer','PageTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=false,i={start:function k(){if(!h)c('PageTransitions').registerHandler(j,6);h=true;},stop:function k(){c('PageTransitions').removeHandler(j,6);h=false;}};function j(k){var l=c('MessengerURISerializer').deserialize(k);if(l.notMessenger)return false;c('PageTransitions').transitionComplete();c('MessengerActions').changeState(l);return true;}f.exports=i;}),null);
__d('FBPaymentsDialogStore',['FBPaymentsDialogActions','FBPaymentsDispatcher','FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('FBPaymentsDispatcher'));this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};}j.prototype.__onDispatch=function(k){var l=k.type,m=k.data;switch(l){case c('FBPaymentsDialogActions').types.SHOW_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:m.dialogClass,dialogProps:m.dialogProps};this.__emitChange();break;case c('FBPaymentsDialogActions').types.HIDE_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};this.__emitChange();break;}};j.prototype.getState=function(){return this.$FBPaymentsDialogStore1;};f.exports=new j();}),null);
__d('FBPaymentsDialogContainer.react',['FBPaymentsDialogStore','FBPaymentsDispatcher','FluxContainer','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.calculateState=function(){return c('FBPaymentsDialogStore').getState();};j.getStores=function(){return [c('FBPaymentsDialogStore')];};j.prototype.componentWillMount=function(){c('FBPaymentsDispatcher').explicitlyRegisterStore(c('FBPaymentsDialogStore'));};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c('React').createElement(k,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j);}),null);
__d('MNCommerceDialogContainer.react',['MNCommerceDialogStateStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'MNCommerceDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommerceDialogStateStore'))],statics:{calculateState:function i(){var j=c('MNCommerceDialogStateStore').getDialogContainer();return {dialogContainer:j};}},render:function i(){var j=this.state.dialogContainer;if(!j)return null;return c('React').createElement(j,null);}});f.exports=h;}),null);
__d("XSettingsEmployeeBetaController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/settings\/employee\/beta_mode\/",{enabled:{type:"Bool",defaultValue:false}});}),null);
__d('MessengerBugNub.react',['cx','fbt','ix','AsyncRequest','Image.react','Link.react','MessengerEnvironment','MessengerMenu.react','MessengerPopoverMenu.react','React','Tooltip','URI','XSettingsEmployeeBetaController','goURI'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=j("86836"),n=j("86835"),o=j("86837"),p=c('React').PropTypes,q=c('MessengerMenu.react').Item,r=c('MessengerMenu.react').Separator;k=babelHelpers.inherits(s,c('React').PureComponent);l=k&&k.prototype;s.prototype.render=function(){return c('React').createElement('div',{className:"_4_xe"},this.$MessengerBugNub1(),c('React').createElement(c('Link.react'),babelHelpers['extends']({href:'#',ajaxify:'/ajax/bugs/employee_report',className:"_1fr8",rel:'dialog'},c('Tooltip').propsFor(i._("Report a bug"))),c('React').createElement('div',{className:"_1gng"},c('React').createElement(c('Image.react'),{src:m}))));};s.prototype.$MessengerBugNub1=function(){var t=this.props.isBetaEnabled?n:o,u=i._("Internal preferences");return c('React').createElement(c('MessengerPopoverMenu.react'),babelHelpers['extends']({className:"_1fr8",menu:this.$MessengerBugNub2()},c('Tooltip').propsFor(u)),c('React').createElement(c('Link.react'),{'aria-haspopup':'true','aria-label':u,className:"_1gng",href:'#',role:'button'},c('React').createElement(c('Image.react'),{src:t})));};s.prototype.$MessengerBugNub2=function(){var t,u=this,v=null;if(this.props.unixName)(function(){var w=u.props.unixName+'.sb';v=c('React').createElement(q,{label:'Sandbox',onclick:function(){return this.$MessengerBugNub3(w);}.bind(u)});})();return c('React').createElement(c('MessengerMenu.react'),null,c('React').createElement(q,{label:'Public',onclick:function(){return this.$MessengerBugNub4(false);}.bind(this)}),c('React').createElement(q,{label:'Beta',onclick:function(){return this.$MessengerBugNub4(true);}.bind(this)}),c('React').createElement(r,null),c('React').createElement(q,{label:'C1 (trunkstable)',onclick:function(){return this.$MessengerBugNub3('trunkstable');}.bind(this)}),c('React').createElement(q,{label:'Latest',onclick:function(){return this.$MessengerBugNub3('latest');}.bind(this)}),c('React').createElement(q,{label:'Intern',onclick:function(){return this.$MessengerBugNub3('intern');}.bind(this)}),c('React').createElement(q,{label:'Production',onclick:function(){return this.$MessengerBugNub3('prod');}.bind(this)}),v);};s.prototype.$MessengerBugNub4=function(t){var u=c('XSettingsEmployeeBetaController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(u).setData({enabled:t}).setMethod('POST').setAllowCrossPageTransition(true).send();};s.prototype.$MessengerBugNub3=function(t){var u=c('URI').getRequestURI(),v=c('MessengerEnvironment').facebookdotcom?'.facebook.com':'.messenger.com',w='www'+(t?'.'+t:'')+v;c('goURI')(new (c('URI'))(window.location.href).setProtocol(u.getProtocol()).setDomain(w).setSubdomain(u.getSubdomain()).setPath(u.getPath()).setQueryData(u.getQueryData()).setFragment(u.getFragment()));};function s(){k.apply(this,arguments);}s.propTypes={isBetaEnabled:p.bool,unixName:p.string};f.exports=s;}),null);
__d('MercuryCanonicalGroupThreadActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({THREAD_SEARCH_UPDATED:null});}),null);
__d('MercuryCanonicalGroupThreadStore',['MercuryCanonicalGroupThreadActionTypes','FluxStore','MercuryCanonicalGroupThreadManager','MessengerDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MercuryCanonicalGroupThreadStore1=c('MercuryCanonicalGroupThreadManager').get();}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('MercuryCanonicalGroupThreadActionTypes').THREAD_SEARCH_UPDATED:this.__emitChange();break;default:break;}};j.prototype.getOrFetch=function(k){var l=this.$MercuryCanonicalGroupThreadStore1.getNow(k);if(!l)this.$MercuryCanonicalGroupThreadStore1.getCanonicalGroupThreadIDForParticipants(k,function(){c('MessengerDispatcher').dispatch({type:c('MercuryCanonicalGroupThreadActionTypes').THREAD_SEARCH_UPDATED});});return l;};f.exports=new j();}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/postback_ref\/",{page_id:{type:"String",required:true},ref:{type:"String",required:true},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}});}),null);
__d('MNCommercePostbackRefSendManager',['AsyncRequest','MessengerActions','MessengerMDotMeReferralStore','XMNCommercePostbackRefSendController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.sendMDotMeRef=function(i,j){var k=this.getMdotMeRef();if(this.shouldSendRef(j,i)){var l=c('XMNCommercePostbackRefSendController').getURIBuilder().setString('page_id',i).setString('ref',k).getURI();new (c('AsyncRequest'))().setURI(l).setMethod('post').send();c('MessengerActions').changeMDotMeReferral();}};h.prototype.shouldSendRef=function(i,j){if(!j||!i)return false;return this.hasMDotMeRef(j);};h.prototype.hasMDotMeRef=function(i){var j=c('MessengerMDotMeReferralStore').getState();return !!(j.refCode&&i&&j.refThreadID&&j.refThreadID.toString()===i);};h.prototype.getMdotMeRef=function(){var i=c('MessengerMDotMeReferralStore').getState();return i.refCode;};function h(){}f.exports=new h();}),null);
__d('MercuryReadOnlyReason',['fbt','Link.react','MercuryConfig','React','URI'],(function a(b,c,d,e,f,g,h){'use strict';var i={getReason:function j(){var k=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(k){var l=c('MercuryConfig').DYIDeepLink;return h._("Sorry, this conversation isn't active any more because messages can no longer be sent to email addresses. After 1 May 2016, conversations with email addresses will only be available in a copy of your Facebook data. {download your information}",[h.param('download your information',c('React').createElement('a',{href:l},h._("Learn more")))]);}else if(c('MercuryConfig').ViewerIsReadOnly){return h._("You've been temporarily blocked from sending messages. {learn more about blocks}",[h.param('learn more about blocks',c('React').createElement(c('Link.react'),{href:new (c('URI'))('https://www.facebook.com/help/181183045316843'),target:'_blank'},'Learn more'))]);}else if(c('MercuryConfig').ColdOpenBlock){return h._("You're temporarily blocked from starting new conversations. {learn more about blocks}",[h.param('learn more about blocks',c('React').createElement(c('Link.react'),{href:new (c('URI'))('https://www.facebook.com/help/181183045316843'),target:'_blank'},'Learn more'))]);}else return h._("You cannot reply to this conversation.");}};f.exports=i;}),null);
__d('MNAdsLogMessageUtils',['MercuryConfig','MessagingTag','MessengerAdsWebTypedLogger','MNAdsLoggerEventEnum','AdPageMessageTypeEnum'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryConfig').LOG_INTERVAL_MS||60000;function i(){this.$MNAdsLogMessageUtils1={};}i.prototype.isLoggedWithinInterval=function(j){if(this.$MNAdsLogMessageUtils1[j]&&this.$MNAdsLogMessageUtils1[j]-Date.now()<h)return true;return false;};i.prototype.setLoggingTime=function(j){this.$MNAdsLogMessageUtils1[j]=Date.now();};i.prototype.logAdsThreadListImpression=function(j){switch(j.folder){case c('MessagingTag').INBOX:this.logWithThreadMetaData(j,c('MNAdsLoggerEventEnum').MESSAGE_SEEN_INBOX);break;case c('MessagingTag').PENDING:this.logWithThreadMetaData(j,c('MNAdsLoggerEventEnum').MESSAGE_SEEN_REQUEST);break;default:return;}};i.prototype.logWithThreadMetaData=function(j,event){if(j.last_message_type!==c('AdPageMessageTypeEnum').NON_AD){var k=j.last_message_timestamp+String(event);if(!c('MercuryConfig').MercuryThreadListEnableImpressionLog||this.isLoggedWithinInterval(k))return;new (c('MessengerAdsWebTypedLogger'))().setEvent(event).setMessageTimestamp(j.last_message_timestamp).setPageID(j.other_user_fbid).log();this.setLoggingTime(k);}};f.exports=new i();}),null);
__d('MercuryShareAttachmentSnippet.react',['MercuryShareAttachmentReactShape','MercuryShareStyleMap','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=c('MercuryShareStyleMap').getStyleFactory(this.props.attachment);if(l.factory&&!!l.factory.getSnippetComponent){var m=l.factory.getSnippetComponent();return c('React').createElement(m,babelHelpers['extends']({},this.props,{attachment:l.attachment}));}return null;};function k(){h.apply(this,arguments);}k.propTypes={attachment:c('MercuryShareAttachmentReactShape'),isSenderViewer:j.bool,senderName:j.oneOfType([j.string,j.object])};f.exports=k;}),null);
__d('MercuryAttachmentSnippet.react',['cx','ix','fbt','EmoticonsList','Image.react','MercuryAttachment','MercuryAttachmentSnippetRenderer','MercuryAttachmentSnippetType','MercuryAttachmentType','MercuryIDs','MercuryShareAttachmentSnippet.react','MessengerTextWithEmoticons.react','MercuryParticipants','React','StickerConstants','TextWithEmoticons.react','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$MercuryAttachmentSnippet6=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').PHOTO,this.$MercuryAttachmentSnippet18,v,this.$MercuryAttachmentSnippet5));}.bind(this),this.$MercuryAttachmentSnippet7=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').GIF,this.$MercuryAttachmentSnippet18,v,this.$MercuryAttachmentSnippet5));}.bind(this),this.$MercuryAttachmentSnippet8=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').VIDEO,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet9=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').AUDIO_CLIP,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet15=function(v){return c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet11=function(v){return c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').STICKER,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet12=function(v){if(!!this.$MercuryAttachmentSnippet5[0].share)return c('React').createElement(c('MercuryShareAttachmentSnippet.react'),{attachment:this.$MercuryAttachmentSnippet5[0].share,senderName:v,isViewerSender:this.$MercuryAttachmentSnippet18});return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').SHARE,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet13=function(v){return c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').GIFT,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet16=function(v){return c('React').createElement('span',null,this.$MercuryAttachmentSnippet5.filter(function(w){return w.attach_type===c('MercuryAttachmentType').FILE||w.attach_type===c('MercuryAttachmentType').PHOTO||w.attach_type===c('MercuryAttachmentType').VIDEO;}).map(function(w,x){return this.$MercuryAttachmentSnippet17(w.name,w.icon_type,x);}.bind(this)));}.bind(this),this.$MercuryAttachmentSnippet17=function(v,w,x){var y=c('MercuryAttachment').getAttachIconClass(w||this.$MercuryAttachmentSnippet5[0].icon_type),z=c('joinClasses')(y,"uiIconText _3l6h");return c('React').createElement('span',{key:x},c('React').createElement('span',{className:z},c('React').createElement(c('Image.react'),{src:i("86988")})),v);}.bind(this),this.$MercuryAttachmentSnippet14=function(v){var w=c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').ERROR,this.$MercuryAttachmentSnippet18,v);return this.$MercuryAttachmentSnippet17(w);}.bind(this),this.$MercuryAttachmentSnippet2=function(v){this.$MercuryAttachmentSnippet19=v.viewer;this.$MercuryAttachmentSnippet20=v.thread.snippet_sender;this.$MercuryAttachmentSnippet5=v.thread.snippet_attachments;this.$MercuryAttachmentSnippet18=p(this.$MercuryAttachmentSnippet20,this.$MercuryAttachmentSnippet19);}.bind(this),this.$MercuryAttachmentSnippet1=function(v){if(!v)return;this.$MercuryAttachmentSnippet3();if(!c('MercuryParticipants').getNow(v))this.$MercuryAttachmentSnippet21=c('MercuryParticipants').get(v,function(w){return this.forceUpdate();}.bind(this));}.bind(this),this.$MercuryAttachmentSnippet3=function(){this.$MercuryAttachmentSnippet21&&this.$MercuryAttachmentSnippet21.remove();}.bind(this),r;}n.prototype.componentWillMount=function(){this.$MercuryAttachmentSnippet1(this.props.thread.snippet_sender);this.$MercuryAttachmentSnippet2(this.props);};n.prototype.componentWillReceiveProps=function(q){this.$MercuryAttachmentSnippet1(q.thread.snippet_sender);this.$MercuryAttachmentSnippet2(q);};n.prototype.componentWillUnmount=function(){this.$MercuryAttachmentSnippet3();};n.prototype.render=function(){var q=this.$MercuryAttachmentSnippet4(),r=c('MercuryAttachmentSnippetRenderer').getAttachmentSnippetType(this.$MercuryAttachmentSnippet5);switch(r){case c('MercuryAttachmentSnippetType').PHOTO:return this.$MercuryAttachmentSnippet6(q);case c('MercuryAttachmentSnippetType').GIF:return this.$MercuryAttachmentSnippet7(q);case c('MercuryAttachmentSnippetType').VIDEO:return this.$MercuryAttachmentSnippet8(q);case c('MercuryAttachmentSnippetType').AUDIO_CLIP:return this.$MercuryAttachmentSnippet9(q);case c('MercuryAttachmentSnippetType').LIKE_STICKER:return this.$MercuryAttachmentSnippet10(q);case c('MercuryAttachmentSnippetType').STICKER:return this.$MercuryAttachmentSnippet11(q);case c('MercuryAttachmentSnippetType').SHARE:return this.$MercuryAttachmentSnippet12(q);case c('MercuryAttachmentSnippetType').GIFT:return this.$MercuryAttachmentSnippet13(q);case c('MercuryAttachmentSnippetType').ERROR:return this.$MercuryAttachmentSnippet14(q);case c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER:return this.$MercuryAttachmentSnippet15(q);default:return this.$MercuryAttachmentSnippet16(q);}};n.prototype.$MercuryAttachmentSnippet10=function(q){var r=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,text:c('EmoticonsList').symbols.like});if(this.$MercuryAttachmentSnippet18){return c('React').createElement('span',null,j._("You: {conversation_snippet}",[j.param('conversation_snippet',r)]));}else return this.props.thread.is_canonical?c('React').createElement('span',null,j._("{conversation_snippet}",[j.param('conversation_snippet',r)])):c('React').createElement('span',null,j._("{sender name}: {conversation_snippet}",[j.param('sender name',q),j.param('conversation_snippet',r)]));};n.prototype.$MercuryAttachmentSnippet4=function(){if(!this.$MercuryAttachmentSnippet20||this.$MercuryAttachmentSnippet18)return null;var q=c('MercuryParticipants').getNow(this.$MercuryAttachmentSnippet20);if(!q)return null;var r=c('MercuryIDs').getUserIDFromParticipantID(this.$MercuryAttachmentSnippet20),s=this.props.thread.custom_nickname&&this.props.thread.custom_nickname[r];if(s)s=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:s});return s?s:q.short_name;};n.propTypes={thread:m.object.isRequired,viewer:m.string.isRequired};function o(q){return q==c('StickerConstants').LIKE_STICKER_ID||q==c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID||q==c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID||q==c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID;}function p(q,r){return !!(q&&c('MercuryIDs').getParticipantIDFromUserID(r)==q);}f.exports=n;}),null);
__d('MercuryThreadSnippet.react',['cx','fbt','immutable','ImmutableObject','MercuryAttachmentSnippet.react','MercuryConfig','MercuryIDs','MessengerTextWithEmoticons.react','MNAdsLogMessageUtils','React','TextWithEmoticons.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.shouldComponentUpdate=function(p){return this.props.shouldRenderYou!==p.shouldRenderYou||this.props.thread!==p.thread||this.props.viewer!==p.viewer||this.props.className!==p.className||!c('immutable').is(p.participants,this.props.participants);};m.prototype.render=function(){return c('React').createElement('span',{className:this.props.className},this.$MercuryThreadSnippet1(),this.$MercuryThreadSnippet2());};m.prototype.$MercuryThreadSnippet1=function(){if(!this.props.thread.snippet||!n(this.props.thread))return null;return c('React').createElement('span',{className:"_j0r"});};m.prototype.$MercuryThreadSnippet2=function(){var p=this.props.thread,q=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),r=p.snippet,s=this.props.shouldRenderYou;if(p.snippetCount!=null)return i._({"*":"{number} results","268435456":"1 result"},[i.plural(p.snippetCount,'number')]);if(!r&&(p.snippet_attachments&&p.snippet_attachments.length>0||!p.snippet_sender))return this.$MercuryThreadSnippet3(r);var t=this.$MercuryThreadSnippet3(r),u=p.participants?p.participants.length:0;if(p.is_subscribed)u--;c('MNAdsLogMessageUtils').logAdsThreadListImpression(p);var v=o(p);if(v)return i._("{name}: {conversation_snippet}",[i.param('name',v),i.param('conversation_snippet',t)]);if(p.snippet_sender===q){if(!s)return t;return i._("You: {conversation_snippet}",[i.param('conversation_snippet',t)]);}if(u<=1&&!this.props.shouldAlwaysRenderSender)return t;var w=this.props.participants.get(p.snippet_sender);if(!w)return t;var x=w.short_name||w.name;if(p){var y=p.custom_nickname?p.custom_nickname:null,z=c('MercuryIDs').getUserIDFromParticipantID(w.id);if(y&&z&&y[z])x=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:y[z]});}if(!x)return t;return i._("{name}: {conversation_snippet}",[i.param('name',x),i.param('conversation_snippet',t)]);};m.prototype.$MercuryThreadSnippet3=function(p){if(p&&p.startsWith('?OTR'))return i._("[encrypted message]");if(p)return c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:p.replace(/\r\n|[\r\n]/g,' ')});var q=this.props.thread;if(n(q))return c('React').createElement(c('MercuryAttachmentSnippet.react'),{thread:q,viewer:this.props.viewer});return null;};function m(){j.apply(this,arguments);}m.propTypes={participants:l.instanceOf(c('immutable').Map).isRequired,shouldAlwaysRenderSender:l.bool,shouldRenderYou:l.bool,thread:l.object.isRequired,viewer:l.string.isRequired};function n(p){return !!(p.snippet_attachments&&p.snippet_attachments.length>0);}function o(p){if(p&&p.snippet_attachments&&p.snippet_attachments[0]&&p.snippet_attachments[0].share&&p.snippet_attachments[0].share.target&&p.snippet_attachments[0].share.target.genie_name)return p.snippet_attachments[0].share.target.genie_name;return null;}f.exports=m;}),null);
__d('MessengerSingleSectionContactList.react',['cx','MessengerContactAdapters','MessengerContactList.react','MessengerTypeaheadUtils','React','TypeaheadViewPropTypes','joinClasses','wrapNullableForReact'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.entries,n=l.viewProps,o=(!m.length?"_599s":'')+(' '+"_29hl")+(' '+"_8i1")+(' '+"_11_d")+(' '+"_4p-s");return c('React').createElement(c('MessengerContactList.react'),{ariaOwneeID:this.props.ariaOwneeID,className:c('joinClasses')(this.props.className,o,n.className),contactAdapter:c('MessengerContactAdapters').fromSearchableEntry,hasHoverState:true,highlightedEntry:c('wrapNullableForReact')(this.props.highlightedEntry),isLoading:false,listSections:c('MessengerTypeaheadUtils').buildSingleSection(m),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:n.viewer});};function k(){i.apply(this,arguments);}k.propTypes=c('TypeaheadViewPropTypes');k.defaultProps={role:'listbox'};f.exports=k;}),null);
__d("XShareScrapeAttachmentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/message_share_attachment\/fromURI\/",{});}),null);
__d('MessengerURLUploader',['AsyncRequest','Event','SubscriptionsHandler','URLMatcher','XShareScrapeAttachmentAsyncController'],(function a(b,c,d,e,f,g){'use strict';var h=c('XShareScrapeAttachmentAsyncController').getURIBuilder().getURI(),i=920,j=920;function k(l,m){this.$MessengerURLUploader3=l;this.$MessengerURLUploader5=new (c('SubscriptionsHandler'))();this.initInput(m);}k.prototype.getData=function(){return this.$MessengerURLUploader2;};k.prototype.getMatchedURL=function(){return this.$MessengerURLUploader4;};k.prototype.initInput=function(l){this.$MessengerURLUploader5.addSubscriptions(c('Event').listen(l,'keyup',this.handleInputValueChange.bind(this)),c('Event').listen(l,'paste',this.handleInputValueChange.bind(this)));};k.prototype.handleInputValueChange=function(l){var m=this.$MessengerURLUploader3(),n=c('URLMatcher').match(m);if(!!n){if(this.$MessengerURLUploader4!==n){this.$MessengerURLUploader4=n;this.$MessengerURLUploader2=null;this.loadShare();}}else{this.$MessengerURLUploader4=null;this.$MessengerURLUploader2=null;}};k.prototype.loadShare=function(){if(this.$MessengerURLUploader1&&this.$MessengerURLUploader1.abort)this.$MessengerURLUploader1.abort();var l=this.$MessengerURLUploader4;if(l)this.$MessengerURLUploader1=new (c('AsyncRequest'))().setMethod('POST').setURI(h).setData({uri:l,image_width:j,image_height:i,disallow_delayed:true}).setHandler(this.handleShareLoad.bind(this,l)).send();};k.prototype.handleShareLoad=function(l,m){if(l===this.$MessengerURLUploader4)this.$MessengerURLUploader2=(m.payload||0).share_data;};f.exports=k;}),null);
__d('MessengerComposerInput.react',['cx','fbt','AbstractMentionsTextEditor.react','Bootloader','CompositeDraftDecorator','DebouncedMentionsTextEditor.react','DraftModifier','DOMDimensions','EditorState','EmojiFormat','MessengerEmojiSpan.react','MessengerEmoticonSpan.react','MessengerMentionsEntityDecorator.react','MessengerSingleSectionContactList.react','Event','immutable','MentionsLayer.react','MercuryConfig','MercuryIDs','MercuryThreadIDMap','MercuryThreadSnippet.react','MercuryThreadTitle.react','MercuryTimestamp','MercuryTriodeSourceUtil','MessengerBotMenuButton.react','MessengerConstants','messengerDomIDsRe','MessengerEditorStateManager','MessengerMentionSource','MessengerTabIndices','MessengerURLUploader','React','ReactDOM','Run','TypingDetectorController','URLMatcher','clearImmediate','createMessengerMentionDraftEntity','createMentionsSearchSourceFromParticipants','debounce','getEntityMatcher','getProfileRangesForContentState','getThreadTypeNameFromThreadType','getVisibleValueForContentStateWithMessengerEmoji','handleBeforeInputForMessengerEmoji','handleBeforeInputForMessengerEmoticon','handleSoftNewlineForMessengerEmoticon','insertEmoticonIntoEditorState','insertMentionIntoEditorState','insertMessengerEmojiIntoContentState','isSoftNewlineEvent','setImmediate','shouldNotRenderSegoe','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerDomIDsRe').ids,m=c('React').PropTypes,n=1,o=/^image\//,p='handled',q=8,r='not-handled';j=babelHelpers.inherits(s,c('React').PureComponent);k=j&&j.prototype;function s(v){k.constructor.call(this,v);t.call(this);this.$MessengerInput11=this.$MessengerInput11.bind(this);this.state=this.$MessengerInput12();this.$MessengerInput6=c('debounce')(function(w){if(this.props.isComposing&&w.isComposing)return;if(!this.props.thread||!w.thread||u(this.props,w))this.$MessengerInput13();}.bind(this),300);this.$MessengerInput7=c('throttle')(function(){if(this.$MessengerInput10){var w=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this)).height;if(this.$MessengerInput1!==w)this.props.onResize&&this.props.onResize();this.$MessengerInput1=w;}}.bind(this),100);}s.prototype.$MessengerInput12=function(v){return {editorState:this.$MessengerInput14(c('MessengerEditorStateManager').get(this.props.threadID),v)};};s.prototype.componentDidMount=function(){this.$MessengerInput10=true;this.$MessengerInput1=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this)).height;this.$MessengerInput13();this.$MessengerInput2=new (c('MessengerURLUploader'))(this.getValue,c('ReactDOM').findDOMNode(this.refs.input));c('Run').onUnload(this.$MessengerInput15);this.$MessengerInput3=c('Event').listen(window,'blur',this.$MessengerInput15);this.$MessengerInput4=c('Event').listen(window,'focus',this.$MessengerInput16);this.$MessengerInput5=c('debounce')(function(){this.$MessengerInput17();}.bind(this),1000);};s.prototype.componentWillUpdate=function(v){if(this.props.threadID!==v.threadID)this.$MessengerInput17();};s.prototype.componentDidUpdate=function(v,w){this.$MessengerInput9=c('setImmediate')(this.$MessengerInput7);if(this.props.threadID!==v.threadID){this.$MessengerInput13();}else this.$MessengerInput6(v);if(w.editorState!==this.state.editorState)this.props.onChange&&this.props.onChange(this.getValue());};s.prototype.componentWillUnmount=function(){this.$MessengerInput10=false;this.$MessengerInput8&&this.$MessengerInput8.destroy();this.props.threadID&&this.$MessengerInput17();this.$MessengerInput9&&c('clearImmediate')(this.$MessengerInput9);this.$MessengerInput3&&this.$MessengerInput3.remove();this.$MessengerInput4&&this.$MessengerInput4.remove();};s.prototype.insertEmoticon=function(v){var w=c('insertEmoticonIntoEditorState')(v,this.state.editorState);if(w!==this.state.editorState)this.$MessengerInput18(w);};s.prototype.insertEmoji=function(v){var w=this.state.editorState,x=c('insertMessengerEmojiIntoContentState')(c('EmojiFormat').codeArrayToCodeString(v),w.getCurrentContent(),w.getSelection(),w.getCurrentInlineStyle()),y=c('EditorState').push(w,x,'insert-characters');if(y!==this.state.editorState)this.$MessengerInput18(c('EditorState').forceSelection(y,x.getSelectionAfter()));};s.prototype.$MessengerInput13=function(){if(!this.$MessengerInput10)return;this.$MessengerInput21();var v=this.$MessengerInput12();if(this.props.mentionsEnabled){var w=this.props,x=w.participants,y=w.viewer,z=w.thread;v.mentionsSource=c('createMentionsSearchSourceFromParticipants')(y,x&&x.toArray(),z);}this.setState(v,function(){if(this.props.threadID!==c('MessengerConstants').NEW_THREAD_KEY)c('setImmediate')(function(){if(!this.props.disableAutofocus)this.focus();}.bind(this));}.bind(this));};s.prototype.$MessengerInput17=function(){if(!this.props.threadID)return;c('MessengerEditorStateManager').set(this.props.threadID,this.state.editorState);};s.prototype.$MessengerInput22=function(v){this.setState({editorState:this.$MessengerInput14(c('EditorState').createEmpty()),addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null},v);};s.prototype.$MessengerInput21=function(){this.$MessengerInput8&&this.$MessengerInput8.destroy();this.$MessengerInput8=null;var v=this.props.viewer;if(!v)return;var w=c('ReactDOM').findDOMNode(this.refs.input);if(this.props.threadID!==c('MessengerConstants').NEW_THREAD_KEY&&w)this.$MessengerInput8=new (c('TypingDetectorController'))(c('MercuryIDs').getUserIDFromThreadID(this.props.threadID),w,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),null,c('MercuryThreadIDMap').getForFBID(v).getServerIDFromClientIDNow(this.props.threadID),this.getValue);};s.prototype.$MessengerInput20=function(){var v=this.getMentions();if(this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:v},function(w){var x,y=this;if(w&&this.props.mentionsEnabled&&(v&&v.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource))(function(){var z=y.state,aa=z.addedMentionsCount,ba=z.mentionsTriggeredCount,ca=z.mentionsTriggerSource,da=y.props,ea=da.thread,fa=da.participants,ga=w;c('Bootloader').loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(ha,ia){new ha().setEvent(ia.MENTION).setGroupSize(fa&&fa.size).setNumDelivered(v&&v.length||0).setNumSelects(aa).setNumTriggers(ba).setThreadid(ea&&ea.thread_id).setThreadType(c('getThreadTypeNameFromThreadType')(ea&&ea.thread_type)).setOfflineThreadid(ga.offline_threading_id).updateExtraData({source:ca}).log();},'MessengerComposerInput.react');})();}.bind(this)))this.$MessengerInput22(function(){this.$MessengerInput17();this.$MessengerInput8&&this.$MessengerInput8.resetState();}.bind(this));};s.prototype.getMentions=function(){return c('getProfileRangesForContentState')(this.state.editorState.getCurrentContent());};s.prototype.getInput=function(){return this.refs.input;};s.prototype.render=function(){var v=this.props,w=v.participants,x=v.thread,y=v.viewer,z=null;if(w&&x&&y){z=i._("Conversation with {participantListAsShownInThreadList}. Updated {lastUpdatedTime} by {recentUpdateStringAsShownInThreadList}",[i.param('participantListAsShownInThreadList',this.$MessengerInput23(x,y)),i.param('lastUpdatedTime',c('MercuryTimestamp').getAbsoluteTimestamp(x.timestamp)),i.param('recentUpdateStringAsShownInThreadList',this.$MessengerInput24(w,x,y))]);}else z=i._("Composing a new message");var aa=null;if(this.props.threadID&&this.props.pageID)aa=c('React').createElement('div',{ref:'botsMenuContainer',className:"_3km1"},c('React').createElement(c('MessengerBotMenuButton.react'),{flyoutAlignment:'left',threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"}));var ba=c('MercuryConfig').Mentions&&this.props.thread&&!this.props.thread.is_canonical?i._("Type a message, \u0040name...").toString():i._("Type a message...").toString(),ca=c('MercuryConfig').DebounceMentionsInput?c('DebouncedMentionsTextEditor.react'):c('AbstractMentionsTextEditor.react');return c('React').createElement('div',{className:"_kmc"+(this.props.smallerEqual640?' '+"_2swd":'')+(c('shouldNotRenderSegoe')(this.state.editorState.getCurrentContent().getPlainText())?' '+"_2por":''),onClick:this.focus,role:'presentation'},this.props.showMenu?aa:null,c('React').createElement('div',{className:"_3-8x"+(this.props.showMenu?' '+"_3km3":'')+(' '+"_3oh-")},c('React').createElement(ca,{autoHighlight:c('MercuryConfig').AHMT,'aria-controls':l.CONVERSATION,ariaDescribedBy:l.COMPOSER_INPUT_DESCRIPTION,ariaLabel:ba,editorState:this.state.editorState,handleBeforeInput:this.$MessengerInput25,handleContentReturn:this.$MessengerInput19,handlePastedFiles:this.$MessengerInput11,handleReturn:this.$MessengerInput19,maxResults:q,mentionCreationFn:this.$MessengerInput26,mentionResultsComponent:c('MentionsLayer.react'),mentionResultsProps:{typeaheadView:c('MessengerSingleSectionContactList.react'),typeaheadViewProps:{className:"_13iv",viewer:this.props.viewer},position:'above',autoflip:true},mentionsSource:this.state.mentionsSource,onChange:this.$MessengerInput18,placeholder:ba,ref:'input',spellCheck:true,stripPastedStyles:true,tabIndex:this.props.threadID===c('MessengerConstants').NEW_THREAD_KEY?c('MessengerTabIndices').COMPOSER_INPUT:0,textAlignment:'left',onAddMention:this.$MessengerInput27,onShowMentions:this.$MessengerInput28}),c('React').createElement('div',{className:"_5ca7",id:l.COMPOSER_INPUT_DESCRIPTION},z)));};s.prototype.$MessengerInput23=function(v,w){return c('React').createElement(c('MercuryThreadTitle.react'),{thread:v,viewer:w});};s.prototype.$MessengerInput24=function(v,w,x){return c('React').createElement(c('MercuryThreadSnippet.react'),{participants:v,shouldAlwaysRenderSender:true,shouldRenderYou:true,thread:w,viewer:x});};s.prototype.$MessengerInput14=function(v,w){var x=this.$MessengerInput29(v),y=c('EditorState').set(v,{decorator:x});return w||this.props.disableAutofocus?y:c('EditorState').moveFocusToEnd(y);};s.prototype.$MessengerInput29=function(v){var w=c('MessengerEmoticonSpan.react'),x=v.getCurrentContent(),y=[{strategy:c('getEntityMatcher')(function(z){return z.getType()==='EMOTICON';},x.getEntity),component:w}];y.push({strategy:c('getEntityMatcher')(function(z){return z.getType()==='EMOJI';},x.getEntity),component:c('MessengerEmojiSpan.react')});if(c('MercuryConfig').Mentions)y.push({strategy:c('getEntityMatcher')(function(z){return z.getType()==='MENTION';},x.getEntity),component:c('MessengerMentionsEntityDecorator.react')});return new (c('CompositeDraftDecorator'))(y);};s.prototype.$MessengerInput30=function(v,w){var x=c('handleBeforeInputForMessengerEmoticon')(w,v);if(x===w)return false;this.setState({editorState:x});return true;};s.prototype.$MessengerInput31=function(v,w){var x=c('handleBeforeInputForMessengerEmoji')(w,v);if(x===w)return false;this.setState({editorState:x});return true;};s.prototype.handleTextDropped=function(v){var w=this.state.editorState,x=w.getSelection();if(x.get('hasFocus'))return;var y=c('DraftModifier').replaceText(w.getCurrentContent(),x,v,w.getCurrentInlineStyle()),z=c('EditorState').push(w,y,'insert-fragment');this.$MessengerInput18(z);};s.prototype.getShareData=function(){var v=c('URLMatcher').match(this.getValue());if(v===this.$MessengerInput2.getMatchedURL())return this.$MessengerInput2.getData();return null;};s.prototype.exitCurrentMode=function(){this.refs.input&&this.refs.input.exitCurrentMode();};s.prototype.triggerSend=function(){if(this.getValue().trim().length>0)this.$MessengerInput20();};s.prototype.addMention=function(v){var w=c('insertMentionIntoEditorState')(v,this.state.editorState,0,this.$MessengerInput26);if(!this.state.mentionsTriggerSource)this.setState({mentionsTriggerSource:c('MessengerMentionSource').REPLY});this.$MessengerInput18(w);this.$MessengerInput27();};s.propTypes={disableAutofocus:m.bool,handleOnlyImageUploads:m.bool.isRequired,isComposing:m.bool,mentionsEnabled:m.bool,onBeforeInput:m.func,onChange:m.func,onResize:m.func,onMessageSend:m.func,participants:m.instanceOf(c('immutable').Map),thread:m.object,threadID:m.string,viewer:m.string,onFileUpload:m.func,showMenu:m.bool,pageID:m.string,smallerEqual640:m.bool};var t=function v(){this.$MessengerInput10=false;this.$MessengerInput18=function(w){if(w!==this.state.editorState)this.setState({editorState:w},function(){this.$MessengerInput5();}.bind(this));}.bind(this);this.$MessengerInput19=function(event,w){if(c('isSoftNewlineEvent')(event)){var x=c('handleSoftNewlineForMessengerEmoticon');this.setState({editorState:x(w)});return p;}this.setState({},function(){if(this.getValue().trim().length>0)this.$MessengerInput20();}.bind(this));return p;}.bind(this);this.getValue=function(){return c('getVisibleValueForContentStateWithMessengerEmoji')(this.state.editorState.getCurrentContent());}.bind(this);this.focus=function(){this.refs.input&&this.refs.input.focus();}.bind(this);this.$MessengerInput25=function(w,x){this.props.onBeforeInput&&this.props.onBeforeInput(w,x);var y=this.$MessengerInput30(w,x),z=this.$MessengerInput31(w,x);return y||z?p:r;}.bind(this);this.$MessengerInput11=function(w){var x=this.props.handleOnlyImageUploads?w.filter(function(y){return y&&o.test(y.type);}):w;if(x.length){this.props.onFileUpload(x);return p;}return r;}.bind(this);this.$MessengerInput15=function(){this.$MessengerInput17();}.bind(this);this.$MessengerInput16=function(){this.setState(this.$MessengerInput12(true));}.bind(this);this.$MessengerInput27=function(){var w=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:w});}.bind(this);this.$MessengerInput28=function(w,x){var y=(this.state.mentionsTriggeredCount||0)+1,z={mentionsTriggeredCount:y};if(!this.state.mentionsTriggerSource)z.mentionsTriggerSource=x===n?c('MessengerMentionSource').ATSIGN:c('MessengerMentionSource').TYPEAHEAD;this.setState(z);}.bind(this);this.$MessengerInput26=function(w){return c('createMessengerMentionDraftEntity')(this.state.editorState.getCurrentContent(),w);}.bind(this);};function u(v,w){var x=v.participants,y=w.participants;if(!x||!y)return true;var z=x.filter(Boolean),aa=y.filter(Boolean);return z.size!==aa.size||!z.equals(aa);}f.exports=s;}),null);
__d('MessengerResponsiveBlock.react',['React','shallowEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k={bottom:0,left:0,overflow:'hidden',position:'absolute',right:0,top:0,visibility:'hidden',zIndex:-1},l={left:0,position:'absolute',top:0,transition:'0s'},m={height:'200%',left:0,position:'absolute',top:0,transition:'0s',width:'200%'};h=babelHelpers.inherits(n,c('React').Component);i=h&&h.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=i.constructor).call.apply(o,[this].concat(r)),this.dirty=false,this.lastWidth=null,this.lastHeight=null,this.lastBreakpointsToggles=null,this.setupWeirdScrollTracking=function(){this.refs.expandChild.style.width='10000px';this.refs.expandChild.style.height='10000px';this.refs.expand.scrollLeft=100000;this.refs.expand.scrollTop=100000;this.refs.shrink.scrollLeft=100000;this.refs.shrink.scrollTop=100000;}.bind(this),this.onScroll=function(){var t=this.refs.outer.offsetWidth,u=this.refs.outer.offsetHeight;if(t!=this.lastWidth||u!=this.lastHeight)if(!this.dirty){this.dirty=true;this.lastWidth=t;this.lastHeight=u;var v=this.props.breakpointsToggles(t,u);if(c('shallowEqual')(this.lastBreakpointsToggles,v)){this.dirty=false;}else this.forceUpdate(function(){this.dirty=false;}.bind(this));this.lastBreakpointsToggles=v;}this.setupWeirdScrollTracking();}.bind(this),p;}n.prototype.componentDidMount=function(){this.setupWeirdScrollTracking();};n.prototype.render=function(){return c('React').createElement('div',{ref:'outer'},this.props.children(this.props.breakpointsToggles(this.lastWidth,this.lastHeight)),c('React').createElement('div',{style:k,onScroll:this.onScroll,ref:'expand'},c('React').createElement('div',{style:l,ref:'expandChild'})),c('React').createElement('div',{style:k,onScroll:this.onScroll,ref:'shrink'},c('React').createElement('div',{style:m})));};n.propTypes={children:j.func.isRequired,breakpointsToggles:j.func.isRequired};f.exports=n;}),null);
__d('MessengerSendButton.react',['fbt','Link.react','MessengerConfig','React','TooltipData'],(function a(b,c,d,e,f,g,h){'use strict';var i=void 0,j=function l(m){var n=k(),o=m.customColor?{color:m.customColor}:{};return c('React').createElement(c('Link.react'),babelHelpers['extends']({className:m.className,style:o,onClick:m.onClick},c('TooltipData').propsFor(n)),h._("Send"));};function k(){if(i)return i;var l=[h._("Press Enter to send")];if(c('MessengerConfig').SendButtonShiftHint)l.push(h._("Press Shift + Enter to add a new paragraph"));var m=l.join('\n');i=m;return m;}f.exports=j;}),null);
__d('MessengerComposer.react',['cx','fbt','invariant','AsyncRequest','AutoFocusableLink.react','BootloadedComponent.react','MercuryBootloadOnInteraction.react','BootloadOnRender.react','Bootloader','ChatPhotoUploader.react','ChatConfig','EmoticonsList','immutable','JSResource','LazyComponent.react','MercuryConfig','MercuryIDs','MercuryReadOnlyReason','MercuryThreadActions','MessageRequestUtils','MessagingTag','MessengerActions','MessengerBotMenuDataFetcher','MessengerButton.react','MessengerComposerInput.react','ChatPageComposerNullState.react','MessengerConfig','MessengerConstants','MessengerContextualDialog.react','messengerDialogsRe','messengerFileSizeErrorDialogReact','MessengerGroupPollingButton.react','MessengerHotLikeButton.react','MessengerHotLikeUtils','MessengerQuickCamOrigins','MessengerResponsiveBlock.react','MessengerSendButton.react','MessengerView','MessengerGamesButton.react','MNCommercePostbackCTADataManager','MNCommercePostbackRefSendManager','P2PGKValues','React','MercuryShareAttachmentRenderLocations','XMessagingUnblockMessagesController','XMNCommercePageNullStateCTAController','getPageIDFromThreadID','isWebGLEnabled'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('messengerFileSizeErrorDialogReact').comp,n=c('React').PropTypes,o=640,p=360,q=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;k=babelHelpers.inherits(r,c('React').PureComponent);l=k&&k.prototype;function r(s){l.constructor.call(this,s);this.handleFileUpload=function(t){this.refsUploader&&this.refsUploader.uploadFiles(t);this.exitCurrentMode();}.bind(this);this.$MessengerComposer24=function(t){var u=c('EmoticonsList').symbols[t];if(!u)return;this.refsInput&&this.refsInput.insertEmoticon(u);}.bind(this);this.$MessengerComposer34=function(){var t=c('XMessagingUnblockMessagesController').getURIBuilder().getURI(),u=this.props.threadID;new (c('AsyncRequest'))(t).setMethod('POST').setData({fbid:c('MercuryIDs').getUserIDFromThreadID(u)}).send();}.bind(this);this.$MessengerComposer32=function(){this.$MessengerComposer30()['delete'](this.props.threadID);c('MessengerActions').selectThread(null);}.bind(this);this.$MessengerComposer31=function(){this.$MessengerComposer30().archive(this.props.threadID);c('MessengerActions').selectThread(null);}.bind(this);this.$MessengerComposer28=function(t,u){if(t.platformFBID.toString()===c('MercuryConfig').MessengerAppID){this.props.onStickerSelect(t.resultID.toString());}else this.refsUploader&&this.refsUploader.uploadURL({attribution_app_id:t.platformFBID,external_image_url:t.source.url,preview_url:t.media.preview?t.media.preview.url:t.media.thumbnail.url,source:t.source});}.bind(this);this.$MessengerComposer29=function(t){this.focusInput();this.refsInput&&this.refsInput.insertEmoji(t);}.bind(this);this.$MessengerComposer11=function(t){this.setState({currentValue:t});}.bind(this);this.$MessengerComposer10=function(t,u,v){this.refsEmojiButton&&this.refsEmojiButton.hideFlyout();return this.props.onMessageSend&&this.props.onMessageSend(t,u,v);}.bind(this);this.$MessengerComposer27=function(t){this.refsInput&&this.refsInput.triggerSend();}.bind(this);this.$MessengerComposer8=function(){if(this.state.nullStateCTA!==null){this.setState({disableNullState:true});if(c('MNCommercePostbackRefSendManager').hasMDotMeRef(this.$MessengerComposer4())){c('MNCommercePostbackCTADataManager').sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$MessengerComposer1,c('MNCommercePostbackRefSendManager').getMdotMeRef());c('MessengerActions').changeMDotMeReferral();}else c('MNCommercePostbackCTADataManager').sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$MessengerComposer1);}}.bind(this);this.$MessengerComposer1=function(){this.setState({showNullState:true,disableNullState:false});}.bind(this);this.$MessengerComposer1=this.$MessengerComposer1.bind(this);this.state=this.$MessengerComposer2();}r.prototype.componentWillReceiveProps=function(s){if(s.threadID!==this.props.threadID){this.setState(this.$MessengerComposer2());if(s.thread)this.$MessengerComposer3(s.thread.message_count,c('getPageIDFromThreadID')(s.threadID));}if(s.thread&&s.thread.message_count>0)this.setState({showNullState:false});};r.prototype.componentWillMount=function(){if(this.props.thread)this.$MessengerComposer3(this.props.thread.message_count,this.$MessengerComposer4());};r.prototype.componentDidUpdate=function(s){if(s.canReply!==this.props.canReply)this.props.onResize&&this.props.onResize();if(this.props.thread)this.$MessengerComposer5();};r.prototype.render=function(){if(!this.props.canReply){return this.$MessengerComposer6();}else if(this.props.thread&&c('MessageRequestUtils').isMessageRequest(this.props.thread)&&!this.state.pendingActionsBypassed)return this.$MessengerComposer7();var s=this.props.thread&&this.props.thread.message_count;c('MNCommercePostbackRefSendManager').sendMDotMeRef(this.$MessengerComposer4(),s);if(this.state.showNullState&&this.state.nullStateCTA!==null)return c('React').createElement(c('ChatPageComposerNullState.react'),{title:this.state.nullStateCTA.title,onClick:this.$MessengerComposer8,disabled:this.state.disableNullState});var t=this.$MessengerComposer9();return c('React').createElement(c('MessengerResponsiveBlock.react'),{breakpointsToggles:function u(v){return [v!=null&&v<=o,v];}},function(u){var v=u[0],w=u[1];return c('React').createElement('div',{'aria-label':i._("New message"),className:"_4rv3",role:'region'},c('React').createElement('div',{className:"_5irm"+(v?' '+"_1_73":'')},c('React').createElement(c('MessengerComposerInput.react'),{disableAutofocus:!!this.props.disableAutofocus,handleOnlyImageUploads:false,isComposing:t,mentionsEnabled:this.props.mentionsEnabled,ref:function(x){return this.refsInput=x;}.bind(this),onBeforeInput:function(){return this.refsEmojiButton&&this.refsEmojiButton.hideFlyout();}.bind(this),onResize:this.props.onResize,onMessageSend:this.$MessengerComposer10,participants:this.props.participants,smallerEqual640:v,thread:this.props.thread,threadID:t?c('MessengerConstants').NEW_THREAD_KEY:this.props.threadID,pageID:this.$MessengerComposer4(),viewer:this.props.viewer,onFileUpload:this.handleFileUpload,onChange:this.$MessengerComposer11,showMenu:this.state.showMenu}),c('React').createElement('ul',{ref:function(x){this.refsButtonsContainer=x;}.bind(this),className:"_4rv4"},this.$MessengerComposer12(w),this.$MessengerComposer13())));}.bind(this));};r.prototype.$MessengerComposer12=function(s){if(this.props.hideActions)return null;if(s&&s<p)return c('React').createElement('div',null,c('React').createElement('div',{className:"_39bj"},this.$MessengerComposer14(),this.$MessengerComposer15(),this.$MessengerComposer16(),this.$MessengerComposer17()),c('React').createElement('div',{className:"_39bj"},this.$MessengerComposer18(),this.$MessengerComposer19(),this.$MessengerComposer20(),this.$MessengerComposer21(),this.$MessengerComposer22()));return c('React').createElement('div',{className:"_39bj"},this.$MessengerComposer14(),this.$MessengerComposer15(),this.$MessengerComposer16(),this.$MessengerComposer17(),this.$MessengerComposer18(),this.$MessengerComposer19(),this.$MessengerComposer20(),this.$MessengerComposer21(),this.$MessengerComposer22());};r.prototype.$MessengerComposer23=function(s){c('messengerDialogsRe').showDialog(function(){return c('React').createElement(m,{error:s.error});});};r.prototype.handleTextDropped=function(s){this.refsInput&&this.refsInput.handleTextDropped(s);};r.prototype.focusInput=function(){this.refsInput&&this.refsInput.focus();};r.prototype.$MessengerComposer19=function(){if(!c('P2PGKValues').P2PVisible||!this.props.threadID||this.$MessengerComposer25())return null;var s="_30yy _25pc _39bk";return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:s,ContextualDialog:c('MessengerContextualDialog.react'),threadID:this.props.threadID}),loader:c('JSResource')('P2PSendMoneyContainerBootloader.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:s,role:'button'})});};r.prototype.$MessengerComposer22=function(){if(c('ChatConfig').get('messenger_www_quickcam')&&c('ChatConfig').get('messenger_www_html5_quickcam')&&this.props.threadID)return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:"_4rv5"+(' '+"_39bk")+(this.state.flyoutOpen?' '+"_5jhb":''),location:c('MessengerQuickCamOrigins').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:c('JSResource')('MessengerQuickCamButtonHTML5.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_4rv5 _39bk",role:'button'})});return null;};r.prototype.$MessengerComposer18=function(){if(!q)return null;return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:c('JSResource')('MessengerVoiceClipButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_4rv7 _39bk _30yy",role:'button'})});};r.prototype.$MessengerComposer20=function(){if(this.props.thread&&this.props.thread.is_canonical)return null;if(!this.props.threadFBID)return null;return c('React').createElement(c('MessengerGroupPollingButton.react'),{customColor:this.props.thread&&this.props.thread.custom_color,threadFBID:this.props.threadFBID});};r.prototype.$MessengerComposer21=function(){var s=c('MercuryConfig').MessengerGamesGK&&c('isWebGLEnabled')();return s&&this.props.threadFBID&&!this.$MessengerComposer25()?c('React').createElement(c('MessengerGamesButton.react'),{threadFBID:this.props.threadFBID}):null;};r.prototype.$MessengerComposer14=function(){return c('React').createElement('div',{className:"_39bk"},c('React').createElement(c('ChatPhotoUploader.react'),{allowCrossPage:true,disabled:!(this.props.threadID||this.$MessengerComposer26()),ref:function(s){return this.refsUploader=s;}.bind(this),imageClassName:"_5vn8",imagesOnly:false,inputClassname:"_260t",linkClassName:"_30yy _260u",onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$MessengerComposer23}));};r.prototype.$MessengerComposer13=function(){var s=!(this.props.threadID||this.$MessengerComposer26());if(c('MessengerConfig').SendButtonEnabled&&!s&&this.state.currentValue.length)return c('React').createElement(c('MessengerSendButton.react'),{className:(this.props.threadID?"_30yy":'')+(' '+"_38lh")+(' '+"_39bl"),customColor:this.props.thread&&this.props.thread.custom_color,onClick:this.$MessengerComposer27});return c('React').createElement(c('MessengerHotLikeButton.react'),{className:"_4rv9"+(this.props.threadID?' '+"_30yy":'')+(' '+"_39bl"),disabled:s,customColor:this.props.thread&&this.props.thread.custom_color,customLike:c('MessengerHotLikeUtils').getCustomEmojiFromThread(this.props.thread)||undefined,sendSticker:this.props.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24});};r.prototype.$MessengerComposer15=function(){var s=(this.props.threadID?"_30yy":'')+(' '+"_4rv6")+(' '+"_39bk");return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:s,ContextualDialogClass:c('MessengerContextualDialog.react'),disabled:!(this.props.threadID||this.$MessengerComposer26()),getInput:function(){return this.refsInput;}.bind(this),flyoutAlignment:'right',flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,onEmoticonSelect:this.$MessengerComposer24,threadID:this.props.threadID}),loader:c('JSResource')('ChatStickerButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:s,role:'button'})});};r.prototype.$MessengerComposer16=function(){if(!c('MessengerConfig').ContentSearchEnabled)return null;var s=(this.props.threadID?"_30yy":'')+(' '+"_yht")+(' '+"_39bk");return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:s,ContextualDialogClass:c('MessengerContextualDialog.react'),getInput:function(){return this.refsInput;}.bind(this),getQuery:function(){return this.refsInput?this.refsInput.getValue():'';}.bind(this),location:c('MercuryShareAttachmentRenderLocations').MESSENGER,onSelect:this.$MessengerComposer28}),loader:c('JSResource')('ChatContentSearchButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:s,role:'button'})});};r.prototype.$MessengerComposer17=function(){var s=(this.props.threadID?"_30yy":'')+(' '+"_5s2p")+(' '+"_39bk");return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:s,ContextualDialogClass:c('MessengerContextualDialog.react'),flyoutAlignment:'right',getInput:function(){return this.refsInput;}.bind(this),onSelect:this.$MessengerComposer29,onMount:function(t){return this.refsEmojiButton=t;}.bind(this),sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:c('JSResource')('ChatEmojiButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:s,role:'button'})});};r.prototype.$MessengerComposer7=function(){return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{height:51}}),bootloadLoader:c('JSResource')('MessengerPendingActions.react').__setRef('MessengerComposer.react'),folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){this.$MessengerComposer30().changeFolder(this.props.threadID,c('MessagingTag').INBOX);this.setState({pendingActionsBypassed:true});}.bind(this),onDeleteClick:function(){c('Bootloader').loadModules(["messengerDeleteDialogReact"],function(s){var t=s.comp;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(t,{onArchive:this.$MessengerComposer31,onDelete:this.$MessengerComposer32,onToggle:this.$MessengerComposer33});}.bind(this));}.bind(this),'MessengerComposer.react');}.bind(this),onIgnoreClick:function(){this.$MessengerComposer30().changeFolder(this.props.threadID,c('MessagingTag').OTHER);c('MessengerActions').selectThread(null);}.bind(this)});};r.prototype.$MessengerComposer6=function(){if(!this.props.thread||this.props.view===c('MessengerView').DETAIL.COMPOSE)return null;var s=this.props.thread,t=this.props.participants,u=false,v=false;if(s.cannot_reply_reason==='blocked'){u=true;s.is_canonical===true||j(0);t!=null||j(0);var w=s.other_user_fbid;w!=null||j(0);var x=t.get(c('MercuryIDs').getParticipantIDFromUserID(w));x!=null||j(0);if(x.is_messenger_blocked)v=true;}if(u)if(v){return c('React').createElement('div',{className:"_4rv3"},c('React').createElement('div',{className:"_2wy4"},i._("You've blocked messages from this person. {unblock_now_button}",[i.param('unblock_now_button',c('React').createElement(c('MessengerButton.react'),{label:i._("Unblock now"),onClick:this.$MessengerComposer34,type:'secondary'}))])));}else return c('React').createElement('div',{className:"_4rv3"},c('React').createElement('div',{className:"_2wy4"},i._("This person isn't available at the moment.")));return c('React').createElement('div',{className:"_4rv3"},c('React').createElement('div',{className:"_2wy4"},c('MercuryReadOnlyReason').getReason(this.props.thread.has_email_participant)));};r.prototype.$MessengerComposer33=function(s){if(!s)c('messengerDialogsRe').removeDialog();};r.prototype.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode();};r.prototype.$MessengerComposer9=function(){return this.props.view===c('MessengerView').DETAIL.COMPOSE;};r.prototype.$MessengerComposer26=function(){return !!(this.$MessengerComposer9()&&this.props.recipients&&this.props.recipients.size);};r.prototype.$MessengerComposer25=function(){return !!this.$MessengerComposer4();};r.prototype.$MessengerComposer4=function(){return c('getPageIDFromThreadID')(this.props.threadID);};r.prototype.$MessengerComposer5=function(){var s=this.$MessengerComposer4();if(s){c('MessengerBotMenuDataFetcher').getHasMenu(s,function(t){this.setState({showMenu:t});}.bind(this),function(){this.setState({showMenu:false});}.bind(this));}else this.setState({showMenu:false});};r.prototype.$MessengerComposer3=function(s,t){var u=s===0,v=!!t;if(v&&u){var w=c('XMNCommercePageNullStateCTAController').getURIBuilder();new (c('AsyncRequest'))().setURI(w.getURI()).setMethod('POST').setData({page_id:t}).setHandler(function(x){if(x&&x.payload){this.setState({showNullState:true,nullStateCTA:x.payload});}else this.setState({showNullState:false,disableNullState:false});}.bind(this)).send();}else this.setState({showNullState:false,disableNullState:false});};r.prototype.$MessengerComposer2=function(){return {pendingActionsBypassed:false,currentValue:'',nullStateCTA:null,showMenu:false,showNullState:false,disableNullState:false};};r.prototype.$MessengerComposer30=function(){return c('MercuryThreadActions').getForFBID(this.props.viewer);};r.prototype.testUtils_renderP2PSendMoneyButton=function(){return this.$MessengerComposer19();};r.prototype.replyToMention=function(s){this.refsInput&&this.refsInput.addMention&&this.refsInput.addMention(s);};r.propTypes={canReply:n.bool,disableAutofocus:n.bool,hideActions:n.bool,mentionsEnabled:n.bool,onCustomLikeSelect:n.func,onMessageSend:n.func,onPhotoUploadComplete:n.func,onPhotoUploadCancel:n.func,onPhotoUploadFail:n.func,onPhotoUploadSubmit:n.func,onResize:n.func,onStickerSelect:n.func.isRequired,onVoiceClipCreate:n.func,participants:n.instanceOf(c('immutable').Map),recipients:n.instanceOf(c('immutable').List),threadID:n.string,threadFBID:n.string,thread:n.object,view:n.string,viewer:n.string};f.exports=r;}),null);
__d('MessengerComposerContainer.react',['fbt','Arbiter','AsyncUploadRequest','EmojiLikeUtils','EmojiState','EmojiDispatcher','immutable','MercuryAttachment','MercuryAttachmentType','MercuryConfig','MercuryThreadIDMap','MercuryThreadInformer','MercuryIDs','MercuryLocalIDs','MercuryMessageActions','MercuryMessageObject','MercuryParticipants','MercurySendMessageHandler','MercuryThreads','MercuryThreadActions','MercuryTriodeSourceUtil','MessageRequestUtils','MessengerActions','MessengerComposer.react','MessengerComposerActions','messengerDialogsRe','MessengerDispatcher','MessengerEmojiUsageUtils','messengerSimpleDialogReact','MessengerView','MNPlatformTagsDataManager','PhotosUploadID','React','ReactDOM','SearchableEntry','SubscriptionsHandler','setImmediate','EmojiStateStore'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerSimpleDialogReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$MessengerComposerContainer8=function(t,u,v){c('EmojiState').updateRecentlyUsed(c('MessengerEmojiUsageUtils').findAllEmojis(t));if(!this.props.canReply){v&&v(null);return false;}var w=null,x=this.$MessengerComposerContainer16(function(y){var z=this.$MessengerComposerContainer2.constructUserGeneratedMessageObject(t,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),y),aa=c('MercuryIDs').getUserIDFromThreadID(y);if(c('MNPlatformTagsDataManager').hasThreadTags(aa)){var ba=c('MNPlatformTagsDataManager').getThreadTags();z.tags=ba;}if(u){if(u.shareable_attachment)z.shareable_attachment=u.shareable_attachment;if(u.profile_ranges)z.profile_ranges=z.profile_xmd=u.profile_ranges;}w=z;return z;}.bind(this));v&&v(x?w:null);w=null;return x;}.bind(this),this.$MessengerComposerContainer10=function(t,u){this.$MessengerComposerContainer3.cancelAttachmentPlaceholder(u.upload_id,u);}.bind(this),this.$MessengerComposerContainer9=function(t,u){this.$MessengerComposerContainer3.confirmAttachmentPlaceholder(u.upload_id,u);}.bind(this),this.$MessengerComposerContainer11=function(t,u){this.$MessengerComposerContainer3.cancelAttachmentPlaceholder(u.upload_id,u);var v=h._("Photo Upload failed"),w=h._("Please try again. Make sure you are uploading a valid photo.");if(u.errorDialogParams){v=u.errorDialogParams.title||v;w=u.errorDialogParams.body||w;}this.$MessengerComposerContainer17(v,w);}.bind(this),this.$MessengerComposerContainer12=function(t,u){return this.$MessengerComposerContainer16(function(v){return this.$MessengerComposerContainer2.constructAttachmentMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),v);}.bind(this),function(v){this.$MessengerComposerContainer3.addAttachmentPlaceholder(v,u.upload_id,u);this.handleMessageSentToPendingThread();}.bind(this));}.bind(this),this.$MessengerComposerContainer15=function(t){var u='upload_'+c('PhotosUploadID').getNewID();this.$MessengerComposerContainer1.sendAttachment(this.props.threadID,n(u),c('MercuryTriodeSourceUtil').getMercuryTriodeSource());var v={};v[u]=t;var w=new (c('AsyncUploadRequest'))(c('MercuryConfig').upload_url).setAllowCrossOrigin(true).setRelativeTo(c('ReactDOM').findDOMNode(this)).setData({voice_clip:true}).setFiles(v);this.$MessengerComposerContainer4.addSubscriptions(w.subscribe('success',function(x,y){return this.$MessengerComposerContainer18(y);}.bind(this)));w.send();}.bind(this),this.$MessengerComposerContainer18=function(t){var u=t.getName(),v=t.getResponse().payload.metadata[0].audio_id;this.$MessengerComposerContainer3.confirmAttachmentPlaceholder(u,{upload_id:u,audio_ids:[v]});}.bind(this),this.$MessengerComposerContainer13=function(t){return this.$MessengerComposerContainer16(function(u){return this.$MessengerComposerContainer2.constructStickerMessageObject(t,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),u);}.bind(this));}.bind(this),this.$MessengerComposerContainer14=function(t,u,v){var w=this.props.threadID,x=this.$MessengerComposerContainer2.constructUserGeneratedMessageObject(t.emoji,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),w);x.has_attachment=false;return this.$MessengerComposerContainer16(function(y){c('EmojiLikeUtils').setEmojiSize(x,u);return c('EmojiLikeUtils').setEmojiSource(x,v);});}.bind(this),this.$MessengerComposerContainer16=function(t,u){var v=this.props.threadID,w=this.props.recipients,x=false;if(!v&&w&&w.size>1){v=c('MercuryLocalIDs').generateThreadID();x=true;}if(!v)return false;var y=t(v);if(x){var z=w.map(function(aa){return c('MercuryIDs').getParticipantIDFromUserID(aa.getUniqueID());}).toArray();this.$MessengerComposerContainer5.createNewLocalThread(v,z);y.offline_threading_id=c('MercuryIDs').tokenize(v).value;y.specific_to_list=z;}if(u){u(y);}else this.$MessengerComposerContainer3.send(y,this.handleMessageSentToPendingThread);if(this.props.view===c('MessengerView').DETAIL.COMPOSE){if(c('MercuryAttachment').get(y).length>0)c('MessengerComposerActions').moveDraftToNextThread(v);c('MessengerComposerActions').exitComposeState();if(c('MercuryIDs').isLocalThread(v)){this.$MessengerComposerContainer6.subscribeOnce('messages-updated',function(aa,ba){var ca=c('MercuryThreadIDMap').get();if(ca.canLinkExternally(v))c('MessengerActions').selectThread(v);});}else c('MessengerActions').selectThread(v);}this.focusInput();return true;}.bind(this),this.handleMessageSentToPendingThread=function(){if(this.props.thread&&c('MessageRequestUtils').isMessageRequest(this.props.thread))c('MercuryThreadActions').getForFBID(this.props.viewer).movePendingToInbox(this.props.threadID);}.bind(this),this.$MessengerComposerContainer7=function(t,event){if(event.threadID===this.props.threadID)c('MercuryParticipants').get(event.participantID,function(u){if(!u||!this.refsComposer)return;var v=new (c('SearchableEntry'))({uniqueID:u.fbid,title:'@'+u.name});c('setImmediate')(function(){if(this.refsComposer){this.refsComposer.focusInput();this.refsComposer&&this.refsComposer.replyToMention&&this.refsComposer.replyToMention(v);}}.bind(this));}.bind(this));}.bind(this),p;}m.prototype.componentDidMount=function(){this.$MessengerComposerContainer1=c('MercurySendMessageHandler').getForFBID(this.props.viewer);this.$MessengerComposerContainer3=c('MercuryMessageActions').getForFBID(this.props.viewer);this.$MessengerComposerContainer5=c('MercuryThreads').getForFBID(this.props.viewer);this.$MessengerComposerContainer2=c('MercuryMessageObject').getForFBID(this.props.viewer);this.$MessengerComposerContainer6=c('MercuryThreadInformer').getForFBID(this.props.viewer);this.$MessengerComposerContainer4=new (c('SubscriptionsHandler'))();c('EmojiDispatcher').explicitlyRegisterStores([c('EmojiStateStore')]);if(c('MercuryConfig').MentionsReplyEvent)this.$MessengerComposerContainer4.addSubscriptions(c('Arbiter').subscribe(c('MercuryConfig').MentionsReplyEvent,this.$MessengerComposerContainer7));this.props.onMount&&this.props.onMount(this);};m.prototype.componentWillUnmount=function(){this.$MessengerComposerContainer4.release();};m.prototype.focusInput=function(){this.refsComposer&&this.refsComposer.focusInput&&this.refsComposer.focusInput();};m.prototype.render=function(){return c('React').createElement(c('MessengerComposer.react'),{canReply:this.props.canReply,mentionsEnabled:!!c('MercuryConfig').Mentions,onMessageSend:this.$MessengerComposerContainer8,onPhotoUploadComplete:this.$MessengerComposerContainer9,onPhotoUploadCancel:this.$MessengerComposerContainer10,onPhotoUploadFail:this.$MessengerComposerContainer11,onPhotoUploadSubmit:this.$MessengerComposerContainer12,onResize:this.props.onResize,onStickerSelect:this.$MessengerComposerContainer13,onCustomLikeSelect:this.$MessengerComposerContainer14,onVoiceClipCreate:this.$MessengerComposerContainer15,participants:this.props.participants,recipients:this.props.recipients,ref:function(o){return this.refsComposer=o;}.bind(this),threadID:this.props.threadID,threadFBID:this.props.threadFBID,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer});};m.prototype.handleFileUpload=function(o){var p=o.reduce(function(q,r){var s=r.type.split('/')[0];if(q[s]){q[s].push(r);}else q.other.push(r);return q;},{audio:[],image:[],other:[]});p.audio.forEach(function(q){return this.$MessengerComposerContainer15(q);}.bind(this));if(this.refsComposer)this.refsComposer.handleFileUpload(p.image.concat(p.other));};m.prototype.handleTextDropped=function(o){if(this.refsComposer)this.refsComposer.handleTextDropped(o);};m.prototype.resetDrag=function(){if(this.refsComposer)this.refsComposer.exitCurrentMode();};m.prototype.$MessengerComposerContainer17=function(o,p){c('messengerDialogsRe').showDialog(function(){return c('React').createElement(k,{title:o,body:p});});};m.propTypes={canReply:l.bool,onMount:l.func,onResize:l.func,participants:l.instanceOf(c('immutable').Map),recipients:l.instanceOf(c('immutable').List),threadID:l.string,threadFBID:l.string,thread:l.object,view:l.string,viewer:l.string};function n(o){return {upload_id:o,preview_attachments:[{upload_id:o,attach_type:c('MercuryAttachmentType').PHOTO,preview_uploading:true}]};}f.exports=m;}),null);
__d('MessengerCollapsedLogMessageGroup.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={collapsed:true},n;}l.prototype.render=function(){var m=i._("See more"),n=i._("See less");return c('React').createElement('div',{className:"_497p"},i._("New activities in the room."),' ',c('React').createElement(c('Link.react'),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed});}.bind(this)},this.state.collapsed?m:n),!this.state.collapsed?c('React').createElement('div',null,c('React').createElement('div',{className:"_4ea2"}),this.props.children,c('React').createElement('div',{className:"_4ea2"})):null);};f.exports=l;}),null);
__d('MessengerDateBreak.react',['cx','React','formatDate','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m){'use strict';return this.props.date.getTime()!==m.date.getTime();};l.prototype.render=function(){'use strict';var m=c('formatDate')(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return c('React').createElement('h4',{className:c('joinClasses')(this.props.className,"_497p _2lpt")},c('React').createElement('time',{className:"_3oh-"},m));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={date:k.instanceOf(Date).isRequired};f.exports=l;}),null);
__d("XMNCommercePromotionBlockController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/promotion\/block\/",{page_id:{type:"String",required:true},type:{type:"String",required:true}});}),null);
__d('MNCommercePromotionBlockDataManager',['AsyncRequest','MNCommercePromotionStateActions','XMNCommercePromotionBlockController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.block=function(i,j){var k=c('XMNCommercePromotionBlockController').getURIBuilder().setString('page_id',i).setString('type',j).getURI();new (c('AsyncRequest'))().setURI(k).setHandler(this.$MNCommercePromotionBlockDataManager1).setErrorHandler(this.$MNCommercePromotionBlockDataManager2).send();};h.prototype.$MNCommercePromotionBlockDataManager1=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c('MNCommercePromotionStateActions').stateReload(k);};h.prototype.$MNCommercePromotionBlockDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c('MNCommercePromotionStateActions').stateLoadError(k);};function h(){}f.exports=new h();}),null);
__d('MNCommerceUnlinkDialog.react',['fbt','MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=h._("Cancel"),n=h._("Turn Off");return c('React').createElement(c('MNCommerceDialog.react'),{onToggle:this.props.onToggle,shown:this.props.shown},c('React').createElement(c('MNCommerceDialogTitle.react'),{showCloseButton:false},h._("Unlink account?")),c('React').createElement(c('MNCommerceDialogBody.react'),null,c('React').createElement('div',null,h._("You can turn off updates if you haven't signed up or just no longer want to get them."))),c('React').createElement(c('MNCommerceDialogFooter.react'),null,c('React').createElement(c('MNCommerceButton.react'),{label:m,onClick:this.props.onCancelButtonClick,use:'default'}),c('React').createElement(c('MNCommerceButton.react'),{label:n,onClick:this.props.onTurnOffButtonClick,use:'confirm'})));};function l(){i.apply(this,arguments);}l.propTypes={onCancelButtonClick:k.func,onTurnOffButtonClick:k.func};f.exports=l;}),null);
__d('MNCommerceUnlinkErrorDialog.react',['fbt','MNCommerceAttachmentConstants','MNCommerceErrors','React','MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=h._("OK"),n=null,o=null;switch(this.props.errorType){case c('MNCommerceErrors').ALREADY_UNLINKED:o=c('React').createElement('div',null,h._("Updates are already off"));n=c('React').createElement('div',null,h._("You aren't getting updates in Messenger."));break;default:o=c('React').createElement('div',null,h._("Couldn't turn off updates"));n=c('React').createElement('div',null,h._("Sorry, something went wrong. Please try again."));break;}return c('React').createElement(c('MNCommerceDialog.react'),{onToggle:this.props.onToggle,shown:this.props.shown,width:c('MNCommerceAttachmentConstants').UNLINK_ERROR_DIALOG.WIDTH},c('React').createElement(c('MNCommerceDialogTitle.react'),null,o),c('React').createElement(c('MNCommerceDialogBody.react'),null,n),c('React').createElement(c('MNCommerceDialogFooter.react'),null,c('React').createElement(c('MNCommerceButton.react'),{label:m,onClick:this.props.onOkayButtonClick,use:'confirm'})));};function l(){i.apply(this,arguments);}l.propTypes={errorType:k.number,onOkayButtonClick:k.func};f.exports=l;}),null);
__d('MNCommerceUnlinkDialogContainer.react',['BanzaiLogger','MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceUnlinkDialog.react','MNCommerceUnlinkErrorDialog.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$MNCommerceUnlinkDialogContainer1=function(p){if(!p)this.$MNCommerceUnlinkDialogContainer2();}.bind(this),this.$MNCommerceUnlinkDialogContainer2=function(){c('MNCommerceDialogStateActions').hideDialog();},l;}j.prototype.render=function(){var k=c('MNCommerceDialogStateStore').getState();if(k&&k.errorType){c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.UNLINK_ERROR})});return c('React').createElement(c('MNCommerceUnlinkErrorDialog.react'),{onToggle:this.$MNCommerceUnlinkDialogContainer1,shown:!!k,errorType:k.errorType,onOkayButtonClick:this.$MNCommerceUnlinkDialogContainer2});}else{c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.UNLINK})});return c('React').createElement(c('MNCommerceUnlinkDialog.react'),{onToggle:this.$MNCommerceUnlinkDialogContainer1,shown:!!k,onCancelButtonClick:this.$MNCommerceUnlinkDialogContainer2,onTurnOffButtonClick:k&&k.onTurnOffButtonClick});}};f.exports=j;}),null);
__d("XMNCommerceUnlinkController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/unlink\/",{page_id:{type:"String",required:true},user_id:{type:"String",required:true}});}),null);
__d('MNCommerceUnlinkDataManager',['AsyncRequest','MNCommerceDialogStateActions','MNCommerceUnlinkDialogContainer.react','XMNCommerceUnlinkController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.unlink=function(i,j){var k=c('XMNCommerceUnlinkController').getURIBuilder().setString('page_id',i).setString('user_id',j).getURI();new (c('AsyncRequest'))().setURI(k).setErrorHandler(this.$MNCommerceUnlinkDataManager1).send();};h.prototype.$MNCommerceUnlinkDataManager1=function(i){c('MNCommerceDialogStateActions').showDialog(c('MNCommerceUnlinkDialogContainer.react'),{errorType:i.error});};function h(){}f.exports=new h();}),null);
__d('MNCommerceLogMessageUtils',['cx','fbt','invariant','BanzaiLogger','Link.react','MercuryConfig','MercuryIDs','MercuryThreads','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceDialogStateActions','MNCommerceReplyTypes','MNCommercePromotionBlockDataManager','MNCommercePromotionManageBlockDialogContainer.react','MNCommerceUnlinkDataManager','MNCommerceUnlinkDialogContainer.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('MercuryThreads').get();l.prototype.isCommercePageAdminMessage=function(m){return !!(m&&m.log_message_data&&(m.log_message_data.replyType===c('MNCommerceReplyTypes').COMMERCE_LINK||m.log_message_data.replyType===c('MNCommerceReplyTypes').COMMERCE_UNLINK));};l.prototype.getCommercePageManage=function(m,n){var o=null;if(c('MercuryConfig').WWWMessengerManageAdminGK){var p=function r(){var s=c('MercuryIDs').getUserIDFromParticipantID(m.author),t=function u(v,w){return c('MNCommercePromotionBlockDataManager').block(v,w);};c('MNCommerceDialogStateActions').showDialog(c('MNCommercePromotionManageBlockDialogContainer.react'),{pageID:s,onConfirmButtonClick:t});c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.MANAGE})});};o=c('React').createElement(c('Link.react'),{className:(!n?"_2w2m":'')+(n?' '+"_1jvn":''),onClick:p},i._("Manage"));}else if(m.log_message_data.replyType===c('MNCommerceReplyTypes').COMMERCE_LINK){var q=function r(){var s=c('MercuryIDs').getUserIDFromParticipantID(m.author),t=k.getThreadMetaNow(m.thread_id);t||j(0);var u=null;t.participants.every(function(w){if(w!==m.author){u=c('MercuryIDs').getUserIDFromParticipantID(w);return false;}return true;});var v=function w(){c('MNCommerceDialogStateActions').hideDialog();c('MNCommerceUnlinkDataManager').unlink(s,u);};c('MNCommerceDialogStateActions').showDialog(c('MNCommerceUnlinkDialogContainer.react'),{onTurnOffButtonClick:v});c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.UNLINK})});};o=c('React').createElement(c('Link.react'),{className:(!n?"_2w2m":'')+(n?' '+"_1jvn":''),onClick:q},i._("Turn off"));}return c('React').createElement('span',null,m.log_message_body,' ',o);};function l(){}f.exports=new l();}),null);
__d('MNAdsMessageUtils',['cx','fbt','AdPageMessageTypeEnum','Bootloader','FBJSON','Link.react','MercuryConfig','MercuryIDs','MessagingGenericAdminTextType','MessagingTag','MNCommerceDialogStateActions','MNCommercePromotionBlockDataManager','React','getPageIDFromThreadID'],(function a(b,c,d,e,f,g,h,i){'use strict';var j='offsite_ad';k.prototype.isAdsMessageRequest=function(l){return l.folder==c('MessagingTag').PENDING&&!!l.last_message_type&&l.last_message_type!==c('AdPageMessageTypeEnum').NON_AD;};k.prototype.renderAdsMessageRequestStatus=function(){var l=i._("Sponsored");return c('React').createElement('span',null,l);};k.prototype.isAdsAdminMessage=function(l){return l&&l.log_message_data&&l.log_message_data.message_type&&l.log_message_data.message_type===c('MessagingGenericAdminTextType').AD_MANAGE_MESSAGE;};k.prototype.isOffsiteAd=function(l){if(l.log_message_data&&l.log_message_data.untypedData&&l.log_message_data.untypedData.ad_properties){var m=c('FBJSON').parse(l.log_message_data.untypedData.ad_properties);for(var n=m,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++];}else{p=n.next();if(p.done)break;q=p.value;}var r=q;if(r===j)return true;}}return false;};k.prototype.getadPreferencesUrl=function(l){if(l.log_message_data&&l.log_message_data.untypedData&&l.log_message_data.untypedData.ad_preferences_url)return l.log_message_data.untypedData.ad_preferences_url;return '';};k.prototype.getAdsPageManage=function(l,m){var n=null;if(c('MercuryConfig').WWWMessengerManageAdminGK){var o=function(){var p=this.isOffsiteAd(l),q=c('getPageIDFromThreadID')(l.thread_id);if(!q)q=c('MercuryIDs').getUserIDFromParticipantID(l.author);var r=this.getadPreferencesUrl(l),s=function t(u,v){return c('MNCommercePromotionBlockDataManager').block(u,v);};c('Bootloader').loadModules(["MNAdsMessagesManageBlockDialogContainer.react"],function(t){c('MNCommerceDialogStateActions').showDialog(t,{adPreferencesUrl:r,isOffsiteAd:p,onConfirmButtonClick:s,pageID:q});},'MNAdsMessageUtils');}.bind(this);n=c('React').createElement(c('Link.react'),{className:(!m?"_3kyk":'')+(m?' '+"_3kyl":''),onClick:o},i._("Manage"));return c('React').createElement('span',{className:!m?"_3kym":''},l.log_message_body,' ','\u00B7',' ',n);}return c('React').createElement('span',{className:!m?"_3kym":''},l.log_message_body);};function k(){}f.exports=new k();}),null);
__d('MessengerGameAdminMessageRoute',['RelayQL','RelayRoute'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='MessengerGameAdminMessageRoute';j.queries={adminMessageText:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'MessageData!'},name:'thread_and_message_id',value:{kind:'CallVariable',callVariableName:'messageData'}}],children:[].concat.apply([],[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(m)]),fieldName:'message',kind:'Query',metadata:{isAbstract:true,identifyingArgName:'thread_and_message_id',identifyingArgType:'MessageData!'},name:'MessengerGameAdminMessageRoute',type:'Message'};}(l.getFragment('adminMessageText'));}};j.paramDefinitions={messageData:{type:'MessageData!',required:true}};f.exports=j;}),null);
__d('MessengerGamesHorizontalLeaderboard.react',['cx','messengerContactImageReact','MessengerHorizontalScroll.react','MessengerResponsiveBlock.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerContactImageReact').comp,l=10,m=150,n=function q(r){var s=r.name,t=r.score,u=r.position;return c('React').createElement('div',{className:"_4u4_"},c('React').createElement('h3',null,s),c('React').createElement('div',null,t));},o=function q(r,s){if(!r||!r.user)return null;return c('React').createElement('div',{className:"_4u50",key:s},c('React').createElement(k,{size:40,src:r.user.profile_picture.uri,customBadge:String(s+1)}),c('React').createElement(n,{name:r.user.short_name,position:s+1,score:r.score}));};i=babelHelpers.inherits(p,c('React').PureComponent);j=i&&i.prototype;p.prototype.componentDidMount=function(){this.props.onLoad&&this.props.onLoad();};p.prototype.render=function(){var q=this.props.leaderboard.leaderboard_entries;return c('React').createElement(c('MessengerResponsiveBlock.react'),{breakpointsToggles:function r(s){return [s];}},function(r){var s=r[0];return c('React').createElement(c('MessengerHorizontalScroll.react'),{batchScroll:true,childPadding:l,childWidth:m,numChildrenVisible:Math.floor(s/(m+l)),width:s||0},q.map(o).filter(Boolean));});};function p(){i.apply(this,arguments);}f.exports=c('Relay').createContainer(p,{fragments:{leaderboard:function q(){return function(){return {children:[{calls:[{kind:'Call',metadata:{},name:'scores_only',value:{kind:'CallValue',callValue:true}}],children:[{fieldName:'score',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'short_name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'user',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'User'}],fieldName:'leaderboard_entries',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'InstantGameLeaderboardEntry'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerGamesHorizontalLeaderboard_react_LeaderboardRelayQL',type:'InstantGameLeaderboard'};}();}}});}),null);
__d('MessengerGamesExpandedAdmin.react',['cx','fbt','MessengerButton.react','messengerContactImageReact','MessengerGamesHorizontalLeaderboard.react','Link.react','React','Relay','RelayQL','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerContactImageReact').comp,m=function o(p){var q=p.name,r=p.uri;return c('React').createElement('div',{className:"_261_"},c('React').createElement(l,{size:25,src:r}),c('React').createElement('h2',{className:"_2620"},q));};j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.prototype.componentDidMount=function(){this.props.onLoad&&this.props.onLoad();};n.prototype.render=function(){var o,p,q=this.$MessengerGamesExpandedAdmin1(),r=this.$MessengerGamesExpandedAdmin2();if(!r||!q)return null;var s=(o=r)!=null?(o=o.game)!=null?o.name:o:o,t=(p=r)!=null?(p=p.game)!=null?(p=p.instant_game_info)!=null?p.icon_uri:p:p:p;return c('React').createElement('div',null,c('React').createElement('div',{className:"_4ea2 _2kar"}),c('React').createElement(c('Link.react'),{className:"_fy2 _2621",'aria-haspopup':'true','aria-label':i._("View Less"),href:'#',onClick:this.props.hideAdmin,role:'button'}),c('React').createElement(m,{name:s,uri:t}),c('React').createElement('div',{className:"_2622"},r.expanded_text),c('React').createElement(c('MessengerGamesHorizontalLeaderboard.react'),{leaderboard:q,onLoad:this.props.onLoad}),c('React').createElement(c('MessengerButton.react'),{className:"_fy2 _2623",label:i._("Play Now"),onClick:this.props.playGame,type:'primary',use:'default'}),c('React').createElement('div',{className:"_4ea2 _2kar"}));};n.prototype.$MessengerGamesExpandedAdmin1=function(){var o;return (o=this.$MessengerGamesExpandedAdmin2())!=null?o.leaderboard:o;};n.prototype.$MessengerGamesExpandedAdmin2=function(){var o;return (o=this.props)!=null?(o=o.adminMessageText)!=null?o.extensible_message_admin_text:o:o;};function n(){j.apply(this,arguments);}f.exports=c('Relay').createContainer(n,{fragments:{adminMessageText:function o(){return function(p){return {children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{children:[{fieldName:'name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'icon_uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'instant_game_info',kind:'Field',metadata:{canHaveSubselections:true},type:'GamesInstantPlayStyleInfo'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'game',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Application'},{fieldName:'expanded_text',kind:'Field',metadata:{},type:'String'},{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(p)]),fieldName:'leaderboard',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'InstantGameLeaderboard'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'InstantGameUpdateExtensibleMessageAdminText',type:'InstantGameUpdateExtensibleMessageAdminText'}],fieldName:'extensible_message_admin_text',kind:'Field',metadata:{canHaveSubselections:true,isAbstract:true},type:'ExtensibleMessageAdminText'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'GenericAdminTextMessage',type:'GenericAdminTextMessage'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'MessengerGamesExpandedAdmin_react_AdminMessageTextRelayQL',type:'Message'};}(c('MessengerGamesHorizontalLeaderboard.react').getFragment('leaderboard'));}}});}),null);
__d('MessengerGamesExpandedAdminContainer.react',['fbt','MessengerGameAdminMessageRoute','MessengerGamesExpandedAdmin.react','React','Relay'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('Relay').RootContainer;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderLoaded=function(r){var s=this.props,t=s.gameID,u=s.hideAdmin,v=s.playGame,w=s.threadFBID;return c('React').createElement(c('MessengerGamesExpandedAdmin.react'),babelHelpers['extends']({},r,{gameID:t,hideAdmin:u,onLoad:this.props.onLoad,playGame:v,threadFBID:w}));}.bind(this),n;}l.prototype.render=function(){var m=this.props,n=m.messageID,o=m.threadFBID,p=m.renderLoading;return c('React').createElement(k,{Component:c('MessengerGamesExpandedAdmin.react'),route:new (c('MessengerGameAdminMessageRoute'))({messageData:{message_id:n,thread_id:o}}),renderLoading:p,renderFetched:this.renderLoaded,renderFailure:this.renderFailure});};l.prototype.renderFailure=function(){return h._("Failed to load");};f.exports=l;}),null);
__d('MessengerGameAdminMessage.react',['cx','fbt','BootloadOnRender.react','GamesQuicksilverContextKey','ImmutableObject','InstantGameContextType','JSResource','LazyComponent.react','Link.react','MercuryIDs','MessengerGamesCustomUpdateAdminContainer.react','MessengerGamesCustomUpdateData','MessengerGamesExpandedAdminContainer.react','MessengerSpinner.react','QuicksilverSources','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state=this.$MessengerGameAdminMessage1(),this.renderText=function(){return c('React').createElement('span',null,c('React').createElement('span',null,this.props.text,' '),c('React').createElement(c('Link.react'),{className:"_fy2",onClick:this.state.isExpanded?this.$MessengerGameAdminMessage2:this.$MessengerGameAdminMessage4},i._("View")));}.bind(this),this.$MessengerGameAdminMessage5=function(){this.setState({playerOpen:false});}.bind(this),this.$MessengerGameAdminMessage3=function(){this.setState({playerOpen:true});}.bind(this),this.$MessengerGameAdminMessage4=function(){this.setState({isExpanded:true});}.bind(this),this.$MessengerGameAdminMessage2=function(){this.setState({isExpanded:false});}.bind(this),o;}m.prototype.$MessengerGameAdminMessage1=function(){return {isExpanded:this.props.isLastOfType,playerOpen:false};};m.prototype.componentDidMount=function(){this.props.onLoad&&this.props.onLoad();};m.prototype.componentWillReceiveProps=function(n){if(this.props.isLastOfType!==n.isLastOfType)this.setState({isExpanded:n.isLastOfType});};m.prototype.getXMATData=function(){return this.props.message.log_message_data&&this.props.message.log_message_data.untypedData?new (c('ImmutableObject'))(this.props.message.log_message_data.untypedData):new (c('ImmutableObject'))();};m.prototype.render=function(){var n=this.getXMATData(),o=null;switch(n.update_type){case 'game_score':o=this.renderGame(n.game_id);return this.state.isExpanded?c('React').createElement('span',null,c('React').createElement(c('MessengerGamesExpandedAdminContainer.react'),{hideAdmin:this.$MessengerGameAdminMessage2,gameID:n.game_id,messageID:this.props.message.message_id,playGame:this.$MessengerGameAdminMessage3,threadFBID:c('MercuryIDs').getThreadFBIDFromThreadID(this.props.message.thread_id),onLoad:this.props.onLoad,renderLoading:this.renderText}),o):c('React').createElement('span',null,this.renderText(),o);case 'custom_message':var p=n.update_data?JSON.parse(n.update_data):n,q=new (c('MessengerGamesCustomUpdateData'))(p);o=this.renderGame(n.game_id,{contextKey:q.getContextKey()||undefined,entryPointData:q.getPayload()||undefined});return this.state.isExpanded?c('React').createElement('span',null,c('React').createElement(c('MessengerGamesCustomUpdateAdminContainer.react'),{data:q,gameID:n.game_id,hideAdmin:this.$MessengerGameAdminMessage2,playGame:this.$MessengerGameAdminMessage3,renderLoading:this.renderText,text:this.props.text}),o):c('React').createElement('span',null,this.renderText(),o);default:return c('React').createElement('span',null,this.props.text);}};m.prototype.renderGame=function(n){var o=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],p=c('MercuryIDs').getThreadFBIDFromThreadID(this.props.message.thread_id),q=c('InstantGameContextType').SOLO,r=null,s=o.contextKey;if(s){q=s.getType();r=s.getSourceID();}else if(p){q=c('InstantGameContextType').THREAD;r=p;}return this.state.playerOpen?c('React').createElement('div',{key:n},c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MessengerGamesQuicksilverPlayerContainer.react').__setRef('MessengerGameAdminMessage.react'),placeholder:c('React').createElement(c('MessengerSpinner.react'),null),component:c('React').createElement(c('LazyComponent.react'),{contextSourceID:r,contextType:q,entryPointData:o.entryPointData,gameID:n,onHide:this.$MessengerGameAdminMessage5,source:c('QuicksilverSources').MESSENGER_ADMIN_MESSAGE,sourceID:p,invitationID:this.props.message.message_id})})):null;};m.propTypes={message:l.instanceOf(c('ImmutableObject')).isRequired,text:l.string.isRequired,isLastOfType:l.bool.isRequired};f.exports=m;}),null);
__d("MessengerGroupPollingAllOptionsWebGraphQLQuery",["WebGraphQLQueryHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLQueryHelper").getExports({docID:"1332332233495274",queryID:"161810330985999"});}),null);
__d('MessengerGroupPollingAdminMessage.react',['cssVar','cx','fbt','ix','AsyncRequest','BootloadOnRender.react','Image.react','ImmutableObject','JSResource','LazyComponent.react','MessengerContextualDialog.react','MessengerEnvironment','MessengerGroupPollingAllOptionsWebGraphQLQuery','MessengerGroupPollingUtils','MessengerSpinner.react','React','idx'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('React').PropTypes,o=16,p=24,q=k("86887"),r=k("86886"),s=3;l=babelHelpers.inherits(t,c('React').Component);m=l&&l.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=m.constructor).call.apply(u,[this].concat(x)),this.state={flyoutOpen:false,options:null},this.$MessengerGroupPollingAdminMessage1=false,this.$MessengerGroupPollingAdminMessage3=function(z){this.setState({flyoutOpen:z});}.bind(this),this.$MessengerGroupPollingAdminMessage4=function(){this.setState({flyoutOpen:false});}.bind(this),this.$MessengerGroupPollingAdminMessage8=function(z){this.$MessengerGroupPollingAdminMessage1=this.state.flyoutOpen;}.bind(this),this.$MessengerGroupPollingAdminMessage7=function(z){z.stopPropagation();if(this.state.flyoutOpen||this.$MessengerGroupPollingAdminMessage1)return;if(!this.state.options&&!this.state.flyoutOpen)this.$MessengerGroupPollingAdminMessage9();this.setState({flyoutOpen:!this.state.flyoutOpen});}.bind(this),v;}t.prototype.render=function(){var u,v,w=this.props.customColor||"#0084ff",x=c('MessengerGroupPollingUtils').renderEmojiText(this.props.message.log_message_body),y=c('MessengerEnvironment').messengerui,z=this.props.isLastOfType||this.state.flyoutOpen&&y;if(!z)return x;var aa=(u=this.props.message)!=null?(u=u.log_message_data)!=null?(u=u.untypedData)!=null?u.question_json:u:u:u,ba=aa&&JSON.parse(aa);if(!ba)return this.$MessengerGroupPollingAdminMessage2();var ca=y?p:o,da=c('React').createElement('div',{className:"_8bt"+(!y?' '+"_5il4":'')},c('React').createElement(c('MessengerSpinner.react'),{color:'grey'})),ea=null;if(this.state.flyoutOpen)ea=c('React').createElement(c('MessengerContextualDialog.react'),{contextRef:function(){return this.refs.voteButton;}.bind(this),shown:this.state.flyoutOpen,onToggle:this.$MessengerGroupPollingAdminMessage3,onBlur:this.$MessengerGroupPollingAdminMessage4},c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{customColor:w,questionID:ba.id,questionText:ba.text,options:this.state.options,onSubmitHandler:this.$MessengerGroupPollingAdminMessage4}),loader:c('JSResource')('MessengerGroupPollingFlyout.react').__setRef('MessengerGroupPollingAdminMessage.react'),placeholder:da}));var fa=((v=ba)!=null?(v=v.options)!=null?(v=v[0])!=null?v.total_count:v:v:v)||0,ga=ba.options.map(function(ia){return c('React').createElement('div',{className:"_3b4a"+(!y?' '+"_4ic5":''),key:ia.id},c('React').createElement('div',{className:"_3b4c"},c('React').createElement('div',{className:(y?"_3b4f":'')+(!y?' '+"_4ic6":'')},c('MessengerGroupPollingUtils').renderEmojiText(ia.text)),c('MessengerGroupPollingUtils').renderVoterFacepiles("_4ic7"+(!y?' '+"_8kg":''),ca,ia.total_count,ia.voters,ia.viewer_has_voted==='true')),c('React').createElement('div',{className:"_3b4h"+(!y?' '+"_4ic8":'')},c('React').createElement('span',{style:{width:this.$MessengerGroupPollingAdminMessage5(ia.total_count,fa),backgroundColor:w}})));}.bind(this)),ha=ba.viewer_has_voted==='true'?j._("Change Vote"):j._("Vote");return c('React').createElement('div',null,x,c('React').createElement('div',{className:"_3b4t"+(!y?' '+"_4ic9":'')},c('React').createElement('div',{className:"_3b4u"+(!y?' '+"_2wew":'')},c('React').createElement(c('Image.react'),{className:"_4ica"+(!y?' '+"_2ozk":''),src:y?q:r}),j._("Poll")),c('React').createElement('div',{className:(y?"_3b4v":'')+(!y?' '+"_2wex":'')},c('MessengerGroupPollingUtils').renderEmojiText(ba.text)),c('React').createElement('div',{className:"_3b4w"},ga),c('React').createElement('div',{className:"_8bu"},this.$MessengerGroupPollingAdminMessage6(ba.total_count)),c('React').createElement('div',{className:"_4icb"+(!y?' '+"_4icc":'')+(y?' '+"uiContextualLayerParent":'')+(y?' '+"_5f0v":''),onClick:this.$MessengerGroupPollingAdminMessage7,onMouseDown:this.$MessengerGroupPollingAdminMessage8,ref:'voteButton',role:'button',style:{color:w},tabIndex:'0'},ha,ea)));};t.prototype.$MessengerGroupPollingAdminMessage2=function(){return c('React').createElement('span',null,j._("{original-admin-message} Use the mobile app to vote.",[j.param('original-admin-message',this.props.message.log_message_body)]));};t.prototype.$MessengerGroupPollingAdminMessage6=function(u){var v=u-s;if(v<=0){return null;}else return j._({"*":"{number of remaining answer options} more options...","268435456":"{number of remaining answer options} more option..."},[j.param('number of remaining answer options',v),j.plural(v)]);};t.prototype.$MessengerGroupPollingAdminMessage9=function(){var u,v=(u=this.props.message)!=null?(u=u.log_message_data)!=null?(u=u.untypedData)!=null?u.question_id:u:u:u;if(!v){this.setState({options:[]});return;}var w=c('MessengerGroupPollingAllOptionsWebGraphQLQuery').getURI({node_id:v});new (c('AsyncRequest'))().setURI(w).setHandler(function(x){var y=x.payload.data.node,z=y.options.edges||[],aa=z.map(function(ba){return ba.node;});this.setState({options:aa});}.bind(this)).send();};t.prototype.$MessengerGroupPollingAdminMessage5=function(u,v){return v===0?'0%':u/v*100+'%';};t.propTypes={customColor:n.string,message:n.instanceOf(c('ImmutableObject')).isRequired,isLastOfType:n.bool.isRequired};f.exports=t;}),null);
__d('MercuryXMATRenderer',['cx','fbt','invariant','MercuryConfig','MercuryIDs','MercuryParticipants','MessagingGenericAdminTextType','MessengerGameAdminMessage.react','MessengerGroupPollingAdminMessage.react','MessengerPagesCommercePaymentEnabledAdminMessage.react','MessengerTextWithEntities.react','MNAdsMessageUtils','React','FacepileRounded.react','isWebGLEnabled'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k={renderText:function l(m,n,o,p){var q=c('React').createElement(c('MessengerTextWithEntities.react'),{renderEmoji:true,renderEmoticons:true,text:n.log_message_body});switch(n.log_message_data.message_type){case c('MessagingGenericAdminTextType').JOURNEY_PROMPT_COLOR:q=i._("You need to be on the latest version of Messenger on a mobile device to pick a colour for this conversation.");break;case c('MessagingGenericAdminTextType').JOURNEY_PROMPT_NICKNAME:var r=null,s=c('MercuryIDs').getUserIDFromParticipantID(n.author);if(n.other_user_fbid&&s!==n.other_user_fbid){var t=c('MercuryIDs').getParticipantIDFromUserID(n.other_user_fbid);r=c('MercuryParticipants').getOrFetch(t);}if(r&&r.short_name){q=i._("You need to be using the latest version of Messenger on a mobile device to set a nickname for {admin-text-message}.",[i.param('admin-text-message',r.short_name)]);}else q=i._("You need to be on the latest version of Messenger on a mobile device to set a nickname for yourself.");break;case c('MessagingGenericAdminTextType').JOURNEY_PROMPT_LIKE:q=i._("You need to be on the latest version of Messenger on a mobile device to pick an emoji for this conversation.");break;case c('MessagingGenericAdminTextType').INSTANT_GAME_UPDATE:if(c('MercuryConfig').MessengerGamesGK&&c('isWebGLEnabled')())q=c('React').createElement(c('MessengerGameAdminMessage.react'),{message:n,text:n.log_message_body,isLastOfType:o,onLoad:p});break;case c('MessagingGenericAdminTextType').ADS_WELCOME_MSG:break;case c('MessagingGenericAdminTextType').AD_MANAGE_MESSAGE:if(c('MNAdsMessageUtils').isAdsAdminMessage(n))q=c('MNAdsMessageUtils').getAdsPageManage(n,false);break;case c('MessagingGenericAdminTextType').CONFIRM_FRIEND_REQUEST:var u=n.log_message_data.untypedData.friend_request_recipient,v=n.log_message_data.untypedData.friend_request_sender,w=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(u)),x=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(v));if(x!=null&&w!=null)q=c('React').createElement(c('FacepileRounded.react'),{profiles:[w,x],message:n.log_message_body,numProfilesToDisplay:2,className:"_8lx"});break;case c('MessagingGenericAdminTextType').GROUP_POLL:q=c('React').createElement(c('MessengerGroupPollingAdminMessage.react'),{customColor:m,message:n,isLastOfType:o});break;case c('MessagingGenericAdminTextType').PAGES_COMMERCE_PAYMENT_ENABLED:q=c('React').createElement(c('MessengerPagesCommercePaymentEnabledAdminMessage.react'),{message:n});break;default:break;}return c('React').createElement('span',null,q);}};f.exports=k;}),null);
__d('P2PMercuryLogMessage.react',['cx','fbt','MessengerEnvironment','CurrentUser','Link.react','MercuryIDs','P2PGroupPaymentRequestReceiptDialog.react','P2PGroupSendReceiptDialog.react','P2PPaymentLogMessageSubtype','React','ReactLayeredComponentMixin_DEPRECATED','XP2PPaymentRequestReceiptController','XP2PTransactionDetailController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'P2PMercuryLogMessage',mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{amount:j.string,receiver:j.object.isRequired,sender:j.object.isRequired,subtype:j.oneOf(Object.keys(c('P2PPaymentLogMessageSubtype')).map(function(l){return c('P2PPaymentLogMessageSubtype')[l];})),transferID:j.string.isRequired,threadFBID:j.string,threadID:j.string},getDefaultProps:function l(){return {amount:'',sender:null,receiver:null,subtype:null};},getInitialState:function l(){return {groupPaymentRequestReceiptDetailsShown:false,groupSendReceiptDetailsShown:false};},handleGroupDetailsLinkClicked:function l(){this.setState({groupSendReceiptDetailsShown:true});},handleGroupPaymentRequestDetailsLinkClicked:function l(){this.setState({groupPaymentRequestReceiptDetailsShown:true});},handleThirdPartyReceiptDialogClosed:function l(){this.setState({groupPaymentRequestReceiptDetailsShown:false,groupSendReceiptDetailsShown:false});},isViewerSender:function l(){var m=this.props.sender.id;return m&&c('MercuryIDs').getUserIDFromParticipantID(m)===c('CurrentUser').getID();},isViewerReceiver:function l(){var m=this.props.receiver.id;return m&&c('MercuryIDs').getUserIDFromParticipantID(m)===c('CurrentUser').getID();},renderPaymentRequestDetailsLink:function l(){var m=c('XP2PPaymentRequestReceiptController').getURIBuilder().setString('id',this.props.transferID).getURI();return c('React').createElement(c('Link.react'),{className:"_kiq",href:m,target:'_blank'},i._("See details"));},renderTransferDetailsLink:function l(){var m=c('XP2PTransactionDetailController').getURIBuilder().setString('id',this.props.transferID).getURI();return c('React').createElement(c('Link.react'),{className:"_kiq",href:m,target:'_blank'},i._("See details"));},renderGroupDetailsLink:function l(){return c('React').createElement(c('Link.react'),{className:"_kiq",href:'#',onClick:this.handleGroupDetailsLinkClicked},i._("See details"));},renderGroupPaymentRequestDetailsLink:function l(){return c('React').createElement(c('Link.react'),{className:"_kiq",href:'#',onClick:this.handleGroupPaymentRequestDetailsLinkClicked},i._("See details"));},renderLayers:function l(){var m={},n={full_name:this.props.receiver.name,id:this.props.receiver.id,picture:this.props.receiver.image_src,profile_uri:this.props.receiver.href},o={full_name:this.props.sender.name,id:this.props.sender.id,picture:this.props.sender.image_src,profile_uri:this.props.sender.href};if(this.state.groupSendReceiptDetailsShown){m.groupSendReceiptDetailsDialog=c('React').createElement(c('P2PGroupSendReceiptDialog.react'),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,receiver:n,sender:o});}else if(this.state.groupPaymentRequestReceiptDetailsShown)m.groupPaymentRequestReceiptDetailsDialog=c('React').createElement(c('P2PGroupPaymentRequestReceiptDialog.react'),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,requestee:n,requester:o});return m;},render:function l(){var m=null,n=this.props.amount,o=this.props.subtype,p=this.isViewerSender(),q=this.isViewerReceiver(),r=void 0;if(!p&&!q){r=this.renderGroupDetailsLink();}else r=this.renderTransferDetailsLink();switch(o){case c('P2PPaymentLogMessageSubtype').SENT_IN_GROUP:m=i._("{sendername} sent {amount} to {receivername}. {details}",[i.param('sendername',this.props.sender.name),i.param('amount',n),i.param('receivername',this.props.receiver.name),i.param('details',r)]);break;case c('P2PPaymentLogMessageSubtype').CANCELED_EXPIRED:case c('P2PPaymentLogMessageSubtype').CANCELED_SAME_CARD:case c('P2PPaymentLogMessageSubtype').CANCELED_SENDER_RISK:case c('P2PPaymentLogMessageSubtype').CANCELED_RECIPIENT_RISK:case c('P2PPaymentLogMessageSubtype').CANCELED_CUSTOMER_SERVICE:if(p){m=i._("Your payment of {amount} was cancelled. {details}",[i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else if(q){m=i._("{name}'s payment of {amount} was cancelled. {details}",[i.param('name',this.props.sender.name),i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else m=i._("{sender_name}'s payment of {amount} to {receiver_name} was cancelled. {details}",[i.param('sender_name',this.props.sender.name),i.param('amount',n),i.param('receiver_name',this.props.receiver.name),i.param('details',r)]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').CANCELED_DECLINED:if(p){m=i._("{name} didn't accept your payment of {amount}. {details}",[i.param('name',this.props.receiver.name),i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else if(q){m=i._("You didn't accept {name}'s payment of {amount}. {details}",[i.param('name',this.props.sender.name),i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else m=i._("{receiver_name} didn't accept {sender_name}'s payment of {amount}. {details}",[i.param('receiver_name',this.props.receiver.name),i.param('sender_name',this.props.sender.name),i.param('amount',n),i.param('details',r)]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').REQUEST_CANCELED_BY_REQUESTER:if(p){m=i._("You cancelled your request for {payment request amount}. {details}",[i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else if(q){m=i._("{sender's name} cancelled their request for {payment request amount}. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else m=i._("{sender's name} cancelled their request for {payment request amount} from {receiver's name}. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('receiver\'s name',this.props.receiver.name),i.param('details',this.renderGroupPaymentRequestDetailsLink())]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').REQUEST_DECLINED_BY_REQUESTEE:if(p){m=i._("{receiver's name} declined your request for {payment request amount}. {details}",[i.param('receiver\'s name',this.props.receiver.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else if(q){m=i._("You declined {sender's name}'s request for {payment request amount}. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else m=i._("{receiver's name} declined {sender's name}'s request for {payment request amount}. {details}",[i.param('receiver\'s name',this.props.receiver.name),i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderGroupPaymentRequestDetailsLink())]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').REQUEST_EXPIRED:if(p){m=i._("Your request for {payment request amount} expired, so it was cancelled. {details}",[i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else if(q){m=i._("{sender's name}'s request for {payment request amount} expired so it was cancelled. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else m=i._("{sender's name}'s request to {receiver's name} for {payment request amount} expired so it was cancelled. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('receiver\'s name',this.props.receiver.name),i.param('payment request amount',n),i.param('details',this.renderGroupPaymentRequestDetailsLink())]);m=c('React').createElement('span',{className:"_5rdx"},m);break;}return c('React').createElement('div',{className:c('MessengerEnvironment').messengerui?"_5rdy":''},m);}});f.exports=k;}),null);
__d('MessengerLogMessageBody.react',['fbt','immutable','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryLogMessageType','MessengerAdminGroupUtils','P2PMercuryLogMessage.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerLogMessageBody',_viewer:'',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{thread:i.instanceOf(c('ImmutableObject')),message:i.instanceOf(c('ImmutableObject')).isRequired,viewer:i.string.isRequired},statics:{calculateState:function k(l){var m=[],n=l.message,o=n.log_message_data,p=n.log_message_type;switch(p){case c('MercuryLogMessageType').SUBSCRIBE:m=o.added_participants;break;case c('MercuryLogMessageType').UNSUBSCRIBE:m=o.removed_participants;break;case c('MercuryLogMessageType').ORION:m.push(o.senderId,o.receiverId);break;}if(!m||!m.length)return {};var q=c('immutable').Map().withMutations(function(r){m.forEach(function(s){r.set(s,c('MercuryParticipants').getOrFetch(s)||{});});});return {extraParticipants:q};}},render:function k(){var l=this.props.message.log_message_type;this._viewer=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer);if(this._viewer!==this.props.message.author&&l!==c('MercuryLogMessageType').ORION)return null;var m=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread);switch(l){case c('MercuryLogMessageType').SUBSCRIBE:return c('React').createElement('span',null,this._renderSubscribeMessage(this.props.message));case c('MercuryLogMessageType').UNSUBSCRIBE:if(m)return c('React').createElement('span',null,this._renderUnsubscribeMessageForRoom(this.props.message));return c('React').createElement('span',null,this._renderUnsubscribeMessage(this.props.message));case c('MercuryLogMessageType').THREAD_NAME:var n=this.props.message.log_message_data;if(m){if(!n.name)return c('React').createElement('span',null,h._("You removed the room name."));return c('React').createElement('span',null,h._("You named the room {the new name of the group}.",[h.param('the new name of the group',n.name)]));}if(!n.name)return c('React').createElement('span',null,h._("You removed the group name."));return c('React').createElement('span',null,h._("You named the group {the new name of the group}.",[h.param('the new name of the group',n.name)]));case c('MercuryLogMessageType').THREAD_IMAGE:if(m)return c('React').createElement('span',null,h._("You changed the room photo."));return c('React').createElement('span',null,h._("You changed the group photo."));case c('MercuryLogMessageType').ORION:return this._renderP2PLogMessage(this.props.message);default:return null;}},_renderP2PLogMessage:function k(l){var m=l.log_message_data,n=m.senderId,o=m.receiverId,p=this.state.extraParticipants,q=p.get(n),r=p.get(o);return c('React').createElement(c('P2PMercuryLogMessage.react'),{amount:m.formattedAmount,receiver:r,sender:q,subtype:m.subtype,threadFBID:l.thread_fbid,threadID:l.thread_id,transferID:m.transfer_id});},_renderSubscribeMessage:function k(l){var m=this._moveCurrentUserToFront(l.log_message_data.added_participants),n=this.state.extraParticipants;switch(m.length){case 1:return h._("You added {subscriber1}.",[h.param('subscriber1',n.get(m[0]).name)]);case 2:return h._("You added {subscriber1} and {subscriber2}.",[h.param('subscriber1',n.get(m[0]).name),h.param('subscriber2',n.get(m[1]).name)]);case 3:return h._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[h.param('subscriber1',n.get(m[0]).name),h.param('subscriber2',n.get(m[1]).name),h.param('subscriber3',n.get(m[2]).name)]);default:var o=m.map(function(p){return n.get(p);});return h._("You added {subscriber1}, {subscriber2} and {num} other people.",[h.param('subscriber1',o[0].name),h.param('subscriber2',o[1].name),h.param('num',o.slice(2).length)]);}},_renderUnsubscribeMessage:function k(l){var m=this.state.extraParticipants,n=l.log_message_data.removed_participants[0],o=m.get(n);if(!n||n===l.author){return h._("You left the conversation.");}else return h._("You removed {name} from the conversation.",[h.param('name',o.name)]);},_renderUnsubscribeMessageForRoom:function k(l){var m=this.state.extraParticipants,n=l.log_message_data.removed_participants[0],o=m.get(n);if(!n||n===l.author){return h._("You left the room.");}else return h._("You removed {name} from the room.",[h.param('name',o.name)]);},_moveCurrentUserToFront:function k(l){var m=this._viewer,n=l.indexOf(m);if(n>0){var o=l.filter(function(p){return p!==m;});return [m].concat(o);}return l;}});f.exports=j;}),null);
__d('MessengerLogMessage.react',['cx','ix','Image.react','ImmutableObject','MercuryLogMessageType','MercuryLWARenderer','MercuryMessageInfo','MercuryXMATRenderer','MessagingGenericAdminTextType','MessengerLightweightActionUtils','MessengerLogMessageBody.react','MNCommerceLogMessageUtils','React','convertMIGColorToFIGColor','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=i("86913");j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.prototype.render=function(){return c('React').createElement('div',{className:this.$MessengerLogMessage1()},this.$MessengerLogMessage2(),c('React').createElement('i',{className:"_uwa"}),c('React').createElement('span',{className:"_3oh-"},this.$MessengerLogMessage3()));};n.prototype.$MessengerLogMessage3=function(){var o=c('convertMIGColorToFIGColor')(this.props.thread&&this.props.thread.custom_color),p=void 0;if(c('MessengerLightweightActionUtils').isLWAMessage(this.props.message))return c('MercuryLWARenderer').renderCollapsedText(this.props.message);if(this.props.message.log_message_type!==c('MercuryLogMessageType').ORION)p=c('MercuryXMATRenderer').renderText(o,this.props.message,this.props.isLastOfType,this.props.onImageLoad);return this.$MessengerLogMessage4()||p||c('React').createElement(c('MessengerLogMessageBody.react'),{message:this.props.message,viewer:this.props.viewer,thread:this.props.thread});};n.prototype.$MessengerLogMessage4=function(){var o=this.props.message;if(c('MNCommerceLogMessageUtils').isCommercePageAdminMessage(o))return c('MNCommerceLogMessageUtils').getCommercePageManage(o,true);return null;};n.prototype.$MessengerLogMessage2=function(){if(!c('MercuryMessageInfo').hasError(this.props.message))return null;return c('React').createElement(c('Image.react'),{className:"_41-9",src:m});};n.prototype.$MessengerLogMessage1=function(){var o=void 0,p=this.props.message,q=p.log_message_type===c('MercuryLogMessageType').UNSUBSCRIBE&&p.log_message_data.removed_participants.indexOf(p.author)!==-1,r=this.props.viewer;switch(p.log_message_type){case c('MercuryLogMessageType').SUBSCRIBE:o="_uwb";break;case c('MercuryLogMessageType').UNSUBSCRIBE:o=q?"_uwc":"_uwe";break;case c('MercuryLogMessageType').PHONE_CALL:o=p.log_message_data.caller.indexOf(r)!==-1?"_uwf":"_uwg";break;case c('MercuryLogMessageType').VIDEO_CALL:o=p.log_message_data.caller.indexOf(r)!==-1?"_uwh":"_uwi";break;case c('MercuryLogMessageType').THREAD_NAME:o="_uwj";break;case c('MercuryLogMessageType').THREAD_IMAGE:o="_uwk";break;case c('MercuryLogMessageType').SERVER_ERROR:o="_uwl";break;case c('MercuryLogMessageType').LIVE_LISTEN:o="_uwm";break;case c('MercuryLogMessageType').WALLPAPER:o="_uwn";break;case c('MercuryLogMessageType').ORION:o="_uwo";break;case c('MercuryLogMessageType').SWITCH_TO_WORK:o="_uwp";break;case c('MercuryLogMessageType').PAGE_REPLY:o="_uwq";break;}return c('joinClasses')("_497p"+((p.log_message_type===c('MercuryLogMessageType').PHONE_CALL||p.log_message_type===c('MercuryLogMessageType').VIDEO_CALL)&&!p.log_message_data.answered?' '+"_3no3":'')+(p.log_message_data&&p.log_message_data.message_type===c('MessagingGenericAdminTextType').INSTANT_GAME_UPDATE?' '+"_11es":''),o);};function n(){j.apply(this,arguments);}n.propTypes={message:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired,isLastOfType:l.bool.isRequired,onImageLoad:l.func};f.exports=n;}),null);
__d('MessengerPageAdminNoteList.react',['cx','fbt','LeftRight.react','MessengerBubble.react','PagesMessengerCreatorInfo.react','ReactComponentWithPureRenderMixin','React','enumerate','classWithMixins','immutable','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('classWithMixins')(c('React').Component,c('mixin')(c('ReactComponentWithPureRenderMixin'))));k=j&&j.prototype;m.prototype.render=function(){var n=[],o=this.calculateGroups(this.props.notes);o.forEach(function(p,q){n.push(c('React').createElement('li',{className:"_4kd2",key:'group:'+q},this.$MessengerPageAdminNoteList1(p)));}.bind(this));return c('React').createElement('ul',{className:"_4kd3"},n);};m.prototype.$MessengerPageAdminNoteList1=function(n){var o=[];n.forEach(function(p,q){o.push(c('React').createElement('div',{className:"_4kd4",key:'note:'+q},this.$MessengerPageAdminNoteList2(p,n)));}.bind(this));return o;};m.prototype.$MessengerPageAdminNoteList2=function(n,o){var p=c('immutable').List([c('React').createElement(c('LeftRight.react'),{className:"_561k"},c('React').createElement('div',{className:"_561l"},i._("Private note")),c('React').createElement(c('PagesMessengerCreatorInfo.react'),{key:'creator_info',creator_info:o[0].creator_info,isNote:true}))]);return c('React').createElement('div',{className:"_o46 _3i_m _nd_"},c('React').createElement('div',{className:'clearfix'},c('React').createElement(c('MessengerBubble.react'),{body:n.body.text,attachments:p,className:"_3058 _4kd5"})));};m.prototype.calculateGroups=function(n){var o=[],p=null,q=null,r=c('enumerate')(n),s=void 0;while(!(s=r.next()).done){var t=q&&q.value.creator_info.creatorID===s.value.creator_info.creatorID;if(!t){p=[];o.push(p);}if(p)p.push(s.value);q=s;}return o;};function m(){j.apply(this,arguments);}m.propTypes={notes:l.arrayOf(l.shape({id:l.string,body:l.object.isRequired,creator_info:l.shape({creatorID:l.string.isRequired,creatorName:l.string.isRequired,creatorType:l.string.isRequired,labelType:l.string.isRequired,pageID:l.string.isRequired,profileURI:l.string}),timestamp:l.number.isRequired})).isRequired};f.exports=m;}),null);
__d('MessengerMessageGroup.react',['cx','fbt','immutable','ImmutableObject','Image.react','Link.react','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryParticipantSilhouettes','MercuryTimestamp','MessengerActions','MessengerConfig','MessengerDateBreak.react','MessengerMessage.react','MessengerPageAdminNoteList.react','MessengerProfileImageWrapper.react','MessengerStickerUtils','MessengerTextWithEmoticons.react','messengerURIUtilsRe','PagesMessengerCreatorInfo.react','React','ReactDOM','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('immutable').List,k=c('immutable').OrderedMap,l=c('React').PropTypes,m=32,n=new (c('ImmutableObject'))({image_src:c('MercuryParticipantSilhouettes').neutralSilhouette,is_messenger_user:true,name:''}),o=c('React').createClass({displayName:'MessengerMessageGroup',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{activeMessageID:l.string,deliveryTimestamp:l.number.isRequired,hasDateBreak:l.bool,isCanonical:l.bool,isFromViewer:l.bool,isPageMessage:l.bool,lastReadTimestamp:l.number.isRequired,messages:l.instanceOf(c('immutable').List).isRequired,nextTimestamp:l.number.isRequired,onAttachmentLoad:l.func,onMessageDeselect:l.func.isRequired,onMessageSelect:l.func.isRequired,readReceipts:l.instanceOf(k).isRequired,thread:l.object,pageCustomAction:l.func,pageID:l.string},statics:{calculateState:function r(s){return {participants:p(s)};}},shouldComponentUpdate:function r(s,t){return this.props.activeMessageID!==s.activeMessageID||this.props.isFromViewer!==s.isFromViewer||this.props.deliveryTimestamp!==s.deliveryTimestamp||this.props.lastReadTimestamp!==s.lastReadTimestamp||!c('immutable').is(this.props.messages,s.messages)||!c('immutable').is(this.props.readReceipts,s.readReceipts)||!c('immutable').is(this.state.participants,t.participants)||!!(s.thread&&this.props.thread&&this.props.thread!==s.thread);},render:function r(){return c('React').createElement('div',null,c('React').createElement('div',{className:"_1t_p"+(' '+"clearfix")+(c('MessengerStickerUtils').isStickerMessageGroup(this.props.messages)?' '+"_5tx1":'')+(this._hasSeenHeadsAtBottom()?' '+"_35fy":'')},this._renderProfileColumn(),c('React').createElement('div',{className:"_41ud"},this._renderName(),this._renderMessages())),this.props.isPageMessage?this._renderNotes():null);},_renderProfileColumn:function r(){if(this.props.isFromViewer)return null;var s=this.props.messages.last(),t=this.state.participants.get(s.author)||n,u=i._("{name} {time}",[i.param('name',t.name),i.param('time',c('MercuryTimestamp').getPreciseTimestamp(s.timestamp))]),v=c('React').createElement(c('MessengerProfileImageWrapper.react'),{className:"_1t_r",isMessengerUser:t.is_messenger_user,size:m,showBadge:true,tooltipContent:u},c('React').createElement(c('Image.react'),{alt:t.name,src:t.image_src,height:m,width:m}));if(!this.props.isCanonical&&t.fbid){var w=c('messengerURIUtilsRe').getURIForUserID(t.fbid);v=c('React').createElement(c('Link.react'),{className:"_5f0v",href:w.toString(),onClick:this._handleContactSelect.bind(this,t),tabIndex:-1},v);}return c('React').createElement('div',{className:"_1t_q"},v);},_renderMessages:function r(){var s=this.props.messages.size,t=[];this.props.messages.forEach(function(u,v,w){var x=u.message_id===this.props.activeMessageID;if(x&&!(v===0&&this.props.hasDateBreak)&&!c('MessengerConfig').SentTimestampEnabled)t.push(c('React').createElement(c('MessengerDateBreak.react'),{className:"_5r8z",date:new Date(u.timestamp),key:'db:'+u.message_id}));var y=this.props.isPageMessage&&this.props.pageCustomAction?this.props.pageCustomAction:null;if(y)t.push(c('React').createElement('h4',{key:'page_action'+u.message_id},c('React').createElement(y,{message:u})));var z=c('MercuryIDs').getUserIDFromParticipantID(this.props.author),aa=this.props.thread?this.props.thread.custom_color:'';t.push(c('React').createElement(c('MessengerMessage.react'),{customColor:aa,deliveryTimestamp:this.props.deliveryTimestamp,isActive:x,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,key:u.message_id,message:u,messageActionsWrapper:this.props.messageActionWrapper,onAttachmentLoad:this.props.onAttachmentLoad,participants:this.state.participants,nextTimestamp:this._getNextTimestamp(w,s,v),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,readReceipts:this.props.readReceipts,showDeliveryState:u.timestamp>this.props.lastReadTimestamp,ref:u.message_id,authorFBID:z==null?undefined:z,threadCustomColor:aa,pageID:this.props.pageID}));if(q(this.props.isPageMessage,w,v,u))t.push(c('React').createElement(c('PagesMessengerCreatorInfo.react'),{key:'creator_info:'+v,creator_info:u.creator_info}));}.bind(this));return t;},_renderNotes:function r(){var s=[];this.props.messages.forEach(function(t,u,v){if(this.props.isPageMessage&&t.page_admin_notes)s.push(c('React').createElement(c('MessengerPageAdminNoteList.react'),{key:'notes:'+t.message_id,notes:t.page_admin_notes}));}.bind(this));return s;},_renderName:function r(){var s=this.state.participants.get(this.props.messages.first().author);if(!s)return null;var t=s.short_name;if(this.props.thread){var u=this.props.thread.custom_nickname?this.props.thread.custom_nickname:null,v=c('MercuryIDs').getUserIDFromParticipantID(s.id);if(u&&v&&u[v])t=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:u[v]});}return c('React').createElement('h5',{className:"_ih3"+(this.props.isCanonical||this.props.isFromViewer?' '+"_-ne":'')},c('React').createElement('span',{className:"_3oh-"},t));},getMessageElement:function r(s){return c('ReactDOM').findDOMNode(this.refs[s]);},_hasSeenHeadsAtBottom:function r(){var s=this.props,t=s.messages,u=s.nextTimestamp,v=s.readReceipts,w=t.last().timestamp,x=0;v.forEach(function(y){if(y>=w&&y<u)if(++x===2)return false;});return x===2;},_getNextTimestamp:function r(s,t,u){return u<t-1?s.get(u+1).timestamp:this.props.nextTimestamp;},_handleContactSelect:function r(s,t){t&&t.preventDefault();var u=c('MercuryIDs').getThreadIDFromParticipantID(s.id);u&&c('MessengerActions').selectThread(u);}});function p(r){var s=r.messages.first().author;return c('immutable').Map().withMutations(function(t){r.readReceipts.forEach(function(u,v){t.set(v,c('MercuryParticipants').getOrFetch(v));});t.set(s,c('MercuryParticipants').getOrFetch(s));});}function q(r,s,t,u){if(!r||!u.creator_info)return false;if(t===s.size-1)return true;var v=s.get(t+1).creator_info;if(!v)return true;return u.creator_info.creatorID!==v.creatorID;}f.exports=o;}),null);
__d('MessengerNewMessagesNotice.react',['cx','fbt','ix','Image.react','Link.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=j("86939");k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;o.prototype.render=function(){return c('React').createElement('div',{'aria-hidden':!this.props.isOpen,className:"_4wzq"+(this.props.isOpen?' '+"_4wzr":'')+(!this.props.isOpen?' '+"_4-je":'')},c('React').createElement(c('Link.react'),{className:"_5f0v _4wzs",onClick:this.props.onClick,tabIndex:this.props.isOpen?0:-1},c('React').createElement(c('Image.react'),{className:"_4wzt",src:n}),c('React').createElement('div',{className:"_1bqr"},this.props.label)));};function o(){k.apply(this,arguments);}o.propTypes={isOpen:m.bool.isRequired,label:m.node,onClick:m.func};o.defaultProps={label:i._("New messages")};f.exports=o;}),null);
__d('MessengerTypingIndicator.react',['cx','Image.react','immutable','MercuryParticipants','MercuryTypingAnimation.react','MessengerProfileImageWrapper.react','MessengerBubble.react','ReactComponentWithPureRenderMixin','React','createReactClass_DEPRECATED','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=32,k=c('createReactClass_DEPRECATED')({displayName:'MessengerTypingIndicator',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{userID:i.string,showName:i.bool},statics:{calculateState:function l(m){return {author:c('MercuryParticipants').getOrFetch(m.userID)};}},render:function l(){if(!this.state.author)return null;var m=this.state.author;return c('React').createElement('div',{className:"_1t_p _1hbw"},c('React').createElement('div',{className:"_1t_q"},c('React').createElement(c('MessengerProfileImageWrapper.react'),{className:"_1t_r",isMessengerUser:m.is_messenger_user,size:j,showBadge:true},c('React').createElement(c('Image.react'),{alt:'',src:m.image_src,height:j,width:j}))),c('React').createElement('div',{className:"_41ud"},c('React').createElement('div',{className:"_o46 _3erg _29_7"},c('React').createElement(c('MessengerBubble.react'),{attachments:c('immutable').List([c('React').createElement(c('MercuryTypingAnimation.react'),{key:'animation'})]),body:'',className:"_3058",ref:'bubble'}))));},getBubble:function l(){return this.refs.bubble;}});f.exports=k;}),null);
__d('MessengerConversation.react',['cx','csx','fbt','BootloadOnRender.react','ChatTypingIndicators.react','CSS','DOM','DOMDimensions','Event','FluxContainer','immutable','ImmutableObject','JSResource','KeyEventController','LazyComponent.react','MercuryConfig','MercuryIDs','MercuryDeliveryReceipts','MercuryRoger','MercuryShareAttachmentRenderLocations','MessageList.react','MessengerAttachmentRenderer','MessengerButton.react','MessengerCollapsedLogMessageGroup.react','MessengerConfig','MessengerContextBannerContainer.react','MessengerDateBreak.react','MessengerFlexScrollableArea.react','MessengerLogMessage.react','MessengerMessageGroup.react','MessengerNewMessagesNotice.react','MessengerPlatformSubscriptionMessageClassification','MessengerQuickCamButtonHTML5.react','MessengerQuickCamOrigins','MessengerSpinner.react','MessengerTypingIndicator.react','MessengerVideoAutoplayActions','MessengerVideoAutoplayStore','MNOmniMConstants','OmniMStore','Parent','React','ReactDOM','Set','SubscriptionsHandler','UserActivity','WebMessengerConstants','convertMIGColorToFIGColor','joinClasses','setImmediate','throttle'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('MercuryDeliveryReceipts').get(),n=c('MercuryRoger').get(),o=c('immutable').OrderedMap,p=c('React').PropTypes,q=20,r=100;function s(event,w){return !!(c('KeyEventController').filterEventTypes(event,w)&&c('KeyEventController').filterEventModifiers(event,w)&&c('Parent').bySelector(event.target,"._4_j4"));}k=babelHelpers.inherits(t,c('React').PureComponent);l=k&&k.prototype;function t(){var w,x;for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return x=(w=l.constructor).call.apply(w,[this].concat(z)),this.state={readReceipts:u(this.props),deliveryTimestamp:0,scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:this.props.thread?this.props.thread.unread_count:0,width:0,suggestions:null,omniMPrefs:null},this.$MessengerConversation1=null,this.$MessengerConversation2=0,this.$MessengerConversation3=0,this.$MessengerConversation4=null,this.isScrolledToBottom=function(){return !!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom());}.bind(this),this.isScrolledToBottomWithHeight=function(ba){return !!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(ba));}.bind(this),this.$MessengerConversation21=function(){return c('React').createElement(c('MessengerNewMessagesNotice.react'),{isOpen:this.state.showUnreadNotice,label:j._({"*":"{number} unread messages","268435456":"1 unread message"},[j.plural(this.state.unreadCount,'number')]),onClick:this.$MessengerConversation25});}.bind(this),this.$MessengerConversation22=function(){if(!this.props.isLoaded||!c('MessengerConfig').ShowContextBanner)return null;return c('React').createElement(c('MessengerContextBannerContainer.react'),{location:c('MercuryShareAttachmentRenderLocations').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer});}.bind(this),this.$MessengerConversation23=function(){if(this.props.isLoaded)return null;return c('React').createElement('div',{className:"_2k8v"},this.props.isLoading?c('React').createElement(c('MessengerSpinner.react'),null):null);}.bind(this),this.$MessengerConversation19=function(){return c('React').createElement('div',{className:"_4xu0"},c('React').createElement(c('MessengerSpinner.react'),{className:"_4xu1",size:c('MessengerSpinner.react').Sizes.LARGE}));},this.trackBottomIfRequired=function(){this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired();}.bind(this),this.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom();}.bind(this),this.scrollToTop=function(ba){this.refs.scrollable&&this.refs.scrollable.scrollToTop(ba);}.bind(this),this.$MessengerConversation6=function(){var ba=this.$MessengerConversation14();ba&&ba.pageUp();return false;}.bind(this),this.$MessengerConversation7=function(){var ba=this.$MessengerConversation14();ba&&ba.pageDown();return false;}.bind(this),this.$MessengerConversation8=function(ba){if(ba.target===document.body){this.scrollToTop();return false;}return null;}.bind(this),this.$MessengerConversation9=function(ba){if(ba.target===document.body){this.scrollToBottom();return false;}return null;}.bind(this),this.$MessengerConversation12=function(){if(!this.refs.scrollable)return;var ba=this.$MessengerConversation14(),ca=this.refs.quickReply;ca&&c('CSS').conditionClass(ca,"_1mzg",!this.isScrolledToBottom());this.$MessengerConversation10();this.$MessengerConversation11();if(ba&&this.state.unreadCount&&this.$MessengerConversation18(ba))this.setState({showUnreadNotice:false,unreadCount:0});this.$MessengerConversation26(ba);}.bind(this),this.$MessengerConversation25=function(ba){ba.preventDefault();this.setState({showUnreadNotice:false});this.$MessengerConversation16();}.bind(this),this.$MessengerConversation24=function(ba){return function(){if(this.props.threadID!==ba)return;this.trackBottomIfRequired();}.bind(this);}.bind(this),this.$MessengerConversation15=function(){c('DOM').scry(c('ReactDOM').findDOMNode(this),'img').forEach(function(ba){if(ba.complete)return;var ca=this.props.threadID,da=c('Event').listen(ba,'load',function(){if(this.props.threadID===ca)this.trackBottomIfRequired();da.remove();}.bind(this));}.bind(this));}.bind(this),this.$MessengerConversation27=function(){var ba=this.props.messages,ca=this.state.unreadCount;if(!ca||ca>ba.size)return null;return ba.get(ba.size-ca);}.bind(this),this.$MessengerConversation18=function(ba){var ca=this.$MessengerConversation27();if(!ca)return false;var da=this.refs.messageList.getMessageElement(ca.message_id);if(!da)return false;var ea=da.getBoundingClientRect().top,fa=ba.getElement().getBoundingClientRect().top;if(ea-fa<0)return false;return true;}.bind(this),this.$MessengerConversation28=function(ba){return !!this.props.messages.find(function(ca){return ca.message_id===ba;});}.bind(this),this.$MessengerConversation16=function(){if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:true});var ba=this.$MessengerConversation27();if(!ba){this.scrollToTop(false);return;}this.$MessengerConversation29(ba.message_id,function(){this.setState({scrollingToUnreadMessage:false,unreadCount:0});}.bind(this));}.bind(this),this.$MessengerConversation29=function(ba,ca){var da=this.refs.messageList.getMessageElement(ba,true),ea=this.$MessengerConversation14();if(!da||!ea)return;var fa=da.getBoundingClientRect().top,ga=c('ReactDOM').findDOMNode(this.refs.messageList).getBoundingClientRect().top,ha=ea.getElement().getBoundingClientRect().top,ia=fa+Math.abs(ga)+ha;ea.setScrollTop(ia,true,{callback:ca});}.bind(this),this.$MessengerConversation11=function(){if(!this.isScrolledToBottom()||this.props.messages.size===0)return;if(c('UserActivity').isOnTab()&&c('UserActivity').isActive()){this.props.onRead(this.props.threadID);}else if(!this.$MessengerConversation4)this.$MessengerConversation4=c('UserActivity').subscribe(function(){if(c('UserActivity').isOnTab()){this.$MessengerConversation13();this.props.onRead(this.props.threadID);}}.bind(this));}.bind(this),this.handleResize=function(){if(this.refs.scrollable){this.refs.scrollable.handleResize();var ba=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.scrollable)).width;if(ba!==this.state.width)this.setState({width:ba});}var ca=this.refs.quickReply;ca&&c('CSS').conditionClass(ca,"_1mzg",!this.isScrolledToBottom());this.trackBottomIfRequired();}.bind(this),this.$MessengerConversation14=function(){return this.refs.scrollable&&this.refs.scrollable.getArea();}.bind(this),this.$MessengerConversation13=function(){this.$MessengerConversation4&&this.$MessengerConversation4.unsubscribe();this.$MessengerConversation4=null;}.bind(this),x;}t.getStores=function(){return [c('OmniMStore')];};t.calculateState=function(w,x){if(!c('MercuryIDs').isValid(x.threadID))return null;return {suggestions:c('OmniMStore').suggestionsForThread(x.threadID),omniMPrefs:c('OmniMStore').prefs()};};t.prototype.componentDidMount=function(){var w=new (c('SubscriptionsHandler'))();w.addSubscriptions(c('Event').listen(window,'resize',c('throttle')(this.handleResize,50)),c('KeyEventController').registerKey('PAGE_UP',this.$MessengerConversation6,s),c('KeyEventController').registerKey('PAGE_DOWN',this.$MessengerConversation7,s),c('KeyEventController').registerKey('HOME',this.$MessengerConversation8,s),c('KeyEventController').registerKey('END',this.$MessengerConversation9,s),n.subscribe('change',function(x,y){y[this.props.threadID]&&this.setState({readReceipts:u(this.props)});}.bind(this)),m.subscribe('change',function(x,y){this.setState({deliveryTimestamp:this.props.threadID?m.getDeliveryTime(this.props.threadID):0});}.bind(this)));this.$MessengerConversation1=w;this.$MessengerConversation10();this.handleResize();this.$MessengerConversation11();this.$MessengerConversation5=c('throttle')(this.$MessengerConversation12,r);};t.prototype.componentWillReceiveProps=function(w){var x=w.threadID!==this.props.threadID;if(x){this.$MessengerConversation13();this.setState({scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:w.thread?w.thread.unread_count:0});}if(x||w.messages!==this.props.messages)this.setState({readReceipts:u(w),deliveryTimestamp:w.threadID?m.getDeliveryTime(w.threadID):0});};t.prototype.componentWillUnmount=function(){this.$MessengerConversation13();this.$MessengerConversation1&&this.$MessengerConversation1.release();};t.prototype.componentWillUpdate=function(){var w=this.$MessengerConversation14();if(w){this.$MessengerConversation2=w.getScrollHeight();this.$MessengerConversation3=w.getScrollTop();}};t.prototype.componentDidUpdate=function(w){if(!this.refs.scrollable)return;if(this.props.threadID!==w.threadID||v(w,this.props)){this.scrollToBottom();this.$MessengerConversation15();}else{var x=this.$MessengerConversation14();if(x){var y=x.getScrollHeight();if(y!==this.$MessengerConversation2){var z=x.getScrollHeight()-this.$MessengerConversation2+this.$MessengerConversation3;this.refs.scrollable.scrollToPosition(z);}else this.$MessengerConversation15();}}if(this.props.messages!==w.messages){this.$MessengerConversation11();if(this.state.scrollingToUnreadMessage)this.$MessengerConversation16();c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$MessengerConversation17());}setTimeout(function(){var aa=this.$MessengerConversation14();this.trackBottomIfRequired();if(aa&&this.state.unreadCount&&!this.state.scrollingToUnreadMessage&&!this.props.isLoading)if(this.$MessengerConversation18(aa)){this.setState({showUnreadNotice:false,unreadCount:0});}else this.setState({showUnreadNotice:true});this.$MessengerConversation10();}.bind(this),0);};t.prototype.render=function(){if(this.props.isLoading&&this.props.messages.isEmpty())return this.$MessengerConversation19();var w=this.props.messages.last(),x=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),y=null,z=null,aa=this.state.suggestions||{},ba=aa.quickReplies,ca=aa.agentSuggestions;if(!ba||!ba.length)ba=this.$MessengerConversation20(w);if(ba&&ba.length&&w.author!==x){y=ba;z=c('MNOmniMConstants').QUICKREPLIES;}else if(ca&&ca.length&&c('MercuryConfig').EnableOmniM){y=ca;z=c('MNOmniMConstants').OMNIM;}var da=c('MercuryConfig').EnableQuickReply&&y&&y.length&&y.filter(function(ma){return !ma.dismissed;}).length?c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{options:y,threadID:w.thread_id,source:z,omniMPrefs:this.state.omniMPrefs}),loader:c('JSResource')('MessengerBotsQuickReplyButtonList.react').__setRef('MessengerConversation.react'),placeholder:c('React').createElement('div',null)}):null,ea=null;if(w&&w.message_source&&w.author!==x&&c('MercuryConfig').WebCamQuickReply){var fa=w.message_source;if(fa==='camera'){var ga=this.props.thread?c('convertMIGColorToFIGColor')(this.props.thread.custom_color):null,ha=c('React').createElement('div',{className:"_1gc5",style:ga&&{color:ga}},j._("Send a photo reply"));ea=c('React').createElement('div',{className:"_1gc6"},c('React').createElement(c('MessengerQuickCamButtonHTML5.react'),{className:"_4rv5"+(' '+"_1gcb"),location:c('MessengerQuickCamOrigins').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer,textChild:ha}));}}var ia=null,ja=null;if(ea||da){ia=c('React').createElement('div',{className:"_51op"},c('React').createElement('div',{className:"_51oq",onResize:this.handleResize}));ja=c('React').createElement('div',{ref:'quickReply'},c('React').createElement('div',{className:"_1mzb",onResize:this.handleResize},ea,da));}var ka=j._("Messages"),la=j._("Load more...");return c('React').createElement(c('MessengerFlexScrollableArea.react'),{className:this.props.className,flexChildren:this.$MessengerConversation21(),footerChildren:ja,onMount:function(){return c('setImmediate')(this.$MessengerConversation11);}.bind(this),onScroll:this.props.useManualFetch?undefined:this.$MessengerConversation5,ref:'scrollable',shouldStickToBottom:true,tabIndex:0,useScrollProtection:c('MessengerConfig').ChatScrollInterval},c('React').createElement('div',{'aria-label':ka,className:c('joinClasses')("__i_",this.props.innerClassName),role:'region'},c('React').createElement('h3',{className:"accessible_elem"},ka),this.$MessengerConversation22(),this.props.useManualFetch&&!this.props.upExhausted?c('React').createElement(c('MessengerButton.react'),{className:"_41jf",label:la,onClick:function(){return this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP);}.bind(this),type:'primary',use:'default'}):null,this.$MessengerConversation23(),c('React').createElement(c('MessageList.react'),{DateBreak:c('MessengerDateBreak.react'),deliveryTimestamp:this.state.deliveryTimestamp,isCanonical:this.props.isCanonical,LogMessage:c('MessengerLogMessage.react'),CollapsedLogMessageGroup:c('MessengerCollapsedLogMessageGroup.react'),MessageGroup:c('MessengerMessageGroup.react'),messages:this.props.messages,onAttachmentLoad:this.$MessengerConversation24(this.props.threadID),readReceipts:this.state.readReceipts,ref:'messageList',location:c('MercuryShareAttachmentRenderLocations').MESSENGER,viewer:this.props.viewer,thread:this.props.thread}),this.props.useManualFetch&&!this.props.downExhausted?c('React').createElement(c('MessengerButton.react'),{className:"_41jf",label:la,onClick:function(){return this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_DOWN);}.bind(this),type:'primary',use:'default'}):null,c('React').createElement(c('ChatTypingIndicators.react'),{indicatorClass:c('MessengerTypingIndicator.react'),indicatorsDidShow:function(){this.trackBottomIfRequired();}.bind(this),rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),ia));};t.prototype.$MessengerConversation20=function(w){var x=null,y=w&&w.platform_xmd&&JSON.parse(w.platform_xmd),z=y&&y.message_classification===c('MessengerPlatformSubscriptionMessageClassification').AD_MESSAGE;if(z)x=y&&y.quick_replies;return x;};t.prototype.$MessengerConversation10=function(){if(this.props.useManualFetch)return;var w=this.$MessengerConversation14();if(w&&w.getScrollTop()<q){this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP);c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$MessengerConversation17());}};t.prototype.$MessengerConversation17=function(){return this.props.messages.filter(function(w){return c('MessengerAttachmentRenderer').isSingleVideoAttachment(w)||c('MessengerAttachmentRenderer').isSharedVideoAttachmentMessage(w);}).reverse().map(function(w){return w.message_id;});};t.prototype.$MessengerConversation26=function(w){var x=this.refs.messageList;if(!x||!w)return;var y=[],z=w.getElement().getBoundingClientRect(),aa=c('MessengerVideoAutoplayStore').getMessageIDs(this.props.threadID),ba=aa||this.$MessengerConversation17()||c('immutable').List();ba.map(function(ca){var da=c('MessengerAttachmentRenderer').getVideoElem(ca,x);if(da)y.push([ca,da.getBoundingClientRect()]);});if(y.length)c('MessengerVideoAutoplayActions').onScroll(this.props.threadID,aa?null:ba,c('immutable').Map(y),z);};t.propTypes={contact:p.instanceOf(c('ImmutableObject')),downExhausted:p.bool,fetchMessages:p.func.isRequired,innerClassName:p.string,isCanonical:p.bool,isLoaded:p.bool,isLoading:p.bool,messages:p.instanceOf(c('immutable').List).isRequired,participants:p.instanceOf(c('immutable').Map),thread:p.object,threadID:p.string.isRequired,upExhausted:p.bool,useManualFetch:p.bool,viewer:p.string.isRequired};function u(w){var x=c('MercuryIDs').getParticipantIDFromUserID(w.viewer),y=n.getSeenTimestamps(w.threadID),z=new (c('Set'))(w.thread?w.thread.participants:y.keys());z['delete'](x);return y.withMutations(function(aa){c('immutable').Seq(w.messages).reverse().forEach(function(ba){if(z.size===0)return false;if(!z.has(ba.author))return;aa.update(ba.author,function(ca){if(!ca||ca.watermark<=ba.timestamp)return {watermark:ba.timestamp,action:ba.timestamp};return ca;});z['delete'](ba.author);});});}function v(w,x){var y=c('MercuryIDs').getParticipantIDFromUserID(x.viewer);return x.threadID===w.threadID&&x.messages!==w.messages&&!x.messages.isEmpty()&&x.messages.last()!==w.messages.last()&&x.messages.last().author===y;}f.exports=c('FluxContainer').create(t,{withProps:true});}),null);
__d('MessengerConversationContainer.react',['immutable','ImmutableObject','MercuryBlockedParticipants','MercuryConfig','MercuryIDs','MercuryMessageStore','MessengerActions','messengerBlockedGroupThreadWarningDialogReact','MessengerConfig','MessengerConversation.react','messengerDialogsRe','MessengerHotLikePreviewEvents','MessengerLeaveGroupAction','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('MercuryBlockedParticipants').get(),k=c('React').PropTypes,l=c('messengerBlockedGroupThreadWarningDialogReact').comp;h=babelHelpers.inherits(m,c('React').PureComponent);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.state={isLoaded:false,isLoading:true,messages:c('immutable').List()},this.$MessengerConversationContainer2=undefined,this.$MessengerConversationContainer3=false,this.$MessengerConversationContainer4=undefined,this.$MessengerConversationContainer5=undefined,this.$MessengerConversationContainer6=undefined,this.$MessengerConversationContainer11=function(){var s=this.props.thread;if(s==null)return;c('messengerBlockedGroupThreadWarningDialogReact').setWantsToSee(s.thread_id,true);}.bind(this),this.$MessengerConversationContainer12=function(s){var t=this.props.thread;if(t==null)return;c('MessengerLeaveGroupAction').leaveGroup(t,this.props.viewer);this.$MessengerConversationContainer14(s);}.bind(this),this.$MessengerConversationContainer13=function(s){this.$MessengerConversationContainer14(s);}.bind(this),this.$MessengerConversationContainer10=function(){if(this.state.isLoading||this.state.isLoaded)return;this.setState({isLoading:true});if(!this.$MessengerConversationContainer1.fetchMoreMessages())this.setState({isLoading:false,isLoaded:true});}.bind(this),o;}m.prototype.componentWillUnmount=function(){this.$MessengerConversationContainer2&&this.$MessengerConversationContainer2.release();clearTimeout(this.$MessengerConversationContainer6);};m.prototype.componentDidMount=function(){this.$MessengerConversationContainer7(this.props.threadID);if(this.$MessengerConversationContainer8())this.$MessengerConversationContainer9();};m.prototype.componentDidUpdate=function(n){var o=this.props.threadID!==n.threadID;if(o&&this.$MessengerConversationContainer8())this.$MessengerConversationContainer9(n.threadID);};m.prototype.componentWillReceiveProps=function(n){if(this.props.threadID!==n.threadID){this.setState({isLoading:true,messages:c('immutable').List()});this.$MessengerConversationContainer7(n.threadID);}};m.prototype.render=function(){return c('React').createElement(c('MessengerConversation.react'),{className:this.props.className,contact:this.props.contact,fetchMessages:this.$MessengerConversationContainer10,isCanonical:c('MercuryIDs').isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,messages:this.state.messages,onRead:this.props.onMarkRead,participants:this.props.participants,ref:'conversation',thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer});};m.prototype.handleResize=function(){this.refs.conversation.handleResize();};m.prototype.isScrolledToBottom=function(){return !!(this.refs.conversation&&this.refs.conversation.isScrolledToBottom());};m.prototype.$MessengerConversationContainer8=function(){var n=this.props.thread;if(n==null)return false;if(c('MercuryIDs').isCanonical(this.props.threadID))return false;if(!n.is_subscribed)return false;if(!j.isPresentInGroupThread(n))return false;var o=c('messengerBlockedGroupThreadWarningDialogReact').getWantsToSee(n.thread_id);if(o)return false;return true;};m.prototype.$MessengerConversationContainer9=function(n){c('messengerDialogsRe').showDialog(function(){return c('React').createElement(l,{onSee:this.$MessengerConversationContainer11,onLeave:this.$MessengerConversationContainer12,onCancel:this.$MessengerConversationContainer13,prevThreadID:n});}.bind(this));};m.prototype.$MessengerConversationContainer14=function(n){if(n==null)c('MessengerActions').selectThread(null);c('MessengerActions').selectThread(n);};m.prototype.$MessengerConversationContainer7=function(n){if(!n)return;this.setState({isLoaded:false});this.$MessengerConversationContainer1&&this.$MessengerConversationContainer1.destroy();this.$MessengerConversationContainer1=new (c('MercuryMessageStore'))(n,c('MessengerConfig').MessageLoadCount);clearTimeout(this.$MessengerConversationContainer6);this.$MessengerConversationContainer6=setTimeout(function(){if(this.props.thread&&this.props.thread.message_count<1)this.setState({isLoaded:true,isLoading:false});}.bind(this),6000);this.$MessengerConversationContainer2&&this.$MessengerConversationContainer2.release();this.$MessengerConversationContainer2=new (c('SubscriptionsHandler'))();this.$MessengerConversationContainer2.addSubscriptions(this.$MessengerConversationContainer1.subscribe(function(o){this.setState({messages:this.$MessengerConversationContainer15(c('immutable').List(o.messages)),isLoading:false});}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(o){this.$MessengerConversationContainer3=true;this.$MessengerConversationContainer4=o;this.setState({messages:this.$MessengerConversationContainer15(this.state.messages)});clearInterval(this.$MessengerConversationContainer5);this.$MessengerConversationContainer5=setInterval(this.refs.conversation.scrollToBottom,50);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_ANIMATION,function(o){clearInterval(this.$MessengerConversationContainer5);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_EMOJI_ANIMATION,function(o){clearInterval(this.$MessengerConversationContainer5);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,function(){this.$MessengerConversationContainer3=false;this.$MessengerConversationContainer4=null;}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP_EMOJI,function(){this.$MessengerConversationContainer3=false;this.$MessengerConversationContainer4=null;}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').REMOVE,function(){clearInterval(this.$MessengerConversationContainer5);this.$MessengerConversationContainer3=false;this.setState({messages:this.$MessengerConversationContainer15(this.state.messages)});}.bind(this)));};m.prototype.$MessengerConversationContainer15=function(n){if(this.$MessengerConversationContainer3){n=n.set(n.size,this.$MessengerConversationContainer4);}else{n=n.filterNot(function(o){return o.is_like_preview;});this.$MessengerConversationContainer4=null;}return n;};m.propTypes={contact:k.instanceOf(c('ImmutableObject')),onMarkRead:k.func.isRequired,participants:k.instanceOf(c('immutable').Map),thread:k.object,threadID:k.string.isRequired,viewer:k.string.isRequired};f.exports=m;}),null);
__d('ArchiveWarning.react',['cx','ix','Image.react','React','TooltipData'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=c('TooltipData').propsFor('All employee-to-employee conversations will be archived','above'),o=this.props,p=o.isFBAtWork,q=o.shown,r=o.useCSS,s=babelHelpers.objectWithoutProperties(o,['isFBAtWork','shown','useCSS']);if(!p&&r){if(!q)return null;return c('React').createElement('div',babelHelpers['extends']({className:"_3a61"},n,s),c('React').createElement('i',{className:"_3olv _14lt"}));}var t=p?i("28105"):i("28106");return c('React').createElement(c('Image.react'),babelHelpers['extends']({src:t,className:"titanArchiveWarning"+(' '+"button")+(!q?' '+"hidden_elem":'')},n));};function m(){j.apply(this,arguments);}m.propTypes={isFBAtWork:l.bool,shown:l.bool,useCSS:l.bool};f.exports=m;}),null);
__d('messengerCalculateTruncationState',['Style'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){if(!l||!j)return;var n=m?m.offsetWidth:0,o=Math.ceil(.5*(i.offsetWidth+l.offsetWidth)),p=i.offsetWidth-k.offsetWidth-12;if(o<=p){c('Style').set(i,'text-align','center');c('Style').set(j,'width','auto');c('Style').set(j,'margin-left','auto');}else{if(document.body.dir==='rtl'){c('Style').set(i,'text-align','right');}else{c('Style').set(i,'text-align','left');c('Style').set(j,'margin-left',n+'px');}var q=Math.max(i.offsetWidth-n-k.offsetWidth-11,0);c('Style').set(j,'width',q+'px');}}f.exports=h;}),null);
__d("messengerCustomColorUtilsRe",["cssVar","WorkGKs","bs_js_primitive"],(function a(b,c,d,e,f,g,h){'use strict';function i(j){var k=j.custom_color,l=0;if(c("bs_js_primitive").is_nil_undef(k)){l=1;}else if(k===""){l=1;}else return k;if(l===1){var m=+c("WorkGKs").workplace_www_chat_branding;if(m!==0){return "#1479fb";}else return "#0084ff";}}g.customColorOrBlue=i;}),null);
__d('MessengerRTCGroupCallParticipantsPickerDialog.react',['cx','fbt','FBRTCCore','immutable','ImmutableObject','MessengerDialog.react','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogHeader.react','MessengerDialogTitle.react','MessengerRTCGroupCallContactList.react','MessengerRTCGroupCallRingParticipantsRow.react','MessengerRTCGroupCallThreadRow.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=460,n=5;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={isParticipantSelected:this.props.participants.mapEntries(function(u){var v=u[0],w=u[1];return [v,this.props.participants.size<=n];}.bind(this))},this.$MessengerRTCGroupCallParticipantsPickerDialog1=function(){var u=this.$MessengerRTCGroupCallParticipantsPickerDialog2().map(function(v){return v.fbid;});if(this.props.handleCall){this.props.handleCall(u);}else c('FBRTCCore').startGroupCall({conferenceName:this.props.conferenceName,hasVideo:this.props.hasVideo,trigger:this.props.trigger,usersToRing:u});this.props.onUnmount();}.bind(this),q;}o.prototype.render=function(){var p=this.props,q=p.participants,r=p.thread,s=p.viewerID;return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onUnmount,type:'default',width:m},c('React').createElement('div',{className:"_2m1r"},c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogTitle.react'),null,i._("Ring group members")),c('React').createElement(c('MessengerDialogButton.react'),{label:i._("Call"),onClick:this.$MessengerRTCGroupCallParticipantsPickerDialog1,disabled:this.$MessengerRTCGroupCallParticipantsPickerDialog2().length===0,type:'primary'})),c('React').createElement(c('MessengerRTCGroupCallThreadRow.react'),{participants:q,thread:r,viewerID:s}),c('React').createElement(c('MessengerRTCGroupCallRingParticipantsRow.react'),{names:this.$MessengerRTCGroupCallParticipantsPickerDialog2().map(function(t){var u=t.name;return u;}).sort(function(t,u){return t.localeCompare(u);})}),c('React').createElement(c('MessengerRTCGroupCallContactList.react'),{participants:q.toArray().sort(function(t,u){return t.name.localeCompare(u.name);}),isParticipantSelected:this.state.isParticipantSelected,onClick:function(t){return this.setState({isParticipantSelected:this.state.isParticipantSelected.set(t,!this.state.isParticipantSelected.get(t))});}.bind(this)})));};o.prototype.$MessengerRTCGroupCallParticipantsPickerDialog2=function(){return this.props.participants.filter(function(p,q){return this.state.isParticipantSelected.get(q);}.bind(this)).toArray();};o.propTypes={participants:l.instanceOf(c('immutable').Map).isRequired,thread:l.instanceOf(c('ImmutableObject')).isRequired,viewerID:l.string.isRequired,trigger:l.string.isRequired,conferenceName:l.string.isRequired,hasVideo:l.bool.isRequired,handleCall:l.func,onUnmount:l.func.isRequired};f.exports=o;}),null);
__d('MessengerRTCGroupCallParticipantsPickerDialogController',['DOM','immutable','MessengerRTCGroupCallParticipantsPickerDialog.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={_container:c('DOM').create('div'),render:function i(j){var k=j.participants,l=j.thread,m=j.viewerID,n=j.trigger,o=j.conferenceName,p=j.hasVideo,q=j.handleCall;c('ReactDOM').render(c('React').createElement(c('MessengerRTCGroupCallParticipantsPickerDialog.react'),{participants:k,thread:l,viewerID:m,trigger:n,conferenceName:o,hasVideo:p,handleCall:q,onUnmount:function(){return this._onUnmount();}.bind(this)}),this._container);},_onUnmount:function i(){c('ReactDOM').unmountComponentAtNode(this._container);}};f.exports=h;}),null);
__d('MessengerRTCUnavailableDialog.react',['fbt','messengerDialogsRe','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerRTCUnavailableDialog2=function(){return c('React').createElement('div',null,h._("{name} is not available at the moment.",[h.param('name',this.props.name)]));}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MessengerRTCUnavailableDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("Can't make call")),c('React').createElement(k,null,this.$MessengerRTCUnavailableDialog2()),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{action:'cancel',label:h._("OK"),type:'primary'})));};m.prototype.$MessengerRTCUnavailableDialog1=function(n){if(!n)c('messengerDialogsRe').removeDialog();};m.propTypes={name:l.string.isRequired};f.exports=m;}),null);
__d('MessengerRTCVideoCallButton.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k={width:'32px',height:'32px'},l={fillRule:'evenodd',clipRule:'evenodd',fill:'none',strokeWidth:'2',strokeMiterlimit:'10'},m=babelHelpers['extends']({},l,{stroke:'#888888'});i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;n.prototype.render=function(){var o=this.props.isGroupChat?h._("Start a group video chat"):h._("Start a video call"),p=this.props.isAvailable?babelHelpers['extends']({},l,{stroke:this.props.customColor}):m;return c('React').createElement('div',{style:k,title:o},c('React').createElement('svg',{viewBox:'0 0 64 64',style:p},c('React').createElement('title',null,o),c('React').createElement('g',null,c('React').createElement('g',null,c('React').createElement('path',{d:'M47,27.8v7.5l9,4.5V23.2L47,27.8z M37.2,17H13.8C10.6,17,8,19.6,8,22.8v17.4c0,3.2,2.6,5.8,5.8,5.8h23.3 c3.2,0,5.8-2.6,5.8-5.8V22.8C43,19.6,40.4,17,37.2,17z'})))));};function n(){i.apply(this,arguments);}f.exports=n;}),null);
__d('MessengerRTCVoiceCallButton.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k={width:'32px',height:'32px'},l={fillRule:'evenodd',clipRule:'evenodd',fill:'none',strokeWidth:'2',strokeMiterlimit:'10'},m=babelHelpers['extends']({},l,{stroke:'#888888'});i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;n.prototype.render=function(){var o=this.props.isGroupChat?h._("Start a group call"):h._("Start a voice call"),p=this.props.isAvailable?babelHelpers['extends']({},l,{stroke:this.props.customColor}):m;return c('React').createElement('div',{style:k,title:o},c('React').createElement('svg',{viewBox:'0 0 64 64',style:p},c('React').createElement('title',null,o),c('React').createElement('path',{d:'M48.3,50.5c-7.7,6.5-24.2-10-24.5-10.3C23.5,39.9,7,23.4,13.5,15.7c4.8-5.7,6.3-3.4,7-2.7 c0.6,0.5,5.7,7.8,6,9.2c0.3,1.4-2.4,4.6-2.2,5.9c0.2,1.2,3.6,5,5.1,6.5c1.5,1.5,5.3,4.9,6.5,5.1c1.2,0.2,4.4-2.5,5.9-2.2 c1.4,0.3,8.7,5.4,9.2,6C51.6,44.2,54,45.7,48.3,50.5z'})));};function n(){i.apply(this,arguments);}f.exports=n;}),null);
__d('MessengerRTCCallButton.react',['invariant','immutable','ImmutableObject','Link.react','MercuryIDs','messengerDialogsRe','MessengerRTCUnavailableDialog.react','MessengerRTCVideoCallButton.react','MessengerRTCVoiceCallButton.react','MNRTCCallabilityStore','React','StoreAndPropBasedStateMixin','FBRTCLogger'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('FBRTCLogger').Trigger,j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerRTCCallButton',mixins:[c('StoreAndPropBasedStateMixin')(c('MNRTCCallabilityStore'))],statics:{calculateState:function l(m){if(c('MercuryIDs').isGroupChat(m.threadID))return {isCallable:true};var n=c('MercuryIDs').getUserIDFromThreadID(m.threadID);n||h(0);return {isCallable:c('MNRTCCallabilityStore').isCallable(n)};}},propTypes:{className:j.string.isRequired,customColor:j.string.isRequired,isVideo:j.bool.isRequired,participants:j.instanceOf(c('immutable').Map).isRequired,thread:j.instanceOf(c('ImmutableObject')).isRequired,threadID:j.string.isRequired,viewer:j.string.isRequired,calleeName:j.string.isRequired},render:function l(){var m={customColor:this.props.customColor,isAvailable:this.state.isCallable,isGroupChat:c('MercuryIDs').isGroupChat(this.props.threadID)};return c('React').createElement(c('Link.react'),{className:this.props.className,onClick:this._handleStartCall},this.props.isVideo?c('React').createElement(c('MessengerRTCVideoCallButton.react'),m):c('React').createElement(c('MessengerRTCVoiceCallButton.react'),m));},_handleStartCall:function l(m){m.preventDefault();if(this.state.isCallable){if(c('MercuryIDs').isGroupChat(this.props.threadID)){e(['FBRTCCore','FBRTCSupport','MessengerRTCGroupCallUnsupportedBrowserDialogController','MessengerRTCGroupCallParticipantsPickerDialogController'],function(n,o,p,q){var r=this.props.thread.rtc_call_data;if(r&&r.call_state!=='NO_ONGOING_CALL'&&r.server_info_data){n.startGroupCall({conferenceName:'GROUP:'+this.props.thread.thread_fbid,hasVideo:this.props.isVideo,serverInfoData:r.server_info_data,trigger:r.call_state!=='AUDIO_GROUP_CALL'?this.props.isVideo?i.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:this.props.isVideo?i.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON});return;}if(!o.isGroupCallWebtrcSupported()){p.render({hasVideo:this.props.isVideo});return;}q.render({participants:this.props.participants.filter(function(s){var t=s.fbid;return t!==this.props.viewer;}.bind(this)),thread:this.props.thread,viewerID:this.props.viewer,trigger:this.props.isVideo?i.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,conferenceName:'GROUP:'+this.props.thread.thread_fbid,hasVideo:this.props.isVideo});}.bind(this));}else e(['FBRTCCore'],function(n){n.startOutgoingCall(c('MercuryIDs').getUserIDFromThreadID(this.props.threadID),'messenger_dot_com',!this.props.isVideo);}.bind(this));}else c('messengerDialogsRe').showDialog(function(){return c('React').createElement(c('MessengerRTCUnavailableDialog.react'),{name:this.props.calleeName});}.bind(this));}});f.exports=k;}),null);
__d("messengerDetailViewHeaderReact",["cx","fbt","bs_curry","Event","React","reactRe","ReactDOM","debounce","RTCConfig","bs_js_boolean","Link.react","FBRTCSupport","bs_js_primitive","MercuryConfig","WorkModeConfig","bs_js_null_undefined","MercuryThreadInfo","messengerDomIDsRe","archiveWarningReact","MercuryParticipantTypes","mercuryThreadTitleReact","messengerLocalTimeReact","WorkFocusModeController","MessengerJoinableModeType","MessengerWebDriverTestIDs","messengerCustomColorUtilsRe","messengerRTCCallButtonReact","messengerPresenceStatusReact","messengerInfoPanelButtonReact","montageThreadViewContainerReact","messengerCalculateTruncationState"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reactRe").Component[10][7],k=j[1],l=j[3],m=j[5],n="MessengerDetailViewHeaderReact",o=c("WorkFocusModeController").MessengerWorkAvailabilityStatus;function p(){return [0,0,0,0,0,0];}function q(ma){var na=ma[0],oa=ma[1],pa=ma[2],qa=ma[3],ra=ma[4],sa=c("bs_js_null_undefined").from_opt(na),ta=c("bs_js_null_undefined").from_opt(oa),ua=c("bs_js_null_undefined").from_opt(pa),va=c("bs_js_null_undefined").from_opt(qa),wa=c("bs_js_null_undefined").from_opt(ra);return c("messengerCalculateTruncationState")(sa,ta,ua,va,wa);}function r(ma){var na=ma[4];na[5]=[c("Event").listen(window,"resize",c("debounce")(function(){return q(na);},20))];return 0;}function s(ma){var na=ma[4][5];if(na){return na[0].remove();}else return 0;}function t(ma,na,oa){q(oa[4]);return 0;}function u(ma,na){ma[4][3]=[c("ReactDOM").findDOMNode(na)];return 0;}function v(ma,na){ma[4][1]=[na];return 0;}function w(ma,na){ma[4][0]=[na];return 0;}function x(ma,na){ma[4][2]=[na];return 0;}function y(ma,na){ma[4][4]=[na];return 0;}function z(ma){var na;if(o!==null){var oa=+o.displayFocusBanner(ma[5],ma[3]);na=oa!==0?[o]:0;}else na=0;if(na){return [0,c("React").createElement(na[0],{className:"_2v6o",viewer:ma[5],thread:c("bs_js_null_undefined").from_opt(ma[4]),participants:ma[3]})];}else{var pa=ma[0];if(pa){var qa=pa[0];return [0,c("bs_curry")._4(c("messengerPresenceStatusReact").createElement(["_2v6o"],+qa.isUserActive,c("bs_js_primitive").null_undefined_to_opt(qa.lastActive),[qa.platform]),0,0,0,0)];}else return [1,null];}}function aa(ma){var na=ma[1][4];if(na){var oa=na[0];if(oa.has_montage&&c("MercuryConfig").MontageThreadViewer){return c("React").createElement("div",{ref:c("bs_curry")._1(ma[3],y),className:"_1cwz"},c("montageThreadViewContainerReact").createElement(oa.thread_id,0)(0,0,0,0));}else return null;}else return null;}function ba(ma){var na=ma[3].filter(function(qa,ra,sa){if(c("bs_js_primitive").is_nil_undef(qa)){return false;}else{var ta=qa.fbid;if(c("bs_js_primitive").is_nil_undef(ta)){return false;}else return c("bs_js_boolean").to_js_boolean(+(ta!==ma[5]));}}),oa=na.count(),pa=na.first();if(oa!==1||pa===undefined){return null;}else return c("bs_curry")._4(c("messengerLocalTimeReact").createElement("_5eu7",c("bs_js_primitive").null_undefined_to_opt(pa.timezone)),0,0,0,0);}function ca(ma,na){var oa=+(c("FBRTCSupport").isWebrtcSupported()&&c("FBRTCSupport").isOSSupported()),pa=ma[0],qa=pa?+(pa[0].contact.type===c("MercuryParticipantTypes").PAGE):0,ra=ma[4],sa;if(ra){var ta=ra[0].joinable_mode;sa=c("bs_js_primitive").is_nil_undef(ta)?0:+(ta.mode===c("MessengerJoinableModeType").JOINABLE);}else sa=0;var ua=ma[4],va;if(ua){var wa=ua[0],xa=wa.participants;va=c("bs_js_primitive").is_nil_undef(xa)?0:+(xa.length>1)&&+c("MercuryThreadInfo").canReply(wa)&&(+wa.is_canonical||na&&+c("RTCConfig").RtcConferencingVideoGK||1-na&&c("RTCConfig").RtcConferencingGK);}else va=0;if(oa&&!qa&&!sa){return va;}else return 0;}function da(ma){if(ca(ma,0)){var na=ma[4];if(na){var oa=na[0],pa=oa.thread_id,qa=ma[0];return c("React").createElement("li",undefined,c("messengerRTCCallButtonReact").createElement("_30yy",c("messengerCustomColorUtilsRe").customColorOrBlue(oa),0,ma[3],oa,pa,ma[5],qa?qa[0].contact.name:"")(0,0,0,0));}else return null;}else return null;}function ea(ma){if(ca(ma,1)){var na=ma[4];if(na){var oa=na[0],pa=oa.thread_id,qa=ma[0];return c("React").createElement("li",undefined,c("messengerRTCCallButtonReact").createElement("_30yy",c("messengerCustomColorUtilsRe").customColorOrBlue(oa),1,ma[3],oa,pa,ma[5],qa?qa[0].contact.name:"")(0,0,0,0));}else return null;}else return null;}function fa(ma){var na=ma[3],oa=ma[1],pa=oa[4];if(pa){var qa=pa[0],ra=1- +oa[3].isEmpty()&&+oa[3].every(function(va,wa,xa){if(c("bs_js_primitive").is_nil_undef(va)){return false;}else return va.employee;}),sa=i._("Conversation information"),ta=z(oa),ua=oa[1];return c("React").createElement("div",{ref:c("bs_curry")._1(na,w),className:"_5742"+(c("bs_js_boolean").to_js_boolean(ta[0])?" "+"_1_fz":"")},aa(ma),c("React").createElement("div",{key:"threadTitle",ref:c("bs_curry")._1(na,v),className:"_5743"},c("React").createElement("h2",{className:"_17w2",id:c("messengerDomIDsRe").ids.THREAD_TITLE},c("mercuryThreadTitleReact").createElement(["_3oh-"],qa,oa[5],0,0,0,0)(0,[c("bs_curry")._1(na,u)],0,0)),ta[1],ba(oa)),c("React").createElement("ul",{key:"buttonsContainer",ref:c("bs_curry")._1(na,x),className:"_fl2"},c("React").createElement("li",undefined,c("archiveWarningReact").createElement([+c("WorkModeConfig").is_work_user],[ra],[1],[{display:"block"}])(0,0,0,0)),da(oa),ea(oa),c("React").createElement("li",undefined,c("React").createElement(c("Link.react"),{"aria-expanded":ua!==0?false:true,"aria-label":sa,className:"_30yy","data-testid":c("MessengerWebDriverTestIDs").INFO_PANEL_BUTTON,onClick:oa[2],role:"button",title:sa},c("bs_curry")._4(c("messengerInfoPanelButtonReact").createElement(c("messengerCustomColorUtilsRe").customColorOrBlue(qa),oa[1]),0,0,0,0)),c("React").createElement("div",{"aria-owns":c("messengerDomIDsRe").ids.THREAD_INFO_PANEL}))));}else return null;}var ga=[function(ma){return [c("bs_js_primitive").null_undefined_to_opt(ma.contactData),+ma.infoPanelCollapsed,ma.onInfoPanelToggle,ma.participants,c("bs_js_primitive").null_undefined_to_opt(ma.thread),ma.viewer];}],ha=[k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga],ia=c("reactRe").CreateComponent([n,p,m,r,l,k,t,s,ga,fa]),ja=ia[1];function ka(ma,na,oa,pa,qa,ra){return c("bs_curry")._1(ja,[ma,na,oa,pa,qa,ra]);}var la=ia[0];g.MessengerDetailViewHeader=ha;g.comp=la;g.wrapProps=ja;g.createElement=ka;}),null);
__d('MessengerDetailViewHeaderContainer.react',['immutable','ImmutableObject','MercuryIDs','MercuryThreadIDMap','MercuryTypeaheadConstants','MessengerActions','MessengerComposerActions','MessengerComposeViewHeader.react','messengerDetailViewHeaderReact','MessengerView','React','shallowEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('messengerDetailViewHeaderReact').comp,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$MessengerDetailViewHeaderContainer1=function(r){var s=r.getUniqueID(),t=r.getType();if(t===c('MercuryTypeaheadConstants').THREAD_TYPE){var u=c('MercuryThreadIDMap').getForFBID(this.props.viewer);u.getClientIDFromServerID(s,function(v){c('MessengerComposerActions').moveDraftToNextThread(v);c('MessengerActions').selectThread(v);});c('MessengerComposerActions').exitComposeState();}else if(s===this.props.viewer||t===c('MercuryTypeaheadConstants').PAGE_TYPE){c('MessengerComposerActions').moveDraftToNextThread(c('MercuryIDs').getThreadIDFromUserID(s));c('MessengerComposerActions').exitComposeState();c('MessengerActions').selectThread(c('MercuryIDs').getThreadIDFromUserID(s));}else c('MessengerComposerActions').addToken(r);}.bind(this),this.$MessengerDetailViewHeaderContainer2=function(r){c('MessengerComposerActions').removeToken(r);},n;}l.prototype.shouldComponentUpdate=function(m){var n=m.contactData,o=babelHelpers.objectWithoutProperties(m,['contactData']),p=this.props,q=p.contactData,r=babelHelpers.objectWithoutProperties(p,['contactData']);return !c('shallowEqual')(o,r)||!c('shallowEqual')(n,q);};l.prototype.render=function(){return this.props.view===c('MessengerView').DETAIL.COMPOSE?c('React').createElement(c('MessengerComposeViewHeader.react'),{forceHideClearButton:true,onAddRecipient:this.$MessengerDetailViewHeaderContainer1,onRemoveRecipient:this.$MessengerDetailViewHeaderContainer2,onResize:this.props.onResize,recipients:this.props.recipients,viewer:this.props.viewer}):c('React').createElement(j,{contactData:this.props.contactData,infoPanelCollapsed:this.props.infoPanelCollapsed,onInfoPanelToggle:this.props.onInfoPanelToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer});};l.propTypes={contactData:k.object,infoPanelCollapsed:k.bool.isRequired,onInfoPanelToggle:k.func.isRequired,onResize:k.func.isRequired,participants:k.instanceOf(c('immutable').Map).isRequired,recipients:k.instanceOf(c('immutable').List).isRequired,thread:k.instanceOf(c('ImmutableObject')),view:k.string,viewer:k.string.isRequired};f.exports=l;}),null);
__d('MessengerPresenceStatusUtils',['fbt','AvailableListConstants','LastActiveTimes','MercuryIDs','PresenceStatus','WorkGKs'],(function a(b,c,d,e,f,g,h){'use strict';var i={getStatusFromCanonicalThread:function j(k,l){var m=null;if(l&&l.is_canonical){var n=k.get(c('MercuryIDs').getParticipantIDFromFromThreadID(l.thread_id));if(n){var o=void 0;if(n.is_messenger_user){o=c('WorkGKs').workplace_www_chat_branding?h._("Work Chat"):h._("Messenger");}else o=c('WorkGKs').workplace_www_chat_branding?h._("Workplace"):h._("Facebook");var p=c('PresenceStatus').get(n.fbid),q=void 0,r=void 0;if(p!==c('AvailableListConstants').ACTIVE){q=c('LastActiveTimes').get(n.fbid);r=c('LastActiveTimes').getShortDisplay(n.fbid);}m={contact:n,platform:o,isUserActive:p===c('AvailableListConstants').ACTIVE,lastActiveTS:q,lastActive:r};}}return m;}};f.exports=i;}),null);
__d('FBToggleSwitch.react',['cx','AbstractCheckboxInput.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$FBToggleSwitch1=function(r){if(this.props.onToggle&&!this.props.disabled)this.props.onToggle(r.target.checked);}.bind(this),n;}l.prototype.render=function(){var m="_ypo"+(this.props.animate?' '+"_ypp":'')+(this.props.disabled?' '+"_ypq":''),n=void 0,o=void 0;if(this.props.indeterminate){o=this.props.checked;}else n=this.props.checked;return c('React').createElement(c('AbstractCheckboxInput.react'),babelHelpers['extends']({},this.props,{checked:n,className:c('joinClasses')(this.props.className,m),defaultChecked:o,onChange:this.$FBToggleSwitch1}),undefined);};l.propTypes={animate:k.bool,indeterminate:k.bool,onToggle:k.func,disabled:k.bool,tooltip:k.string};f.exports=l;}),null);
__d('MessengerApprovalRequester.react',['cx','fbt','Link.react','MercuryThreadActions','messengerContactImageReact','MessengerTextWithEmoticons.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreadActions').get(),m=c('messengerContactImageReact').comp,n=32;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;o.prototype.render=function(){var p=this.props,q=p.isMessengerUser,r=p.imageSRC,s=p.name,t=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:s});return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq _4fq"},c('React').createElement(m,{className:"_5l39 _5rmm",isMessengerUser:q,size:n,src:r}),c('React').createElement('span',{className:"_3tkx"},t)),c('React').createElement('div',{className:"_3ihq _4fs"},c('React').createElement(c('Link.react'),{className:"_5a73",href:'#',onClick:this.$MessengerApprovalRequester1.bind(this)},i._("Accept")),c('React').createElement(c('Link.react'),{className:"_5a73",href:'#',onClick:this.$MessengerApprovalRequester2.bind(this)},i._("Ignore"))));};o.prototype.$MessengerApprovalRequester1=function(event){var p=this.props,q=p.threadFBID,r=p.userID;l.acceptToJoinableGroup(q,r);};o.prototype.$MessengerApprovalRequester2=function(event){var p=this.props,q=p.threadFBID,r=p.userID;l.rejectToJoinableGroup(q,r);};function o(){j.apply(this,arguments);}f.exports=o;}),null);
__d('MessengerInfoPanelGroupSection.react',['cx','fbt','FBToggleSwitch.react','immutable','MercuryIDs','MercuryParticipants','MercuryThreadActions','MessengerAdminGroupUtils','MessengerApprovalModeTypes','MessengerApprovalRequester.react','messengerInfoPanelSectionReact','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreadActions').get(),m=c('messengerInfoPanelSectionReact').comp;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.state={approvalQueue:c('immutable').Map()};}n.prototype.componentDidMount=function(){this.$MessengerInfoPanelGroupSection1(this.props.thread);};n.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:this.props.isOptionsCollapsed,onToggle:this.props.onOptionsToggle,title:i._("Group options")},c('React').createElement('div',{className:"_3iho"},this.$MessengerInfoPanelGroupSection2(),this.$MessengerInfoPanelGroupSection3())),this.$MessengerInfoPanelGroupSection4());};n.prototype.componentWillReceiveProps=function(o){this.$MessengerInfoPanelGroupSection1(o.thread);};n.prototype.$MessengerInfoPanelGroupSection1=function(o){var p=o&&o.approval_queue_ids;if(p)c('MercuryParticipants').getMulti(p,function(q){this.setState({approvalQueue:c('immutable').Map(q)});}.bind(this));};n.prototype.$MessengerInfoPanelGroupSection2=function(){var o=this.props.thread,p=o.joinable_mode.link;if(!c('MessengerAdminGroupUtils').showJoinableLink(o))return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq"},i._("Share the link"),c('React').createElement('div',{className:"_3ihp _3oh-"},p)));};n.prototype.$MessengerInfoPanelGroupSection3=function(){var o=this.props,p=o.viewer,q=o.thread,r=c('MessengerAdminGroupUtils').isApprovalOpenThread(q);if(!c('MessengerAdminGroupUtils').showJoinableApprovalToggle(q,p))return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq"},i._("New member approval"),c('React').createElement('div',{className:"_3ihp"},i._("Approve who can join the group"))),c('React').createElement('div',{className:"_3ihq"},c('React').createElement(c('FBToggleSwitch.react'),{animate:true,checked:!r,onToggle:function s(t){return l.setApprovalMode(t?c('MessengerApprovalModeTypes').APPROVALS:c('MessengerApprovalModeTypes').OPEN,q);}})));};n.prototype.$MessengerInfoPanelGroupSection4=function(){var o=this.props,p=o.viewer,q=o.thread,r=0;if(q&&q.approval_queue_ids&&q.approval_queue_ids.length)r=q.approval_queue_ids.length;if(!c('MessengerAdminGroupUtils').showApprovalQueue(q,p))return null;return c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:this.props.isApprovalsCollapsed,onToggle:this.props.onApprovalToggle,title:i._("Pending requests ({pendingRequestCount})",[i.param('pendingRequestCount',r)])},c('React').createElement('div',{className:"_3iho _3oh-"},this.state.approvalQueue.map(function(s){return c('React').createElement(c('MessengerApprovalRequester.react'),{key:s.id,imageSRC:s.image_src,isMessengerUser:s.is_messenger_user,name:s.name,threadFBID:this.props.thread.thread_fbid,userID:c('MercuryIDs').getUserIDFromParticipantID(s.id)});}.bind(this)).toArray()));};f.exports=n;}),null);
__d('MessengerInfoPanelContactActions.react',['cx','fbt','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryThreads','MessengerAdminGroupUtils','messengerContactActionsRe','messengerDialogsRe','messengerMakeAsOwnerDialogReact','MessengerMenu.react','MessengerPopoverMenu.react','messengerRemoveAsOwnerDialogReact','messengerRemoveFromGroupDialogReact','MessengerStateStore','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('messengerContactActionsRe').actions,k=c('messengerMakeAsOwnerDialogReact').comp,l=c('messengerRemoveAsOwnerDialogReact').comp,m=c('messengerRemoveFromGroupDialogReact').comp,n=c('MessengerMenu.react').Item,o=c('MessengerMenu.react').Separator,p=c('React').PropTypes,q=c('React').createClass({displayName:'MessengerInfoPanelContactActions',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MessengerStateStore'))],propTypes:{adminIds:p.arrayOf(p.string),extrasEnabled:p.bool.isRequired,contact:p.instanceOf(c('ImmutableObject')).isRequired,isOpen:p.bool,onAction:p.func.isRequired,onToggle:p.func.isRequired,viewer:p.string.isRequired},statics:{calculateState:function r(s){var t=c('MercuryThreads').getForFBID(s.viewer),u=c('MessengerStateStore').getState().activeThreadID,v=u?t.getOrFetch(u):null;return {thread:v};}},render:function r(){var s=this._isViewerAdmin(),t=c('MessengerAdminGroupUtils').isAdmin(this.props.adminIds,this.props.contact.uid),u=this._isUserViewer(),v=c('MessengerAdminGroupUtils').canRemoveAdmin(s,t,this.state.thread)?c('React').createElement(n,{label:i._("Remove as admin"),onclick:this._handleRemoveAsOwnerClick}):null,w=null,x=c('MessengerAdminGroupUtils').canMakeOthersAdmins(s,t,this.state.thread),y=c('MessengerAdminGroupUtils').canMakeSelfAdmin(u,this.state.thread);if(x||y)w=c('React').createElement(n,{label:i._("Make admin"),onclick:this._hanleMakeOwnerClick});var z=void 0;if(u){if(w||v){z=c('React').createElement(c('MessengerMenu.react'),null,w,v);}else return null;}else z=c('React').createElement(c('MessengerMenu.react'),null,c('React').createElement(n,{label:i._("Message"),onclick:this._makeActionHandler(j.MESSAGE)}),this.props.contact.href?c('React').createElement(n,{label:i._("View Profile"),onclick:this._makeActionHandler(j.PROFILE)}):null,w,v,this._renderExtras());return c('React').createElement(c('MessengerPopoverMenu.react'),{menu:z,onHide:function(){return this.props.onToggle(false);}.bind(this),onShow:function(){return this.props.onToggle(true);}.bind(this)},c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_57gs"+(this.props.isOpen?' '+"_57gt":'')),onClick:this._handleClick,role:'button',tabIndex:0}));},_renderExtras:function r(){if(!this.props.extrasEnabled)return null;var s=[c('React').createElement(o,{key:'separator'})],t=this._isViewerAdmin();if(c('MessengerAdminGroupUtils').canRemoveFromGroup(t,this.state.thread))s.push(c('React').createElement(n,{key:'remove-from-group',label:i._("Remove from group"),onclick:this._handleRemoveClick}));return s.length>=2?s:null;},_handleClick:function r(s){s.stopPropagation();s.preventDefault();},_makeActionHandler:function r(s){return function(t){this._handleClick(t);this.props.onAction(s,t);}.bind(this);},_handleRemoveClick:function r(s){this._handleClick(s);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(m,{onToggle:this._handleDialogToggle,onRemove:this._handleDialogRemoveClick});}.bind(this));},_handleRemoveAsOwnerClick:function r(s){this._handleClick(s);var t=c('MercuryParticipants').getNow(this.props.contact.uid);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(l,{onToggle:this._handleDialogToggle,onRemove:this._handleOwnerRemoveClick,name:t&&t.name,isUserViewer:this._isUserViewer(),isLastAdminInThread:this.props.adminIds&&this.props.adminIds.length===1});}.bind(this));},_handleDialogRemoveClick:function r(s){this.props.onAction(j.REMOVE,s);},_handleOwnerRemoveClick:function r(s){this.props.onAction(j.REMOVE_OWNER,s);},_hanleMakeOwnerClick:function r(s){this._handleClick(s);var t=c('MercuryParticipants').getNow(this.props.contact.uid);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(k,{onToggle:this._handleDialogToggle,onMakeOwner:this._handleOwnerAddClick,name:t&&t.name,isUserViewer:this._isUserViewer()});}.bind(this));},_handleOwnerAddClick:function r(s){this.props.onAction(j.ADD_OWNER,s);},_handleDialogToggle:function r(s){if(!s)c('messengerDialogsRe').removeDialog();},_isUserViewer:function r(){return c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)===this.props.contact.uid;},_isViewerAdmin:function r(){return c('MessengerAdminGroupUtils').isViewerAdmin(this.props.adminIds,this.props.viewer);}});f.exports=q;}),null);
__d("MessengerSortParticipants",[],(function a(b,c,d,e,f,g){var h={sortAlphabeticalWithAdmins:function i(j,k){var l=k.filter(function(n){return !!n&&j&&j.indexOf(n.id)!==-1;}).toArray().sort(function(n,o){return n.name.localeCompare(o.name);}),m=k.filter(function(n){return !!n&&(!j||j.indexOf(n.id)===-1);}).toArray().sort(function(n,o){return n.name.localeCompare(o.name);});return l.concat(m);}};f.exports=h;}),null);
__d('MessengerInfoPanelPeopleSection.react',['cssVar','cx','fbt','immutable','ImmutableObject','Link.react','MessengerAddIconSVG.react','MessengerAdminGroupUtils','MessengerContactList.react','MessengerInfoPanelContactActions.react','messengerInfoPanelSectionReact','MessengerSortParticipants','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('messengerInfoPanelSectionReact').comp,n=c('React').PropTypes;k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;o.prototype.render=function(){var p=this.props,q=p.adminIds,r=p.contactAdapter,s=p.isCollapsed,t=p.isViewerSubscribed,u=p.onContactAction,v=p.onContactSelect,w=p.onToggle,x=p.participants,y=p.thread,z=p.viewer;return c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:s,onToggle:w,title:j._("People")},this.$MessengerInfoPanelPeopleSection1(),c('React').createElement(c('MessengerContactList.react'),{actionsClass:c('MessengerInfoPanelContactActions.react'),className:"_4wc-",contactAdapter:r,disableRole:true,extraActionsEnabled:t,listSections:c('immutable').OrderedMap([[null,c('MessengerSortParticipants').sortAlphabeticalWithAdmins(q,x)]]),onSelect:v,onAction:u,viewer:z,adminIds:q,thread:y}));};o.prototype.$MessengerInfoPanelPeopleSection1=function(){if(!this.props.canViewerReply)return null;var p=c('MessengerAdminGroupUtils').shouldInvite(this.props.thread)?j._("Invite"):j._("Add People"),q=this.props.thread.custom_color||"#0084ff";return c('React').createElement(c('Link.react'),{className:"_4rph",onClick:this.props.onAddPeopleClick},c('React').createElement(c('MessengerAddIconSVG.react'),{className:"_4rpi",customColor:q}),c('React').createElement('div',{className:"_4rpj"},p));};function o(){k.apply(this,arguments);}o.propTypes={adminIds:n.arrayOf(n.string),canViewerReply:n.bool.isRequired,contactAdapter:n.func.isRequired,isCollapsed:n.bool.isRequired,isViewerSubscribed:n.bool.isRequired,onAddPeopleClick:n.func.isRequired,onContactAction:n.func.isRequired,onContactSelect:n.func.isRequired,onToggle:n.func.isRequired,participants:n.instanceOf(c('immutable').Map).isRequired,thread:n.instanceOf(c('ImmutableObject')).isRequired,viewer:n.string.isRequired};f.exports=o;}),null);
__d('MessengerSharedPhotos.react',['cx','MessengerSharedPhoto.react','MessengerSpinner.react','MessengerSharedPhotosAlbumViewContainer.react','React','Relay','RelayQL','SpotlightViewer','SpotlightMessengerSharedMediaViewerContainer.react','Vector','cancelAnimationFrame','requestAnimationFrame'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=10,m=80;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={albumView:null,imagesLoaded:l,shownID:null},this.$MessengerSharedPhotos1=null,this.$MessengerSharedPhotos3=function(t){var u=c('Vector').getViewportDimensions().x,v=this.props.sharedPhotoAndVideos.edges.length,w=this.props.sharedPhotoAndVideos.edges.find(function(aa){return aa.node.id===t;});if(!w)return;var x=this.props.sharedPhotoAndVideos.edges.indexOf(w),y=(v-x)*m;if(y>u/2)return;var z=Math.ceil((u/2-y)/m);this.props.fetchMore(z);}.bind(this),this.$MessengerSharedPhotos4=function(t){var u=this.props.sharedPhotoAndVideos,v=u.edges.find(function(w){var x=w.node;return x.id===t;});return v.node;}.bind(this),this.$MessengerSharedPhotos5=function(t){this.setState({shownID:t});}.bind(this),this.$MessengerSharedPhotos6=function(t){this.setState({shownID:t},function(){this.$MessengerSharedPhotos3(this.state.shownID);this.$MessengerSharedPhotos7();}.bind(this));}.bind(this),this.$MessengerSharedPhotos8=function(t){this.setState({shownID:t});}.bind(this),this.$MessengerSharedPhotos7=function(){this.setState({albumView:null});}.bind(this),this.$MessengerSharedPhotos9=function(t){this.setState({albumView:t,shownID:null});}.bind(this),this.$MessengerSharedPhotos10=function(t){this.setState({albumView:null,shownID:t});}.bind(this),this.$MessengerSharedPhotos11=function(){this.setState({shownID:null});}.bind(this),p;}n.prototype.componentDidMount=function(){this.$MessengerSharedPhotos2();};n.prototype.componentWillReceiveProps=function(o){if(o.threadFBID!==this.props.threadFBID)this.setState({imagesLoaded:l});};n.prototype.componentDidUpdate=function(){this.$MessengerSharedPhotos2();};n.prototype.componentWillUnmount=function(){c('cancelAnimationFrame')(this.$MessengerSharedPhotos1);};n.prototype.shouldComponentUpdate=function(o,p){var q=o.sharedPhotoAndVideos,r=q.edges,s=q.pageInfo&&q.pageInfo.has_next_page,t=r.find(function(u){var v=u.node;return v.id===p.shownID;});if(!t&&s&&r.length<p.imagesLoaded){setTimeout(function(){return this.props.fetchMore(p.imagesLoaded);}.bind(this),1000);return false;}return true;};n.prototype.$MessengerSharedPhotos2=function(){c('cancelAnimationFrame')(this.$MessengerSharedPhotos1);var o=this.props.sharedPhotoAndVideos;if(this.state.imagesLoaded<o.edges.length){this.$MessengerSharedPhotos1=c('requestAnimationFrame')(function(){this.setState({imagesLoaded:Math.min(o.edges.length,this.state.imagesLoaded+l)});}.bind(this));}else if(!this.props.allPhotosDisplayed)this.props.onAllPhotosDisplayed();};n.prototype.$MessengerSharedPhotos12=function(){return c('React').createElement(c('SpotlightMessengerSharedMediaViewerContainer.react'),{onClosePhotoView:this.$MessengerSharedPhotos11,openAlbum:this.$MessengerSharedPhotos9,photoID:this.state.shownID,rootClassName:'',threadID:this.props.threadFBID,disableForward:false});};n.prototype.$MessengerSharedPhotos13=function(){return c('React').createElement(c('SpotlightViewer'),{className:"_3ode",onHide:this.$MessengerSharedPhotos7,open:true,ref:'spotlightViewer'},c('React').createElement(c('MessengerSharedPhotosAlbumViewContainer.react'),{onClick:this.$MessengerSharedPhotos10,onCloseSharedPhotos:this.$MessengerSharedPhotos7,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView}));};n.prototype.$MessengerSharedPhotos14=function(){return c('React').createElement('div',{className:"_2n20"},c('React').createElement(c('MessengerSpinner.react'),null));};n.prototype.render=function(){var o=this.props,p=o.isLoadingImages,q=o.sharedPhotoAndVideos,r=q,s=r.edges,t=this.state.imagesLoaded,u="_3m31",v=this.$MessengerSharedPhotos5,w=p?this.$MessengerSharedPhotos14():null,x=this.state.shownID?this.$MessengerSharedPhotos12():null,y=this.state.albumView?this.$MessengerSharedPhotos13():null;return c('React').createElement('div',null,x,y,c('React').createElement('div',{className:"_40jj _5l-3"},s.slice(0,t).filter(function(z){var aa=z.node;return !!aa.image;}).map(function(z){var aa=z.node;return c('React').createElement(c('MessengerSharedPhoto.react'),{className:u,fbid:aa.legacy_attachment_id,key:aa.legacy_attachment_id,onClick:v,photoID:aa.id,uri:aa.image.uri});})),w);};n.propTypes={allPhotosDisplayed:k.bool.isRequired,isLoadingImages:k.bool.isRequired,fetchMore:k.func.isRequired,onAllPhotosDisplayed:k.func.isRequired,sharedPhotoAndVideos:k.object.isRequired,threadFBID:k.string.isRequired};f.exports=c('Relay').createContainer(n,{fragments:{sharedPhotoAndVideos:function o(){return function(){return {children:[{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'Node',type:'Node'},{children:[{fieldName:'legacy_attachment_id',kind:'Field',metadata:{},type:'ID'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:250}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:250}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageImage',type:'MessageImage'},{children:[{fieldName:'legacy_attachment_id',kind:'Field',metadata:{},type:'ID'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:250}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:250}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageVideo',type:'MessageVideo'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isRequisite:true},type:'MessageSharedPhotoAndVideo'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessageSharedPhotoAndVideoEdge'},{fieldName:'count',kind:'Field',metadata:{},type:'Int'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isRequisite:true},type:'PageInfo'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedPhotos_react_SharedPhotoAndVideosRelayQL',type:'MessageSharedPhotoAndVideoConnection'};}();}}});}),null);
__d('MessengerSharedPhotosContainer.react',['fbt','messengerInfoPanelSectionReact','MessengerSharedPhotos.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('messengerInfoPanelSectionReact').comp,j=c('React').PropTypes,k=10,l=c('React').createClass({displayName:'MessengerSharedPhotosContainer',propTypes:{customColor:j.string,clearForceFetch:j.func.isRequired,getIsScrolledToBottom:j.func.isRequired,getScrollableHeight:j.func.isRequired,isCollapsed:j.bool.isRequired,onToggle:j.func.isRequired,sharedPhotos:j.object,threadFBID:j.string},getInitialState:function m(){return {allPhotosDisplayed:false,isLoadingImages:false};},componentWillReceiveProps:function m(n){if(n.threadFBID!==this.props.threadFBID)this.setState({allPhotosDisplayed:false});},componentDidMount:function m(){this._maybeLoadMore();},componentDidUpdate:function m(){this._maybeLoadMore();},_maybeLoadMore:function m(){var n=this.props,o=n.getIsScrolledToBottom,p=n.getScrollableHeight,q=n.isCollapsed,r=n.sharedPhotos,s=this.state.isLoadingImages;if(s||q||!r||!this.state.allPhotosDisplayed||!o()||!p())return;var t=r.message_shared_photo_and_video.page_info.has_next_page;if(!t)return;this.setState({isLoadingImages:true},function(){this.props.relay.setVariables({count:this.props.relay.variables.count+k},function(u){if(u.done||u.aborted)if(this.isMounted()){this.props.clearForceFetch();this.setState({allPhotosDisplayed:false,isLoadingImages:false});}}.bind(this));}.bind(this));},_loadMore:function m(n){if(n<=0)return;this.setState({isLoadingImages:true},function(){this.props.relay.setVariables({count:this.props.relay.variables.count+n},function(o){if(o.done||o.aborted)this.setState({isLoadingImages:false});}.bind(this));}.bind(this));},_handleAllPhotosDisplayed:function m(){this.setState({allPhotosDisplayed:true});},render:function m(){var n=this.props,o=n.isCollapsed,p=n.onToggle,q=n.sharedPhotos,r=n.threadFBID,s=this.state.isLoadingImages;if(!r||!q)return null;var t=q.message_shared_photo_and_video;if(!t.page_info.has_next_page&&t.count===0)return null;return c('React').createElement(i,{customColor:this.props.customColor,isCollapsible:true,isCollapsed:o,onToggle:p,title:h._("Shared Photos")},c('React').createElement(c('MessengerSharedPhotos.react'),{allPhotosDisplayed:this.state.allPhotosDisplayed,fetchMore:this._loadMore,isLoadingImages:s,sharedPhotoAndVideos:t,onAllPhotosDisplayed:this._handleAllPhotosDisplayed,threadFBID:r}));}});f.exports=c('Relay').createContainer(l,{initialVariables:{count:k},fragments:{sharedPhotos:function m(){return function(n){return {children:[{calls:[{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true},type:'PageInfo'},{fieldName:'count',kind:'Field',metadata:{},type:'Int'},c('RelayQL').__frag(n)]),fieldName:'message_shared_photo_and_video',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'MessageSharedPhotoAndVideoConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedPhotosContainer_react_SharedPhotosRelayQL',type:'MessageThread'};}(c('MessengerSharedPhotos.react').getFragment('sharedPhotoAndVideos'));}}});}),null);
__d('MessengerSharedPhotosContainerRoute',['RelayRoute','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='MessengerSharedPhotosContainerRoute';j.paramDefinitions={threadFBID:{type:'String',required:true}};j.queries={sharedPhotos:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'threadFBID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(m)]),fieldName:'message_thread',kind:'Query',metadata:{identifyingArgName:'id',identifyingArgType:'ID!'},name:'MessengerSharedPhotosContainerRoute',type:'MessageThread'};}(l.getFragment('sharedPhotos'));}};f.exports=j;}),null);
__d('messengerInfoPanelContactNameSectionReact',['cx','bs_curry','React','reactRe','bs_js_primitive','messengerLocalTimeReact','messengerPresenceStatusReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reactRe').Component[0],j=c('reactRe').Component[1],k=c('reactRe').Component[2],l=c('reactRe').Component[3],m=c('reactRe').Component[4],n=c('reactRe').Component[5],o=c('reactRe').Component[6],p=c('reactRe').Component[7],q="MessengerInfoPanelContactNameSectionReact";function r(aa){var ba=aa[1];return c('React').createElement("div",{className:"_2jnq"},ba[4],c('React').createElement("div",{className:"_2jnt"},c('React').createElement("div",{className:"_3eur"},c('React').createElement("span",{className:"_3oh-"},ba[0].name)),c('React').createElement("div",{className:"_3eus"},c('bs_curry')._4(c('messengerPresenceStatusReact').createElement(0,ba[1],ba[2],ba[3]),0,0,0,0)),c('React').createElement("div",undefined,c('bs_curry')._4(c('messengerLocalTimeReact').createElement("_5uh",c('bs_js_primitive').null_undefined_to_opt(ba[0].timezone)),0,0,0,0))));}var s=c('reactRe').Component[8],t=c('reactRe').Component[9],u=c('reactRe').Component[10],v=[i,j,k,l,m,n,o,p,s,t,u,q,r],w=c('reactRe').CreateComponent([q,n,p,i,l,j,k,m,o,r]),x=w[1];function y(aa,ba,ca,da,ea){return c('bs_curry')._1(x,[aa,ba,ca,da,ea]);}var z=w[0];g.MessengerInfoPanelContactNameSection=v;g.comp=z;g.wrapProps=x;g.createElement=y;}),null);
__d('keysRe',[],(function a(b,c,d,e,f,g){'use strict';var h=8,i=9,j=13,k=18,l=27,m=32,n=33,o=34,p=35,q=36,r=37,s=38,t=39,u=40,v=46,w=188,x=190,y=65,z=90,aa=48,ba=96,ca=105;g.backspace=h;g.tab=i;g.$$return=j;g.alt=k;g.esc=l;g.space=m;g.page_up=n;g.page_down=o;g.end_=p;g.home=q;g.left=r;g.up=s;g.right=t;g.down=u;g.$$delete=v;g.comma=w;g.period=x;g.a=y;g.z=z;g.zero=aa;g.numpad_0=ba;g.numpad_9=ca;}),null);
__d('MessengerThreadPhotoUploader.react',['cx','fbt','FileInput','FileInputUploader','Link.react','MercuryConfig','React','ReactDOM','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerThreadPhotoUploader',_fileInput:null,_subscriptions:null,_uploader:null,_uploadIsInProgress:false,propTypes:{onComplete:j.func.isRequired,onFail:j.func,onStart:j.func,uri:j.string},getDefaultProps:function l(){return {uri:c('MercuryConfig').upload_url};},componentDidMount:function l(){var m=c('ReactDOM').findDOMNode(this.refs.input),n=new (c('FileInput'))(c('ReactDOM').findDOMNode(this.refs.form),c('ReactDOM').findDOMNode(this.refs.uploadButton),m),o=new (c('FileInputUploader'))(m).setURI(this.props.uri).setAllowCrossOrigin(true).setAllowCrossPageTransition(true).setData({images_only:true}),p=new (c('SubscriptionsHandler'))();p.addSubscriptions(o.subscribe('success',this._handleAllUploadsCompleted),o.subscribe('failure',this._handleLastUploadFailed));this._subscriptions=p;this._uploader=o;this._fileInput=n;},componentWillUnmount:function l(){if(!this._uploadIsInProgress)this._doUnmountComponents();},render:function l(){var m=i._("Click to change the image");return c('React').createElement('form',{action:this.props.uri,method:'post',ref:'form'},c('React').createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),c('React').createElement('input',{type:'hidden',name:'images_only',value:'true'}),c('React').createElement('div',{className:"_m _4q60 _2lyy"},c('React').createElement(c('Link.react'),{className:"_4q61 _2lyz",ref:'uploadButton'},i._("edit")),c('React').createElement('input',{type:'file',className:"_n",name:'attachment[]',accept:'.jpg,.png,.jpeg,.bmp,.tif,.tiff',ref:'input',onChange:this._handleFileInputChange,title:m})));},_handleAllUploadsCompleted:function l(m,n){this._uploadIsInProgress=false;this.props.onComplete&&this.props.onComplete(n.response.payload);if(!this.isMounted())this._doUnmountComponents();},_handleLastUploadFailed:function l(m,n){this._uploadIsInProgress=false;this.props.onFail&&this.props.onFail(n);if(!this.isMounted())this._doUnmountComponents();},_handleFileInputChange:function l(m){if(m.target.value&&this._uploader){this._uploader.send();this._uploadIsInProgress=true;this.props.onStart&&this.props.onStart();}},_doUnmountComponents:function l(){this._subscriptions&&this._subscriptions.release();this._fileInput&&this._fileInput.destroy();delete this._subscriptions;delete this._uploader;}});f.exports=k;}),null);
__d("XNFXStartForMessageThreadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/nfx\/start_message_thread\/",{thread_fbid:{type:"String",required:true},responsible_fbid:{type:"Int"},av:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}});}),null);
__d("messengerThreadlistRowActionsReact",["cx","fbt","bs_curry","React","reactRe","utilsRe","bs_js_boolean","AsyncDialog","joinClasses","AsyncRequest","bs_js_primitive","MercuryThreadIDMap","messengerDialogsRe","messengerMenuReact","messengerMuteDialogReact","messengerBlockDialogReact","messengerPopoverMenuReact","messengerDeleteDialogReact","messengerMarkSpamDialogReact","XNFXStartForMessageThreadController","mNCommerceReportConversationDialogReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reactRe").Component[9],k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=j[5],q=j[6],r="MessengerThreadlistRowActionsReact";function s(ka,la){if(!la)c("messengerDialogsRe").removeDialog(0);return 0;}function t(ka,la){la.preventDefault();return la.stopPropagation();}function u(ka,la){c("bs_curry")._1(ka[1][15],true);return 0;}function v(ka,la){c("bs_curry")._1(ka[1][15],false);return 0;}function w(ka,la){var ma=ka[2],na=ka[1];c("messengerDialogsRe").showDialog(function(){return c("bs_curry")._4(c("messengerDeleteDialogReact").createElement(na[7],na[8],c("bs_curry")._1(ma,s)),0,0,0,0);});return 0;}function x(ka,la){var ma=ka[2],na=ka[1];if(na[3]){c("bs_curry")._1(na[16],0);}else c("messengerDialogsRe").showDialog(function(){return c("bs_curry")._4(c("messengerMuteDialogReact").createElement(na[13],c("bs_curry")._1(ma,s)),0,0,0,0);});return 0;}function y(ka,la){var ma=ka[1];if(ma[5]){c("bs_curry")._1(ma[10],0);}else c("bs_curry")._1(ma[12],0);return 0;}function z(ka,la){var ma=ka[2],na=ka[1];c("messengerDialogsRe").showDialog(function(){return c("bs_curry")._4(c("messengerMarkSpamDialogReact").createElement(na[11],c("bs_curry")._1(ma,s)),0,0,0,0);});return 0;}function aa(ka,la){var ma=ka[2],na=ka[1];if(na[6]){c("bs_curry")._1(na[18],0);}else c("messengerDialogsRe").showDialog(function(){return c("bs_curry")._4(c("messengerBlockDialogReact").createElement(na[17],c("bs_curry")._1(ma,s),na[1]),0,0,0,0);});return 0;}function ba(ka,la){var ma=c("MercuryThreadIDMap").get();ma.getServerIDFromClientID(ka[1][24].thread_id,function(na){c("AsyncDialog").send(new (c("AsyncRequest"))(c("XNFXStartForMessageThreadController").getURIBuilder().setString("thread_fbid",na).getURI()));return 0;});return 0;}function ca(ka,la){var ma=ka[1][24].other_user_fbid;if(!c("bs_js_primitive").is_nil_undef(ma))c("messengerDialogsRe").showDialog(function(){return c("mNCommerceReportConversationDialogReact").createElement(ma)(0,0,0,0);});return 0;}function da(ka){var la=ka[2],ma=ka[1],na=ma[2],oa=na!==0?i._("Leave room"):i._("Leave Group"),pa=ma[6],qa=pa!==0?i._("Unblock messages"):i._("Block messages"),ra=ma[20],sa;if(ra!==0){var ta=ma[3];sa=c("bs_curry")._8(c("messengerMenuReact").MenuItem[0],0,ta!==0?i._("Unmute"):i._("Mute"),[c("bs_curry")._1(la,x)],0,0,0,0,0);}else sa=null;var ua=c("utilsRe").isSomeTrue(ma[22]),va=ma[20]||c("utilsRe").isSomeTrue(ma[22]),wa=ma[19],xa=ma[5],ya=c("utilsRe").isSomeTrue(ma[23]),za=c("utilsRe").isSomeTrue(ma[23]),ab=ma[21],bb=c("bs_curry")._4(c("messengerMenuReact").Menu[0],[sa,[ua!==0?c("bs_curry")._8(c("messengerMenuReact").MenuItem[0],0,i._("Rename"),ma[14],0,0,0,0,0):null,[va!==0?c("bs_curry")._4(c("messengerMenuReact").MenuSeparator[0],0,0,0,0):null,[wa!==0?c("bs_curry")._8(c("messengerMenuReact").MenuItem[0],0,oa,ma[9],0,0,0,0,0):null,[c("bs_curry")._8(c("messengerMenuReact").MenuItem[0],0,i._("Archive"),[ma[7]],0,0,0,0,0),[c("bs_curry")._8(c("messengerMenuReact").MenuItem[0],0,i._("Delete"),[c("bs_curry")._1(la,w)],0,0,0,0,0),[c("bs_curry")._4(c("messengerMenuReact").MenuSeparator[0],0,0,0,0),[c("bs_curry")._8(c("messengerMenuReact").MenuItem[0],0,xa!==0?i._("Mark as Read"):i._("Mark as Unread"),[c("bs_curry")._1(la,y)],0,0,0,0,0),[ya!==0?null:c("bs_curry")._8(c("messengerMenuReact").MenuItem[0],0,i._("Mark as Spam"),[c("bs_curry")._1(la,z)],0,0,0,0,0),[za!==0?c("bs_curry")._8(c("messengerMenuReact").MenuItem[0],0,i._("Report..."),[c("bs_curry")._1(la,ca)],0,0,0,0,0):c("bs_curry")._8(c("messengerMenuReact").MenuItem[0],0,i._("Report Spam or Abuse..."),[c("bs_curry")._1(la,ba)],0,0,0,0,0),[ab!==0?c("bs_curry")._8(c("messengerMenuReact").MenuItem[0],0,qa,[c("bs_curry")._1(la,aa)],0,0,0,0,0):null,0]]]]]]]]]]],0,0,0);return c("React").createElement("div",{className:"_3d85"},c("messengerPopoverMenuReact").createElement([1],[ma[4]],bb,[c("bs_curry")._1(la,v)],[c("bs_curry")._1(la,u)])([c("React").createElement("div",{"aria-label":i._("Conversation actions"),className:c("joinClasses")(c("utilsRe").$pipe$unknown(ma[0],""),"_4-0h"+(c("bs_js_boolean").to_js_boolean(ma[4])?" "+"_4-0i":"")),onClick:c("bs_curry")._1(la,t),role:"button",ref:"button",tabIndex:0}),0],0,0,0));}var ea=[function(ka){return [c("bs_js_primitive").null_undefined_to_opt(ka.className),c("bs_js_primitive").null_undefined_to_opt(ka.contact),+ka.isMessengerRoom,+ka.isMuted,+ka.isOpen,+ka.isUnread,+ka.isBlocked,ka.onArchive,ka.onDelete,c("bs_js_primitive").null_undefined_to_opt(ka.onLeaveGroup),ka.onMarkRead,ka.onMarkSpam,ka.onMarkUnread,ka.onMute,c("bs_js_primitive").null_undefined_to_opt(ka.onRename),ka.onToggle,ka.onUnmute,ka.onBlock,ka.onUnblock,+ka.showLeaveGroup,+ka.showMute,+ka.showBlock,c("utilsRe").nullUndefinedBooleanToOptionBool(ka.showRename),c("utilsRe").nullUndefinedBooleanToOptionBool(ka.showReport),ka.thread];}],fa=[k,l,m,n,o,p,q,r,c("utilsRe").$pipe$unknown,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea],ga=c("reactRe").CreateComponent([r,p,q,k,n,l,m,o,ea,da]),ha=ga[1];function ia(ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib){return c("bs_curry")._1(ha,[ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib]);}var ja=ga[0];g.MessengerThreadlistRowActions=fa;g.comp=ja;g.wrapProps=ha;g.createElement=ia;}),null);
__d('messengerInfoPanelNameSectionReact',['cx','bs_curry','React','reactRe','bs_js_primitive','MercuryThreadInfo','MessengerAdminGroupUtils','messengerThreadImageReact','messengerThreadlistRowActionsReact','messengerInfoPanelThreadNameSectionReact','messengerInfoPanelContactNameSectionReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reactRe').Component[8][8][6],j=i[0],k=i[1],l=i[2],m=i[3],n=i[4],o="MessengerInfoPanelNameSectionReact";function p(){return [0];}function q(){return [0,1];}function r(ia,ja){return [[+ja,ia[0][1]]];}function s(ia,ja){var ka=ia[1],la=ka[21].name;if(c('bs_js_primitive').is_nil_undef(la)){if(ja!=="")c('bs_curry')._1(ka[11],ja);}else if(ja!==la)c('bs_curry')._1(ka[11],ja);return [[ia[0][0],1]];}function t(ia,ja){return [[ia[0][0],ja]];}function u(ia,ja){ia[4][0]=[ja];return 0;}function v(ia,ja){var ka=ia[4][0];if(ka){return [[ia[0][0],2]];}else return 0;}function w(ia){var ja=ia[2],ka=ia[1],la=+ka[21].is_subscribed&&1- +ka[21].is_canonical&&+c('MessengerAdminGroupUtils').canUpdateThreadCustomization(ka[21],ka[22]);return c('React').createElement("div",{className:"_3-ne"},c('bs_curry')._4(c('messengerThreadlistRowActionsReact').createElement(["_5blh"],ka[0],+c('MessengerAdminGroupUtils').isJoinableThread(ka[21]),+c('MercuryThreadInfo').isMuted(ka[21]),ia[0][0],+(ka[21].unread_count>0),ka[2],ka[10],ka[4],ka[5],ka[6],ka[7],ka[8],ka[9],[c('bs_curry')._1(ja,v)],c('bs_curry')._1(ja,r),ka[13],ka[14],ka[15],ka[19],0,ka[16],[la],[ka[20]],ka[21]),0,0,0,0));}function x(ia){return c('React').createElement("div",{className:"_1jt8"},c('bs_curry')._4(c('messengerThreadImageReact').createElement(0,0,[50],ia[17],ia[21],ia[22]),0,0,0,0));}function y(ia,ja){return c('bs_curry')._4(c('messengerInfoPanelContactNameSectionReact').createElement(ia,ja[1],ja[3],ja[18],x(ja)),0,0,0,0);}function z(ia,ja){c('bs_curry')._2(ia[1][12],ja[0],ja[1]);return 0;}function aa(ia){var ja=ia[2],ka=ia[1],la=+c('MessengerAdminGroupUtils').canUpdateThreadCustomization(ka[21],ka[22]);return c('bs_curry')._4(c('messengerInfoPanelThreadNameSectionReact').createElement(la,c('bs_curry')._1(ja,s),c('bs_curry')._1(ja,z),ka[17],x(ka),ka[21],c('bs_curry')._1(ja,t),ia[0][1],ka[22]),0,[c('bs_curry')._1(ia[3],u)],0,0);}function ba(ia){var ja=ia[1],ka=+(ja[21].is_subscribed||ja[21].is_canonical),la=ja[0];return c('React').createElement("div",{className:"_1jt6"},la?y(la[0],ja):aa(ia),ka!==0?w(ia):null);}var ca=[function(ia){return [c('bs_js_primitive').null_undefined_to_opt(ia.contact),+ia.isUserActive,+ia.isBlocked,c('bs_js_primitive').null_undefined_to_opt(ia.lastActive),ia.onDelete,c('bs_js_primitive').null_undefined_to_opt(ia.onLeaveGroup),ia.onMarkRead,ia.onMarkSpam,ia.onMarkUnread,ia.onMute,ia.onArchive,ia.onThreadNameChange,ia.onThreadPhotoChange,ia.onUnmute,ia.onBlock,ia.onUnblock,+ia.showBlock,ia.participants,c('bs_js_primitive').null_undefined_to_opt(ia.platform),+ia.showLeaveGroup,+ia.showReport,ia.thread,ia.viewer];}],da=[j,k,l,m,n,o,50,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca],ea=c('reactRe').CreateComponent([o,p,q,j,m,k,l,n,ca,ba]),fa=ea[1];function ga(ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb){return c('bs_curry')._1(fa,[ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb]);}var ha=ea[0];g.MessengerInfoPanelNameSection=da;g.comp=ha;g.wrapProps=fa;g.createElement=ga;}),null);
__d('MessengerCustomThreadColorButton.react',['cx','Keys','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerCustomThreadColorButton1=function(event){event.preventDefault();this.props.onChoose(this.props.colorChoice);}.bind(this),this.$MessengerCustomThreadColorButton2=function(event){if(event.keyCode===c('Keys').RETURN){event.preventDefault();this.props.onChoose(this.props.colorChoice);}}.bind(this),n;}l.prototype.render=function(){return c('React').createElement('div',{'aria-label':this.props.colorName,'aria-pressed':this.props.isSelected,className:"_5dr3",onClick:this.$MessengerCustomThreadColorButton1,onKeyDown:this.$MessengerCustomThreadColorButton2,role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_5dr4",style:{backgroundColor:this.props.colorChoice}}));};l.propTypes={colorChoice:k.string.isRequired,colorName:k.string.isRequired,isSelected:k.bool.isRequired,onChoose:k.func.isRequired};f.exports=l;}),null);
__d("messengerChangeColorDialogReact",["ix","cx","fbt","cssVar","bs_array","bs_curry","React","bs_string","reactRe","fbglyph","gridReact","imageReact","bs_js_primitive","messengerDialogsRe","messengerDialogReact","messengerDialogBodyReact","MessagingThreadCustomizationConfig","messengerCustomThreadColorButtonReact"],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l=c("reactRe").Component[9],m=l[0],n=l[1],o=l[2],p=l[3],q=l[4],r=l[5],s=l[6],t="MessengerChangeColorDialogReact",u="Unknown Color";function v(ea,fa){if(!fa){var ga=ea[1][2];if(ga)c("bs_curry")._1(ga[0],0);c("messengerDialogsRe").removeDialog(0);}return 0;}function w(ea,fa){var ga=ea[1],ha=+(fa===ga[0]),ia=ga[1];if(!ha)if(ia)c("bs_curry")._1(ia[0],fa);return v(ea,false);}function x(ea){var fa=ea[2],ga=ea[1],ha=c("bs_curry")._1(c("bs_array").concat,[["#0084ff"],[c("MessagingThreadCustomizationConfig").colorChoices,0]]),ia=c("bs_array").map(function(ja){var ka=c("MessagingThreadCustomizationConfig").colorNames[ja],la=ka!==undefined?ka:u,ma=+(c("bs_string").lowercase(ja)===c("bs_string").lowercase(ga[0]));return c("bs_curry")._7(c("gridReact").Item[0],["_gs0"],0,0,[c("React").createElement("div",undefined,ma!==0?c("imageReact").createElement(["_gs2"],0,[h("140201")],0,0,0)(0,0,0,0):null,c("messengerCustomThreadColorButtonReact").createElement(ja,la,+(ja===ga[0]),c("bs_curry")._1(fa,w))(0,0,0,0)),0],0,[ja],0);},ha);return c("bs_curry").app(c("messengerDialogReact").Dialog[0],[["_gs3"],c("bs_curry")._1(fa,v),0,0,0,0,[335],[c("bs_curry")._6(c("messengerDialogReact").Header[0],0,0,[j._("Pick a colour for this conversation"),0],0,0,0),[c("bs_curry")._3(c("messengerDialogBodyReact").createElement(0,[c("React").createElement("div",{className:"_28he"},j._("Everyone in this conversation will see this.")),[c("bs_curry").app(c("gridReact").Grid[0],[["_gs4"],5,0,0,0,0,[ia,0],0,0,0]),0]]),0,0,0),[c("bs_curry")._6(c("messengerDialogReact").Footer[0],0,0,[c("bs_curry")._5(c("messengerDialogReact").CancelButton[0],0,0,0,0,0),0],0,0,0),0]]],0,0,0]);}var y=[function(ea){return [ea.currentColor,c("bs_js_primitive").null_undefined_to_opt(ea.onSave),c("bs_js_primitive").null_undefined_to_opt(ea.onClose)];}],z=[m,n,o,p,q,r,s,t,u,v,w,x,y],aa=c("reactRe").CreateComponent([t,r,s,m,p,n,o,q,y,x]),ba=aa[1];function ca(ea,fa,ga){return c("bs_curry")._1(ba,[ea,fa,ga]);}var da=aa[0];g.MessengerChangeColorDialog=z;g.comp=da;g.wrapProps=ba;g.createElement=ca;}),null);
__d('messengerChangeColorIconSVGReact',['bs_curry','React','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h=c('reactRe').Component[9],i=h[0],j=h[1],k=h[2],l=h[3],m=h[4],n=h[5],o=h[6],p="MessengerChangeColorIconSVGReact";function q(x){var y=x[1];return c('React').createElement("div",{className:y[0]},c('React').createElement("svg",{viewBox:"-1 -1 47 47"},c('React').createElement("title",undefined,"colors@2x"),c('React').createElement("path",{d:"M912,1569a3,3,0,1,1-3,3A3,3,0,0,1,912,1569Z",fill:y[1],transform:"translate(-895.5 -1561.5)"}),c('React').createElement("path",{d:"M924,1569a3,3,0,1,1-3,3A3,3,0,0,1,924,1569Z",fill:y[1],transform:"translate(-895.5 -1561.5)"}),c('React').createElement("path",{d:"M931,1579a3,3,0,1,1-3,3A3,3,0,0,1,931,1579Z",fill:y[1],transform:"translate(-895.5 -1561.5)"}),c('React').createElement("path",{d:"M905,1579a3,3,0,1,1-3,3A3,3,0,0,1,905,1579Z",fill:y[1],transform:"translate(-895.5 -1561.5)"}),c('React').createElement("path",{d:"M918,1562a22,22,0,0,0,0,44,3.67,3.67,0,0,0,2.71-6.14,3.65,3.65,0,0,1,2.74-6.09h4.33A12.23,12.23,0,0,0,940,1581.56C940,1570.75,930.15,1562,918,1562Z",fill:"transparent",stroke:y[1],strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4%",transform:"translate(-895.5 -1561.5)"})));}var r=[function(x){return [x.className,x.customColor];}],s=[i,j,k,l,m,n,o,p,q,r],t=c('reactRe').CreateComponent([p,n,o,i,l,j,k,m,r,q]),u=t[1];function v(x,y){return c('bs_curry')._1(u,[x,y]);}var w=t[0];g.MessengerChangeColorIconSVG=s;g.comp=w;g.wrapProps=u;g.createElement=v;}),null);
__d("messengerInfoPanelCustomColorReact",["cx","fbt","bs_curry","React","keysRe","reactRe","utilsRe","messengerDialogsRe","messengerCustomColorUtilsRe","messengerChangeColorDialogReact","messengerChangeColorIconSVGReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reactRe").Component[10][7],k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=j[5],q="MessengerInfoPanelCustomColorReact";function r(){return [0];}function s(ea,fa){var ga=ea[4][0];if(ga)ga[0].focus();return 0;}function t(ea){var fa=ea[2],ga=ea[1];return c("messengerDialogsRe").showDialog(function(){return c("bs_curry")._4(c("messengerChangeColorDialogReact").createElement(c("messengerCustomColorUtilsRe").customColorOrBlue(ga[0]),[ga[2]],[c("bs_curry")._1(fa,s)]),0,0,0,0);});}function u(ea,fa){fa.preventDefault();t(ea);return 0;}function v(ea,fa){if(fa.keyCode===c("keysRe").$$return){fa.preventDefault();t(ea);}return 0;}function w(ea,fa){ea[4][0]=[fa];return 0;}function x(ea){var fa=ea[2],ga=ea[1];if(c("utilsRe").isTruthy(ga[0].customization_enabled)){var ha=c("messengerCustomColorUtilsRe").customColorOrBlue(ga[0]);return c("React").createElement("div",{ref:c("bs_curry")._1(ea[3],w),className:"_3szn _3szo",tabIndex:0,onKeyDown:c("bs_curry")._1(fa,v),onClick:c("bs_curry")._1(fa,u)},c("React").createElement("div",{className:"_3szp"},c("bs_curry")._4(c("messengerChangeColorIconSVGReact").createElement("_17vc",ha),0,0,0,0)),c("React").createElement("div",{className:"_3szq"},i._("Change Colour")));}else return null;}var y=[function(ea){return [ea.thread,ea.viewer,ea.onChange];}],z=[k,l,m,n,o,p,q,r,s,t,u,v,w,x,y],aa=c("reactRe").CreateComponent([q,r,p,k,n,l,m,o,y,x]),ba=aa[1];function ca(ea,fa,ga){return c("bs_curry")._1(ba,[ea,fa,ga]);}var da=aa[0];g.MessengerInfoPanelCustomColorReact=z;g.comp=da;g.wrapProps=ba;g.createElement=ca;}),null);
__d('MessengerInfoPanelEmoji.react',['cx','fbt','Bootloader','EmojiLikeConstants','Image.react','ImmutableObject','Keys','MercuryShareAttachmentRenderLocations','MessengerHotLikeOutlineSVG.react','MessengerSupportedEmojiUtils','React','messengerDialogsRe'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelEmoji2=function(event){event.preventDefault();this.$MessengerInfoPanelEmoji5();}.bind(this),this.$MessengerInfoPanelEmoji3=function(event){if(event.keyCode===c('Keys').RETURN){event.preventDefault();this.$MessengerInfoPanelEmoji5();}}.bind(this),this.$MessengerInfoPanelEmoji6=function(){if(this.$MessengerInfoPanelEmoji1)this.$MessengerInfoPanelEmoji1.focus();}.bind(this),this.$MessengerInfoPanelEmoji4=function(s){this.$MessengerInfoPanelEmoji1=s;}.bind(this),o;}m.prototype.render=function(){if(!this.props.thread.customization_enabled)return null;var n=this.props.thread.custom_like_icon&&this.props.thread.custom_like_icon.emoji?c('MessengerSupportedEmojiUtils').getNewEmojiData(this.props.thread.custom_like_icon.emoji,c('EmojiLikeConstants').size.SMALL):null,o=n&&n.url?c('React').createElement(c('Image.react'),{src:n.url,className:"_12cp"}):c('React').createElement(c('MessengerHotLikeOutlineSVG.react'),{className:"_12cq",color:this.props.thread.custom_color?this.props.thread.custom_color:'',height:'60%',location:c('MercuryShareAttachmentRenderLocations').MESSENGER});return c('React').createElement('div',{className:"_3szn _3szo",onClick:this.$MessengerInfoPanelEmoji2,onKeyDown:this.$MessengerInfoPanelEmoji3,ref:this.$MessengerInfoPanelEmoji4,role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_3szp"},o),c('React').createElement('div',{className:"_3szq"},i._("Change Emoji")));};m.prototype.$MessengerInfoPanelEmoji5=function(){c('Bootloader').loadModules(["messengerChangeEmojiDialogReact"],function(n){var o=n.comp;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(o,{currentEmoji:this.props.thread.custom_like_icon?this.props.thread.custom_like_icon.emoji:String.fromCodePoint.apply(String,c('EmojiLikeConstants').FB_THUMBS_UP_EMOJI),onClose:this.$MessengerInfoPanelEmoji6,onSave:this.props.onChange});}.bind(this));}.bind(this),'MessengerInfoPanelEmoji.react');};m.propTypes={thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired,onChange:l.func.isRequired};f.exports=m;}),null);
__d('MessengerInfoPanelManageMessages.react',['cx','fbt','Bootloader','ImmutableObject','MercuryIDs','MercuryParticipants','MNCommerceDialogStateActions','MNCommercePromotionBlockDataManager','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelManageMessages3=function(s,t){return c('MNCommercePromotionBlockDataManager').block(s,t);},this.$MessengerInfoPanelManageMessages2=function(event){event.preventDefault();c('Bootloader').loadModules(["MNCommercePromotionManageBlockDialogContainer.react"],function(s){c('MNCommerceDialogStateActions').showDialog(s,{pageID:this.props.thread.other_user_fbid,onConfirmButtonClick:this.$MessengerInfoPanelManageMessages3});}.bind(this),'MessengerInfoPanelManageMessages.react');}.bind(this),o;}m.prototype.render=function(){if(!this.$MessengerInfoPanelManageMessages1())return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szp"}),c('React').createElement('span',{className:"_3szq",onClick:this.$MessengerInfoPanelManageMessages2,role:'button',tabIndex:'0'},i._("Manage Messages")));};m.prototype.$MessengerInfoPanelManageMessages1=function(){var n=c('MercuryIDs').getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!n)return false;var o=c('MercuryParticipants').getNow(n);return !!(o&&o.is_business_enabled);};m.propTypes={thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired};f.exports=m;}),null);
__d('MessengerInfoPanelManageReview.react',['cx','fbt','Bootloader','ImmutableObject','MercuryConfig','MercuryIDs','MercuryParticipants','MNCommerceDialogStateActions','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelManageReview2=function(event){event.preventDefault();c('Bootloader').loadModules(["MNCommerceReviewDialogContainer.react"],function(s){c('MNCommerceDialogStateActions').showDialog(s,{pageID:this.props.thread.other_user_fbid,onConfirmButtonClick:this.$MessengerInfoPanelManageReview3});}.bind(this),'MessengerInfoPanelManageReview.react');}.bind(this),o;}m.prototype.render=function(){if(!this.$MessengerInfoPanelManageReview1()||!c('MercuryConfig').MessengerPlatformBotReviewUsers)return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szp"}),c('React').createElement('span',{className:"_3szq",onClick:this.$MessengerInfoPanelManageReview2,role:'button',tabIndex:'0'},i._("Leave feedback")));};m.prototype.$MessengerInfoPanelManageReview1=function(){var n=c('MercuryIDs').getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!n)return false;var o=c('MercuryParticipants').getNow(n);return !!(o&&o.accepts_messenger_user_feedback);};m.prototype.$MessengerInfoPanelManageReview3=function(n,o,p){if(o===0)return;c('Bootloader').loadModules(["MessengerPlatformBotReviewWriteDataManager"],function(q){q.review(n,o,p.trim());},'MessengerInfoPanelManageReview.react');};m.propTypes={thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired};f.exports=m;}),null);
__d('MessengerNotificationsIconSVG.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){return c('React').createElement('div',{className:this.props.className},c('React').createElement('svg',{viewBox:'0 0 18 18',width:'24',height:'24'},c('React').createElement('defs',null,c('React').createElement('circle',{id:'path-1',cx:'1',cy:'1',r:'1'})),c('React').createElement('g',{fill:'none',fillRule:'evenodd'},c('React').createElement('rect',{id:'Bounds',x:'0',y:'0',width:'18',height:'18'}),c('React').createElement('path',{d:'M9,16.5 C9.828,16.5 10.5,15.828 10.5,15 L7.5,15 C7.5,15.828 8.172,16.5 9,16.5',fill:this.props.customColor}),c('React').createElement('path',{d:'M13,10 L13,7.5 C13,5.562 11.622,3.948 9.793,3.58 C9.914,3.414 10,3.221 10,3 C10,2.448 9.552,2 9,2 C8.448,2 8,2.448 8,3 C8,3.221 8.086,3.414 8.207,3.58 C6.378,3.948 5,5.562 5,7.5 L5,10 C5,11.105 4,12 4,12 L3.70537567,12.2946243 C3.31580745,12.6841926 3.31640625,13.3164062 3.70537567,13.7053757 L4,14 L14,14 L14.2946243,13.7053757 C14.6841926,13.3158074 14.6835937,12.6835938 14.2946243,12.2946243 L14,12 C14,12 13,11.105 13,10 Z',stroke:this.props.customColor}))));};function k(){h.apply(this,arguments);}k.propTypes={className:j.string,customColor:j.string.isRequired};f.exports=k;}),null);
__d('MessengerInfoPanelCompositeMuteSettings.react',['cssVar','cx','fbt','ImmutableObject','Keys','LeftRight.react','MercuryConfig','messengerDialogsRe','messengerCompositeMuteSettingsDialogReact','messengerMuteDialogReact','MessengerNotificationsIconSVG.react','React','ReactDOM','formatDate'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('messengerCompositeMuteSettingsDialogReact').comp,n=c('messengerMuteDialogReact').comp,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').PureComponent);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$MessengerInfoPanelCompositeMuteSettings1=function(v){v.preventDefault();v.stopPropagation();this.$MessengerInfoPanelCompositeMuteSettings4();}.bind(this),this.$MessengerInfoPanelCompositeMuteSettings2=function(v){if(v.keyCode===c('Keys').RETURN){v.preventDefault();v.stopPropagation();this.$MessengerInfoPanelCompositeMuteSettings4();}}.bind(this),this.$MessengerInfoPanelCompositeMuteSettings6=function(v){if(!v){c('messengerDialogsRe').removeDialog();c('ReactDOM').findDOMNode(this.refs.dialogContext).focus();}}.bind(this),r;}p.prototype.render=function(){var q=j._("Notifications"),r=this.props.thread.custom_color||"#0084ff";return c('React').createElement('div',{className:"_3szn _3szo",onClick:this.$MessengerInfoPanelCompositeMuteSettings1,onKeyDown:this.$MessengerInfoPanelCompositeMuteSettings2,ref:'dialogContext',role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_3szp"},c('React').createElement(c('MessengerNotificationsIconSVG.react'),{className:"_3wh2",customColor:r})),c('React').createElement(c('LeftRight.react'),{className:"_3szq"},q,this.$MessengerInfoPanelCompositeMuteSettings3()));};p.prototype.$MessengerInfoPanelCompositeMuteSettings4=function(){var q=this.props.thread,r=this.$MessengerInfoPanelCompositeMuteSettings5();if(this.props.isMuted&&!r){this.props.onMuteChange(0);return;}r?c('messengerDialogsRe').showDialog(function(){return c('React').createElement(m,{isMuted:this.props.isMuted,mentionsMuted:this.props.mentionsMuted,mutedUntil:this.props.mutedUntil,reactionsMuted:this.props.reactionsMuted,thread:this.props.thread,onMentionsMute:this.props.onMentionsMuteChange,onReactionsMute:this.props.onReactionsMuteChange,onMute:this.props.onMuteChange,onToggle:this.$MessengerInfoPanelCompositeMuteSettings6});}.bind(this)):c('messengerDialogsRe').showDialog(function(){return c('React').createElement(n,{onMute:this.props.onMuteChange,onToggle:this.$MessengerInfoPanelCompositeMuteSettings6});}.bind(this));};p.prototype.$MessengerInfoPanelCompositeMuteSettings3=function(){var q=this.props.mutedUntil,r=void 0;if(!q)return null;if(q>0){if(q<86401)return null;var s=new Date(q*1000).getDay()===new Date().getDay();if(!s){r=j._("Off until {time} tomorrow",[j.param('time',c('formatDate')(q,'g:ia'))]);}else r=j._("Off until {time}",[j.param('time',c('formatDate')(q,'g:ia'))]);}else if(q===-1)r=j._("Off indefinitely");return r?c('React').createElement('span',{className:"_3x6v"},r):null;};p.prototype.$MessengerInfoPanelCompositeMuteSettings5=function(){var q=this.props.thread,r=q&&q.is_canonical;return !r&&(c('MercuryConfig').Mentions||c('MercuryConfig').Reactions);};p.propTypes={isMuted:o.bool.isRequired,mentionsMuted:o.bool.isRequired,mutedUntil:o.number,reactionsMuted:o.bool.isRequired,onMentionsMuteChange:o.func,onReactionsMuteChange:o.func,onMuteChange:o.func.isRequired,thread:o.instanceOf(c('ImmutableObject')).isRequired};f.exports=p;}),null);
__d('MessengerInfoPanelMuteSettings.react',['cx','fbt','ImmutableObject','LeftRight.react','MessengerCheckboxInput.react','messengerMuteDialogReact','React','ReactDOM','messengerDialogsRe','formatDate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerMuteDialogReact').comp,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerInfoPanelMuteSettings1=function(t){t.preventDefault();t.stopPropagation();if(this.props.isMuted){this.props.onMuteChange(0);}else c('messengerDialogsRe').showDialog(function(){return c('React').createElement(l,{onMute:this.props.onMuteChange,onToggle:this.$MessengerInfoPanelMuteSettings3});}.bind(this));}.bind(this),this.$MessengerInfoPanelMuteSettings2=function(){var t=this.props.mutedUntil,u=void 0;if(!t)return null;if(t>0){if(t<86401)return null;var v=new Date(t*1000).getDay()===new Date().getDay();if(!v){u=i._("Off until {time} tomorrow",[i.param('time',c('formatDate')(t,'g:ia'))]);}else u=i._("Off until {time}",[i.param('time',c('formatDate')(t,'g:ia'))]);}else if(t===-1)u=i._("Off indefinitely");return u?c('React').createElement('span',{className:"_3x6v"},u):null;}.bind(this),this.$MessengerInfoPanelMuteSettings3=function(t){if(!t){c('messengerDialogsRe').removeDialog();c('ReactDOM').findDOMNode(this.refs.muteCheckbox).focus();}}.bind(this),p;}n.prototype.render=function(){var o=i._("Mute Notifications"),p=i._("Unmute Notifications"),q=this.props.isMuted?p:o;return c('React').createElement('div',{className:"_3szn",ref:'dialogContext'},c('React').createElement('div',{className:"_3szo"},c('React').createElement('div',{className:"_3szp"},c('React').createElement(c('MessengerCheckboxInput.react'),{checked:this.props.isMuted,onChange:this.$MessengerInfoPanelMuteSettings1,ref:'muteCheckbox',tooltip:q})),c('React').createElement(c('LeftRight.react'),{className:"_3szq"},c('React').createElement('span',{onClick:this.$MessengerInfoPanelMuteSettings1,role:'presentation'},o),this.$MessengerInfoPanelMuteSettings2())));};n.propTypes={isMuted:m.bool.isRequired,mutedUntil:m.number,onMuteChange:m.func.isRequired,thread:m.instanceOf(c('ImmutableObject')).isRequired};f.exports=n;}),null);
__d('messengerThreadSearchIconSVGReact',['bs_curry','React','reactRe'],(function a(b,c,d,e,f,g){'use strict';var h=c('reactRe').Component[9],i=h[0],j=h[1],k=h[2],l=h[3],m=h[4],n=h[5],o=h[6],p="MessengerThreadSearchIconSVGReact";function q(x){var y=x[1];return c('React').createElement("div",{className:y[0]},c('React').createElement("svg",{viewBox:"8 8 48 48"},c('React').createElement("title",undefined,"search conversation"),c('React').createElement("circle",{cx:"28",cy:"28",fill:"none",r:"14",stroke:y[1],strokeMiterlimit:"10",strokeWidth:"2"}),c('React').createElement("path",{clipRule:"evenodd",d:"M50,50L37.9,37.9",fill:"none",fillRule:"evenodd",stroke:y[1],strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})));}var r=[function(x){return [x.className,x.customColor];}],s=[i,j,k,l,m,n,o,p,q,r],t=c('reactRe').CreateComponent([p,n,o,i,l,j,k,m,r,q]),u=t[1];function v(x,y){return c('bs_curry')._1(u,[x,y]);}var w=t[0];g.MessengerThreadSearchIconSVG=s;g.comp=w;g.wrapProps=u;g.createElement=v;}),null);
__d("messengerInfoPanelSearchReact",["cx","fbt","bs_curry","React","keysRe","reactRe","bs_js_primitive","MessengerActions","MessengerStateStore","messengerCustomColorUtilsRe","messengerThreadSearchIconSVGReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reactRe").Component[9],k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=j[5],q=j[6],r="MessengerInfoPanelSearchReact";function s(){var ca=c("MessengerStateStore").getState().query,da=c("bs_js_primitive").is_nil_undef(ca);c("MessengerActions").changeQuery(da!==0?"":undefined);return 0;}function t(ca,da){da.preventDefault();s(0);return 0;}function u(ca,da){if(da.keyCode===c("keysRe").$$return){da.preventDefault();s(0);}return 0;}function v(ca){var da=ca[2],ea=c("messengerCustomColorUtilsRe").customColorOrBlue(ca[1][0]);return c("React").createElement("div",{className:"_3szn _3szo",tabIndex:0,onKeyDown:c("bs_curry")._1(da,u),onClick:c("bs_curry")._1(da,t)},c("React").createElement("div",{className:"_3szp"},c("bs_curry")._4(c("messengerThreadSearchIconSVGReact").createElement("_5odt",ea),0,0,0,0)),c("React").createElement("div",{className:"_3szq"},i._("Search in Conversation")));}var w=[function(ca){return [ca.thread];}],x=[k,l,m,n,o,p,q,r,s,t,u,v,w],y=c("reactRe").CreateComponent([r,p,q,k,n,l,m,o,w,v]),z=y[1];function aa(ca){return c("bs_curry")._1(z,[ca]);}var ba=y[0];g.MessengerInfoPanelSearch=x;g.comp=ba;g.wrapProps=z;g.createElement=aa;}),null);
__d('MessengerThreadInfoPanel.react',['cx','fbt','CurrentUser','immutable','ImmutableObject','Link.react','MercuryAttachment','MercuryIDs','MercuryThreadInfo','MercuryMessageStore','messengerAddToConversationDialogReact','MessengerAdminGroupUtils','MessengerConfig','MessengerContactAdapters','messengerDialogsRe','messengerDomIDsRe','MessengerInfoPanelAssociatedObjectSection.react','MessengerInfoPanelGroupSection.react','messengerInfoPanelNameSectionReact','MessengerInfoPanelPeopleSection.react','messengerInfoPanelSectionReact','messengerInfoPanelThreadOptionsContainerReact','MessengerSharedPhotosContainer.react','MessengerSharedPhotosContainerRoute','MessengerSharedFilesContainer.react','MessengerSharedFilesContainerRoute','MercuryBlockedParticipants','React','RelayRootContainer','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerAddToConversationDialogReact').comp,m=c('messengerDomIDsRe').ids,n=c('messengerInfoPanelNameSectionReact').comp,o=c('messengerInfoPanelSectionReact').comp,p=c('messengerInfoPanelThreadOptionsContainerReact').comp,q=c('MercuryBlockedParticipants').get(),r=c('React').PropTypes;j=babelHelpers.inherits(s,c('React').PureComponent);k=j&&j.prototype;function s(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=k.constructor).call.apply(t,[this].concat(w)),this.$MessengerThreadInfoPanel2=undefined,this.$MessengerThreadInfoPanel3=false,this.state={sharedPhotoSection:null,sharedFilesSection:null},this.$MessengerThreadInfoPanel10=function(){this.$MessengerThreadInfoPanel3=false;}.bind(this),this.$MessengerThreadInfoPanel13=function(y,event){this.props.onContactSelect(c('MessengerContactAdapters').fromMercuryParticipant(y));}.bind(this),this.$MessengerThreadInfoPanel12=function(y,z){this.props.onContactAction(y,c('MessengerContactAdapters').fromMercuryParticipant(z));}.bind(this),this.$MessengerThreadInfoPanel11=function(event){event.preventDefault();c('messengerDialogsRe').showDialog(function(){return c('React').createElement(l,{thread:this.props.thread,viewer:this.props.viewer});}.bind(this));}.bind(this),u;}s.prototype.componentWillMount=function(){this.subscribeStoreUpdate(this.props.thread.thread_id);};s.prototype.componentWillReceiveProps=function(t){if(t.thread.thread_id!==this.props.thread.thread_id||t.photosSectionCollapsed!==this.props.photosSectionCollapsed||t.filesSectionCollapsed!==this.props.filesSectionCollapsed){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release();this.subscribeStoreUpdate(t.thread.thread_id);this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedPhotoSection:this.$MessengerThreadInfoPanel4(true),sharedFilesSection:this.$MessengerThreadInfoPanel5(true)});}.bind(this),1000);}};s.prototype.subscribeStoreUpdate=function(t){this.$MessengerThreadInfoPanel1=new (c('MercuryMessageStore'))(t);this.$MessengerThreadInfoPanel2=new (c('SubscriptionsHandler'))();this.$MessengerThreadInfoPanel2.addSubscriptions(this.$MessengerThreadInfoPanel1.subscribe(function(u){if(u.messages.length<1)return;var v=u.eventType==c('MercuryMessageStore').MESSAGES_RECEIVED,w=u.eventType==c('MercuryMessageStore').MESSAGES_CHANGED,x=u.messages[u.messages.length-1];if(!v&&!w)return;if(x.has_attachment&&x.attachments.length>0){var y=x.attachments.find(function(z){return c('MercuryAttachment').isPhotoAttachment(z)||c('MercuryAttachment').isVideoAttachment(z);});if(y){this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedPhotoSection:this.$MessengerThreadInfoPanel4(true),sharedFilesSection:this.$MessengerThreadInfoPanel5(true)});}.bind(this),1000);}}}.bind(this)));};s.prototype.componentWillUnmount=function(){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release();};s.prototype.componentDidUpdate=function(){if(!this.$MessengerThreadInfoPanel3)this.setState({sharedPhotoSection:null,sharedFilesSection:null});};s.prototype.render=function(){var t=this.props,u=t.viewer,v=t.thread,w=c('MercuryIDs').getParticipantIDFromUserID(u),x=v.participants&&v.participants.indexOf(w)!==-1,y=null;if(c('MessengerConfig').EnableMessengerSharedFiles)y=this.$MessengerThreadInfoPanel3?this.state.sharedFilesSection:this.$MessengerThreadInfoPanel5(false);var z=this.$MessengerThreadInfoPanel3?this.state.sharedPhotoSection:this.$MessengerThreadInfoPanel4(false),aa=q.isMessageBlocked(v);return c('React').createElement('div',{className:"_3tkv",id:m.THREAD_INFO_PANEL},c('React').createElement('h3',{className:"accessible_elem"},i._("Conversation information")),c('React').createElement(n,{contact:this.props.contact,isUnread:this.props.isUnread,isUserActive:this.props.isUserActive,isBlocked:aa,lastActive:this.props.lastActive,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onThreadNameChange:this.props.onThreadNameChange,onThreadPhotoChange:this.props.onThreadPhotoChange,onUnmute:this.props.onUnmute,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showBlock:this.props.showBlock,participants:this.props.participants,platform:this.props.platform,showLeaveGroup:this.props.showLeaveGroup,showReport:this.props.showReport,thread:this.props.thread,viewer:this.props.viewer}),this.$MessengerThreadInfoPanel6(),c('React').createElement(p,{isCollapsed:this.props.threadOptionsSectionCollapsed,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,onToggle:this.props.onThreadOptionsSectionToggle}),c('MessengerAdminGroupUtils').canSeeGroupOptions(x,v,u)?this.$MessengerThreadInfoPanel7():null,this.props.thread.is_canonical?this.$MessengerThreadInfoPanel8():this.$MessengerThreadInfoPanel9(),y,z);};s.prototype.$MessengerThreadInfoPanel6=function(){if(!this.props.thread.associated_object)return null;return c('React').createElement(c('MessengerInfoPanelAssociatedObjectSection.react'),{isCollapsed:this.props.associatedObjectSectionCollapsed,onToggle:this.props.onAssociatedObjectSectionToggle,customColor:this.props.thread.custom_color,associatedObject:this.props.thread.associated_object});};s.prototype.$MessengerThreadInfoPanel7=function(){return c('React').createElement(c('MessengerInfoPanelGroupSection.react'),{isOptionsCollapsed:this.props.groupOptionsSectionCollapsed,onOptionsToggle:this.props.onGroupOptionsSectionToggle,isApprovalsCollapsed:this.props.groupOptionsApprovalsSectionCollapsed,onApprovalToggle:this.props.onGroupApprovalOptionsSectionToggle,onToggle:this.props.onThreadOptionsSectionToggle,participants:this.props.participants,viewer:this.props.viewer,thread:this.props.thread});};s.prototype.$MessengerThreadInfoPanel4=function(t){var u=this.props,v=u.getIsScrolledToBottom,w=u.getScrollableHeight,x=u.onPhotosSectionToggle,y=u.photosSectionCollapsed,z=u.thread,aa=new (c('MessengerSharedPhotosContainerRoute'))({threadFBID:z.thread_fbid});return c('React').createElement(c('RelayRootContainer'),{Component:c('MessengerSharedPhotosContainer.react'),renderLoading:function ba(){return null;},route:aa,forceFetch:t,renderFetched:function(ba){return c('React').createElement(c('MessengerSharedPhotosContainer.react'),babelHelpers['extends']({},ba,{customColor:this.props.thread.custom_color,clearForceFetch:this.$MessengerThreadInfoPanel10,getIsScrolledToBottom:v,getScrollableHeight:w,isCollapsed:y,onToggle:x,threadFBID:z.thread_fbid}));}.bind(this)});};s.prototype.$MessengerThreadInfoPanel5=function(t){var u=this.props,v=u.filesSectionCollapsed,w=u.thread,x=new (c('MessengerSharedFilesContainerRoute'))({threadFBID:w.thread_fbid});return c('React').createElement(c('RelayRootContainer'),{Component:c('MessengerSharedFilesContainer.react'),renderLoading:function y(){return null;},route:x,forceFetch:t,renderFetched:function(y){return c('React').createElement(c('MessengerSharedFilesContainer.react'),babelHelpers['extends']({},y,{isCollapsed:v,onToggle:this.props.onFilesSectionToggle}));}.bind(this)});};s.prototype.$MessengerThreadInfoPanel9=function(){return c('React').createElement(c('MessengerInfoPanelPeopleSection.react'),{canViewerReply:c('MercuryThreadInfo').canReply(this.props.thread),contactAdapter:c('MessengerContactAdapters').fromMercuryParticipant,isCollapsed:this.props.peopleSectionCollapsed,isViewerSubscribed:this.props.thread.is_subscribed,onAddPeopleClick:this.$MessengerThreadInfoPanel11,onContactAction:this.$MessengerThreadInfoPanel12,onContactSelect:this.$MessengerThreadInfoPanel13,onToggle:this.props.onPeopleSectionToggle,participants:this.props.participants,viewer:this.props.viewer,adminIds:this.props.thread.admin_ids,thread:this.props.thread});};s.prototype.$MessengerThreadInfoPanel8=function(){var t=this.props.contact;if(!t||!t.href||t.fbid.toString()===c('MessengerConfig').MoneyPennyFBID)return null;var u=t.href,v=c('CurrentUser').isWorkUser()?'Workplace':'Facebook',w=t.type==='page'?i._("{productName} Page",[i.param('productName',v)]):i._("{productName} profile",[i.param('productName',v)]);return c('React').createElement(o,{customColor:this.props.thread.custom_color,title:w},c('React').createElement('div',{className:"_4v0l"},c('React').createElement(c('Link.react'),{className:"_3oh-",style:{color:this.props.thread.custom_color},href:u,target:'_blank'},u.replace('www.',''))));};s.propTypes={contact:r.instanceOf(c('ImmutableObject')),getIsScrolledToBottom:r.func.isRequired,getScrollableHeight:r.func.isRequired,isUserActive:r.bool.isRequired,isBusinessEnabled:r.bool,lastActive:r.string,onArchive:r.func.isRequired,onContactAction:r.func.isRequired,onContactSelect:r.func.isRequired,onDelete:r.func.isRequired,onLeaveGroup:r.func,onMarkRead:r.func.isRequired,onMarkSpam:r.func.isRequired,onMarkUnread:r.func.isRequired,onMute:r.func.isRequired,onAssociatedObjectSectionToggle:r.func.isRequired,onPeopleSectionToggle:r.func.isRequired,onPhotosSectionToggle:r.func.isRequired,onFilesSectionToggle:r.func.isRequired,onThreadOptionsSectionToggle:r.func.isRequired,onGroupOptionsSectionToggle:r.func.isRequired,onGroupApprovalOptionsSectionToggle:r.func.isRequired,onThreadNameChange:r.func.isRequired,onThreadPhotoChange:r.func.isRequired,onUnmute:r.func.isRequired,onBlock:r.func.isRequired,onUnblock:r.func.isRequired,showBlock:r.bool.isRequired,participants:r.instanceOf(c('immutable').Map).isRequired,associatedObjectSectionCollapsed:r.bool.isRequired,peopleSectionCollapsed:r.bool.isRequired,photosSectionCollapsed:r.bool.isRequired,filesSectionCollapsed:r.bool.isRequired,platform:r.string,prevIsScrolledToBottom:r.bool.isRequired,prevScrollableHeight:r.number.isRequired,showLeaveGroup:r.bool.isRequired,thread:r.instanceOf(c('ImmutableObject')).isRequired,threadOptionsSectionCollapsed:r.bool.isRequired,groupOptionsSectionCollapsed:r.bool.isRequired,groupOptionsApprovalsSectionCollapsed:r.bool.isRequired,viewer:r.string.isRequired};f.exports=s;}),null);
__d('MessengerThreadInfoPanelScrollableArea.react',['MessengerFlexArea.react','MessengerScrollableArea.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={prevHeight:-1,prevIsScrolledToBottom:false},this.$MessengerThreadInfoPanelScrollableArea1=null,this.isScrolledToBottom=function(){return this.refs.scrollable.isScrolledToBottom();}.bind(this),this.getHeight=function(){return c('ReactDOM').findDOMNode(this.refs.scrollable).offsetHeight;}.bind(this),this.$MessengerThreadInfoPanelScrollableArea2=function(){var q=this.isScrolledToBottom(),r=this.getHeight();if(this.state.prevIsScrolledToBottom!==q||this.state.prevHeight!==r)this.setState({prevHeight:r,prevIsScrolledToBottom:q});}.bind(this),m;}k.prototype.render=function(){return c('React').createElement(c('MessengerFlexArea.react'),{className:this.props.className,onResize:this.$MessengerThreadInfoPanelScrollableArea2},c('React').createElement(c('MessengerScrollableArea.react'),{height:'100%',onScroll:this.$MessengerThreadInfoPanelScrollableArea2,ref:'scrollable'},this.props.children(this.state.prevHeight,this.state.prevIsScrolledToBottom,this.isScrolledToBottom,this.getHeight)));};k.propTypes={children:j.func.isRequired};f.exports=k;}),null);
__d('MessengerThreadInfoPanelContainer.react',['AsyncRequest','immutable','ImmutableObject','MercuryAPIArgsSource','MercuryIDs','MercuryLogMessageType','MercuryMessageActions','MercuryMessageObject','MercuryThreadActions','MercuryThreadInfo','MercuryTriodeSourceUtil','MessengerActions','messengerDialogsRe','messengerConfirmLeaveGroupDialogReact','messengerContactActionsRe','MessengerAdminGroupUtils','MessengerLeaveGroupAction','MessengerThreadInfoPanelScrollableArea.react','MessengerSettingsActions','MessengerSettingsStore','MessengerThreadInfoPanel.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','URI','XMessagingSetThreadStateController','MercuryConfig','getPageIDFromThreadID'],(function a(b,c,d,e,f,g){'use strict';var h=c('messengerConfirmLeaveGroupDialogReact').comp,i=c('messengerContactActionsRe').actions,j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerThreadInfoPanelContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MessengerSettingsStore'))],propTypes:{contactData:j.object,participants:j.instanceOf(c('immutable').Map).isRequired,thread:j.instanceOf(c('ImmutableObject')).isRequired,viewer:j.string.isRequired},statics:{calculateState:function l(){var m=c('MessengerSettingsStore').getSettings(),n=m.associated_object_section_collapsed,o=m.people_section_collapsed,p=m.photos_section_collapsed,q=m.files_section_collapsed,r=m.thread_section_collapsed,s=m.group_section_collapsed,t=m.group_approval_section_collapsed;return {associated_object_section_collapsed:n,people_section_collapsed:o,photos_section_collapsed:p,files_section_collapsed:q,thread_section_collapsed:r,group_section_collapsed:s,group_approval_section_collapsed:t};}},render:function l(){var m=this.props.contactData||{},n=this.state,o=n.associated_object_section_collapsed,p=n.people_section_collapsed,q=n.photos_section_collapsed,r=n.files_section_collapsed,s=n.thread_section_collapsed,t=n.group_section_collapsed,u=n.group_approval_section_collapsed;return c('React').createElement(c('MessengerThreadInfoPanelScrollableArea.react'),{className:this.props.className},function(v,w,x,y){return c('React').createElement(c('MessengerThreadInfoPanel.react'),{contact:m.contact,getIsScrolledToBottom:x,getScrollableHeight:y,isUserActive:m.isUserActive||false,lastActive:m.lastActive,onArchive:this._handleArchive,onContactAction:this._handleContactAction,onContactSelect:this._handleContactSelect,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onMuteChange:this._handleMuteChange,onAssociatedObjectSectionToggle:this._handleAssociatedObjectSectionToggle,onPeopleSectionToggle:this._handlePeopleSectionToggle,onPhotosSectionToggle:this._handlePhotosSectionToggle,onFilesSectionToggle:this._handleFilesSectionToggle,onThreadOptionsSectionToggle:this._handleThreadSectionToggle,onGroupOptionsSectionToggle:this._handleGroupOptionsSectionToggle,onGroupApprovalOptionsSectionToggle:this._handleGroupOptionsApprovalSectionToggle,onThreadNameChange:this._handleThreadNameChange,onThreadPhotoChange:this._handleThreadPhotoChange,onUnmute:this._handleUnmute,onBlock:this._handleBlock,onUnblock:this._handleUnblock,showBlock:this.props.thread.is_canonical_user&&this.props.thread.other_user_fbid&&this.props.viewer!==this.props.thread.other_user_fbid,participants:this.props.participants,associatedObjectSectionCollapsed:o,peopleSectionCollapsed:p,photosSectionCollapsed:q,filesSectionCollapsed:r,platform:m.platform,prevIsScrolledToBottom:w,prevScrollableHeight:v,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical,showReport:this._isPageChat()&&c('MercuryConfig').MessengerPlatformReportPage,thread:this.props.thread,threadOptionsSectionCollapsed:s,groupOptionsSectionCollapsed:t,groupOptionsApprovalsSectionCollapsed:u,viewer:this.props.viewer});}.bind(this));},_handleArchive:function l(){this._getThreadActions().archive(this.props.thread.thread_id);c('MessengerActions').selectThread(null);},_handleDelete:function l(){this._getThreadActions()['delete'](this.props.thread.thread_id);c('MessengerActions').selectThread(null);},_handleMarkRead:function l(){this._getThreadActions().markRead(this.props.thread.thread_id);},_handleMarkSpam:function l(){this._getThreadActions().markSpam(this.props.thread.thread_id);c('MessengerActions').selectThread(null);},_handleMarkUnread:function l(){this._getThreadActions().markUnread(this.props.thread.thread_id);},_handleMute:function l(m){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,m);},_handleUnmute:function l(){this._getThreadActions().unmute(this.props.thread.thread_id);},_handleBlock:function l(){this._getThreadActions().blockOnMessengerDotCom(this.props.thread.thread_id);},_handleUnblock:function l(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id);},_handleMuteChange:function l(m){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,m);},_handleContactSelect:function l(m,event){var n=c('MercuryIDs').getThreadIDFromParticipantID(m.uid);n&&c('MessengerActions').selectThread(n);},_handleContactAction:function l(m,n){if(c('MercuryIDs').getUserIDFromParticipantID(n.uid)!==this.props.viewer)switch(m){case i.MESSAGE:this._handleContactSelect(n);break;case i.PROFILE:var o=this.props.participants.get(n.uid);if(o&&o.href){window.open(o.href);}else this._handleContactSelect(n);break;case i.REMOVE:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread)){var p=new (c('URI'))('/chat/remove_participants/');p.addQueryData({uid:c('MercuryIDs').getUserIDFromParticipantID(n.uid),tid:this.props.thread.thread_fbid});var q=new (c('AsyncRequest'))(p);q.send();}break;}switch(m){case i.REMOVE_OWNER:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c('MercuryIDs').getUserIDFromParticipantID(n.uid)],false);break;case i.ADD_OWNER:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c('MercuryIDs').getUserIDFromParticipantID(n.uid)],true);break;}},_handleLeaveGroup:function l(){var m,n=this;if(this.props.viewer)(function(){var o=c('MessengerAdminGroupUtils').isViewerAdmin(n.props.thread.admin_ids,n.props.viewer);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(h,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:o,thread:this.props.thread});}.bind(n));})();},_onLeaveGroupConfirm:function l(){c('MessengerLeaveGroupAction').leaveGroup(this.props.thread,this.props.viewer);},_handleThreadNameChange:function l(m){var n=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread);if(!n){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),this.props.thread.thread_id,c('MercuryLogMessageType').THREAD_NAME,{name:m}),null,c('MercuryAPIArgsSource').MESSENGER);}else{var o=c('XMessagingSetThreadStateController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(o).setData({thread_id:this.props.thread.thread_fbid,thread_name:m}).send();}},_handleThreadPhotoChange:function l(m,n){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),m,c('MercuryLogMessageType').THREAD_IMAGE,{image:n.metadata[0]}));},_handleAssociatedObjectSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({associated_object_section_collapsed:!this.state.associated_object_section_collapsed});},_handlePeopleSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({people_section_collapsed:!this.state.people_section_collapsed});},_handlePhotosSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed});},_handleFilesSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({files_section_collapsed:!this.state.files_section_collapsed});},_handleThreadSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({thread_section_collapsed:!this.state.thread_section_collapsed});},_handleGroupOptionsSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({group_section_collapsed:!this.state.group_section_collapsed});},_handleGroupOptionsApprovalSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({group_approval_section_collapsed:!this.state.group_approval_section_collapsed});},_getThreadActions:function l(){return c('MercuryThreadActions').getForFBID(this.props.viewer);},_getMessageActions:function l(){return c('MercuryMessageActions').getForFBID(this.props.viewer);},_getMessageObject:function l(){return c('MercuryMessageObject').getForFBID(this.props.viewer);},_isPageChat:function l(){return !!c('getPageIDFromThreadID')(this.props.thread.thread_id);}});f.exports=k;}),null);
__d('MessengerDetailView.react',['cx','fbt','invariant','BootloadOnRender.react','CustomColorHighlighting.react','DataTransfer','immutable','JSResource','LazyComponent.react','MercuryIDs','MercuryConfig','MercuryCanonicalGroupThreadStore','MercuryParticipants','MercuryThreadActions','MercuryThreadInfo','MercuryThreads','MessengerComposerStore','MessengerComposerContainer.react','MessengerConversation.react','MessengerConversationContainer.react','MessengerDetailViewHeaderContainer.react','messengerDomIDsRe','MessengerErrorBoundary.react','MessengerPresenceStatusUtils','MessengerSettingsActions','MessengerSettingsStore','MessengerStateStore','MessengerThreadSearchStore','MessengerThreadInfoPanelContainer.react','MessengerThreadSearchActions','MessengerView','MessengerWebDriverTestIDs','Parent','PresenceStatus','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','AvailableList','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('messengerDomIDsRe').ids;c('AvailableList');var l=c('React').PropTypes,m=c('React').createClass({displayName:'MessengerDetailView',_composer:undefined,mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MessengerComposerStore'),c('MessengerStateStore'),c('MessengerThreadSearchStore'),c('MercuryCanonicalGroupThreadStore'),c('MercuryThreads'),c('MercuryParticipants'),c('PresenceStatus'))],propTypes:{activeThreadID:l.string,view:l.string,viewer:l.string.isRequired},statics:{calculateState:function n(o){var p=o.activeThreadID,q=c('MercuryThreads').getForFBID(o.viewer),r=c('MessengerComposerStore').getState();if(o.view===c('MessengerView').DETAIL.COMPOSE){!!r.recipients||j(0);var s=r.recipients;if(s.size===1){p=c('MercuryIDs').getThreadIDFromUserID(s.first().getUniqueID().toString());}else if(s.size>1)p=c('MercuryCanonicalGroupThreadStore').getOrFetch(Array.from(s).map(function(v){return v.getUniqueID().toString();}));}var t=p?q.getOrFetch(p):null,u=c('immutable').Map();if(t)u=u.withMutations(function(v){t.participants&&t.participants.forEach(function(w){v.set(w,c('MercuryParticipants').getOrFetch(w));});t.is_subscribed&&v.set(c('MercuryIDs').getParticipantIDFromUserID(o.viewer),c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(o.viewer)));});return {infoPanelCollapsed:c('MessengerSettingsStore').getSettings().info_sidebar_collapsed,activeThreadID:p,composerState:r,messengerState:c('MessengerStateStore').getState(),contactData:c('MessengerPresenceStatusUtils').getStatusFromCanonicalThread(u,t),activeThread:t,participants:u,searchResults:c('MessengerThreadSearchStore').getState()};}},_refsConversationContainer:null,getInitialState:function n(){return {dropTargetOverlayVisible:false};},render:function n(){var o=this.state.activeThreadID,p=this._getMainLabelDetails();return c('React').createElement('div',{'aria-labelledby':p.labelIDs,className:"_1q5-",role:'main'},c('React').createElement('div',{className:"hidden_elem",id:k.MAIN_LABEL},p.labelText),c('React').createElement(c('CustomColorHighlighting.react'),{className:"_wsc",customColor:this.state.activeThread&&this.state.activeThread.custom_color},c('React').createElement(c('MessengerDetailViewHeaderContainer.react'),{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelCollapsed:this.state.infoPanelCollapsed}),c('React').createElement('div',{className:"_20bp"},this._renderInfoPanel(),c('React').createElement('div',{className:"_4_j4",onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop,role:'presentation'},this._renderMainView(o),this._renderSearchView(o),this._renderFooterView(o),c('React').createElement('div',{className:(!this.state.dropTargetOverlayVisible?"hidden_elem":'')+(' '+"_2fg6")})))));},_renderSearchView:function n(o){return o&&!this.props.mid&&this.props.query!=null?c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MessengerThreadSearchContainer.react').__setRef('MessengerDetailView.react'),placeholder:c('React').createElement('div',{className:"_33p7 _5iwm"}),component:c('React').createElement(c('LazyComponent.react'),{loading:this.state.searchResults.loading,query:this.state.searchResults.query,selectedIndex:this.state.searchResults.selectedIndex,totalCount:this.state.searchResults.totalCount})}):null;},_assignConversationContainerRef:function n(o){this._refsConversationContainer=o;},_renderMainView:function n(o){if(!o)return c('React').createElement('div',{className:"_1ut7"});var p=this.state.contactData?this.state.contactData.contact:null;if(this.state.searchResults.messages)return c('React').createElement(c('MessengerErrorBoundary.react'),{component:'conversation'},c('React').createElement(c('MessengerConversation.react'),{className:"_1wfr",contact:p,downExhausted:this.state.searchResults.downExhausted,fetchMessages:c('MessengerThreadSearchActions').getMoreSearchContext,innerClassName:"_1r_-",isCanonical:c('MercuryIDs').isCanonical(o),isLoaded:true,isLoading:false,messages:this.state.searchResults.messages,onRead:c('emptyFunction'),participants:this.state.participants,thread:this.state.activeThread,threadID:o,upExhausted:this.state.searchResults.upExhausted,useManualFetch:true,viewer:this.props.viewer}));return c('React').createElement(c('MessengerErrorBoundary.react'),{component:'conversation'},c('React').createElement(c('MessengerConversationContainer.react'),{className:"_1wfr",contact:p,onMarkRead:this._handleMarkRead,participants:this.state.participants,ref:this._assignConversationContainerRef,thread:this.state.activeThread,threadID:o,viewer:this.props.viewer}));},_renderFooterView:function n(o){var p=c('MercuryConfig').ColdOpenBlock&&this.state.activeThread&&c('MercuryThreadInfo').isColdOpen(this.state.activeThread);return c('React').createElement(c('MessengerErrorBoundary.react'),{className:"_4rv3 _2pen",component:'composer'},c('React').createElement(c('MessengerComposerContainer.react'),{canReply:!!(!p&&(this.props.view===c('MessengerView').DETAIL.COMPOSE||this.state.activeThread&&c('MercuryThreadInfo').canReply(this.state.activeThread)&&!c('MercuryConfig').ViewerIsReadOnly)),onMount:function(q){return this._composer=q;}.bind(this),onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,threadID:o,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer}));},_renderInfoPanel:function n(){var o=this.state,p=o.activeThread,q=o.contactData,r=o.infoPanelCollapsed,s=o.participants,t=this.props.view;if(!p||!s||t===c('MessengerView').DETAIL.COMPOSE)return null;return c('React').createElement('div',{className:(r?"hidden_elem":'')+(' '+"_4_j5"),'data-testid':c('MessengerWebDriverTestIDs').INFO_PANEL},c('React').createElement(c('MessengerErrorBoundary.react'),{className:"_4rv3",component:'conversation information'},c('React').createElement(c('MessengerThreadInfoPanelContainer.react'),{className:"_4_j9",contactData:q,participants:s,thread:p,viewer:this.props.viewer})));},_getMainLabelDetails:function n(){if(this.props.view===c('MessengerView').DETAIL.COMPOSE)return {labelText:i._("New message"),labelIDs:k.MAIN_LABEL};return {labelText:i._("Conversation with"),labelIDs:k.MAIN_LABEL+' '+k.THREAD_TITLE};},_handleConversationClick:function n(o){var p=this.props.activeThreadID;if(p&&this._refsConversationContainer&&this._refsConversationContainer.isScrolledToBottom())this._handleMarkRead(p);if(window.getSelection().toString()!=='')return;if(c('Parent').byTag(o.target,'a')!=null)return;var q=this._getComposer();q&&q.focusInput();},_showDropTargetOverlay:function n(o){o&&o.preventDefault();this.setState({dropTargetOverlayVisible:true});},_hideDropTargetOverlay:function n(o){o&&o.preventDefault();this.setState({dropTargetOverlayVisible:false});var p=this._getComposer();p&&p.resetDrag();},_handleDrop:function n(o){this._hideDropTargetOverlay(o);var p=this._getComposer();if(!p)return;o.nativeEvent.dataTransfer instanceof Object||j(0);var q=new (c('DataTransfer'))(o.nativeEvent.dataTransfer),r=q.getFiles();if(r.length){p.handleFileUpload(r);}else{var s=q.getText();if(s)p.handleTextDropped(s);}},_handleResize:function n(){var o=this._refsConversationContainer;if(o)o.handleResize();},_handleInfoPanelToggle:function n(){var o=!this.state.infoPanelCollapsed;this.setState({infoPanelCollapsed:o},function(){c('MessengerSettingsActions').changeSettings({info_sidebar_collapsed:o});});},_handleMarkRead:function n(o){c('MercuryThreadActions').getForFBID(this.props.viewer).markRead(o);},_getComposer:function n(){return this._composer;}});f.exports=m;}),null);
__d("XMessengerDotComSpoofIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/spoof\/fb_iframe_target\/",{gk_spoof:{type:"String"}});}),null);
__d("XSpoofMessengerDotComIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/spoof\/messenger_dot_com_iframe\/",{redirect_uri:{type:"String",required:true}});}),null);
__d('MessengerSpoof',['Arbiter','DOM','JSXDOM','URI','XSpoofMessengerDotComIFrameController','XMessengerDotComSpoofIFrameController'],(function a(b,c,d,e,f,g){'use strict';var h=6000;function i(k){var l=c('JSXDOM').iframe({src:j().toString(),width:0,height:0});c('DOM').appendContent(document.body,l);c('Arbiter').subscribeOnce('messengerdotcom_spoof',function(){c('DOM').remove(l);k();});setTimeout(function(){c('Arbiter').inform('messengerdotcom_spoof');},h);}function j(){var k=new (c('URI'))(document.URL),l=c('XMessengerDotComSpoofIFrameController').getURIBuilder().getURI().getQualifiedURI().toString(),m=c('XSpoofMessengerDotComIFrameController').getURIBuilder().setString('redirect_uri',l).getURI();return m.setDomain(k.getDomain().replace('messenger.com','facebook.com')).setPort(k.getPort()).setProtocol('https');}f.exports={init:i};}),null);
__d('ServiceWorkerLoginAndLogout',['ClientServiceWorkerMessage'],(function a(b,c,d,e,f,g){function h(j){new (c('ClientServiceWorkerMessage'))(j,null).sendViaController();}var i={login:function j(){h('login');},logout:function j(){h('logout');}};f.exports=i;}),null);
__d("XMessengerDotComLogoutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/logout\/",{next:{type:"String"}});}),null);
__d('MessengerMasterViewHeader.react',['cx','fbt','Link.react','MessagingTag','MessengerActions','MessengerDirect','messengerSettingsMenuReact','MessengerURIConstants','MessengerView','React','WorkGKs'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MessengerDirect').module,m=c('messengerSettingsMenuReact').comp,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$MessengerMasterViewHeader7=function(u){u.preventDefault();if(this.props.view!==c('MessengerView').MASTER.RECENT)c('MessengerActions').changeMasterView(c('MessengerView').MASTER.RECENT);c('MessengerActions').changeFolder(c('MessagingTag').INBOX);}.bind(this),q;}o.prototype.$MessengerMasterViewHeader1=function(){var p=i._("New Message");return c('React').createElement(c('Link.react'),{'aria-label':p,className:"_30yy _2oc8",href:c('MessengerURIConstants').COMPOSE_SUBPATH,onClick:this.$MessengerMasterViewHeader2,role:'button',title:p});};o.prototype.$MessengerMasterViewHeader3=function(){return l?c('React').createElement(l,{viewer:this.props.viewer}):null;};o.prototype.$MessengerMasterViewHeader4=function(){return c('React').createElement('div',{className:"_4kzu"},c('React').createElement(m,{filter:this.props.filter,folder:this.props.folder,view:this.props.view,viewer:this.props.viewer}));};o.prototype.render=function(){var p=this.props.folder!==c('MessagingTag').INBOX||this.props.view!==c('MessengerView').MASTER.RECENT?this.$MessengerMasterViewHeader5():this.$MessengerMasterViewHeader4();return c('React').createElement('div',{className:"_36ic _5l-3",role:'banner'},p,this.$MessengerMasterViewHeader3(),c('React').createElement('div',{className:"_1tqi"},this.$MessengerMasterViewHeader6()),this.$MessengerMasterViewHeader1());};o.prototype.$MessengerMasterViewHeader6=function(){if(this.props.folder===c('MessagingTag').PENDING){return i._("Message requests");}else if(this.props.folder===c('MessagingTag').OTHER){return i._("Filtered requests");}else if(this.props.view===c('MessengerView').MASTER.PEOPLE){return i._("Active now");}else if(c('WorkGKs').workplace_www_chat_branding){return i._("Work Chat");}else return i._("Messenger");};o.prototype.$MessengerMasterViewHeader5=function(){var p=this.props.folder===c('MessagingTag').PENDING||this.props.folder===c('MessagingTag').ACTION_ARCHIVED||this.props.view!==c('MessengerView').MASTER.RECENT,q=p?this.$MessengerMasterViewHeader7:this.$MessengerMasterViewHeader8,r=p?i._("Back to Recent Messages"):i._("Back to Message Requests");return c('React').createElement(c('Link.react'),{'aria-label':r,className:"_30yy _2oc9",onClick:q,role:'button',title:r});};o.prototype.$MessengerMasterViewHeader2=function(p){p.preventDefault();c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);};o.prototype.$MessengerMasterViewHeader8=function(p){p.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').PENDING);};o.propTypes={filter:n.string.isRequired,folder:n.string.isRequired,view:n.string.isRequired,viewer:n.string.isRequired};f.exports=o;}),null);
__d('P2PBannerStore',['invariant','EventEmitter','P2PActionConstants','P2PAPI','P2PDispatcher'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=void 0,l={},m=false,n=false;i=babelHelpers.inherits(o,c('EventEmitter'));j=i&&i.prototype;function o(){j.constructor.call(this);k=c('P2PDispatcher').register(this.onEventDispatched.bind(this));}o.prototype.onEventDispatched=function(p){var q=p.type,r=p.data;switch(q){case c('P2PActionConstants').BANNER_STATES_UPDATED:this.handleBannerStatesUpdated(r);this.emit('change');break;case c('P2PActionConstants').BANNER_DISMISSED:this.handleBannerDismissed(r);this.emit('change');break;case c('P2PActionConstants').BANNER_COMPLETED:this.handleBannerCompleted(r);this.emit('change');break;}};o.prototype.handleBannerStatesUpdated=function(p){m=true;l=p;};o.prototype.handleBannerDismissed=function(p){var q=this.getBannerState(p);q.hasBeenDismissed=true;};o.prototype.shouldShowBanner=function(p){var q=void 0;if(!n){c('P2PAPI').getBannerStates();n=true;return false;}if(!m)return false;q=this.getBannerState(p);return q.eligible&&!q.hasBeenDismissed;};o.prototype.handleBannerCompleted=function(p){var q=this.getBannerState(p);q.eligible=false;};o.prototype.getBannerState=function(p){var q=l[p];q||h(0);return q;};f.exports=new o();}),null);
__d('P2PJewelBanner.react',['cx','fbt','ix','Image.react','Layout.react','P2PButton.react','React','TooltipLink.react','URI','XUIGrayText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').FillColumn,n=c('Layout.react').Column,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.handleCloseClick=function(v){v.stopPropagation();if(this.props.onClose)this.props.onClose();}.bind(this),this.handleClick=function(){this.execPrimaryClick();}.bind(this),this.handlePrimaryClick=function(v){v.stopPropagation();this.execPrimaryClick();}.bind(this),this.execPrimaryClick=function(){if(this.props.primaryActionConfig.uri)new (c('URI'))(this.props.primaryActionConfig.uri).go();this.props.primaryActionConfig.onClick&&this.props.primaryActionConfig.onClick();}.bind(this),this.handleSecondaryActionClick=function(v){v.stopPropagation();this.props.secondaryActionConfig&&this.props.secondaryActionConfig.onClick&&this.props.secondaryActionConfig.onClick();}.bind(this),this.renderCloseButton=function(){return c('React').createElement(c('TooltipLink.react'),{alignH:'center',className:"_47d8",href:'#',onClick:this.handleCloseClick,position:'above',tooltip:i._("Dismiss")},c('React').createElement(c('Image.react'),{className:"_47dg",height:7,src:j("94375"),width:7}));}.bind(this),this.renderActions=function(){var v=this.props.primaryActionConfig,w=void 0,x=this.props.secondaryActionConfig;if(x)w=c('React').createElement(c('P2PButton.react'),{className:"_5d0t",href:'#',label:x.text,onClick:this.handleSecondaryActionClick,size:'large',target:'_blank',type:'primary'});return c('React').createElement('div',null,w,c('React').createElement(c('P2PButton.react'),{className:"_5d0t",href:v.uri||'#',label:v.text,onClick:this.handlePrimaryClick,size:'large',target:'_blank',type:'primary',use:'confirm'}));}.bind(this),r;}p.prototype.render=function(){var q=void 0;if(this.props.isDismissable)q=this.renderCloseButton();return c('React').createElement('div',{className:"_5d0n",onClick:this.handleClick,role:'presentation'},q,c('React').createElement(c('Layout.react'),null,c('React').createElement(n,{className:"_400i"},c('React').createElement('div',{className:"_400j"},c('React').createElement(c('Image.react'),{className:"_5d0q",height:50,src:j("94376"),width:50}))),c('React').createElement(m,{className:"_47di"},c('React').createElement('div',{className:"_400j"},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',weight:'bold'},this.props.titleText),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light'},this.props.bodyText))),c('React').createElement(n,{className:"_400k"},c('React').createElement('div',{className:"_400j"},this.renderActions()))));};p.propTypes={bodyText:o.node,isDismissable:o.bool,onClose:o.func,primaryActionConfig:o.shape({onClick:o.func,text:o.node.isRequired,uri:o.oneOfType([o.string,o.object])}).isRequired,secondaryActionConfig:o.shape({onClick:o.func.isRequired,text:o.node.isRequired}),titleText:o.node.isRequired};p.defaultProps={isDismissable:false};f.exports=p;}),null);
__d('P2PPendingPaymentRequestJewelBanner.react',['fbt','P2PJewelBanner.react','P2PPaymentRequest','P2PPaymentRequestActionHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleDeclineClick=function(){c('P2PPaymentRequestActionHelper').initDeclinePaymentRequestFlow(this.props.paymentRequest);}.bind(this),this.handlePayClick=function(){c('P2PPaymentRequestActionHelper').initPayForPaymentRequestFlow(this.props.paymentRequest,'banner');}.bind(this),this.renderBodyText=function(){var r=this.props.paymentRequest,s=r.memoText;if(!s)return null;return h._("For {What the user paid for}",[h.param('What the user paid for',s)]);}.bind(this),n;}l.prototype.render=function(){var m=this.props.paymentRequest;return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.renderBodyText(),primaryActionConfig:{onClick:this.handlePayClick,text:h._("Pay")},secondaryActionConfig:{onClick:this.handleDeclineClick,text:h._("Decline")},titleText:h._("{requester_name} requested {amount}",[h.param('requester_name',m.requester.name),h.param('amount',m.amountWithSymbol)])});};l.propTypes={paymentRequest:k.instanceOf(c('P2PPaymentRequest')).isRequired};f.exports=l;}),null);
__d('P2PPendingPushFailJewelBanner.react',['fbt','P2PJewelBanner.react','P2PLinkConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.getActionText=function(){return h._("Learn More");},this.getBodyText=function(){var r=this.props.transfer;return h._("{currency}{amount} from {sender_name} couldn't be deposited using your debit card.",[h.param('currency',r.currency),h.param('amount',r.amount),h.param('sender_name',r.sender.name)]);}.bind(this),n;}l.prototype.render=function(){return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.getBodyText(),primaryActionConfig:{text:this.getActionText(),uri:c('P2PLinkConstants').helpTransferPushFailURI},titleText:h._("Update Your Card")});};l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PTimeBasedAcceptMessage.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.transfer,n=m.creationTime*1000,o=1000*60*60*24,p=Date.now(),q=(p-n)/o,r=m.expirationTimestamp*1000-p,s=Math.round(Math.max(r/o,1)),t=void 0;if(q<=2){t=h._("Add a debit card and it'll go straight to your bank.");}else if(q<=4){t=h._("This money will be sent back in {days left} days. Add a debit card to accept it.",[h.param('days left',s)]);}else if(q<=5){t=h._({"day":"You have {days left} day to add a debit card before the money is sent back to {sender_name}.","days":"You have {days left} days to add a debit card before the money is sent back to {sender_name}."},[h.param('days left',s),h['enum'](s===1?'day':'days',{day:'day',days:'days'}),h.param('sender_name',m.sender.name)]);}else t=h._("You have 24 hours to add a debit card before the money is sent back to {sender_name}.",[h.param('sender_name',m.sender.name)]);return c('React').createElement('div',null,t);};function l(){i.apply(this,arguments);}l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PPendingRecipientNUXJewelBanner.react',['fbt','P2PAcceptMoneyDialog.react','P2PActions','P2PCreditCardStore','P2PJewelBanner.react','P2PTimeBasedAcceptMessage.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'P2PPendingRecipientNUXJewelBanner',propTypes:{transfer:i.object.isRequired},getInitialState:function k(){return {creditCards:c('P2PCreditCardStore').getAll()};},creditCardStoreSub:null,componentDidMount:function k(){this.creditCardStoreSub=c('P2PCreditCardStore').addListener('change',this.onCreditCardStoreChange);},componentWillUnmount:function k(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},onCreditCardStoreChange:function k(){var l={creditCards:c('P2PCreditCardStore').getAll()};if(this.isMounted())this.setState(l);},handleClick:function k(){this.showAcceptMoneyDialog();},showAcceptMoneyDialog:function k(){c('P2PActions').showDialog(c('P2PAcceptMoneyDialog.react'),{creditCards:this.state.creditCards,onClose:c('P2PActions').hideDialog,transfer:this.props.transfer});},renderTimeBasedMessage:function k(){return c('React').createElement(c('P2PTimeBasedAcceptMessage.react'),{transfer:this.props.transfer});},render:function k(){var l=this.props.transfer;if(!c('P2PCreditCardStore').isCreditCardsFetchComplete())return null;return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.renderTimeBasedMessage(),primaryActionConfig:{onClick:this.handleClick,text:h._("Add Card")},titleText:h._("Accept {currency}{amount} from {sender_name}.",[h.param('currency',l.currency),h.param('amount',l.amount),h.param('sender_name',l.sender.name)])});}});f.exports=j;}),null);
__d('P2PPendingRecipientVerificationJewelBanner.react',['fbt','P2PJewelBanner.react','P2PTransferParam','P2PVerificationFlowHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleClick=function(){c('P2PVerificationFlowHelper').startVerificationFlow(this.props.transfer[c('P2PTransferParam').TRANSFER_ID],false);}.bind(this),n;}l.prototype.render=function(){return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:h._("To accept the money {sender_name} sent you, please confirm your information.",[h.param('sender_name',this.props.transfer.sender.name)]),primaryActionConfig:{onClick:this.handleClick,text:h._("Confirm Info")},titleText:h._("Please Confirm Your Info")});};l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PJewelBannerContainer.react',['cx','CurrentUser','P2PBannerStore','P2PPaymentRequestsStore','P2PPendingPaymentRequestJewelBanner.react','P2PPendingPushFailJewelBanner.react','P2PPendingRecipientNUXJewelBanner.react','P2PPendingRecipientVerificationJewelBanner.react','P2PTransferParam','P2PTransferStatus','P2PTransferStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').createClass({displayName:'P2PJewelBannerContainer',mixins:[c('PureStoreBasedStateMixin')(c('P2PBannerStore'),c('P2PPaymentRequestsStore'),c('P2PTransferStore'))],statics:{calculateState:function j(){var k=c('P2PTransferStore').getNUXTransfer(),l=c('P2PPaymentRequestsStore').getPendingPaymentRequest();return {paymentRequest:l,paymentRequestBannerShown:!!l,transfer:k,transferBannerShown:k&&k.receiver.id==c('CurrentUser').getID()};}},renderTransferBanner:function j(){var k=this.state.transfer,l=k[c('P2PTransferParam').STATUS];switch(l){case c('P2PTransferStatus').PENDING_RECIPIENT_NUX:return c('React').createElement(c('P2PPendingRecipientNUXJewelBanner.react'),{transfer:k});case c('P2PTransferStatus').PENDING_RECIPIENT_VERIFICATION:return c('React').createElement(c('P2PPendingRecipientVerificationJewelBanner.react'),{transfer:k});case c('P2PTransferStatus').PENDING_PUSH_FAIL:return c('React').createElement(c('P2PPendingPushFailJewelBanner.react'),{transfer:k});}},renderPaymentRequestBanner:function j(){return c('React').createElement(c('P2PPendingPaymentRequestJewelBanner.react'),{paymentRequest:this.state.paymentRequest});},render:function j(){var k=void 0;if(this.state.transferBannerShown){k=this.renderTransferBanner();}else if(this.state.paymentRequestBannerShown)k=this.renderPaymentRequestBanner();return c('React').createElement('div',{className:"_1xfk"},k);}});f.exports=i;}),null);
__d('MercuryThreadlistContainer.react',['Bootloader','immutable','MercuryAPIArgsSource','MercuryFilters','MercuryThreadlistConstants','MessagingTag','P2PJewelBannerContainer.react','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k='search';h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={isLoading:true,isSearching:false,unreadMessageRequestThreads:[],threads:c('immutable').Map()},this.$MercuryThreadlistContainer12=function(){return c('React').createElement(c('P2PJewelBannerContainer.react'),null);},this.$MercuryThreadlistContainer6=function(r,s){if(r===c('MessagingTag').INBOX&&this.props.source!==c('MercuryAPIArgsSource').JEWEL)this.$MercuryThreadlistContainer13();if(!this.$MercuryThreadlistContainer14(r,s)){this.$MercuryThreadlistContainer15(r,s,this.props.threadCount||c('MercuryThreadlistConstants').JEWEL_THREAD_COUNT+3);}else if(this.state.isLoading){this.setState({isLoading:false},function(){this.$MercuryThreadlistContainer5(r,s);}.bind(this));}else this.$MercuryThreadlistContainer5(r,s);}.bind(this),this.$MercuryThreadlistContainer13=function(){this.$MercuryThreadlistContainer1.getFilteredThreadlist(c('MercuryThreadlistConstants').RECENT_THREAD_OFFSET,c('MercuryThreadlistConstants').MAX_UNREAD_COUNT,c('MessagingTag').PENDING,c('MercuryFilters').UNREAD,this.$MercuryThreadlistContainer16,true,this.props.source);}.bind(this),this.$MercuryThreadlistContainer9=function(){if(!this.state.isSearching&&!this.state.isLoading&&!this.$MercuryThreadlistContainer1.hasLoadedThreadlist(this.props.folder,this.props.filter))this.$MercuryThreadlistContainer15(this.props.folder,this.props.filter,this.$MercuryThreadlistContainer17(this.props.folder)+c('MercuryThreadlistConstants').JEWEL_MORE_COUNT+1);}.bind(this),this.$MercuryThreadlistContainer15=function(r,s,t){if(!this.$MercuryThreadlistContainer1)return;this.$MercuryThreadlistContainer8();this.setState({isLoading:true},function(){var u=this.$MercuryThreadlistContainer1.getFilteredThreadlist(c('MercuryThreadlistConstants').RECENT_THREAD_OFFSET,t,r,s||c('MercuryFilters').ALL,function(v){return this.setState({isLoading:false});}.bind(this),true,this.props.source);this.$MercuryThreadlistContainer18={subscriberID:u,folder:r,filter:s};}.bind(this));}.bind(this),this.$MercuryThreadlistContainer5=function(r,s,t){if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;this.$MercuryThreadlistContainer7();var u=t||this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(r,s);this.$MercuryThreadlistContainer19=this.$MercuryThreadlistContainer2.getMultiThreadMeta(u,function(v){this.setState({threads:this.state.threads.set(r,u.map(function(w){return v[w];}))});}.bind(this));}.bind(this),this.$MercuryThreadlistContainer16=function(){if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;var r=this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(c('MessagingTag').PENDING,c('MercuryFilters').UNREAD);this.$MercuryThreadlistContainer2.getMultiThreadMeta(r,function(s){this.setState({unreadMessageRequestThreads:r.map(function(t){return s[t];})});}.bind(this));}.bind(this),this.$MercuryThreadlistContainer14=function(r,s){return !!(this.$MercuryThreadlistContainer1&&(this.$MercuryThreadlistContainer1.getThreadCount(r,s)>=c('MercuryThreadlistConstants').JEWEL_THREAD_COUNT+3||this.$MercuryThreadlistContainer1.hasLoadedThreadlist(r,s)));}.bind(this),this.$MercuryThreadlistContainer17=function(r){var s=this.state.threads.get(r);return s?s.length:0;}.bind(this),this.$MercuryThreadlistContainer7=function(){this.$MercuryThreadlistContainer2&&this.$MercuryThreadlistContainer19&&this.$MercuryThreadlistContainer2.unsubscribe(this.$MercuryThreadlistContainer19);}.bind(this),this.$MercuryThreadlistContainer8=function(){this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer18&&this.$MercuryThreadlistContainer1.unsubscribe(this.$MercuryThreadlistContainer18.subscriberID,this.$MercuryThreadlistContainer18.folder,this.$MercuryThreadlistContainer18.filter);}.bind(this),this.$MercuryThreadlistContainer11=function(r,s){this.setState({isLoading:s,searchThreads:[]},function(){return this.$MercuryThreadlistContainer5(k,c('MercuryFilters').ALL,r);}.bind(this));}.bind(this),this.$MercuryThreadlistContainer10=function(r){this.setState({isSearching:!!r});}.bind(this),n;}l.prototype.componentDidMount=function(){c('Bootloader').loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(m,n,o){this.$MercuryThreadlistContainer1=m.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer2=o.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer3=n.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer4=new (c('SubscriptionsHandler'))();this.$MercuryThreadlistContainer4.addSubscriptions(this.$MercuryThreadlistContainer3.subscribe('threadlist-updated',function(p,q){this.$MercuryThreadlistContainer5(this.props.folder,this.props.filter);}.bind(this)));this.$MercuryThreadlistContainer6(this.props.folder,this.props.filter);}.bind(this),'MercuryThreadlistContainer.react');};l.prototype.componentWillReceiveProps=function(m){if(m.folder!==this.props.folder||m.filter!==this.props.filter)this.$MercuryThreadlistContainer6(m.folder,m.filter);};l.prototype.componentWillUnmount=function(){this.$MercuryThreadlistContainer7();this.$MercuryThreadlistContainer8();this.$MercuryThreadlistContainer4&&this.$MercuryThreadlistContainer4.release();};l.prototype.render=function(){var m=this.props,n=m.ChildClass,o=m.folder,p=m.filter,q=babelHelpers.objectWithoutProperties(m,['ChildClass','folder','filter']),r=this.state.isSearching?this.state.threads.get(k)||[]:this.state.threads.get(o)||[];return c('React').createElement(n,babelHelpers['extends']({},q,{filter:this.props.filter,folder:o,isLoaded:!!this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer1.hasLoadedThreadlist(o,p),isLoading:this.state.isLoading,isSearching:this.state.isSearching,newMessageRequestThreads:this.state.unreadMessageRequestThreads,onLoadMoreRequest:this.$MercuryThreadlistContainer9,onRenderThreads:this.props.onRenderThreads,onQuery:this.$MercuryThreadlistContainer10,onSearchResults:this.$MercuryThreadlistContainer11,p2pJewelBannerContainer:this.$MercuryThreadlistContainer12(),threads:r}));};l.propTypes={ChildClass:j.func.isRequired,filter:j.string.isRequired,folder:j.string.isRequired,showCount:j.bool,showPresence:j.bool,source:j.string,threadCount:j.number,viewer:j.string.isRequired,onRenderThreads:j.func};l.defaultProps={source:c('MercuryAPIArgsSource').JEWEL};f.exports=l;}),null);
__d('ChatSidebarSheetChatOffline.react',['fbt','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement('div',null,h._("{=Go online} to see who's available.",[h.param('=Go online',c('React').createElement(c('Link.react'),{className:'fbChatGoOnlineLink',onClick:this.props.onGoOnlineClick},h._("Turn on chat")))]));};function l(){i.apply(this,arguments);}l.propTypes={onGoOnlineClick:k.func.isRequired};f.exports=l;}),null);
__d('ChatSidebarSheetChatReconnectMsg.react',['fbt','ChannelConstants','Link.react','MessengerSpinner.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.isMessenger,o=m.msecs,p=c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("No Internet connection"));if(o==null||false===navigator.onLine){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Check your Internet connection."));}else if(o>c('ChannelConstants').WARNING_COUNTDOWN_THRESHOLD_MSEC){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. {try-again-link}",[h.param('try-again-link',c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("Try again")))]));}else if(o>1000){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting in {seconds}...",[h.param('seconds',Math.floor(o/1000))]));}else return n?c('React').createElement('div',null,c('React').createElement(c('MessengerSpinner.react'),{color:'grey'}),h._("Connecting...")):c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting..."));};function l(){i.apply(this,arguments);}l.propTypes={isMessenger:k.bool,msecs:k.number,onManuallyConnectClick:k.func};f.exports=l;}),null);
__d('ChatSidebarSheetChatShutdownMsg.react',['fbt','ChannelConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.hint,o=m.isMessenger;switch(n){case c('ChannelConstants').HINT_AUTH:return c('React').createElement('div',null,h._("Your session has timed out. Please log in."));case c('ChannelConstants').HINT_MAINT:return o?c('React').createElement('div',null,h._("Messenger is currently down for maintenance.")):c('React').createElement('div',null,h._("Facebook {Chat} is currently down for maintenance.",[h.param('Chat',h._("Chat"))]));case c('ChannelConstants').HINT_CONN:default:return o?c('React').createElement('div',null,h._("Messenger is currently unavailable.")):c('React').createElement('div',null,h._("Facebook {Chat} is currently unavailable.",[h.param('Chat',h._("Chat"))]));}};function l(){i.apply(this,arguments);}l.propTypes={hint:k.string,isMessenger:k.bool};f.exports=l;}),null);
__d('ChatSidebarSheet.react',['fbt','Arbiter','ChannelConnection','ChatBehavior','ChatSidebarSheetChatOffline.react','ChatSidebarSheetChatReconnectMsg.react','ChatSidebarSheetChatShutdownMsg.react','ChatVisibility','MercuryConfig','MessengerEnvironment','CSS','JSLogger','LogHistory','MercurySyncConstants','PresencePrivacy','React','SubscriptionsHandler','emptyFunction','joinClasses','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('JSLogger').create('sidebar_sheet'),l=c('LogHistory').getInstance('sidebar_sheet'),m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.$ChatSidebarSheet3=function(p,q){this.setState({channelStatus:p,channelData:q});this.$ChatSidebarSheet4();}.bind(this);this.$ChatSidebarSheet4=function(){this.setState({isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages()});}.bind(this);this.state={channelStatus:null,channelData:null,isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages(),syncStateInvalid:false,syncStateReconnecting:false};}n.prototype.componentDidMount=function(){this.$ChatSidebarSheet1=new (c('SubscriptionsHandler'))();this.$ChatSidebarSheet1.addSubscriptions(c('ChannelConnection').subscribe([c('ChannelConnection').CONNECTED,c('ChannelConnection').SHUTDOWN,c('ChannelConnection').RECONNECTING],this.$ChatSidebarSheet3),c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],this.$ChatSidebarSheet4),c('PresencePrivacy').subscribe('privacy-user-presence-changed',this.$ChatSidebarSheet4),c('ChatBehavior').subscribe(c('ChatBehavior').ON_CHANGED,this.$ChatSidebarSheet4),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE,function(){l.log('invalid state fatal','{}');this.setState({syncStateInvalid:true,syncStateReconnecting:false});}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RETRY,function(){l.log('retry from invalid state','{}');this.$ChatSidebarSheet5();}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RECOVER,function(){l.log('recover from invalid state','{}');this.$ChatSidebarSheet6();}.bind(this)));if(c('MercuryConfig').MR4E)this.$ChatSidebarSheet1.addSubscriptions(c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_SERVER_REQUESTS_FAIL,function(){l.log('retry from faield net requests','{}');this.$ChatSidebarSheet5();}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_SERVER_REQUESTS_RECOVER,function(){l.log('recover from failed network requests','{}');this.$ChatSidebarSheet6();}.bind(this)));};n.prototype.componentWillUpdate=function(){if(this.$ChatSidebarSheet2){clearTimeout(this.$ChatSidebarSheet2);this.$ChatSidebarSheet2=null;}};n.prototype.componentWillUnmount=function(){this.$ChatSidebarSheet1&&this.$ChatSidebarSheet1.release();};n.prototype.render=function(){var o=c('MessengerEnvironment').messengerui,p=void 0,q=void 0;if(!this.state.isOnline&&!o){p='offline';q=this.$ChatSidebarSheet7();}else if(!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting){p='error';q=this.$ChatSidebarSheet8(o);}else if(!this.state.notifiesUserMessages&&!o){p='notice';q=this.$ChatSidebarSheet9();}if(this.state.channelStatus===c('ChannelConnection').RECONNECTING&&this.state.channelData<1000||this.state.syncStateReconnecting)p=c('joinClasses')(p,'reconnecting');return c('React').createElement('div',{className:c('joinClasses')(this.props.className,p)},o?null:c('React').createElement('div',{className:'img'}),c('React').createElement('div',{className:'message'},q));};n.prototype.$ChatSidebarSheet8=function(o){if(this.state.channelStatus===c('ChannelConnection').SHUTDOWN||this.state.syncStateInvalid){return c('React').createElement(c('ChatSidebarSheetChatShutdownMsg.react'),{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:o});}else if(this.state.channelStatus===c('ChannelConnection').RECONNECTING||this.state.syncStateReconnecting){var p=this.state.syncStateReconnecting?1:this.state.channelData;if(p>1000)this.$ChatSidebarSheet2=c('setTimeoutAcrossTransitions')(this.$ChatSidebarSheet3.bind(this,c('ChannelConnection').RECONNECTING,p-1000),1000);return c('React').createElement(c('ChatSidebarSheetChatReconnectMsg.react'),{isMessenger:o,msecs:p,onManuallyConnectClick:function(){if(!this.state.syncStateReconnecting)c('ChannelConnection').reconnect();}.bind(this)});}return null;};n.prototype.$ChatSidebarSheet7=function(){return c('React').createElement(c('ChatSidebarSheetChatOffline.react'),{onGoOnlineClick:function o(p){k.log('sidebar_go_online');c('ChatVisibility').goOnline();}});};n.prototype.$ChatSidebarSheet9=function(){return c('React').createElement('div',null,h._("Alerts are off while you use another client to chat."));};n.prototype.$ChatSidebarSheet5=function(){this.setState({syncStateReconnecting:true});};n.prototype.$ChatSidebarSheet6=function(){this.setState({syncStateInvalid:false,syncStateReconnecting:false});};f.exports=n;}),null);
__d('MessengerMessageRequestsInfo.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function k(){return c('React').createElement('div',{className:"_5u15"},i._("Open a request to get more info about who's messaging you."),' ',i._("They won't know that you've seen it until you accept."));};f.exports=j;}),null);
__d('MessengerThreadlistMessageRequestsRow.react',['cx','fbt','ix','Image.react','ImmutableObject','Link.react','MercuryIDs','MercuryParticipants','MessagingTag','MessengerActions','MNAdsLogMessageUtils','React','shallowEqual'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=50,n=j("86936"),o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$MessengerThreadlistMessageRequestsRow2=function(){return c('React').createElement('div',{className:"_5l-3 _1qt3 _5nxe"},c('React').createElement(c('Image.react'),{alt:'',height:m,src:n,width:m}),c('React').createElement('span',{className:"_5nxf"},i._({"*":"{count}"},[i.param('count',this.props.newMessageRequestThreads.length,[0])])));}.bind(this),this.$MessengerThreadlistMessageRequestsRow3=function(){var v=this.props.newMessageRequestThreads,w=i._({"someone":"From someone you may know","people":"From people you may know"},[i['enum'](v.length===1?'someone':'people',{someone:'someone',people:'people'})]),x=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),y=v[0].participants.find(function(aa){return aa!==x;});if(!y)return w;var z=c('MercuryParticipants').getOrFetch(y);if(!z||!z.name)return w;if(v.length>0)c('MNAdsLogMessageUtils').logAdsThreadListImpression(v[0]);return v.length===1?i._("From {name}",[i.param('name',z.name)]):i._({"*":"From {name} and {count} more"},[i.param('name',z.name),i.param('count',v.length-1,[0])]);}.bind(this),this.$MessengerThreadlistMessageRequestsRow1=function(v){v.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').PENDING);},r;}p.prototype.shouldComponentUpdate=function(q){return !c('shallowEqual')(this.props,q);};p.prototype.render=function(){var q=this.props.newMessageRequestThreads.length;if(q===0)return null;return c('React').createElement('li',{className:"_5l-3 _1ht1 _2il3 _2kt",role:'row'},c('React').createElement(c('Link.react'),{onClick:this.$MessengerThreadlistMessageRequestsRow1,className:"_1ht5 _5l-3"},this.$MessengerThreadlistMessageRequestsRow2(),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1ht6 _5nxa"},i._({"Request":"New message request","Requests":"New message requests"},[i['enum'](q===1?'Request':'Requests',{Request:'Request',Requests:'Requests'})]))),c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1htf _5nxb"},this.$MessengerThreadlistMessageRequestsRow3())))));};p.propTypes={newMessageRequestThreads:o.arrayOf(o.instanceOf(c('ImmutableObject'))).isRequired,viewer:o.string.isRequired};f.exports=p;}),null);
__d('MessengerThreadlistNewMessageRow.react',['cx','fbt','ix','Image.react','Link.react','MercuryIDs','MercuryParticipantListRenderer','MercuryParticipants','MercuryParticipantsImage.react','MessengerActions','MessengerComposerStore','MessengerProfileImageWrapper.react','MessengerView','ReactComponentWithPureRenderMixin','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=50,l=j("86935"),m=c('React').PropTypes,n=c('React').createClass({displayName:'MessengerThreadlistNewMessageRow',mixins:[c('ReactComponentWithPureRenderMixin'),c('PureStoreBasedStateMixin')(c('MercuryParticipants'),c('MessengerComposerStore'))],propTypes:{isActive:m.bool,onClose:m.func.isRequired},statics:{calculateState:function o(){return {participants:c('MessengerComposerStore').getState().recipients.map(function(p){return c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(p.getUniqueID()));}).filter(function(p){return !!p;})};}},render:function o(){return c('React').createElement('li',{className:"_5l-3"+(' '+"_1ht1")+(this.props.isActive?' '+"_1ht2":'')},c('React').createElement(c('Link.react'),{onClick:this._handleClickRow,className:"_1ht5 _2il3 _5l-3"},this._renderImage(),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1ht6"},this._renderTitle()),c('React').createElement('div',{className:"_23ct",onClick:this.props.onClose,role:'button',tabIndex:'0'})),c('React').createElement('div',{className:"_1qt5 _5l-3"},'\u00A0'))));},_renderImage:function o(){var p=this.state.participants;if(!p.isEmpty())return c('React').createElement('div',{className:"_1qt3 _5l-3"},c('React').createElement(c('MessengerProfileImageWrapper.react'),{isMessengerUser:p.size===1&&p.first().is_messenger_user,size:k,showBadge:p.size===1},c('React').createElement(c('MercuryParticipantsImage.react'),{participants:p.map(function(q){return q.id;}).slice(0,3).toArray(),size:k})));return c('React').createElement('div',{className:"_1qt3 _5l-3"},c('React').createElement(c('Image.react'),{height:k,src:l,width:k}));},_renderTitle:function o(){if(this.state.participants.isEmpty())return i._("New message");return i._("New message to {List of message recipients}",[i.param('List of message recipients',new (c('MercuryParticipantListRenderer'))().renderParticipantList(this.state.participants.toArray()))]);},_handleClickRow:function o(p){p.preventDefault();c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);}});f.exports=n;}),null);
__d('MercuryThreadlistRowContainer.react',['immutable','ImmutableObject','MercuryParticipants','React','StoreAndPropBasedStateMixin','shallowEqual'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'MercuryThreadlistRowContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{ChildClass:h.func.isRequired,thread:h.instanceOf(c('ImmutableObject')).isRequired,viewer:h.string.isRequired},statics:{calculateState:function j(k){return {participants:c('immutable').Map(c('immutable').Seq(k.thread.participants).map(function(l){return [l,c('MercuryParticipants').getOrFetch(l)];}))};}},shouldComponentUpdate:function j(k,l){return !c('shallowEqual')(k,this.props)||!c('immutable').is(l.participants,this.state.participants);},render:function j(){var k=this.props,l=k.ChildClass,m=babelHelpers.objectWithoutProperties(k,['ChildClass']);return c('React').createElement(l,babelHelpers['extends']({},m,{participants:this.state.participants}));}});f.exports=i;}),null);
__d('MessengerThreadlistRow.react',['cx','fbt','ix','FBRTCCore','Image.react','immutable','ImmutableObject','Link.react','MercuryBlockedParticipants','MercuryConfig','MercuryIDs','MercuryMessageInfo','MercuryThreadSnippet.react','MercuryThreadTimestamp.react','MercuryThreadTitle.react','MercuryTimestamp','MessengerAdminGroupUtils','MessengerButton.react','MessengerPresenceStatusUtils','messengerThreadImageReact','messengerThreadlistRowActionsReact','messengerThreadlistRowSeenHeadReact','messengerURIUtilsRe','MNAdsMessageUtils','React','ReactDOM','RTCConfig','FBRTCLogger','UserAgent','getPageIDFromThreadID','joinClasses','messengerRTLClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('MercuryBlockedParticipants').get(),n=c('messengerThreadImageReact').comp,o=c('messengerThreadlistRowActionsReact').comp,p=c('messengerThreadlistRowSeenHeadReact').comp,q=c('FBRTCLogger').Trigger,r=c('React').PropTypes,s=50,t=j("86913"),u=j("86914");k=babelHelpers.inherits(v,c('React').PureComponent);l=k&&k.prototype;function v(){var w,x;for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return x=(w=l.constructor).call.apply(w,[this].concat(z)),this.state={actionsOpen:false},this.$MessengerThreadlistRow1=0,this.$MessengerThreadlistRow2=null,this.$MessengerThreadlistRow4=function(ba){ba.preventDefault();this.props.onFocus(this.props.thread.thread_id);}.bind(this),this.$MessengerThreadlistRow5=function(ba){this.$MessengerThreadlistRow1++;if(this.$MessengerThreadlistRow2)return;this.$MessengerThreadlistRow2=setTimeout(function(){this.props.onSelect&&this.props.onSelect();this.$MessengerThreadlistRow1=0;this.$MessengerThreadlistRow2=null;}.bind(this),1000);}.bind(this),this.$MessengerThreadlistRow6=function(ba){this.$MessengerThreadlistRow1--;if(this.$MessengerThreadlistRow1===0){clearTimeout(this.$MessengerThreadlistRow2);this.$MessengerThreadlistRow2=null;}}.bind(this),this.$MessengerThreadlistRow8=function(ba){if(this.props.logClickHandler){var ca=this.props.thread.is_canonical?c('MercuryIDs').getUserIDFromThreadID(this.props.thread.thread_id)||'0':this.props.thread.thread_fbid;this.props.logClickHandler&&this.props.logClickHandler(ca);}this.$MessengerThreadlistRow9();this.props.onSelect&&this.props.onSelect();ba.preventDefault();this.$MessengerThreadlistRow3();}.bind(this),this.$MessengerThreadlistRow14=function(ba){this.setState({actionsOpen:ba});}.bind(this),this.$MessengerThreadlistRow15=function(ba){ba.preventDefault();ba.stopPropagation();var ca=this.props.thread,da=ca.rtc_call_data,ea=ca.thread_fbid;c('FBRTCCore').startGroupCall({conferenceName:'GROUP:'+ea,hasVideo:true,serverInfoData:da.server_info_data,trigger:q.MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON});}.bind(this),this.$MessengerThreadlistRow3=function(){var ba=c('ReactDOM').findDOMNode(this.refs.link);if(ba.href){ba.setAttribute('data-href',ba.href);ba.removeAttribute('href');}}.bind(this),this.$MessengerThreadlistRow9=function(){var ba=c('ReactDOM').findDOMNode(this.refs.link),ca=ba.getAttribute('data-href');if(ca){ba.setAttribute('href',ca);ba.removeAttribute('data-href');}}.bind(this),x;}v.prototype.componentDidMount=function(){this.$MessengerThreadlistRow3();};v.prototype.componentDidUpdate=function(w){if(this.props.isFocused)if(!w.isFocused){if(this.props.isActionsFocused){c('ReactDOM').findDOMNode(this.refs.actions.refs.button).focus();}else c('ReactDOM').findDOMNode(this.refs.link).focus();}else if(!w.isActionsFocused&&this.props.isActionsFocused){c('ReactDOM').findDOMNode(this.refs.actions.refs.button).focus();}else if(w.isActionsFocused&&!this.props.isActionsFocused)c('ReactDOM').findDOMNode(this.refs.link).focus();};v.prototype.render=function(){var w=this.props,x=w.isActive,y=w.isActionsFocused,z=w.isTabbable,aa=w.participants,ba=w.thread,ca=w.viewer,da=ba.unread_count>0,ea=c('messengerURIUtilsRe').getURIForThreadID(ba.thread_id);return c('React').createElement('li',{'aria-live':da?'polite':null,'aria-relevant':x||da?'additions text':null,onFocus:this.$MessengerThreadlistRow4,className:"_5l-3"+(' '+"_1ht1")+(this.props.isActive?' '+"_1ht2":'')+(da?' '+"_1ht3":'')+(this.state.actionsOpen?' '+"_13aa":'')+(this.props.isMuted?' '+"_569x":'')+(this.props.isFocused?' '+"_23_m":'')+(da&&c('UserAgent').isBrowser('Chrome')&&c('UserAgent').isPlatform('Mac')?' '+"_5fx8":''),onDragEnter:x?null:this.$MessengerThreadlistRow5,onDragLeave:x?null:this.$MessengerThreadlistRow6,role:'row',ref:function(fa){return fa&&this.props.registerThreadRefs&&this.props.registerThreadRefs(fa);}.bind(this)},c('React').createElement('div',{className:"_5l-3 _1ht5",id:this.$MessengerThreadlistRow7(ba.thread_id),role:'rowheader',tabIndex:-1},c('React').createElement(c('Link.react'),{href:ea.toString(),onBlur:this.$MessengerThreadlistRow3,onClick:this.$MessengerThreadlistRow8,onFocus:this.$MessengerThreadlistRow9,className:"_1ht5 _2il3 _5l-3",s:'true',ref:'link',role:'link',tabIndex:z&&!y?0:-1},c('React').createElement('div',{className:"_1qt3 _5l-3"},c('React').createElement(n,{participants:aa,size:s,thread:ba,viewer:ca})),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement(c('MercuryThreadTitle.react'),{className:"_1ht6",showUnreadCount:false,thread:ba,useShortName:false,viewer:ca}),c('React').createElement('div',null,c('MNAdsMessageUtils').isAdsMessageRequest(ba)?c('MNAdsMessageUtils').renderAdsMessageRequestStatus():this.$MessengerThreadlistRow10(ba))),c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement(c('MercuryThreadSnippet.react'),{className:c('joinClasses')("_1htf",c('messengerRTLClasses')(ba.snippet,true)),participants:aa,shouldRenderYou:true,thread:ba,viewer:ca})),this.$MessengerThreadlistRow11()))),this.$MessengerThreadlistRow12());};v.prototype.$MessengerThreadlistRow12=function(){if(this.props.showActions===false)return null;var w=this.props,x=w.isActionsFocused,y=w.isTabbable,z=w.participants,aa=w.thread,ba=w.viewer,ca=c('MessengerPresenceStatusUtils').getStatusFromCanonicalThread(this.props.participants,aa),da=ca&&ca.contact,ea=m.isMessageBlocked(aa),fa=c('MessengerAdminGroupUtils').isJoinableThread(aa),ga=aa.unread_count>0;return c('React').createElement('div',{role:'gridcell'},c('React').createElement('div',{'aria-describedby':this.$MessengerThreadlistRow7(aa.thread_id),'aria-haspopup':'true','aria-label':i._("Actions"),className:"_2j6 _5l-3",tabIndex:y&&x?0:-1,role:'button'},c('React').createElement(p,{className:"_5bli",isHidden:this.state.actionsOpen,lastMessage:this.props.lastMessage,participants:z,readReceipts:this.props.readReceipts,thread:aa,viewer:ba}),this.$MessengerThreadlistRow13(),c('React').createElement(o,{className:"_5blh",contact:da,isMessengerRoom:fa,isMuted:this.props.isMuted,isOpen:this.state.actionsOpen,isUnread:ga,isBlocked:ea,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onToggle:this.$MessengerThreadlistRow14,onUnmute:this.props.onUnmute,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showLeaveGroup:this.props.showLeaveGroup,showMute:true,showBlock:aa.is_canonical_user&&aa.other_user_fbid&&ba!==aa.other_user_fbid,showReport:c('getPageIDFromThreadID')(this.props.thread.thread_id)&&c('MercuryConfig').MessengerPlatformReportPage,thread:aa,ref:'actions'}),c('React').createElement('div',{className:"_56ck"})));};v.prototype.$MessengerThreadlistRow13=function(){var w=this.props.lastMessage;if(this.state.actionsOpen||!w)return null;var x=c('MercuryMessageInfo').isSending(w),y=c('MercuryMessageInfo').hasError(w);if(!x&&!y)return null;return c('React').createElement(c('Image.react'),{className:"_wtw"+(x?' '+"_3qh2":''),src:x?u:t});};v.prototype.$MessengerThreadlistRow10=function(w){return c('React').createElement(c('MercuryThreadTimestamp.react'),{className:"_1ht7",time:w.timestamp,title:c('MercuryTimestamp').getAbsoluteTimestamp(w.timestamp),text:c('MercuryTimestamp').getRelativeTimestamp(w.timestamp)});};v.prototype.$MessengerThreadlistRow11=function(){if(!c('RTCConfig').RtcConferencingGK||!this.props.thread.rtc_call_data||this.props.thread.rtc_call_data.call_state==='NO_ONGOING_CALL')return null;return c('React').createElement(c('MessengerButton.react'),{className:"_4ry5",label:i._("Join Call"),onClick:this.$MessengerThreadlistRow15,type:'primary'});};v.prototype.$MessengerThreadlistRow7=function(w){return 'row_header_id_'+w;};v.propTypes={isActive:r.bool.isRequired,isActionsFocused:r.bool,isFocused:r.bool,isMuted:r.bool.isRequired,lastMessage:r.instanceOf(c('ImmutableObject')),logClickHandler:r.func,onArchive:r.func.isRequired,onDelete:r.func.isRequired,onMarkRead:r.func.isRequired,onMarkSpam:r.func.isRequired,onMarkUnread:r.func.isRequired,onMute:r.func.isRequired,onSelect:r.func.isRequired,onUnmute:r.func.isRequired,onBlock:r.func.isRequired,onUnblock:r.func.isRequired,participants:r.instanceOf(c('immutable').Map).isRequired,readReceipts:r.instanceOf(c('immutable').OrderedMap).isRequired,registerThreadRefs:r.func,thread:r.instanceOf(c('ImmutableObject')).isRequired,viewer:r.string.isRequired};f.exports=v;}),null);
__d('MessengerThreadlistRowContainer.react',['ImmutableObject','MercuryIDs','MercuryLogMessageType','MercuryMessageActions','MercuryMessageObject','MercuryMessages','MercuryRoger','MercuryThreadActions','MercuryThreadInfo','MercuryThreadlistRowContainer.react','MercuryTriodeSourceUtil','MessagingSourceEnum','MessengerActions','messengerDialogsRe','messengerConfirmLeaveGroupDialogReact','MessengerAdminGroupUtils','MessengerThreadlistRow.react','MNPlatformTagsDataManager','ReactComponentWithPureRenderMixin','React','ReactDOM','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryRoger').get(),i=c('messengerConfirmLeaveGroupDialogReact').comp,j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerThreadlistRowContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryMessages'),h)],propTypes:{isActive:j.bool.isRequired,isTabbable:j.bool,showActions:j.bool,thread:j.instanceOf(c('ImmutableObject')).isRequired,viewer:j.string.isRequired,onOverrideSelect:j.func},statics:{calculateState:function l(m){var n=c('MercuryMessages').getForFBID(m.viewer),o=m.thread.thread_id,p=n.getThreadMessagesRangeNow(o,0,1)[0];return {lastMessage:p||null,readReceipts:h.getSeenTimestamps(o)};}},componentDidUpdate:function l(m){if(this.props.isActive&&!m.isActive)this.props.onScrollIntoView(c('ReactDOM').findDOMNode(this));},render:function l(){return c('React').createElement(c('MercuryThreadlistRowContainer.react'),babelHelpers['extends']({},this.props,{ChildClass:c('MessengerThreadlistRow.react'),isMuted:c('MercuryThreadInfo').isMuted(this.props.thread),lastMessage:this.state.lastMessage,onArchive:this._handleArchive,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onSelect:this._handleSelect,onUnmute:this._handleUnmute,onBlock:this._handleBlock,onUnblock:this._handleUnblock,readReceipts:this.state.readReceipts,showActions:this.props.showActions,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical}));},_handleArchive:function l(){var m=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);m&&c('MessengerActions').selectThread(null);},_handleDelete:function l(){var m=this.props.isActive;this._getThreadActions()['delete'](this.props.thread.thread_id);m&&c('MessengerActions').selectThread(null);},_handleMarkRead:function l(){this._getThreadActions().markRead(this.props.thread.thread_id);},_handleMarkSpam:function l(){var m=this.props.isActive;this._getThreadActions().markSpam(this.props.thread.thread_id);m&&c('MessengerActions').selectThread(null);},_handleMarkUnread:function l(){this._getThreadActions().markUnread(this.props.thread.thread_id);},_handleMute:function l(m){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,m);},_handleSelect:function l(){if(this.props.onOverrideSelect){this.props.onOverrideSelect(this.props.thread);return;}c('MessengerActions').selectThread(this.props.thread.thread_id);var m=c('MercuryIDs').getUserIDFromThreadID(this.props.thread.thread_id);c('MNPlatformTagsDataManager').updateThreadTabAfterSelectThread(c('MessagingSourceEnum').MESSENGER_WEB_SEARCH,m);},_handleUnmute:function l(){this._getThreadActions().unmute(this.props.thread.thread_id);},_handleLeaveGroup:function l(){var m,n=this;if(this.props.viewer)(function(){var o=c('MessengerAdminGroupUtils').isViewerAdmin(n.props.thread.admin_ids,n.props.viewer);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(i,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:o,thread:this.props.thread});}.bind(n));})();},_handleBlock:function l(){this._getThreadActions().blockOnMessengerDotCom(this.props.thread.thread_id);},_handleUnblock:function l(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id);},_onLeaveGroupConfirm:function l(){if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread)){var m=this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),this.props.thread.thread_id,c('MercuryLogMessageType').UNSUBSCRIBE,{removed_participants:[c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(m);}},_getThreadActions:function l(){return c('MercuryThreadActions').getForFBID(this.props.viewer);},_getMessageActions:function l(){return c('MercuryMessageActions').getForFBID(this.props.viewer);},_getMessageObject:function l(){return c('MercuryMessageObject').getForFBID(this.props.viewer);}});f.exports=k;}),null);
__d('MessengerRecentContainer.react',['MercuryAPIArgsSource','MercuryThreadlistContainer.react','MessengerComposerSteps','MessengerComposerStore','messengerThreadlistReact','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('messengerThreadlistReact').comp,i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerRecentContainer',mixins:[c('PureStoreBasedStateMixin')(c('MessengerComposerStore'))],propTypes:{activeThreadID:i.string,filter:i.string.isRequired,folder:i.string.isRequired,viewer:i.string.isRequired},statics:{calculateState:function k(){return {isComposing:c('MessengerComposerStore').getState().step!==c('MessengerComposerSteps').NULL};}},render:function k(){return c('React').createElement(c('MercuryThreadlistContainer.react'),{ChildClass:h,activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isComposing:this.state.isComposing,isNewMessageActive:this.props.isNewMessageActive,source:c('MercuryAPIArgsSource').WEBMESSENGER,viewer:this.props.viewer});}});f.exports=j;}),null);
__d('MessengerSearchContainer.react',['cx','fbt','Link.react','MessengerActions','MessengerSpinner.react','messengerThreadlistReact','MessengerThreadSearchActions','MessengerThreadSearchStore','MessengerView','React','SubscriptionsHandler','StoreAndPropBasedStateMixin','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('messengerThreadlistReact').comp,k=c('React').PropTypes,l=c('React').createClass({displayName:'MessengerSearchContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('MessengerThreadSearchStore'))],propTypes:{activeThreadID:k.string,filter:k.string.isRequired,folder:k.string.isRequired,isComposing:k.bool,isLoaded:k.bool,isLoading:k.bool,isNewMessageActive:k.bool,viewer:k.string.isRequired},statics:{calculateState:function m(n){var o=c('MessengerThreadSearchStore').getState();return {threads:o.threads?o.threads.toArray():[],threadsExhausted:o.threadsExhausted,loading:o.loading,query:o.query};}},_subscriptions:null,render:function m(){return c('React').createElement(j,babelHelpers['extends']({},this.props,{clearQuery:this._handleClear,isLoaded:!this.state.loading&&!!this.state.threads,isLoading:this.state.loading,isSearching:false,newMessageRequestThreads:[],onLoadMoreRequest:c('MessengerThreadSearchActions').loadMoreThreads,onQuery:c('MessengerActions').changeQueryAll,onSearchResults:c('emptyFunction'),p2pJewelBannerContainer:null,queryString:this.state.query,renderLoadMore:this._renderLoadMoreLink,threads:this.state.threads}));},_renderLoadMoreLink:function m(){if(this.state.threadsExhausted)return c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('Link.react'),{href:'#',onClick:this._handleClear},i._("No conversations found")));if(this.state.loading)return c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('MessengerSpinner.react'),null));return c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('Link.react'),{href:'#',onClick:c('MessengerThreadSearchActions').loadMoreThreads,tabIndex:-1},i._("Load More")));},_handleClear:function m(){c('MessengerActions').changeMasterView(c('MessengerView').MASTER.RECENT);}});f.exports=l;}),null);
__d('MessengerMasterView.react',['cx','BootloadOnRender.react','JSResource','LazyComponent.react','MessengerMasterViewHeader.react','MessengerRecentContainer.react','MessengerSearchContainer.react','MessengerSpinner.react','MessengerView','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(c('MessengerMasterViewHeader.react'),{filter:this.props.filter,folder:this.props.folder,view:this.props.view,viewer:this.props.viewer}),this.$MessengerMasterView1());};l.prototype.$MessengerMasterView1=function(){var m=this.props.detailView===c('MessengerView').DETAIL.COMPOSE;switch(this.props.view){case c('MessengerView').MASTER.PEOPLE:return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{activeThreadID:m?null:this.props.activeThreadID,viewer:this.props.viewer}),loader:c('JSResource')('MessengerPeopleList.react').__setRef('MessengerMasterView.react'),placeholder:c('React').createElement('div',{className:"_2pif",style:{textAlign:'center'}},c('React').createElement(c('MessengerSpinner.react'),null))});case c('MessengerView').MASTER.RECENT:return c('React').createElement(c('MessengerRecentContainer.react'),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:m,viewer:this.props.viewer});case c('MessengerView').MASTER.SEARCH:return c('React').createElement(c('MessengerSearchContainer.react'),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:m,viewer:this.props.viewer});default:throw new Error('Unknown master view: '+this.props.view);}};function l(){i.apply(this,arguments);}l.propTypes={activeThreadID:k.string,detailView:k.string,filter:k.string,folder:k.string.isRequired,view:k.string.isRequired,viewer:k.string.isRequired};f.exports=l;}),null);
__d('P2PDialogStore',['EventEmitter','P2PActionConstants','P2PDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0,k={};h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){i.constructor.call(this);j=c('P2PDispatcher').register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null};}l.prototype.getState=function(){return k;};l.prototype.onEventDispatched=function(m){var n=m.type,o=m.data;switch(n){case c('P2PActionConstants').DIALOG_SHOWN:k.dialogClass=o.dialogClass;k.dialogProps=o.dialogProps;this.emit('change');break;case c('P2PActionConstants').DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit('change');break;}};f.exports=new l();}),null);
__d('P2PDialogContainer.react',['P2PDialogStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state=c('P2PDialogStore').getState(),this.onDialogStoreChange=function(){this.setState(c('P2PDialogStore').getState());}.bind(this),l;}j.prototype.componentDidMount=function(){this.dialogStoreSub=c('P2PDialogStore').addListener('change',this.onDialogStoreChange);};j.prototype.componentWillUnmount=function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null;}};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c('React').createElement(k,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));};f.exports=j;}),null);
__d('PagesPlatformActionConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={BOOKING_REQUEST_ACCEPT_ERROR:'booking_request_accept_error',BOOKING_REQUEST_ACCEPT_INITIATED:'booking_request_accept_initiated',BOOKING_REQUEST_ACCEPTED:'booking_request_accepted',BOOKING_REQUEST_CREATED:'booking_request_created',BOOKING_REQUEST_DECLINE_ERROR:'booking_request_decline_error',BOOKING_REQUEST_DECLINE_INITIATED:'booking_request_decline_initiated',BOOKING_REQUEST_DECLINED:'booking_request_declined',BOOKING_REQUEST_RESCHEDULE_INITIATED:'booking_request_reschedule_initiated',BOOKING_REQUEST_RESCHEULED:'booking_request_reschedule',DIALOG_CLOSED:'dialog_closed',DIALOG_SHOWN:'dialog_shown',NEW_TIME_CHOSEN:'new_time_chosen'};f.exports=h;}),null);
__d('PagesPlatformRequestDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('Dispatcher_DEPRECATED'))();}),null);
__d('PagesPlatformDialogStore',['EventEmitter','PagesPlatformActionConstants','PagesPlatformRequestDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(){i.constructor.call(this);c('PagesPlatformRequestDispatcher').register(this.onEventDispatched.bind(this));j={dialogClass:null,dialogProps:null};}k.prototype.getState=function(){return j;};k.prototype.onEventDispatched=function(l){var m=l.type,n=l.data;switch(m){case c('PagesPlatformActionConstants').DIALOG_SHOWN:j.dialogClass=n.dialogClass;j.dialogProps=n.dialogProps;this.emit('change');break;case c('PagesPlatformActionConstants').DIALOG_CLOSED:j.dialogClass=null;j.dialogProps=null;this.emit('change');break;}};f.exports=new k();}),null);
__d('PagesPlatformDialogContainer.react',['PagesPlatformDialogStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'PagesPlatformDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('PagesPlatformDialogStore'))],statics:{calculateState:function i(){return c('PagesPlatformDialogStore').getState();}},render:function i(){if(!this.state.dialogClass)return null;var j=this.state.dialogClass;return c('React').createElement(j,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));}});f.exports=h;}),null);
__d('messengerReact',['cx','bs_curry','React','utilsRe','bs_js_boolean','CurrentUser','bs_js_primitive','MessengerConfig','MessengerStateStore','messengerBannerReact','messengerBugNubReact','MessengerSettingsStore','p2PDialogContainerReact','messengerDetailViewReact','messengerMasterViewReact','PureStoreBasedStateMixin','messengerErrorBoundaryReact','fBPaymentsDialogContainerReact','mNCommerceDialogContainerReact','pagesPlatformDialogContainerReact','ReactComponentWithPureRenderMixin','messengerReasonDialogContainerReact'],(function a(b,c,d,e,f,g,h){'use strict';function i(n){n.preventDefault();return 0;}function j(n,o){var p=+c('CurrentUser').isEmployee(),q;if(p!==0){var r=n[0],s=n[0];q=c('messengerBugNubReact').createElement([r?c('utilsRe').isTruthy(r[0].isBetaEnabled):0],s?[s[0].unixName]:0)(0,0,0,0);}else q=null;return c('React').createElement("div",{className:"_li"},c('messengerBannerReact').createElement(n[2],n[1])(0,0,0,0),c('React').createElement("div",{className:"_4sp8"+(c('bs_js_boolean').to_js_boolean(+(c('MessengerConfig').ConstrainWidth&&o.settings.constrained_width))?' '+"_3qn1":''),onDragEnter:i,onDragOver:i,onDrop:i},c('React').createElement("div",{className:"_1enh"},c('messengerErrorBoundaryReact').createElement(0,["conversation list"])([c('messengerMasterViewReact').createElement(c('bs_js_primitive').null_undefined_to_opt(o.state.activeThreadID),c('bs_js_primitive').null_undefined_to_opt(o.state.detailView),[o.state.filter],o.state.folder,o.state.masterView,c('CurrentUser').getID())(0,0,0,0),0],0,0,0),q),c('messengerDetailViewReact').createElement(c('bs_js_primitive').null_undefined_to_opt(o.state.activeThreadID),c('bs_js_primitive').null_undefined_to_opt(o.state.mid),c('bs_js_primitive').null_undefined_to_opt(o.state.query),c('bs_js_primitive').null_undefined_to_opt(o.state.detailView),c('CurrentUser').getID())(0,0,0,0)),c('bs_curry')._4(c('messengerReasonDialogContainerReact').createElement,0,0,0,0),c('mNCommerceDialogContainerReact').createElement(0,0,0,0),c('p2PDialogContainerReact').createElement(0,0,0,0),c('pagesPlatformDialogContainerReact').createElement(0,0,0,0),c('fBPaymentsDialogContainerReact').createElement(0,0,0,0));}function k(n){return [c('bs_js_primitive').null_undefined_to_opt(n.employeeData),c('utilsRe').nullUndefinedBooleanToOptionBool(n.isFirstRedirect),c('bs_js_primitive').null_undefined_to_opt(n.promotionData),n.viewer];}var l=[i,j,k],m=c('React').createClass({displayName:"MessengerReact",mixins:[c('ReactComponentWithPureRenderMixin'),c('PureStoreBasedStateMixin')(c('MessengerStateStore'),c('MessengerSettingsStore'))],statics:{calculateState:function n(){return {state:c('MessengerStateStore').getState(),settings:c('MessengerSettingsStore').getSettings()};}},componentWillUnmount:function n(){c('MessengerStateStore').destroy();c('MessengerSettingsStore').destroy();return 0;},render:function n(){var o=this,p=k(o.props),q=o.state;return j(p,q);}});g.Messenger=l;g.comp=m;}),null);
__d('MessengerMount',['cx','CSS','ChannelConnection','ChannelManager','CurrentUser','HotLikeSound','MercuryBlockedParticipants','MercuryDelayedRoger','MercuryDeliveryReceipts','MercuryDeliveryState','MercuryOrderedThreadlist','MercuryParticipants','MercuryServerPayloadPreprocessor','MercurySyncEnvironment','MercuryThreads','MercuryThreadIDMap','MercuryUnreadState','MercuryUnseenState','messengerReact','MessengerActions','MessengerAttributionTagsStore','MessengerComposerActions','MessengerBrowserAlerts','MessengerComposerStore','MessengerConfig','MessengerEnvironment','MessengerMDotMeReferralStore','MessengerPage','MessengerRTCMessageHandler','MessengerSettingsStore','MessengerStateStore','MessengerThreadSearchStore','MessengerURIListener','MessengerURIConstants','MessengerView','MNPlatformTagsDataManager','OmniMStore','React','ReactDOM','MercuryConfig','URI','goURI','OrderedFriendsList','PageHooks'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MercuryDelayedRoger').get(),j=c('messengerReact').comp;c('OrderedFriendsList');c('PageHooks');c('ChannelManager').startChannelManager();var k={mount:function o(p,q){c('MessengerEnvironment').setMessengerUI(true);c('MessengerPage').emit(c('MessengerPage').Events.JS_LOADED);var r=c('CurrentUser').getID();l(r);m(r);n(r,q);c('MessengerPage').emit(c('MessengerPage').Events.DATA_INITIALIZED);c('CSS').addClass(document.documentElement,"_51l0");c('CSS').addClass(document.body,"_z4_");if(c('MessengerConfig').FlexBubblesEnabled)c('CSS').addClass(document.body,"_5v7-");if(c('MessengerConfig').SFFontEnabled)c('CSS').addClass(document.body,"__6g");if(c('MessengerConfig').SegoeUIDisabled)c('CSS').addClass(document.body,"_2por");if(c('MessengerEnvironment').facebookdotcom)c('CSS').addClass(document.body,"_mvg");c('HotLikeSound').setCheckSoundEnabledFunc(function(){return c('MessengerSettingsStore').getSettings().sound_enabled;});c('ReactDOM').render(c('React').createElement(j,{employeeData:q.employeeData,facebookNotificationTokens:q.facebookNotificationTokens,promotionData:q.promotionData,isFirstRedirect:!c('MercuryConfig').MessengerDotComUser,viewer:r}),p,function(){c('MessengerPage').emit(c('MessengerPage').Events.APP_MOUNTED);});}};function l(o){i;c('MercuryDeliveryReceipts').getForFBID(o);c('MercuryDeliveryState').getForFBID(o);c('MercuryOrderedThreadlist').getForFBID(o);c('MercuryParticipants');c('MercuryBlockedParticipants').getForFBID(o);c('MercuryThreads').getForFBID(o);c('MercuryUnreadState').getForFBID(o);c('MercuryUnseenState').getForFBID(o);c('MessengerAttributionTagsStore');c('MessengerComposerStore');c('MessengerMDotMeReferralStore');c('MessengerSettingsStore');c('MessengerStateStore');c('MessengerThreadSearchStore').getForFBID(o);}function m(o){c('MessengerURIListener').start();c('MercurySyncEnvironment').setUp();c('MessengerBrowserAlerts').init(o);c('MessengerRTCMessageHandler').init();c('ChannelConnection');c('OmniMStore').setUp();}function n(o,p){var q=c('MercuryServerPayloadPreprocessor').getForFBID(o);q.handleUpdate(p.mercuryPayload);var r=new (c('URI'))(window.location.href);c('goURI')(r,false,true);if(r.getPath().endsWith(c('MessengerURIConstants').COMPOSE_SUBPATH))return;c('MessengerActions').changeMDotMeReferral(p.mDotMeReferral,p.mDotMeReferralThreadKey);var s=c('MercuryThreadIDMap').get(),t=s.getClientIDFromServerIDNow(p.lastReadThreadKey);if(t){c('MessengerComposerActions').exitComposeState();c('MessengerActions').selectThread(t);}else if(r.getPath()==='/')c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);c('MNPlatformTagsDataManager').updateThreadTabAfterSelectThread(p.messagingSource,p.mDotMeReferralThreadKey&&p.mDotMeReferralThreadKey.toString());}f.exports=k;}),null);
__d('MessengerFileSizeErrorDialog.react',['fbt','messengerDialogsRe','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerFileSizeErrorDialog2=function(){if(this.props.error==='wrong-type'){return c('React').createElement('div',null,h._("The type of file you're trying to attach isn't allowed. Please try again with a different format."));}else if(this.props.error==='size-exceeded')return c('React').createElement('div',null,h._("The file you have selected is too large. The maximum size is 25 MB."));return c('React').createElement('div',null);}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MessengerFileSizeErrorDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("Failed to upload files")),c('React').createElement(k,null,this.$MessengerFileSizeErrorDialog2()),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{action:'cancel',label:h._("OK"),type:'primary'})));};m.prototype.$MessengerFileSizeErrorDialog1=function(n){if(!n)c('messengerDialogsRe').removeDialog();};m.propTypes={error:l.string.isRequired};f.exports=m;}),null);
__d('MercuryThreadMuter',['AsyncDialog','AsyncRequest','DOM','MercuryThreadInfo'],(function a(b,c,d,e,f,g){var h={showMuteChangeDialog:function i(j,k){c('AsyncDialog').send(new (c('AsyncRequest'))('/ajax/mercury/mute_thread_dialog.php').setRelativeTo(k),function(l){l.subscribe('confirm',function(){this.hide();var m=void 0;c('DOM').scry(this.getRoot(),'input[type="radio"]').forEach(function(n){if(n.checked)m=n.value;});m=h.convertRawMuteSetting(m);e(['MercuryThreadActions'],function(n){n.get().updateMuteSetting(j,m);});}.bind(l));});},convertRawMuteSetting:function i(j){switch(j){case 'always':return -1;case '30minutes':return 1800;case '1hour':return 3600;case '8hours':return 8*3600;case '24hours':return 24*3600;case '8am':var k,l=new Date(),m=new Date();m.setHours(8);m.setMinutes(0);m.setSeconds(0);if(m>l){k=m-l;}else k=m-l+24*3600*1000;return k/1000;default:return 0;}}};f.exports=h;}),null);
__d('MessengerMuteDialog.react',['fbt','MercuryThreadMuter','MessengerDialog.react','MessengerDialogBody.react','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','messengerDomIDsRe','MessengerRadioList.react','React','ReactDOM'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDomIDsRe').ids,l=c('MessengerRadioList.react').Item,m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={muteSetting:'30minutes'},this.$MessengerMuteDialog2=function(){var t=c('MercuryThreadMuter').convertRawMuteSetting(this.state.muteSetting);this.props.onMute(t);this.props.onToggle&&this.props.onToggle(false,t);}.bind(this),this.$MessengerMuteDialog1=function(t){this.setState({muteSetting:t});}.bind(this),p;}n.prototype.componentDidMount=function(){var o=c('ReactDOM').findDOMNode(this.refs.confirmButton);if(o&&o.focus)o.focus();};n.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onToggle,titleID:k.MUTE_DIALOG_TITLE},c('React').createElement(c('MessengerDialogHeader.react'),{id:k.MUTE_DIALOG_TITLE},h._("Mute Conversation")),c('React').createElement(c('MessengerDialogBody.react'),null,c('React').createElement(c('MessengerRadioList.react'),{name:'messengerMuteOptions',selectedValue:this.state.muteSetting,onValueChange:this.$MessengerMuteDialog1},c('React').createElement(l,{value:'30minutes'},h._("For 30 minutes")),c('React').createElement(l,{value:'1hour'},h._("For 1 hour")),c('React').createElement(l,{value:'8hours'},h._("For 8 hours")),c('React').createElement(l,{value:'24hours'},h._("For 24 hours")),c('React').createElement(l,{value:'always'},h._("Indefinitely")))),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogButton.react'),{label:h._("Mute"),onClick:this.$MessengerMuteDialog2,ref:'confirmButton',type:'primary'})));};n.propTypes={onMute:m.func.isRequired,onToggle:m.func.isRequired};f.exports=n;}),null);
__d('MessengerWorkAvailabilityStatus.react',['fbt','React','AsyncRequest'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k='/ajax/mercury/bypass_focus_mode.php';i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.displayFocusBanner=function(m,n){var o=false;n.forEach(function(p){if(!p||p.fbid===m)return;o=o||p.is_user_focusing;});return !!o;};l.prototype.$MessengerWorkAvailabilityStatus1=function(){new (c('AsyncRequest'))(k).setData({thread_fbid:this.props.thread.thread_fbid,other_user_fbid:this.props.thread.other_user_fbid,new_setting:true}).send();};l.prototype.render=function(){var m=this.props,n=m.viewer,o=m.thread,p=m.participants,q=l.displayFocusBanner(n,p);if(!q)return null;if(o&&o.bypass_focus_mode_until&&o.bypass_focus_mode_until>Date.now()/1000)return c('React').createElement('div',{className:this.props.className},h._("Focus mode bypassed."));return c('React').createElement('div',{className:this.props.className},h._({"*":"Your colleagues are in focus mode.","268435456":"Your colleague is in focus mode."},[h.plural(p.size-1)]),' ',c('React').createElement('a',{href:'#',onClick:function(){return this.$MessengerWorkAvailabilityStatus1();}.bind(this)},h._("Bypass")));};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('KillabyteHTMLXHPTemplateProcessor',[],(function a(b,c,d,e,f,g){f.exports=function(h){var i=[h];while(i.length){var j=i.pop();if(j.removeAttribute)j.removeAttribute('data-from-server');if(j.childNodes)i.push.apply(i,j.childNodes);}return h;};}),null);
__d('XHPTemplate',['DataStore','DOM','HTML','XHPTemplateProcessor'],(function a(b,c,d,e,f,g){var h=c('XHPTemplateProcessor').processor;function i(k){'use strict';if(h instanceof Function)k=h(k);this._model=k;}i.prototype.render=function(){'use strict';if(c('HTML').isHTML(this._model))this._model=c('DOM').setContent(document.createDocumentFragment(),this._model)[0];return this._model.cloneNode(true);};i.prototype.build=function(){'use strict';return new j(this.render());};i.getNode=function(k,l){'use strict';return i.getNodes(k)[l];};i.getNodes=function(k){'use strict';var l=c('DataStore').get(k,'XHPTemplate:nodes');if(!l){l={};var m=c('DOM').scry(k,'[data-jsid]');m.push(k);var n=m.length;while(n--){var o=m[n];l[o.getAttribute('data-jsid')]=o;o.removeAttribute('data-jsid');}c('DataStore').set(k,'XHPTemplate:nodes',l);}return l;};function j(k){'use strict';this._root=k;this._populateNodes();}j.prototype._populateNodes=function(){'use strict';this._nodes={};this._leaves={};var k=this._root.getElementsByTagName('*');for(var l=0,m=k.length;l<m;l++){var n=k[l],o=n.getAttribute('data-jsid');if(o){n.removeAttribute('data-jsid');this._nodes[o]=n;this._leaves[o]=!n.childNodes.length;}}};j.prototype.getRoot=function(){'use strict';return this._root;};j.prototype.getNode=function(k){'use strict';return this._nodes[k];};j.prototype.setNodeProperty=function(k,l,m){'use strict';this.getNode(k)[l]=m;return this;};j.prototype.setNodeContent=function(k,l){'use strict';if(!this._leaves[k])throw new Error("Can't setContent on non-leaf node: "+k);c('DOM').setContent(this.getNode(k),l);return this;};f.exports=i;}),null);
__d('EmoticonSpan.react',['cx','DraftEntity','EmojiImageURL','EmoticonsList','React','SupportedFBEmoji'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props.size,m=c('DraftEntity').get(this.props.entityKey).getData(),n=c('EmoticonsList').emoji[m.type],o=c('SupportedFBEmoji')[n]?c('EmojiImageURL').getFBEmojiURL(n,l):c('EmojiImageURL').getFBEmojiExtendedURL(n,l);return c('React').createElement('span',{className:"_3gl1 _5zz4",style:{backgroundImage:'url('+o+')',backgroundSize:l+'px '+l+'px',height:l+'px',width:l+'px'}},c('React').createElement('span',{className:"_ncl"},this.props.children));};function k(){i.apply(this,arguments);}k.defaultProps={size:16};f.exports=k;}),null);
__d('applyEmoticonToContentState',['EmoticonsList','applyEmoticonToContentBlock','getTextAfterNearestEntity'],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp(c('EmoticonsList').regexp.source,'g');function i(j,k){var l=k.getAnchorKey(),m=k.getAnchorOffset(),n=j.getBlockForKey(l),o=c('getTextAfterNearestEntity')(n,m),p,q;while(q!==null){q=h.exec(o);if(q!==null)p=q;}if(!p)return j;var r=p[1];if(!r&&m!==o.length)return j;var s=p[2],t=m-o.length,u=t+p.index+p[1].length,v=j.getBlockMap().set(l,c('applyEmoticonToContentBlock')(n,s,u));m-=s.length-1;return j.merge({blockMap:v,selectionBefore:k,selectionAfter:k.merge({anchorOffset:m,focusOffset:m})});}f.exports=i;}),null);
__d('handleBeforeInputForEmoticon',['DraftModifier','EditorState','applyEmoticonToContentState'],(function a(b,c,d,e,f,g){var h=new RegExp(/[\s'".,!?]/);function i(j,k){var l=j.getSelection();if(!l.isCollapsed()||!k||!h.test(k))return j;var m=j.getCurrentContent(),n=c('applyEmoticonToContentState')(m,l);if(n===m)return j;var o=c('DraftModifier').insertText(n,n.getSelectionAfter(),k);return c('EditorState').push(j,o,'insert-characters');}f.exports=i;}),null);
__d('handleSoftNewlineForEmoticon',['DraftModifier','EditorState','applyEmoticonToContentState'],(function a(b,c,d,e,f,g){function h(i){var j=i.getCurrentContent(),k=i.getSelection(),l=c('applyEmoticonToContentState')(j,k),m=c('DraftModifier').splitBlock(l,j===l?k:l.getSelectionAfter());return c('EditorState').push(i,m,'split-block');}f.exports=h;}),null);
__d('SimpleFBAuthenticatedXHRRequest',['invariant','CurrentUser','DTSG','ServerJSDefine','XHRRequest','isFacebookURI'],(function a(b,c,d,e,f,g,h){var i,j,k=1;i=babelHelpers.inherits(l,c('XHRRequest'));j=i&&i.prototype;function l(m,n){'use strict';j.constructor.call(this,m);var o={__dyn:c('ServerJSDefine').getLoadedModuleHash(),__req:(k++).toString(36),__ajax__:1,__a:1,__user:c('CurrentUser').getID()};j.setData.call(this,babelHelpers['extends']({},n,o));}l.prototype.send=function(){'use strict';if(!c('isFacebookURI')(this.getURI()))return j.send.call(this);if(c('DTSG').getCachedToken){var m=c('DTSG').getCachedToken();if(m){return this.sendOnDTSGToken(m);}else{c('DTSG').getToken().done(function(n){return this.sendOnDTSGToken(n);}.bind(this));return this;}}else this.sendOnDTSGToken(c('DTSG').getToken());};l.prototype.sendOnDTSGToken=function(m){'use strict';if(m)j.setData.call(this,babelHelpers['extends']({},this.getData(),{fb_dtsg:m}));return j.send.call(this);};l.prototype.setData=function(m){'use strict';h(0);};l.parseResponse=function(m){'use strict';return JSON.parse(m.substr(9));};l.getPayload=function(m){'use strict';var n=l.parseResponse(m).payload;return n.payload?n.payload:n;};f.exports=l;}),null);
__d("XFantailLogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/fantail\/",{service:{type:"String",required:true}});}),null);
__d('FantailLogQueue',['ChannelClientID','CircularBuffer','destroyOnUnload','FantailConfig','PHPQuerySerializer','setIntervalAcrossTransitions','SimpleFBAuthenticatedXHRRequest','sprintf','XFantailLogController'],(function a(b,c,d,e,f,g){var h={DEBUG:'debug',INFO:'info',WARN:'warn',ERROR:'error'};function i(j){'use strict';this.$FantailLogQueue2=j;this.$FantailLogQueue3=new (c('CircularBuffer'))(c('FantailConfig').queueSize||200);c('setIntervalAcrossTransitions')(this.$FantailLogQueue4.bind(this),c('FantailConfig').flushInterval||30*1000);c('destroyOnUnload')(this.$FantailLogQueue4.bind(this));}i.get=function(j){'use strict';i.$FantailLogQueue1=i.$FantailLogQueue1||{};i.$FantailLogQueue1[j]=i.$FantailLogQueue1[j]||new i(j);return i.$FantailLogQueue1[j];};i.prototype.debug=function(j){'use strict';for(var k=arguments.length,l=Array(k>1?k-1:0),m=1;m<k;m++)l[m-1]=arguments[m];this.$FantailLogQueue5.apply(this,[h.DEBUG,j].concat(l));};i.prototype.info=function(j){'use strict';for(var k=arguments.length,l=Array(k>1?k-1:0),m=1;m<k;m++)l[m-1]=arguments[m];this.$FantailLogQueue5.apply(this,[h.INFO,j].concat(l));};i.prototype.warn=function(j){'use strict';for(var k=arguments.length,l=Array(k>1?k-1:0),m=1;m<k;m++)l[m-1]=arguments[m];this.$FantailLogQueue5.apply(this,[h.WARN,j].concat(l));};i.prototype.error=function(j){'use strict';for(var k=arguments.length,l=Array(k>1?k-1:0),m=1;m<k;m++)l[m-1]=arguments[m];this.$FantailLogQueue5.apply(this,[h.ERROR,j].concat(l));};i.prototype.$FantailLogQueue5=function(j,k){'use strict';for(var l=arguments.length,m=Array(l>2?l-2:0),n=2;n<l;n++)m[n-2]=arguments[n];var o=c('sprintf').apply(undefined,[k].concat(m));this.$FantailLogQueue3.write({log_time:Date.now(),log:o,severity:j,device_id:c('ChannelClientID').getID()});};i.prototype.$FantailLogQueue4=function(){'use strict';var j=this.$FantailLogQueue3.read();if(j.length>0){var k={log_time:[],log:[],severity:[],device_id:[]};j.forEach(function(m){k.log_time.push(m.log_time);k.log.push(m.log);k.severity.push(m.severity);k.device_id.push(m.device_id);});this.$FantailLogQueue3.clear();var l=c('XFantailLogController').getURIBuilder().setString('service',this.$FantailLogQueue2).getURI();new (c('SimpleFBAuthenticatedXHRRequest'))(l,k).setMethod('POST').setDataSerializer(c('PHPQuerySerializer').serialize).setRequestHeader('Content-Type','application/x-www-form-urlencoded').send();}};f.exports=i;}),null);
__d('MercuryChannelMessageTransformer',['MercuryActionType'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k={author:i.mercury_author_id,author_email:i.mercury_author_email,body:i.body,subject:i.subject,has_attachment:i.has_attachment,attachments:i.attachments,ephemeral_ttl_mode:i.ephemeral_ttl_mode,html_body:i.html_body,thread_id:i.tid,thread_fbid:i.thread_fbid&&i.thread_fbid.toString(),other_user_fbid:i.other_user_fbid&&i.other_user_fbid.toString(),offline_threading_id:i.offline_threading_id,message_id:i.mid,is_spoof_warning:i.is_spoof_warning,ranges:i.ranges,source:i.mercury_source,source_tags:i.mercury_source_tags,tags:i.tags&&i.tags.split(','),threading_id:i.threading_id,timestamp:i.timestamp,action_type:c('MercuryActionType').USER_GENERATED_MESSAGE,is_unread:i.is_unread,folder:j,sync_id:i.sync_id};return k;}f.exports={transform:h};}),null);
__d("XMessengerModularInboxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/modular_inbox\/",{});}),null);