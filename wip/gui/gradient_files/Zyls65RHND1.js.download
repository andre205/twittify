if (self.CavalryLogger) { CavalryLogger.start_js(["JViRd"]); }

__d("MNCommerceBlockTypeJSInstance",[],(function a(b,c,d,e,f,g){f.exports={ALL:"all",PROMOTION:"promotion",NONE:"none"};}),null);
__d('MNCommercePromotionStateActions',['MessengerDispatcher','MNCommerceActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h={stateLoaded:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').PROMOTION_STATE.LOADED,state:j});},stateLoadError:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').PROMOTION_STATE.LOAD_ERROR,pageID:j});},stateReload:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').PROMOTION_STATE.RELOAD,pageID:j});}};f.exports=h;}),null);
__d('MessengerRadioButton.react',['cx','React','XUIRadioInput.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('XUIRadioInput.react'),babelHelpers['extends']({},this.props,{className:"__rm"}));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerRadioList.react',['invariant','InputLabel.react','MessengerRadioButton.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$MessengerRadioListItem1=function(event){event.target instanceof HTMLInputElement||h(0);this.props.onSelect&&this.props.onSelect(this.props.value);}.bind(this),q;}n.prototype.render=function(){return c('React').createElement('li',{className:this.props.className},c('React').createElement(c('InputLabel.react'),{display:'inline'},c('React').createElement(c('MessengerRadioButton.react'),{checked:this.props.selectedValue===this.props.value,disabled:!!this.props.disabled,name:this.props.name,onChange:this.$MessengerRadioListItem1,value:this.props.value}),c('React').createElement('label',null,this.props.children)));};n.propTypes={disabled:m.bool,name:m.string,onSelect:m.func,selectedValue:m.any,value:m.any};k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;o.prototype.render=function(){var p=c('React').Children.map(this.props.children,function(q){return c('React').cloneElement(q,{name:this.props.name,onSelect:this.props.onValueChange,selectedValue:this.props.selectedValue});},this);return c('React').createElement('ul',babelHelpers['extends']({},this.props,{name:null}),p);};function o(){k.apply(this,arguments);}o.propTypes={name:m.string,onValueChange:m.func,selectedValue:m.any};o.Item=n;f.exports=o;}),null);
__d('MNCommercePromotionManageBlockDialog.react',['fbt','MessengerEnvironment','Link.react','MessengerRadioList.react','MNCommerceButton.react','MNCommerceDetailsDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','MNCommerceBlockTypeJSInstance','React','URI','WorkModeConfig','XUIRadioList.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MessengerRadioList.react').Item,l=c('XUIRadioList.react').Item,m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(p,q){j.constructor.call(this,p,q);o.call(this);this.state=this.$MNCommercePromotionManageBlockDialog1();}n.prototype.componentWillReceiveProps=function(p){this.setState(this.$MNCommercePromotionManageBlockDialog1(p));};n.prototype.$MNCommercePromotionManageBlockDialog1=function(p){var q=p||this.props,r=c('MNCommerceBlockTypeJSInstance').ALL;if(q.isAllBlocked||q.isPromotionBlocked)r=c('MNCommerceBlockTypeJSInstance').NONE;return {type:r};};n.prototype.render=function(){var p=this.props.merchantName||'',q=h._("Manage messages from {label for merchant name}",[h.param('label for merchant name',p)]),r=h._("Cancel"),s=h._("Confirm"),t=h._("Manage Options couldn't be shown."),u=c('WorkModeConfig').is_work_user?new (c('URI'))('https://facebook.com/help/work/1731361900459513').setSubdomain(c('WorkModeConfig').company_subdomain):new (c('URI'))('https://www.facebook.com/help/389645087895231'),v=c('React').createElement(c('Link.react'),{href:u,target:'_blank'},h._("Learn more"));return c('React').createElement(c('MNCommerceDetailsDialog.react'),babelHelpers['extends']({errorMessage:t,onToggle:this.props.onToggle,shown:this.props.shown},this.props),c('React').createElement(c('MNCommerceDialogTitle.react'),{showCloseButton:true},q),c('React').createElement(c('MNCommerceDialogBody.react'),null,this.$MNCommercePromotionManageBlockDialog2()),c('React').createElement(c('MNCommerceDialogFooter.react'),{leftContent:v},c('React').createElement(c('MNCommerceButton.react'),{label:r,onClick:this.props.onCancelButtonClick,use:'default'}),c('React').createElement(c('MNCommerceButton.react'),{label:s,onClick:this.$MNCommercePromotionManageBlockDialog3,use:'confirm'})));};n.propTypes={isAllBlocked:m.bool,isPromotionBlocked:m.bool,error:m.object,loading:m.bool.isRequired,merchantName:m.string,onCancelButtonClick:m.func,onConfirmButtonClick:m.func.isRequired,pageID:m.string};var o=function p(){this.onTypeChange=function(q){this.setState({type:q});}.bind(this);this.$MNCommercePromotionManageBlockDialog2=function(){var q=c('MessengerEnvironment').messengerui,r=q?c('MessengerRadioList.react'):c('XUIRadioList.react'),s=q?k:l;return c('React').createElement(r,{selectedValue:this.state.type,onValueChange:this.onTypeChange},c('React').createElement(s,{value:c('MNCommerceBlockTypeJSInstance').ALL},h._("Receive all messages")),c('React').createElement(s,{value:c('MNCommerceBlockTypeJSInstance').NONE},h._("Turn off all messages")));}.bind(this);this.$MNCommercePromotionManageBlockDialog3=function(q){var r=this.props;r.onToggle(false);if(!r.onConfirmButtonClick)return;var s=r.pageID;r.onConfirmButtonClick(s,this.state.type);}.bind(this);};f.exports=n;}),null);
__d("XMNCommercePromotionStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/promotion\/state\/",{page_id:{type:"String",required:true}});}),null);
__d('MNCommercePromotionStateDataManager',['AsyncRequest','MNCommercePromotionStateActions','XMNCommercePromotionStateController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.fetchPromotionState=function(i){var j=c('XMNCommercePromotionStateController').getURIBuilder().setString('page_id',i).getURI();new (c('AsyncRequest'))().setURI(j).setHandler(this.$MNCommercePromotionStateDataManager1).setErrorHandler(this.$MNCommercePromotionStateDataManager2).send();};h.prototype.$MNCommercePromotionStateDataManager1=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;i.payload.pageID=k;c('MNCommercePromotionStateActions').stateLoaded(i.payload);};h.prototype.$MNCommercePromotionStateDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c('MNCommercePromotionStateActions').stateLoadError(k);};function h(){}f.exports=new h();}),null);
__d('MNCommercePromotionStateStore',['Cache','FluxStore','LoadObject','MessengerDispatcher','MNCommerceActionTypes','MNCommerceCacheTimeoutLimits','MNCommercePromotionStateDataManager'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MNCommercePromotionStateStore1=new (c('Cache'))();}j.prototype.__onDispatch=function(k){var l=k.type,m=k.pageID||k.state&&k.state.pageID;switch(l){case c('MNCommerceActionTypes').PROMOTION_STATE.LOADED:var n=k.state;this.$MNCommercePromotionStateStore1.set(m,c('LoadObject').empty().setValue(n),null,c('MNCommerceCacheTimeoutLimits').SUCCESS_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').PROMOTION_STATE.LOAD_ERROR:this.$MNCommercePromotionStateStore1.set(m,c('LoadObject').empty().setError(new Error('Unable to load permissions for: '+m)),null,c('MNCommerceCacheTimeoutLimits').ERROR_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').PROMOTION_STATE.RELOAD:if(m){this.$MNCommercePromotionStateStore1.set(m,c('LoadObject').loading());c('MNCommercePromotionStateDataManager').fetchPromotionState(m);}this.__emitChange();break;}};j.prototype.getPromotionState=function(k){if(k&&!this.$MNCommercePromotionStateStore1.has(k)){this.$MNCommercePromotionStateStore1.set(k,c('LoadObject').loading().setValue({pageID:k}));c('MNCommercePromotionStateDataManager').fetchPromotionState(k);}return this.$MNCommercePromotionStateStore1.get(k)||c('LoadObject').empty();};f.exports=new j();}),null);
__d('MNCommercePromotionManageBlockDialogContainer.react',['MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommercePromotionManageBlockDialog.react','MNCommercePromotionStateActions','MNCommercePromotionStateStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'MNCommercePromotionManageBlockDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommercePromotionStateStore'))],statics:{calculateState:function i(){var j=c('MNCommerceDialogStateStore').getState(),k=null;if(j)k=j.pageID;var l=c('MNCommercePromotionStateStore').getPromotionState(k);return {shown:!!j,loading:l.isLoading(),onConfirmButtonClick:j&&j.onConfirmButtonClick,pageID:k,promotionState:l.getValue(),error:l.getError()};}},render:function i(){var j=this.state.promotionState;return c('React').createElement(c('MNCommercePromotionManageBlockDialog.react'),{error:this.state.error,isAllBlocked:j&&j.is_all_blocked,isPromotionBlocked:j&&j.is_promotion_blocked,loading:this.state.loading,merchantName:j&&j.name,onCancelButtonClick:this._hideDialog,onToggle:this._onToggle,pageID:this.state.pageID,onTryAgain:this._onTryAgainClick,onConfirmButtonClick:this.state.onConfirmButtonClick,shown:this.state.shown});},_onToggle:function i(j){if(!j)this._hideDialog();},_onTryAgainClick:function i(){c('MNCommercePromotionStateActions').stateReload(this.state.pageID);},_hideDialog:function i(){c('MNCommerceDialogStateActions').hideDialog();}});f.exports=h;}),null);